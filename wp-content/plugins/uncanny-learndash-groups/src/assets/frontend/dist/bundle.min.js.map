{"version":3,"file":"bundle.min.js","mappings":"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","sources":["webpack://uncanny-groups-frontend/./src/js/define-main-object.js","webpack://uncanny-groups-frontend/./src/js/front.js","webpack://uncanny-groups-frontend/./src/js/learndash_template_script.js","webpack://uncanny-groups-frontend/./src/js/ulgm-assignments.js","webpack://uncanny-groups-frontend/./src/js/ulgm-essays.js","webpack://uncanny-groups-frontend/./src/js/ulgm-reporting.js","webpack://uncanny-groups-frontend/./src/js/ulgm-rest-forms.js","webpack://uncanny-groups-frontend/./node_modules/css-element-queries/src/ElementQueries.js","webpack://uncanny-groups-frontend/./node_modules/css-element-queries/src/ResizeSensor.js","webpack://uncanny-groups-frontend/webpack/bootstrap","webpack://uncanny-groups-frontend/webpack/runtime/compat get default export","webpack://uncanny-groups-frontend/webpack/runtime/define property getters","webpack://uncanny-groups-frontend/webpack/runtime/hasOwnProperty shorthand","webpack://uncanny-groups-frontend/external var \"jQuery\"","webpack://uncanny-groups-frontend/./src/js/utilities.js","webpack://uncanny-groups-frontend/./src/js/uncanny-owl-groups-ui.js","webpack://uncanny-groups-frontend/./src/js/group-management.js","webpack://uncanny-groups-frontend/./src/js/group-course-report.js","webpack://uncanny-groups-frontend/./src/js/course-dashboard.js","webpack://uncanny-groups-frontend/./src/js/manage-progress.js","webpack://uncanny-groups-frontend/./src/js/buy-courses.js","webpack://uncanny-groups-frontend/./src/js/create-group.js","webpack://uncanny-groups-frontend/./src/index.js"],"sourcesContent":["window.ulgmGroupManagement = {};","\njQuery(function($){\n\tvar accountSwitch = $('input#createaccount');\n\tif(accountSwitch.length){\n\t\taccountSwitch.attr( 'checked', true ).parent().hide();\n\t\t$( '.create-account' ).show();\n\t\taccountSwitch.parent().hide();\n\t}\n});\n","if (typeof flip_expand_collapse == 'undefined') {\n\tfunction flip_expand_collapse(what, id) {\n\n\t    if (jQuery( what + '-' + id + ' .list_arrow.flippable' ).hasClass( 'expand' ) ) {\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).removeClass( 'expand' );\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).addClass( 'collapse' );\n\t        jQuery( what + '-' + id + ' .flip' ).slideUp();\n\t    } else {\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).removeClass( 'collapse' );\n\t        jQuery( what + '-' + id + ' .list_arrow.flippable' ).addClass( 'expand' );\n\t        jQuery( what + '-' + id + ' .flip' ).slideDown();\n\t    }\n\t    return false;\n\t}\n}\n\nif (typeof flip_expand_all == 'undefined') {\n\tfunction flip_expand_all(what) {\n\t    jQuery( what + ' .list_arrow.flippable' ).removeClass( 'collapse' );\n\t    jQuery( what + ' .list_arrow.flippable' ).addClass( 'expand' );\n\t    jQuery( what + ' .flip' ).slideDown();\n\t    return false;\n\t}\n}\n\nif (typeof flip_collapse_all == 'undefined') {\n\tfunction flip_collapse_all(what) {\n\t    jQuery( what + ' .list_arrow.flippable' ).removeClass( 'expand' );\n\t    jQuery( what + ' .list_arrow.flippable' ).addClass( 'collapse' );\n\t    jQuery( what + ' .flip' ).slideUp();\n\t    return false;\n\t}\n}\n\nString.prototype.toHHMMSS = function() {\n    sec_numb = parseInt( this, 10 );\n    var hours = Math.floor( sec_numb / 3600 );\n    var minutes = Math.floor( ( sec_numb - ( hours * 3600 ) ) / 60 );\n    var seconds = sec_numb - ( hours * 3600 ) - ( minutes * 60 );\n    if ( hours < 10 ) {\n        hours = '0' + hours;\n    }\n    if ( minutes < 10 ) {\n        minutes = '0' + minutes;\n    }\n    if ( seconds < 10 ) {\n        seconds = '0' + seconds;\n    }\n    var time = hours + ':' + minutes + ':' + seconds;\n    return time;\n}\n\nfunction learndash_timer() {\n    document.getElementById( 'learndash_mark_complete_button' ).disabled = true;\n    learndash_forced_lesson_time = learndash_forced_lesson_time - 1;\n    document.getElementById( 'learndash_timer' ).innerHTML = learndash_forced_lesson_time.toString().toHHMMSS();\n    if ( learndash_forced_lesson_time <= 0 ) {\n        clearInterval( learndash_timer_var );\n        document.getElementById( 'learndash_mark_complete_button' ).disabled = false;\n        document.getElementById( 'learndash_timer' ).innerHTML = '';\n    }\n}\n\njQuery( function() {\n    function force_max_12px_font_size() {\n        var f1 = jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a' ).css( 'font-size' );\n        var f2 = jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a span' ).css( 'font-size' );\n        if ( f1 != undefined && f1.replace( 'px', '' ) > 12 || f2 != undefined && f2.replace( 'px', '' ) > 12 ) {\n            jQuery( '#course_navigation .learndash_navigation_lesson_topics_list a, #course_navigation .learndash_navigation_lesson_topics_list a span' ).css( 'font-size', 12 );\n        }\n    }\n    force_max_12px_font_size();\n});\n\njQuery(document).ready(function() {\n\t\n\tif ( jQuery( '#learndash_timer' ).length ) {\n\t\tvar timer_el \t\t= jQuery( '#learndash_timer' );\n\t\tvar timer_seconds \t= timer_el.attr('data-timer-seconds');\n\n\t\tvar timer_button_el = jQuery( timer_el.attr('data-button') );\n\n\t\tif ( ( typeof timer_seconds !== 'undefined' ) && ( typeof timer_button_el !== 'undefined' ) ) {\n\n\t        timer_button_el.attr('disabled', true);\n\t\t\t\n\t\t\ttimer_seconds = parseInt( timer_seconds );\n\n\n\t\t\tvar cookie_key \t\t= timer_el.attr('data-cookie-key');\n\t\t\tif (typeof cookie_key !== 'undefined') {\n\t\t\t\tvar cookie_name = 'learndash_timer_cookie_'+cookie_key;\n\t\t\t} else {\n\t\t\t\tvar cookie_name = 'learndash_timer_cookie';\n\t\t\t}\n\t\t\tcookie_timer_seconds = jQuery.cookie(cookie_name);\n\t\t\tif (typeof cookie_timer_seconds !== 'undefined') {\n\t\t\t\ttimer_seconds = parseInt( cookie_timer_seconds );\n\t\t\t}\n\t\t\tjQuery.removeCookie( cookie_name );\n\t\t\t\n\t\t\tif ( timer_seconds >= 1 ) {\n\t\t\t\tvar learndash_timer_var = setInterval( function() {\n\t\t\t\t    timer_seconds = timer_seconds - 1;\n\t\t\t\t\n\t\t\t\t\tvar time_display = timer_seconds.toString().toHHMMSS();\n\t\t\t\t    timer_el.html(time_display);\n\t\t\t\t    if ( timer_seconds <= 0 ) {\n\t\t\t\t\t\t\n\t\t\t\t        clearInterval( learndash_timer_var );\n\t\t\t\t        timer_button_el.attr('disabled', false);\n\t\t\t\t        timer_el.html('');\n\t\t\t\t\t\tjQuery.cookie(cookie_name, 0);\n\t\t\t\t\t\t//jQuery.removeCookie( cookie_name );\n\t\t\t\t\t\t\n\t\t\t\t\t\ttimer_button_el.trigger('learndash-time-finished');\n\t\t\t\t    }\n\t\t\t\t\t// Store the timer state (value) into a cookie. This is done if the page reloads the student can resume\n\t\t\t\t\t// the time instead of restarting.\n\t\t\t\t\tjQuery.cookie(cookie_name, timer_seconds);\n\t\t\t\t},1000);\t\n\t\t\t} else {\n\t\t        timer_button_el.attr('disabled', false);\n\t\t        timer_el.html('');\n\t\t\t\tjQuery.cookie(cookie_name, 0);\n\t\t\t\t//jQuery.removeCookie( cookie_name );\n\t\t\t}\n\t\t}\n\t}\n});\n\n\njQuery(document).ready(function(){\n\n\tif (typeof sfwd_data !== 'undefined') {\n\t\tif ( typeof sfwd_data.json !== 'undefined' ) {\n\t\t\tsfwd_data = sfwd_data.json.replace(/&quot;/g, '\"');\n\t\t\tsfwd_data = jQuery.parseJSON( sfwd_data );\n\t\t}\n\t}\n\n\t// load essay in the modal\n\tjQuery(document).on('click','.wpProQuiz_sortablezzz a', function(e) {\n\t\tvar _this = jQuery(this);\n\t\tvar addressValue = jQuery(this).attr(\"href\");\n\t\tvar substring = 'essay';\n\n\t\tif( addressValue.indexOf(substring) !== -1 && typeof groupLeaderCourseReportSetup !== 'undefined'){\n\t\t\te.preventDefault();\n\n\t\t\tvar dataVars = {\n\t\t\t\tessayUrl: addressValue\n\t\t\t};\n\n\t\t\t// Rest api call to activate/deactivate plugins\n\t\t\tjQuery.ajax({\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupLeaderCourseReportSetup.root + 'get_user_essay/',\n\t\t\t\tbeforeSend: function (xhr) {\n\t\t\t\t\txhr.setRequestHeader('X-WP-Nonce', groupLeaderCourseReportSetup.nonce);\n\t\t\t\t},\n\t\t\t\tsuccess: function (response) {\n\n\t\t\t\t\tvar essay = '<div style=\"background:white;padding:10px;\">'+response+'</div>';\n\t\t\t\t\t_this.parent().append(essay);\n\t\t\t\t\t_this.hide();\n\n\t\t\t\t},\n\t\t\t\tfail: function (response) {\n\t\t\t\t\talert('Rest Call Failed');\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\n\t});\n\n\tjQuery(document).on('click','a.user_statistic', function(e) {\n\t\te.preventDefault();\n\t\t\n\t\tvar refId \t\t\t\t= \tjQuery(this).data('ref_id');\n\t\tvar quizId \t\t\t\t= \tjQuery(this).data('quiz_id');\n\t\tvar userId \t\t\t\t= \tjQuery(this).data('user_id');\n\t\tvar statistic_nonce \t= \tjQuery(this).data('statistic_nonce');\n\t\tvar action \t\t\t\t= \t'wp_pro_quiz_admin_ajax';\n        var nonce \t\t\t\t= \tjQuery(this).data('nonce');\n        if (typeof groupQuizReportSetup !== 'undefined' && typeof groupQuizReportSetup.statistic_action !== 'undefined') {\n            action = groupQuizReportSetup.statistic_action;\n        }\n        if (typeof ULGM_ManageProgress !== 'undefined' && typeof ULGM_ManageProgress.statistic_action !== 'undefined') {\n            action = ULGM_ManageProgress.statistic_action;\n        }\n\n\t\tvar post_data = {\n\t\t\t'action': action,\n\t\t\t'func': 'statisticLoadUser',\n            'nonce': nonce,\n\t\t\t'data': {\n\t\t\t\t'quizId': quizId,\n            \t'userId': userId,\n            \t'refId': refId,\n\t\t\t\t'statistic_nonce': statistic_nonce,\n            \t'avg': 0\n\t\t\t}\n\t\t}\n\t\t\n\t\tjQuery('#wpProQuiz_user_overlay, #wpProQuiz_loadUserData').show();\n\t\tvar content = jQuery('#wpProQuiz_user_content').hide();\n\n\t\tjQuery.ajax({\n\t\t\ttype: \"POST\",\n\t\t\turl: sfwd_data.ajaxurl,\n\t\t\tdataType: \"json\",\n\t\t\tcache: false,\n\t\t\tdata: post_data,\n\t\t\terror: function(jqXHR, textStatus, errorThrown ) {\n\t\t\t},\n\t\t\tsuccess: function(reply_data) {\n\n\t\t\t\tif ( typeof reply_data.html !== 'undefined' ) {\n\t\t\t\t\tcontent.html(reply_data.html);\n\t\t\t\t\tjQuery('a.wpProQuiz_update', content).remove();\n\t\t\t\t\tjQuery('a#wpProQuiz_resetUserStatistic', content).remove();\n\t\t\t\t\t\n\t\t\t\t\t\n\t\t\t\t\tjQuery('#wpProQuiz_user_content').show();\n\n\t\t\t\t\tjQuery('#wpProQuiz_loadUserData').hide();\n\t\t\t\t\n\t\t\t\t\tcontent.find('.statistic_data').click(function() {\n\t\t\t\t\t\tjQuery(this).parents('tr').next().toggle('fast');\n\t\t\t\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\t\t\n\t\tjQuery('#wpProQuiz_overlay_close').click(function() {\n\t\t\tjQuery('#wpProQuiz_user_overlay').hide();\n\t\t});\n\t});\n\t\n});\n","(function ($) { // Self Executing function with $ alias for jQuery\n\n    /**\n     *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n     *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n     */\n    $(document).ready(function () {\n\n        if ($('#uo-group-assignments-table').length > 0 ){\n            window.ulgmGroupManagement.Assignments.constructor();\n\n            jQuery('form#uo-groups-assignments-management-form').on('click', 'button.assignment_approve_single,a.assignment_approve_single,button#group-approve-assignments-button', function (e) {\n                e.preventDefault();\n                var assignment_id = jQuery(this).attr('id').replace('assignment_approve_', '');\n                assignment_id = assignment_id.replace('a_', '');\n                if ((typeof assignment_id !== 'undefined') && (assignment_id != '')) {\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').val(assignment_id);\n                    }\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('approve_assignment');\n                    }\n                    var dataVars = $('form#uo-groups-assignments-management-form').serialize();\n                    window.ulgmGroupManagement.Assignments.actionsAssignment(dataVars);\n                }\n            });\n            jQuery('form#uo-groups-assignments-management-form').on('click','a.delete_assignment_single,button#group-trash-assignments-button',function(e) {\n                e.preventDefault();\n                var assignment_id = jQuery(this).attr('id').replace('a_assignment_trash_', '');\n\n                if ( ( typeof assignment_id !== 'undefined' ) && ( assignment_id != '' ) ) {\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-post-selector-top').val(assignment_id);\n                    }\n                    if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('trash_assignment');\n                    }\n                    var dataVars = $('form#uo-groups-assignments-management-form').serialize();\n                    window.ulgmGroupManagement.Assignments.actionsAssignment(dataVars);\n                }\n            });\n\n\n            $('#uo-group-assignments-table').on('click','a.edit_assignment_single',function(){\n                var post_id = $(this).data('assignment-id');\n                window.ulgmGroupManagement.Assignments.editAssignmentsData(post_id);\n            });\n            $('body').on('click','button#uo-assignment-edit-button',function(){\n                window.ulgmGroupManagement.Assignments.saveAssignmentsData();\n            });\n            $('body').on('click','#uo-assignment-update-button',function(){\n                window.ulgmGroupManagement.Assignments.saveAssignmentsData();\n            });\n\n            var transitionTimeout;\n            $( '#uo-group-assignments-table tbody' ).on({\n                mouseenter: function() {\n                    clearTimeout( transitionTimeout );\n                    focusedRowActions = $( this ).find( '.row-actions' );\n                    // transitionTimeout is necessary for Firefox, but Chrome won't remove the CSS class without a little help.\n                    $( '.row-actions' ).not( this ).removeClass( 'visible' );\n                    focusedRowActions.addClass( 'visible' );\n                },\n                mouseleave: function() {\n                    // Tabbing between post title and .row-actions links needs a brief pause, otherwise\n                    // the .row-actions div gets hidden in transit in some browsers (ahem, Firefox).\n                    transitionTimeout = setTimeout( function() {\n                        focusedRowActions.removeClass( 'visible' );\n                    }, 30 );\n                }\n            }, 'tr' );\n        }\n    });\n\n\n    window.ulgmGroupManagement.Assignments = {\n\n        uoTable: null,\n\n        uoTableHidden: null,\n\n        lessonId: 0,\n\n        groupId: 0,\n\n        courseId: 0,\n\n        status: 'not-approved',\n\n        elements: {\n            select: {\n                group: {\n                    element: null,\n                    options: null\n                },\n                course: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                lesson: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                status: {\n                    element: null,\n                    options: null,\n                },\n            }\n        },\n\n        constructor: function () {\n            this.elements.select.group.element  = $('#uo-group-report-group');\n            this.elements.select.course.element = $('#uo-group-report-courses');\n            this.elements.select.lesson.element   = $('#uo-group-report-lessons');\n            this.elements.select.status.element   = $('#uo-group-report-status');\n\n\n            this.elements.select.course.no_element = $('#uo-group-report-nocourses');\n            this.elements.select.lesson.no_element   = $('#uo-group-report-nolessons');\n\n            this.elements.select.group.options  = $('#uo-group-report-group option');\n            this.elements.select.course.options = $('#uo-group-report-courses option');\n            this.elements.select.lesson.options   = $('#uo-group-report-lessons option');\n            this.elements.select.status.options   = $('#uo-group-report-status option');\n\n            this.createTable();\n            this.createTableHidden();\n            this.addEvents();\n            window.ulgmGroupManagement.Assignments.status = this.elements.select.status.element.val();\n            // Request data\n            window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, 0, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n        },\n\n        createTable: function (data) {\n\n            const $table = document.getElementById( 'uo-group-assignments-table' );\n            \n            var columns = [\n                {\n                    title: 'select',\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row',\n                },\n                {\n                    title: groupAssignments.localized.title,\n                    data: 'title',\n                    className: 'has-row-actions',\n                    name: 'title',\n                    visible: groupAssignments.columns_visibilities.title,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title',\n                },\n                {\n                    title: groupAssignments.localized.first_name,\n                    data: 'first_name',\n                    name: 'first_name',\n                    visible: groupAssignments.columns_visibilities.first_name,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name',\n                },\n                {\n                    title: groupAssignments.localized.last_name,\n                    data: 'last_name',\n                    name: 'last_name',\n                    visible: groupAssignments.columns_visibilities.last_name,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name',\n                },\n                {\n                    title: groupAssignments.localized.author,\n                    data: 'author',\n                    name: 'author',\n                    visible: groupAssignments.columns_visibilities.author,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author',\n                },\n                {\n                    title: groupAssignments.localized.status,\n                    data: 'status',\n                    orderable: true,\n                    name: 'status',\n                    visible: groupAssignments.columns_visibilities.status,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status',\n                },\n                {\n                    title: groupAssignments.localized.points,\n                    data: 'points',\n                    orderable: false,\n                    name: 'points',\n                    visible: groupAssignments.columns_visibilities.points,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points',\n                },\n                {\n                    title: groupAssignments.localized.assignedCourse,\n                    data: 'assignedCourse',\n                    orderable: true,\n                    name: 'assignedCourse',\n                    visible: groupAssignments.columns_visibilities.assignedCourse,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course',\n                },\n                {\n                    title: groupAssignments.localized.assignedlesson,\n                    data: 'assignedlesson',\n                    orderable: true,\n                    name: 'assignedlesson',\n                    visible: groupAssignments.columns_visibilities.assignedlesson,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson',\n                },\n                {\n                    title: groupAssignments.localized.comments,\n                    data: 'comments',\n                    name: 'comments',\n                    visible: groupAssignments.columns_visibilities.comments,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments',\n                },\n                {\n                    title: groupAssignments.localized.date,\n                    data: 'date',\n                    name: 'date',\n                    visible: groupAssignments.columns_visibilities.date,\n                    className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date',\n                },\n            ];\n\n            const buttonsShared = {\n                exportOptions: {\n\n                    columns: ( id, data, node ) => {\n                        // Don't export the column used to select rows, or\n                        // \"Title\" columns\n                        if (\n                            node.matches( '.ulg-report-assignments-cell--select-row' ) || \n                            node.matches( '.ulg-report-assignments-cell--title' )\n                        ) {\n                            return false;\n                        }\n\n                        return this.uoTable.column( id ).visible();\n                    },\n\n                    format: {\n                        body: function ( data, row, column, node ) {\n\n                            // Check if it's the \"Status\" column\n                            if ( node.classList.contains( 'ulg-report-assignments-cell--status' ) ) {\n                                // Check if it has the \"Approve\" button\n                                if ( node.querySelector( 'button.assignment_approve_single' ) ) {\n                                    // Format data. If it has the button, it's not approved. Use that instead.\n                                    data = groupAssignments.i18n.notApproved;\n                                }\n                            } \n                            // Format all other columns\n                            else {\n                                // Remove HTML\n                                data = node.innerText.trim();\n                            }\n\n                            // Remove HTML\n                            return data;\n                        }\n                    }\n                },\n\n                filename: () => {\n                    // File name parts\n                    const filenameParts = [\n                        // Base name\n                        groupAssignments.i18n.reportBaseName\n                    ];\n\n                    // Get the ID of the dropdowns used to set the filters\n                    const filtersFields = [\n                        'uo-group-report-group',\n                        'uo-group-report-courses',\n                        'uo-group-report-lessons',\n                        'uo-group-report-status'\n                    ];\n\n                    // Get the value of the filters\n                    filtersFields.forEach( ( filterID ) => {\n                        // Get the field of the filter\n                        const $filter = document.getElementById( filterID );\n\n                        try {\n                            // Check if it exists\n                            if ( $filter ) {\n                                // Get the value\n                                const filterValue = $filter.value;\n\n                                // Make sure the value is not empty\n                                if (\n                                    filterValue !== ''\n                                    && filterValue != '0'\n                                ) {\n                                    // Get the TEXT of the option\n                                    filenameParts.push(\n                                        $filter.querySelector( `option[value=\"${ filterValue }\"]` )\n                                            .innerText\n                                            .trim()\n                                    );\n                                }\n                            }\n                        } catch ( e ) {}\n                    } );\n\n                    // Return the name\n                    return filenameParts.join( ' - ' );\n                } \n            }\n\n            const reportButtons = [];\n\n            // Check if we have to add the CSV button\n            if ( $table.dataset.csv == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'csv',\n                    text: groupAssignments.i18n.exportCSV,\n                } ) );\n            }\n\n            // Check if we have to add the Excel button\n            if ( $table.dataset.excel == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'excelHtml5',\n                    text: groupAssignments.i18n.exportExcel,\n                } ) );\n            }\n\n            var tableVars = {\n                aLengthMenu: [\n                    [15, 30, 60, -1],\n                    [15, 30, 60, groupAssignments.localized.all]\n                ],\n                responsive: true,\n                iDisplayLength: 30,\n                columns: columns,\n                columnDefs: [{\n                    \"targets\": 0,\n                    \"orderable\": false,\n                    \"searchable\": false,\n                    'render': function (data, type, full, meta){\n                        return '<input type=\"checkbox\" name=\"post[]\" value=\"' + $('<div/>').text(data).html() + '\">';\n                    },\n                    'checkboxes': {\n                        'selectRow': true\n                    }\n                }],\n                select: {\n                    style: 'multi',\n                    selector: 'td:first-child'\n                },\n                stateSave: true,\n                //responsive: true,\n\n                dom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n                buttons: reportButtons,\n\n            };\n\n            if (null !== this.uoTable) {\n\n                this.uoTable.destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {\n                        title: '<input type=\"checkbox\" name=\"select_all\" value=\"1\" id=\"uo-assignments-select-all\">',\n                        data: 'id',\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row',\n                    },\n                    {\n                        title: groupAssignments.localized.title,\n                        data: 'title',\n                        className: 'has-row-actions',\n                        name: 'title',\n                        visible: groupAssignments.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title',\n                    },\n                    {\n                        title: groupAssignments.localized.first_name,\n                        data: 'first_name',\n                        name: 'first_name',\n                        visible: groupAssignments.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name',\n                    },\n                    {\n                        title: groupAssignments.localized.last_name,\n                        data: 'last_name',\n                        name: 'last_name',\n                        visible: groupAssignments.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name',\n                    },\n                    {\n                        title: groupAssignments.localized.author,\n                        data: 'author',\n                        name: 'author',\n                        visible: groupAssignments.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author',\n                    },\n                    {\n                        title: groupAssignments.localized.status,\n                        data: 'status',\n                        orderable: true,\n                        name: 'status',\n                        visible: groupAssignments.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status',\n                    },\n                    {\n                        title: groupAssignments.localized.points,\n                        data: 'points',\n                        orderable: false,\n                        name: 'points',\n                        visible: groupAssignments.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points',\n                    },\n                    {\n                        title: groupAssignments.localized.assignedCourse,\n                        data: 'assignedCourse',\n                        orderable: true,\n                        name: 'assignedCourse',\n                        visible: groupAssignments.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course',\n                    },\n                    {\n                        title: groupAssignments.localized.assignedlesson,\n                        data: 'assignedlesson',\n                        orderable: true,\n                        name: 'assignedlesson',\n                        visible: groupAssignments.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson',\n                    },\n                    {\n                        title: groupAssignments.localized.comments,\n                        data: 'comments',\n                        name: 'comments',\n                        visible: groupAssignments.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments',\n                    },\n                    {\n                        title: groupAssignments.localized.date,\n                        data: 'date',\n                        name: 'date',\n                        visible: groupAssignments.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date',\n                    },\n                ];\n\n            }\n            tableVars.language = {\n                processing:        groupAssignments.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupAssignments.localized.searchPlaceholder,\n                lengthMenu:        groupAssignments.localized.lengthMenu,\n                info:              groupAssignments.localized.info,\n                infoEmpty:         groupAssignments.localized.infoEmpty,\n                infoFiltered:      groupAssignments.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupAssignments.localized.loadingRecords,\n                zeroRecords:       groupAssignments.localized.zeroRecords,\n                emptyTable:        groupAssignments.localized.emptyTable,\n                paginate: {\n                    first:         groupAssignments.localized.paginate.first,\n                    previous:      groupAssignments.localized.paginate.previous,\n                    next:          groupAssignments.localized.paginate.next,\n                    last:          groupAssignments.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupAssignments.localized.sortAscending,\n                    sortDescending: groupAssignments.localized.sortDescending\n                }\n            };\n            tableVars.initComplete = function(s,d) {\n                jQuery( `\n                    <div class=\"group-assignments-buttons uo-hidden\">\n                        <button class=\"uo-btn uo-left\" id=\"group-approve-assignments-button\">\n                            ${ groupAssignments.localized.approveAssignments }\n                        </button>\n                        <button class=\"uo-btn uo-left\" id=\"group-trash-assignments-button\">\n                            ${ groupAssignments.localized.deleteAssignments }\n                        </button>\n                    </div>\n                ` ).insertAfter( '#uo-group-assignments-table_filter' );\n                jQuery(window.ulgmGroupManagement.Assignments.addColumnsFilter(s)).insertAfter( '#uo-group-assignments-table_filter' );\n            };\n\n            // Check what column has to be used to sort the table\n            let tableOrder = [];\n            // Find the index of the column we have to use to sort\n            let tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmAssignmentReportShortcode.table.orderBy );\n\n            // If the column doesn't exist, then try to get the default one\n            if ( tableOrderByIndex === -1 ) {\n                tableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date' );\n            }\n            // If the one defined by the user, or the default one exists, add it\n            if ( tableOrderByIndex !== -1 ) {\n                tableOrder = [\n                    [\n                        tableOrderByIndex, // The ID of the column used to sort, defaults to `date`\n                        ulgmAssignmentReportShortcode.table.order, // Designates the ascending or descending order of the orderby parameter, defaults to `desc`\n                    ]\n                ];\n            }\n\n            tableVars.order = tableOrder;\n\n            this.uoTable = jQuery('#uo-group-assignments-table');\n\n            if ( jQuery('#uo-group-assignments-table').length > 0 ){\n                this.uoTable = jQuery('#uo-group-assignments-table').DataTable(tableVars);\n                new jQuery.fn.dataTable.ColReorder( this.uoTable );\n            }\n\n        },\n\n        createTableHidden: function (data) {\n\n            var columns = [\n                {title: groupAssignments.localized.title, data: 'title', className:'has-row-actions', name: 'title', visible: groupAssignments.columns_visibilities.title},\n                {title: groupAssignments.localized.first_name, data: 'first_name', name: 'first_name', visible: groupAssignments.columns_visibilities.first_name},\n                {title: groupAssignments.localized.last_name, data: 'last_name', name: 'last_name', visible: groupAssignments.columns_visibilities.last_name},\n                {title: groupAssignments.localized.author, data: 'author', name: 'author', visible: groupAssignments.columns_visibilities.author},\n                {title: groupAssignments.localized.status, data: 'status', orderable: true, name: 'status', visible: groupAssignments.columns_visibilities.status},\n                {title: groupAssignments.localized.points, data: 'points', orderable: false, name: 'points', visible: groupAssignments.columns_visibilities.points},\n                {title: groupAssignments.localized.assignedCourse, data: 'assignedCourse',orderable: true, name: 'assignedCourse', visible: groupAssignments.columns_visibilities.assignedCourse},\n                {title: groupAssignments.localized.assignedlesson, data: 'assignedlesson',orderable: true, name: 'assignedlesson', visible: groupAssignments.columns_visibilities.assignedlesson},\n                {title: groupAssignments.localized.comments, data: 'comments', name: 'comments', visible: groupAssignments.columns_visibilities.comments},\n                {title: groupAssignments.localized.date, data: 'date', name: 'date', visible: groupAssignments.columns_visibilities.date},\n            ];\n\n            /*var language = [\n                \"lengthMenu\": groupAssignments.localized.lengthMenu,\n                \"zeroRecords\": groupAssignments.localized.zeroRecords,\n                \"info\": groupAssignments.localized.info,\n                \"infoEmpty\": groupAssignments.localized.infoEmpty,\n                \"infoFiltered\": groupAssignments.localized.infoFiltered,\n                \"loadingRecords\": groupAssignments.localized.loadingRecords,\n                \"emptyTable\": groupAssignments.localized.emptyTable\n            ];*/\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n                    columns: ( id, data, node ) => {\n                        // Don't export the column used to select rows, or\n                        // \"Title\" columns\n                        if (\n                            node.matches( '.ulg-report-assignments-cell--select-row' ) || \n                            node.matches( '.ulg-report-assignments-cell--title' )\n                        ) {\n                            return false;\n                        }\n\n                        return this.uoTable.column( id ).visible();\n                    },\n                    \n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n            var tableVars = {\n                iDisplayLength: -1,\n                columns: columns,\n                dom: 'Bfrtip',\n                buttons: [\n\t\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\t\textend: 'csv',\n\t\t\t\t\t\ttext: groupAssignments.localized.buttons.csvExport,\n\t\t\t\t\t\ttitle: 'lesson-report'\n\t\t\t\t\t})\n                ],\n                stateSave: true,\n                //responsive: true,\n            };\n\n            if ($.fn.DataTable.isDataTable( '#uo-lesson-report-table-hidden' )) {\n\n                $( '#uo-lesson-report-table-hidden' ).DataTable().destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {title: groupAssignments.localized.title, data: 'title', name: 'title', visible: groupAssignments.columns_visibilities.title},\n                    {title: groupAssignments.localized.first_name, data: 'first_name', name: 'first_name', visible: groupAssignments.columns_visibilities.first_name},\n                    {title: groupAssignments.localized.last_name, data: 'last_name', name: 'last_name', visible: groupAssignments.columns_visibilities.last_name},\n                    {title: groupAssignments.localized.author, data: 'author', name: 'author', visible: groupAssignments.columns_visibilities.author},\n                    {title: groupAssignments.localized.status, data: 'status', orderable: true, name: 'status', visible: groupAssignments.columns_visibilities.status},\n                    {title: groupAssignments.localized.points, data: 'points', orderable: false, name: 'points', visible: groupAssignments.columns_visibilities.points},\n                    {title: groupAssignments.localized.assignedCourse, data: 'assignedCourse',orderable: true, name: 'assignedCourse', visible: groupAssignments.columns_visibilities.assignedCourse},\n                    {title: groupAssignments.localized.assignedlesson, data: 'assignedlesson',orderable: true, name: 'assignedlesson', visible: groupAssignments.columns_visibilities.assignedlesson},\n                    {title: groupAssignments.localized.comments, data: 'comments', name: 'comments', visible: groupAssignments.columns_visibilities.comments},\n                    {title: groupAssignments.localized.date, data: 'date', name: 'date', visible: groupAssignments.columns_visibilities.date},\n                ];\n\n            }\n\n            tableVars.language = {\n                processing:        groupAssignments.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupAssignments.localized.searchPlaceholder,\n                lengthMenu:        groupAssignments.localized.lengthMenu,\n                info:              groupAssignments.localized.info,\n                infoEmpty:         groupAssignments.localized.infoEmpty,\n                infoFiltered:      groupAssignments.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupAssignments.localized.loadingRecords,\n                zeroRecords:       groupAssignments.localized.zeroRecords,\n                emptyTable:        groupAssignments.localized.emptyTable,\n                paginate: {\n                    first:         groupAssignments.localized.paginate.first,\n                    previous:      groupAssignments.localized.paginate.previous,\n                    next:          groupAssignments.localized.paginate.next,\n                    last:          groupAssignments.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupAssignments.localized.sortAscending,\n                    sortDescending: groupAssignments.localized.sortDescending\n                }\n            };\n\n            if ( jQuery('#uo-lesson-report-table-hidden').length > 0 ){\n                jQuery('#uo-lesson-report-table-hidden').DataTable(tableVars);\n            }\n\n            $('.buttons-csv').show();\n\n        },\n\n        flattenArray: function (array, remove_stats) {\n\n            var flatArray = [];\n\n            jQuery.each(array, function (key, value) {\n\n                var lesson_name = value;\n                jQuery.each(value.question, function (key2, value2) {\n                    flatArray.push({\n                        \"title\": value.title,\n                        \"first_name\": value.first_name,\n                        \"last_name\": value.last_name,\n                        \"author\": value.author,\n                        \"status\": value.status,\n                        \"points\": value.points,\n                        \"assignedCourse\": value.assignedCourse,\n                        \"assignedlesson\": value.assignedlesson,\n                        \"comments\": value.comments,\n                        \"date\": value.date,\n                    })\n                });\n\n            });\n\n            return flatArray;\n\n        },\n        addColumnsFilter: function (state) {\n            var colFilter_container = $( `<div id=\"${ state.sInstance }-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${ state.sInstance }-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${ state.sInstance }-filter-columns-field\" data-label-enable=\"${ groupAssignments.localized.customizeColumns }\" data-label-disable=\"${ groupAssignments.localized.hideCustomizeColumns }\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n            __this = window.ulgmGroupManagement.Assignments;\n\n            if( state.oSavedState !== null ) {\n                jQuery.each(state.oSavedState.columns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.visible));\n                    }\n                });\n            } else {\n                jQuery.each(state.aoColumns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.bVisible));\n                    }\n                });\n            }\n            return colFilter_container;\n        },\n        addColumnCheckbox: function (label, column_key, is_visible) {\n            var checkbox = jQuery('<input />', {\n                type: 'checkbox',\n                id: 'dt_' + column_key,\n                value: label,\n                checked: is_visible\n            });\n            checkbox.on('change', function (e) {\n                // Get the column API object\n                var headers = window.ulgmGroupManagement.Assignments.uoTable.columns().header();\n                var current_check = jQuery(this).attr('value');\n                var is_checked = jQuery(this).is(':checked');\n\n                jQuery.each(headers, function (key, selectot) {\n                    if (jQuery(selectot).html() === current_check) {\n                        var column = window.ulgmGroupManagement.Assignments.uoTable.column(key);\n                        if (is_checked) {\n                            // Toggle the visibility\n                            column.visible(true);\n                        } else {\n                            column.visible(false);\n                        }\n                    }\n                });\n\n            });\n            var $label = jQuery('<label/>').append(checkbox).append(label);\n            return $label;\n        },\n        create_options: function( source, ids ){\n            /*\n            * @param source string, values \"group\", \"course\", \"lesson\"\n            * @param ids    array,  ids of options that have to be shown\n            *\n            * @return array of jQuery DOM elements with the option elements\n            */\n\n            let options = [];\n\n            // Convert parameters to int\n            ids = ids.map( Number );\n\n            // Add empty option\n            // if there are more then one option\n            if( ids.length > 1 ){\n                ids.push(0);\n            }\n\n\n            // Get options by ID\n            this.elements.select[source].options.each(function(){\n                let $this   = $(this),\n                    id      = parseInt( $this.val() );\n                $this.show();\n                if ( ids.indexOf( id ) != -1 ){\n                    options.push( $this );\n                }\n            });\n\n            // Return options\n            return options;\n        },\n\n        select_option: function( $select, value ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n        },\n        __select_option: function( $select, index ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[' + index + ']' ).prop( 'selected', true );\n        },\n        addEvents: function (){\n            var _this = this;\n\n            // Handle click on \"Select all\" control\n            $('#uo-groups-assignments-management').on('click','#uo-assignments-select-all', function(){\n                // Check/uncheck checkboxes for all rows in the table\n                $('input[name=\"post[]\"]').prop('checked', this.checked);\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-assignments-buttons').show();\n                } else {\n                    $('.group-assignments-buttons').hide();\n                    $('#uo-assignments-select-all').prop('checked', false);\n                }\n            });\n\n            // Handle click on checkbox to set state of \"Select all\" control\n            $('#uo-group-assignments-table tbody').on('change', 'input[name=\"post[]\"]', function(){\n                // If checkbox is not checked\n                if(!this.checked){\n                    var el = $('#uo-assignments-select-all').get(0);\n                    // If \"Select all\" control is checked and has 'indeterminate' property\n                    if(el && el.checked && ('indeterminate' in el)){\n                        // Set visual state of \"Select all\" control\n                        // as 'indeterminate'\n                        el.indeterminate = true;\n                    }\n                }\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-assignments-buttons').show();\n                } else {\n                    $('.group-assignments-buttons').hide();\n                    $('#uo-assignments-select-all').prop('checked', false);\n                }\n            });\n\n            $('#uo-groups-assignments-management').on('click','#group-approve-assignments-button',function(){\n                if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('approve_assignment');\n                }\n                //jQuery('form#uo-groups-assignments-management-form').submit();\n            });\n\n            $('#uo-groups-assignments-management').on('click','#group-trash-assignments-button',function(){\n                if (jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-assignments-management-form input#bulk-action-selector-top').val('trash_assignment');\n                }\n                //jQuery('form#uo-groups-assignments-management-form').submit();\n\n            });\n\n            this.elements.select.group.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // Hide lesson select\n                //_this.elements.select.lesson.element.hide();\n                _this.elements.select.course.element.show();\n\n                // Group ID\n                let group_id = $this.val();\n                // Return if course id is 0\n                if( group_id == 0 || group_id == null ){\n                    _this.elements.select.course.element.empty();\n                    let options_course = _this.create_options( 'course', [0] );\n                    _this.elements.select.course.element.html(options_course);\n                    _this.elements.select.course.element.attr('disabled','disabled');\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    return;\n                }\n                // Get relationships\n                let courses_to_show = groupAssignments.courseGrouplessons[ group_id ];\n                courses_to_show = courses_to_show === undefined ? [] : courses_to_show;\n\n                // Create options\n                let options = _this.create_options( 'course', courses_to_show );\n\n                if ( options.length > 0 ){\n                     // Show \"Select course\" dropdown\n                    _this.elements.select.course.element.show();\n                    _this.elements.select.course.element.html( options );\n                    _this.elements.select.course.no_element.hide();\n                    //_this.elements.select.course.element.html(_this.elements.select.course.element.find('option').sort(function(x, y) {\n                        // to change to descending order switch \"<\" for \">\"\n                    //    return $(x).text() > $(y).text() ? 1 : -1;\n                    //}));\n                    _this.elements.select.course.element.removeAttr('disabled');\n\n                    // Select empty option\n\n                    _this.__select_option( _this.elements.select.course.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.groupId = group_id;\n                    // trigger change after value set on load\n                    _this.elements.select.course.element.trigger('change');\n                }\n                else {\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.course.element.empty();\n                    let options_course = _this.create_options( 'course', [0] );\n                    _this.elements.select.course.element.html(options_course);\n                    _this.elements.select.course.element.attr('disabled','disabled');\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.groupId = group_id;\n                }\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, 0, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n            });\n\n            this.elements.select.course.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // Course ID\n                let course_id = $this.val();\n                // Return if course id is 0\n                if( course_id == 0){\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    return;\n                }\n\n                // Get relationships\n                let lessons_to_show = groupAssignments.relationships[ window.ulgmGroupManagement.Assignments.groupId ][ course_id ];\n                lessons_to_show = lessons_to_show === undefined ? [] : lessons_to_show;\n\n                // Create options\n                let options = _this.create_options( 'lesson', lessons_to_show );\n\n                if ( options.length > 0 ) {\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.lesson.element.show();\n                    _this.elements.select.lesson.element.html(options);\n                    jQuery('#uo-group-report-lessons option').show();\n                    _this.elements.select.lesson.no_element.hide();\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.lesson.element, 0 );\n                    _this.elements.select.lesson.element.removeAttr('disabled');\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.lesson.element.trigger('change');\n                }else{\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson', [0] );\n                    _this.elements.select.lesson.element.html(options);\n                    _this.elements.select.lesson.element.attr('disabled','disabled');\n                    window.ulgmGroupManagement.Assignments.createTable([]);\n                    window.ulgmGroupManagement.Assignments.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Assignments.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Assignments.getAssignmentsData( 0, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n                }\n\n            });\n\n            this.elements.select.lesson.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // lesson ID\n                let lesson_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Assignments.lessonId = lesson_id;\n\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( lesson_id, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, window.ulgmGroupManagement.Assignments.status );\n            });\n\n            this.elements.select.status.element.on('change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // lesson ID\n                let status = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Assignments.status = status;\n\n                // Request data\n                window.ulgmGroupManagement.Assignments.getAssignmentsData( window.ulgmGroupManagement.Assignments.lessonId, window.ulgmGroupManagement.Assignments.courseId, window.ulgmGroupManagement.Assignments.groupId, status );\n            });\n\n            // Add event listener for opening and closing details\n            $('#uo-lesson-report-table').on('click', 'td.details-control', function () {\n\n                var tr = $(this).closest('tr');\n                var row = window.ulgmGroupManagement.Assignments.uoTable.row(tr);\n\n                if (row.child.isShown()) {\n                    // This row is already open - close it\n                    row.child.hide();\n                    tr.removeClass('shown');\n                }\n                else {\n                    // Open this row\n                    row.child(window.ulgmGroupManagement.Assignments.format(row.data())).show();\n                    tr.addClass('shown');\n                }\n            });\n\n        },\n\n        format: function (d) {\n\n            var rows = '';\n            $.each(d.answer, function (key, value) {\n                rows +=\n                    '<tr>' +\n                    '<td>' + d.question[key] + '</td>' +\n                    '<td>' + value + '</td>' +\n                    '</tr>';\n            });\n            // `d` is the original data object for the row\n            return '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n        },\n        isNormalInteger: function (str) {\n            var n = ~~Number(str);\n            return String(n) === str && n > 0;\n        },\n\n        getAssignmentsData: function (lessonId, courseId, groupId, status) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var i = 0;\n\n            var loading = setInterval(function () {\n                i = ++i % 4;\n                $(\"#uo-group-assignments-table tbody\").html(\"<div id='group-loader'>\" + groupAssignments.localized.loadingRecords + new Array(i + 1).join(\".\") + \"</div>\");\n            }, 500);\n\n\n            var dataVars = {\n                groupId: groupId,\n                lessonId: lessonId,\n                courseId: courseId,\n                status: status,\n            };\n\n            $.ajax({\n\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'get_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    clearInterval(loading);\n                    $('#group-loader').remove();\n\n                    window.ulgmGroupManagement.Assignments.createTable(response);\n                    window.ulgmGroupManagement.Assignments.createTableHidden(response);\n\n\n                },\n                fail: function (response) {\n                    alert('Rest Call Failed');\n                }\n\n            });\n\n        },\n        editAssignmentsData: function (postId) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var dataVars = {\n                assignment_id: postId,\n                action: 'edit_assignments',\n                post_type:'sfwd-assignment',\n                security:groupAssignments.ajax_nonce\n            };\n\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'edit_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    $(\".modal\").remove();\n                    $(response.html).appendTo('body').modal();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        saveAssignmentsData: function () {\n            var dataVars = $('#edit_assignment_form').serialize();\n            var spinner = $('.uo-modal-spinner');\n            //$('#group-management-message').hide();\n            $('.uo-groups-message-ok').hide();\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'save_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger('change');\n                    //$('#group-management-message').html(response.message).show();\n                    $('.uo-groups-message-ok').html(response.message).show();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        actionsAssignment: function ( dataVars ) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupAssignments.root + 'save_assignments_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupAssignments.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger('change');\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        }\n    };\n\n\n})(jQuery);\n","(function ($) { // Self Executing function with $ alias for jQuery\n\n    /**\n     *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n     *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n     */\n    $(document).ready(function () {\n\n        if ($('#uo-group-essays-table').length > 0 ){\n            window.ulgmGroupManagement.Essays.constructor();\n\n            jQuery('form#uo-groups-essays-management-form').on('click', 'button.essay_approve_single,a.essay_approve_single', function (e) {\n                e.preventDefault();\n                var essay_id = jQuery(this).attr('id').replace('essay_approve_', '');\n                essay_id = essay_id.replace('a_', '');\n                if ((typeof essay_id !== 'undefined') && (essay_id != '')) {\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').val(essay_id);\n                    }\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('graded');\n                    }\n                    //jQuery('form#uo-groups-essays-management-form').submit();\n                    var dataVars = $('form#uo-groups-essays-management-form').serialize();\n                    window.ulgmGroupManagement.Essays.actionsEssays(dataVars);\n                }\n            });\n            jQuery('form#uo-groups-essays-management-form').on('click','a.delete_essay_single',function(e) {\n                e.preventDefault();\n                var essay_id = jQuery(this).attr('id').replace('a_essay_trash_', '');\n\n                if ( ( typeof essay_id !== 'undefined' ) && ( essay_id != '' ) ) {\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-post-selector-top').val(essay_id);\n                    }\n                    if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                        jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('trash_essay');\n                    }\n                    var dataVars = $('form#uo-groups-essays-management-form').serialize();\n                    window.ulgmGroupManagement.Essays.actionsEssays(dataVars);\n                }\n            });\n\n\n            $('#uo-group-essays-table').on('click','a.edit_essay_single',function(){\n                var post_id = $(this).data('essay-id');\n                window.ulgmGroupManagement.Essays.editEssaysData(post_id);\n            });\n            $('body').on('click','button#uo-essay-edit-button',function(){\n                window.ulgmGroupManagement.Essays.saveEssaysData();\n            });\n            $('body').on('click','#uo-essay-update-button',function(){\n                window.ulgmGroupManagement.Essays.saveEssaysData();\n            });\n\n            var transitionTimeout;\n            $( '#uo-group-essays-table tbody' ).on({\n                mouseenter: function() {\n                    clearTimeout( transitionTimeout );\n                    focusedRowActions = $( this ).find( '.row-actions' );\n                    // transitionTimeout is necessary for Firefox, but Chrome won't remove the CSS class without a little help.\n                    $( '.row-actions' ).not( this ).removeClass( 'visible' );\n                    focusedRowActions.addClass( 'visible' );\n                },\n                mouseleave: function() {\n                    // Tabbing between post title and .row-actions links needs a brief pause, otherwise\n                    // the .row-actions div gets hidden in transit in some browsers (ahem, Firefox).\n                    transitionTimeout = setTimeout( function() {\n                        focusedRowActions.removeClass( 'visible' );\n                    }, 30 );\n                }\n            }, 'tr' );\n        }\n    });\n\n\n    window.ulgmGroupManagement.Essays = {\n\n        uoTable: null,\n\n        uoTableHidden: null,\n\n        lessonId: 0,\n\n        groupId: 0,\n\n        courseId: 0,\n\n        quizId: 0,\n\n        status: 'ungraded',\n\n        elements: {\n            select: {\n                group: {\n                    element: null,\n                    options: null\n                },\n                course: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                lesson: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                quiz: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n                status: {\n                    element: null,\n                    options: null,\n                    no_element: null\n                },\n            }\n        },\n\n        constructor: function () {\n            this.elements.select.group.element = $('#uo-group-report-group');\n            this.elements.select.course.element = $('#uo-group-report-courses');\n            this.elements.select.lesson.element = $('#uo-group-report-lessons');\n            this.elements.select.quiz.element = $('#uo-group-report-quizzes');\n            this.elements.select.status.element = $('#uo-group-report-status');\n            this.elements.select.course.no_element = $('#uo-group-report-nocourses');\n            this.elements.select.lesson.no_element = $('#uo-group-report-nolessons');\n            this.elements.select.quiz.no_element = $('#uo-group-report-noquizzes');\n\n            this.elements.select.group.options  = $('#uo-group-report-group option');\n            this.elements.select.course.options = $('#uo-group-report-courses option');\n            this.elements.select.lesson.options   = $('#uo-group-report-lessons option');\n            this.elements.select.quiz.options   = $('#uo-group-report-quizzes option');\n            this.elements.select.status.options   = $('#uo-group-report-status option');\n            this.status = this.elements.select.status.element.val();\n            this.createTable();\n            this.createTableHidden();\n            this.addEvents();\n            // Request data\n            window.ulgmGroupManagement.Essays.getEssaysData( 0, 0, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status );\n        },\n\n\t\tgetParam: function(name) {\n\t\t\tname = name.replace(/[[]/, \"\\[\").replace(/[]]/, \"\\]\");\n\t\t\tvar regex = new RegExp(\"[\\?&]\" + name + \"=([^&#]*)\"),\n\t\t\t\tresults = regex.exec(location.search);\n\t\t\treturn results === null ? \"\" : decodeURIComponent(results[1].replace(\"+\", \" \"));\n\t\t},\n        createTable: function (data) {\n\n            const $table = document.getElementById( 'uo-group-essays-table' );\n\n            var columns = [\n                {\n                    data:      'id',\n                    title:     groupEssays.localized.idColumn,\n                    className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                },\n                {\n                    data:      'title',\n                    title:     groupEssays.localized.title,\n                    visible:   groupEssays.columns_visibilities.title,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                },\n                {\n                    data:      'first_name',\n                    title:     groupEssays.localized.first_name,\n                    visible:   groupEssays.columns_visibilities.first_name,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                },\n                {\n                    data:      'last_name',\n                    title:     groupEssays.localized.last_name,\n                    visible:   groupEssays.columns_visibilities.last_name,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                },\n                {\n                    data:      'author',\n                    title:     groupEssays.localized.author,\n                    visible:   groupEssays.columns_visibilities.author,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                },\n                {\n                    data:      'status',\n                    title:     groupEssays.localized.status,\n                    visible:   groupEssays.columns_visibilities.status,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                },\n                {\n                    data:      'points',\n                    title:     groupEssays.localized.points,\n                    visible:   groupEssays.columns_visibilities.points,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                },\n                {\n                    data:      'question_text',\n                    title:     groupEssays.localized.question_text,\n                    visible:   groupEssays.columns_visibilities.question_text,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                },\n                {\n                    data:      'content',\n                    title:     groupEssays.localized.content,\n                    visible:   groupEssays.columns_visibilities.content,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                },\n                {\n                    data:      'assignedCourse',\n                    title:     groupEssays.localized.assignedCourse,\n                    visible:   groupEssays.columns_visibilities.assignedCourse,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                },\n                {\n                    data:      'assignedlesson',\n                    title:     groupEssays.localized.assignedlesson,\n                    visible:   groupEssays.columns_visibilities.assignedlesson,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                },\n                {\n                    data:      'assignedquiz',\n                    title:     groupEssays.localized.assignedquiz,\n                    visible:   groupEssays.columns_visibilities.assignedquiz,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                },\n                {\n                    data:      'comments',\n                    title:     groupEssays.localized.comments,\n                    visible:   groupEssays.columns_visibilities.comments,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                },\n                {\n                    data:      'date',\n                    title:     groupEssays.localized.date,\n                    visible:   groupEssays.columns_visibilities.date,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                },\n            ];\n\n            // Check what column has to be used to sort the table\n            let tableOrder = [];\n            // Find the index of the column we have to use to sort\n            let tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmEssayReportShortcode.table.orderBy );\n\n            // If the column doesn't exist, then try to get the default one\n            if ( tableOrderByIndex === -1 ) {\n                tableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date' );\n            }\n            // If the one defined by the user, or the default one exists, add it\n            if ( tableOrderByIndex !== -1 ) {\n                tableOrder = [\n                    [\n                        tableOrderByIndex, // The ID of the column used to sort, defaults to `date`\n                        ulgmEssayReportShortcode.table.order, // Designates the ascending or descending order of the orderby parameter, defaults to `desc`\n                    ]\n                ];\n            }\n\n            const buttonsShared = {\n                exportOptions: {\n                    columns: ( id, data, node ) => {\n                        return this.uoTable.column( id ).visible();\n                    },\n\n                    format: {\n                        body: function ( data, row, column, node ) {\n                            // Check if it's the \"Status\" column\n                            if ( node.classList.contains( 'ulg-report-essays-cell--status' ) ) {\n                                // Check if it has the \"Approve\" button inside\n                                if ( node.querySelector( 'button.essay_approve_single' ) ) {\n                                    // Replace data. If it has the button, then it's \"Ungraded\"\n                                    data = groupEssays.i18n.ungraded;\n                                }\n                            }\n                            // Check if it's the \"Points\" column\n                            else if ( node.classList.contains( 'ulg-report-essays-cell--points' ) ) {\n                                // Check if it has an input\n                                const $input = node.querySelector( 'input' );\n                                if ( $input ) {\n                                    // Format data\n                                    data = `${ $input.value } ${ node.innerText.trim() }`;\n                                }\n                            }\n                            // Check if it's the \"Date\" column\n                            else if ( node.classList.contains( 'ulg-report-essays-cell--date' ) ) {\n                                // Strips hidden timestamp <span>\n                                return data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n                            }\n                            // Format all other columns\n                            else {\n                                // Remove HTML\n                                data = node.innerText.trim();\n                            }\n\n                            // Remove HTML\n                            return data;\n                        }\n                    }\n                },\n\n                filename: () => {\n                    // File name parts\n                    const filenameParts = [\n                        // Base name\n                        groupEssays.i18n.reportBaseName\n                    ];\n\n                    // Get the ID of the dropdowns used to set the filters\n                    const filtersFields = [\n                        'uo-group-report-group',\n                        'uo-group-report-courses',\n                        'uo-group-report-lessons',\n                        'uo-group-report-quizzes',\n                        'uo-group-report-status'\n                    ];\n\n                    // Get the value of the filters\n                    filtersFields.forEach( ( filterID ) => {\n                        // Get the field of the filter\n                        const $filter = document.getElementById( filterID );\n\n                        try {\n                            // Check if it exists\n                            if ( $filter ) {\n                                // Get the value\n                                const filterValue = $filter.value;\n\n                                // Make sure the value is not empty\n                                if (\n                                    filterValue !== ''\n                                    && filterValue != '0'\n                                ) {\n                                    // Get the TEXT of the option\n                                    filenameParts.push(\n                                        $filter.querySelector( `option[value=\"${ filterValue }\"]` )\n                                            .innerText\n                                            .trim()\n                                    );\n                                }\n                            }\n                        } catch ( e ) {}\n                    } );\n\n                    // Return the name\n                    return filenameParts.join( ' - ' );\n                }, \n            }\n\n            const reportButtons = [];\n\n            // Check if we have to add the CSV button\n            if ( $table.dataset.csv == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'csv',\n                    text: groupEssays.i18n.exportCSV,\n                } ) );\n            }\n\n            // Check if we have to add the Excel button\n            if ( $table.dataset.excel == 'show' ) {\n                reportButtons.push( Object.assign( {}, buttonsShared, {\n                    extend: 'excelHtml5',\n                    text: groupEssays.i18n.exportExcel,\n                } ) );\n            }\n\n            var tableVars = {\n                aLengthMenu: [\n                    [15, 30, 60, -1],\n                    [15, 30, 60, groupEssays.localized.all]\n                ],\n                order: tableOrder,\n                responsive: true,\n                iDisplayLength: 30,\n                columns: columns,\n                columnDefs: [{\n                    \"targets\": 0,\n                    \"orderable\": false,\n                    \"searchable\": false,\n                    'render': function (data, type, full, meta){\n                        return '<input type=\"checkbox\" name=\"post[]\" value=\"' + $('<div/>').text(data).html() + '\">';\n                    },\n                    'checkboxes': {\n                        'selectRow': true\n                    }\n                }],\n                select: {\n                    style: 'multi',\n                    selector: 'td:first-child'\n                },\n                stateSave: true,\n\n                dom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n                buttons: reportButtons,\n\n            };\n\n            if (null !== this.uoTable) {\n\n                this.uoTable.destroy();\n\n                tableVars.data = data;\n\n                tableVars.columnDefs = [{\n                    className: 'uo-groups__cell-checkbox',\n                    targets:   [0]\n                }];\n\n                tableVars.columns = [\n                    {\n                        data:      'id',\n                        title:     groupEssays.localized.idColumn,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                    },\n                    {\n                        data:      'title',\n                        title:     groupEssays.localized.title,\n                        visible:   groupEssays.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                    },\n                    {\n                        data:      'first_name',\n                        title:     groupEssays.localized.first_name,\n                        visible:   groupEssays.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                    },\n                    {\n                        data:      'last_name',\n                        title:     groupEssays.localized.last_name,\n                        visible:   groupEssays.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                    },\n                    {\n                        data:      'author',\n                        title:     groupEssays.localized.author,\n                        visible:   groupEssays.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                    },\n                    {\n                        data:      'status',\n                        title:     groupEssays.localized.status,\n                        visible:   groupEssays.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                    },\n                    {\n                        data:      'points',\n                        title:     groupEssays.localized.points,\n                        visible:   groupEssays.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                    },\n                    {\n                        data:      'question_text',\n                        title:     groupEssays.localized.question_text,\n                        visible:   groupEssays.columns_visibilities.question_text,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                    },\n                    {\n                        data:      'content',\n                        title:     groupEssays.localized.content,\n                        visible:   groupEssays.columns_visibilities.content,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                    },\n                    {\n                        data:      'assignedCourse',\n                        title:     groupEssays.localized.assignedCourse,\n                        visible:   groupEssays.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                    },\n                    {\n                        data:      'assignedlesson',\n                        title:     groupEssays.localized.assignedlesson,\n                        visible:   groupEssays.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                    },\n                    {\n                        data:      'assignedquiz',\n                        title:     groupEssays.localized.assignedquiz,\n                        visible:   groupEssays.columns_visibilities.assignedquiz,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                    },\n                    {\n                        data:      'comments',\n                        title:     groupEssays.localized.comments,\n                        visible:   groupEssays.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                    },\n                    {\n                        data:      'date',\n                        title:     groupEssays.localized.date,\n                        visible:   groupEssays.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                    },\n                ];\n\n            }\n            tableVars.language = {\n                processing:        groupEssays.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupEssays.localized.searchPlaceholder,\n                lengthMenu:        groupEssays.localized.lengthMenu,\n                info:              groupEssays.localized.info,\n                infoEmpty:         groupEssays.localized.infoEmpty,\n                infoFiltered:      groupEssays.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupEssays.localized.loadingRecords,\n                zeroRecords:       groupEssays.localized.zeroRecords,\n                emptyTable:        groupEssays.localized.emptyTable,\n                paginate: {\n                    first:         groupEssays.localized.paginate.first,\n                    previous:      groupEssays.localized.paginate.previous,\n                    next:          groupEssays.localized.paginate.next,\n                    last:          groupEssays.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupEssays.localized.sortAscending,\n                    sortDescending: groupEssays.localized.sortDescending\n                }\n            };\n\n            tableVars.initComplete = function(s,d) {\n                jQuery(window.ulgmGroupManagement.Essays.addColumnsFilter(s)).insertAfter('#uo-group-essays-table_filter');\n            };\n\n            this.uoTable = jQuery('#uo-group-essays-table');\n\n            if ( jQuery('#uo-group-essays-table').length > 0 ){\n                this.uoTable = jQuery('#uo-group-essays-table').DataTable(tableVars);\n                new jQuery.fn.dataTable.ColReorder( this.uoTable );\n\t\t\t\tvar search = window.ulgmGroupManagement.Essays.getParam('search');\n\t\t\t\t// console.log(window.ulgmGroupManagement.Essays.uoTable);\n\t\t\t\tif (search) window.ulgmGroupManagement.Essays.uoTable.search(search).draw();\n            }\n\n\n        },\n\n        createTableHidden: function (data) {\n\n            var columns = [\n                {\n                    title:     groupEssays.localized.title,\n                    data:      'title',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                },\n                {\n                    title:     groupEssays.localized.first_name,\n                    data:      'first_name',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                },\n                {\n                    title:     groupEssays.localized.last_name,\n                    data:      'last_name',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                },\n                {\n                    title:     groupEssays.localized.author,\n                    data:      'author',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                },\n                {\n                    title:     groupEssays.localized.status,\n                    data:      'status',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                },\n                {\n                    title:     groupEssays.localized.points,\n                    data:      'points',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                },\n                {\n                    title:     groupEssays.localized.question_text,\n                    data:      'question_text',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                },\n                {\n                    title:     groupEssays.localized.content,\n                    data:      'content',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                },\n                {\n                    title:     groupEssays.localized.assignedCourse,\n                    data:      'assignedCourse',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                },\n                {\n                    title:     groupEssays.localized.assignedlesson,\n                    data:      'assignedlesson',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                },\n                {\n                    title:     groupEssays.localized.assignedquiz,\n                    data:      'assignedquiz',\n                    orderable: false,\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                },\n                {\n                    title:     groupEssays.localized.comments,\n                    data:      'comments',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                },\n                {\n                    title:     groupEssays.localized.date,\n                    data:      'date',\n                    className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                },\n            ];\n\n            var tableVars = {\n                iDisplayLength: -1,\n                columns: columns,\n                dom: 'Bfrtip',\n                buttons: [\n                    {\n                        extend: 'csv',\n                        text: groupEssays.localized.buttons.csvExport,\n                        title: 'lesson-report'\n                    }\n                ],\n                stateSave: true,\n                responsive: true,\n            };\n\n            if ( $.fn.DataTable.isDataTable( '#uo-lesson-report-table-hidden' ) ){\n\n                $( '#uo-lesson-report-table-hidden' ).DataTable().destroy();\n\n                tableVars.data = data;\n\n                tableVars.columns = [\n                    {\n                        data:      'id',\n                        title:     groupEssays.localized.idColumn,\n                        className: 'ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id',\n                    },\n                    {\n                        data:      'title',\n                        title:     groupEssays.localized.title,\n                        visible:   groupEssays.columns_visibilities.title,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title',\n                    },\n                    {\n                        data:      'first_name',\n                        title:     groupEssays.localized.first_name,\n                        visible:   groupEssays.columns_visibilities.first_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name',\n                    },\n                    {\n                        data:      'last_name',\n                        title:     groupEssays.localized.last_name,\n                        visible:   groupEssays.columns_visibilities.last_name,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name',\n                    },\n                    {\n                        data:      'author',\n                        title:     groupEssays.localized.author,\n                        visible:   groupEssays.columns_visibilities.author,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author',\n                    },\n                    {\n                        data:      'status',\n                        title:     groupEssays.localized.status,\n                        visible:   groupEssays.columns_visibilities.status,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status',\n                    },\n                    {\n                        data:      'points',\n                        title:     groupEssays.localized.points,\n                        visible:   groupEssays.columns_visibilities.points,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points',\n                    },\n                    {\n                        data:      'question_text',\n                        title:     groupEssays.localized.question_text,\n                        visible:   groupEssays.columns_visibilities.question_text,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text',\n                    },\n                    {\n                        data:      'content',\n                        title:     groupEssays.localized.content,\n                        visible:   groupEssays.columns_visibilities.content,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content',\n                    },\n                    {\n                        data:      'assignedCourse',\n                        title:     groupEssays.localized.assignedCourse,\n                        visible:   groupEssays.columns_visibilities.assignedCourse,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course',\n                    },\n                    {\n                        data:      'assignedlesson',\n                        title:     groupEssays.localized.assignedlesson,\n                        visible:   groupEssays.columns_visibilities.assignedlesson,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson',\n                    },\n                    {\n                        data:      'assignedquiz',\n                        title:     groupEssays.localized.assignedquiz,\n                        visible:   groupEssays.columns_visibilities.assignedquiz,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz',\n                    },\n                    {\n                        data:      'comments',\n                        title:     groupEssays.localized.comments,\n                        visible:   groupEssays.columns_visibilities.comments,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments',\n                    },\n                    {\n                        data:      'date',\n                        title:     groupEssays.localized.date,\n                        visible:   groupEssays.columns_visibilities.date,\n                        className: 'ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date',\n                    },\n                ];\n\n            }\n\n            tableVars.language = {\n                processing:        groupEssays.localized.processing,\n                search:            '_INPUT_',\n                searchPlaceholder: groupEssays.localized.searchPlaceholder,\n                lengthMenu:        groupEssays.localized.lengthMenu,\n                info:              groupEssays.localized.info,\n                infoEmpty:         groupEssays.localized.infoEmpty,\n                infoFiltered:      groupEssays.localized.infoFiltered,\n                infoPostFix:       '',\n                loadingRecords:    groupEssays.localized.loadingRecords,\n                zeroRecords:       groupEssays.localized.zeroRecords,\n                emptyTable:        groupEssays.localized.emptyTable,\n                paginate: {\n                    first:         groupEssays.localized.paginate.first,\n                    previous:      groupEssays.localized.paginate.previous,\n                    next:          groupEssays.localized.paginate.next,\n                    last:          groupEssays.localized.paginate.last\n                },\n                aria: {\n                    sortAscending:  groupEssays.localized.sortAscending,\n                    sortDescending: groupEssays.localized.sortDescending\n                }\n            };\n\n            this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden');\n\n            if ( jQuery('#uo-lesson-report-table-hidden').length > 0 ){\n                this.uoTableHidden = jQuery('#uo-lesson-report-table-hidden').DataTable(tableVars);\n            }\n\n            $('.buttons-csv').show();\n\n        },\n\n        flattenArray: function (array, remove_stats) {\n\n            var flatArray = [];\n\n            jQuery.each(array, function (key, value) {\n\n                var lesson_name = value;\n                jQuery.each(value.question, function (key2, value2) {\n                    flatArray.push({\n                        \"title\": value.title,\n                        \"author\": value.author,\n                        \"status\": value.status,\n                        \"points\": value.points,\n                        \"question_text\": value.question_text,\n                        \"content\": value.content,\n                        \"assignedCourse\": value.assignedCourse,\n                        \"assignedlesson\": value.assignedlesson,\n                        \"assignedquiz\": value.assignedquiz,\n                        \"comments\": value.comments,\n                        \"date\": value.date,\n                    })\n                });\n\n            });\n\n            return flatArray;\n\n        },\n\n        create_options: function( source, ids = [] ){\n            /*\n            * @param source string, values \"group\", \"course\", \"lesson\"\n            * @param ids    array,  ids of options that have to be shown\n            *\n            * @return array of jQuery DOM elements with the option elements\n            */\n\n            let options = [];\n\n            // Convert parameters to int\n            ids = ids.map( Number );\n\n            // Add empty option\n            // if there are more then one option\n            if ( ids.length > 1 ){\n                ids.push( 0 );\n            }\n\n            // Get options by ID\n            this.elements.select[ source ].options.each(function(){\n                let $this   = $(this).clone(),\n                    id      = parseInt( $this.val() );\n\n                $this.show();\n                if ( ids.indexOf( id ) != -1 ){\n                    options.push( $this );\n                }\n            });\n\n            // If there is only one option and it's a \"Select a x\" option\n            // Then don't return any option\n            if ( options.length == 1 && parseInt( options[ 0 ].val() ) == 0 ){\n                options = [];\n            }\n\n            // Check if there aren't options selected\n            if ( options.length == 0 ){\n                // Add the no option\n                options.push( this.elements.select[ source ].options.filter( '.ulgm-essays-no-results' ) );\n            }\n\n            // Return options\n            return options;\n        },\n\n        select_option: function( $select, value ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[value=\"' + value + '\"]' ).prop( 'selected', true );\n        },\n        __select_option: function( $select, index ){\n            /*\n            * @param select  dom element\n            * @param value   string, value of the option that has to be selected\n            */\n\n            // Remove selected property\n            $select.find( 'option' ).prop( 'selected', false );\n\n            // Select option with value = @param value\n            $select.find( 'option[' + index + ']' ).prop( 'selected', true );\n        },\n        addColumnsFilter: function (state) {\n            var colFilter_container = $( `<div id=\"${ state.sInstance }-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${ state.sInstance }-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${ state.sInstance }-filter-columns-field\" data-label-enable=\"${ groupEssays.localized.customizeColumns }\" data-label-disable=\"${ groupEssays.localized.hideCustomizeColumns }\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n            __this = window.ulgmGroupManagement.Essays;\n\n            if( state.oSavedState !== null ) {\n\n                jQuery.each(state.oSavedState.columns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.visible));\n                    }\n                });\n            } else {\n                jQuery.each(state.aoColumns, function (key, value) {\n                    if (key > 0) {\n                        var title = state.aoColumns[key].sTitle;\n                        colFilter_container.find( '.dataTables-filter-columns__fields' ).append(__this.addColumnCheckbox(title, key, value.bVisible));\n                    }\n                });\n            }\n\n            return colFilter_container;\n        },\n        addColumnCheckbox: function (label, column_key, is_visible) {\n            var checkbox = jQuery('<input />', {\n                type: 'checkbox',\n                id: 'dt_' + column_key,\n                value: label,\n                checked: is_visible\n            });\n            checkbox.on('change', function (e) {\n                // Get the column API object\n                var headers = window.ulgmGroupManagement.Essays.uoTable.columns().header();\n                var current_check = jQuery(this).attr('value');\n                var is_checked = jQuery(this).is(':checked');\n\n                jQuery.each(headers, function (key, selectot) {\n                    if (jQuery(selectot).html() === current_check) {\n                        var column = window.ulgmGroupManagement.Essays.uoTable.column(key);\n                        if (is_checked) {\n                            // Toggle the visibility\n                            column.visible(true);\n                        } else {\n                            column.visible(false);\n                        }\n                    }\n                });\n\n            });\n            var $label = jQuery('<label/>').append(checkbox).append(label);\n            return $label;\n        },\n        addEvents: function (){\n            var _this = this;\n\n            // Handle click on \"Select all\" control\n            $('#uo-groups-essays-management').on('click',' #uo-essays-select-all', function(){\n                // Check/uncheck checkboxes for all rows in the table\n                $('input[name=\"post[]\"]').prop('checked', this.checked);\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-essays-buttons').show();\n                } else {\n                    $('.group-essays-buttons').hide();\n                    $('#uo-essays-select-all').prop('checked', false);\n                }\n            });\n\n            // Handle click on checkbox to set state of \"Select all\" control\n            $('#uo-group-essays-table tbody').on('change', 'input[name=\"post[]\"]', function(){\n                // If checkbox is not checked\n                if(!this.checked){\n                    var el = $('#uo-essays-select-all').get(0);\n                    // If \"Select all\" control is checked and has 'indeterminate' property\n                    if(el && el.checked && ('indeterminate' in el)){\n                        // Set visual state of \"Select all\" control\n                        // as 'indeterminate'\n                        el.indeterminate = true;\n                    }\n                }\n                if ($('input[name=\"post[]\"]').is(':checked')) {\n                    $('.group-essays-buttons').show();\n                } else {\n                    $('.group-essays-buttons').hide();\n                    $('#uo-essays-select-all').prop('checked', false);\n                }\n            });\n\n            $('#uo-groups-essays-management').on('click','#group-approve-essays-button',function(){\n                if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('approve_essay');\n                }\n                jQuery('form#uo-groups-essays-management-form').submit();\n            });\n\n            $('#uo-groups-essays-management').on('click','#group-trash-essays-button',function(){\n                if (jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').length) {\n                    jQuery('form#uo-groups-essays-management-form input#bulk-action-selector-top').val('trash_essay');\n                }\n                jQuery('form#uo-groups-essays-management-form').submit();\n            });\n\n            // Listen changes to the \"Group\" dropdown\n            this.elements.select.group.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $( this );\n\n                // DEBUG: console.log( '--------- GROUP ---------' );\n                // DEBUG: console.log( '-- GROUP: Value changed' );\n\n                // COURSE: Show\n                // _this.elements.select.course.element.show();\n\n                // Group ID\n                let group_id = $this.val();\n\n                // Check if the group ID is empty (\"Select an option\")\n                if ( group_id == 0 || group_id == null ){\n                    // COURSE: Remove all the options\n                    _this.elements.select.course.element.empty();\n                    // COURSE: Get the \"Select course\" option\n                    let options_course = _this.create_options( 'course' );\n                    // COURSE: Set the options\n                    _this.elements.select.course.element.html( options_course );\n\n                    // LESSON: Remove all the options\n                    _this.elements.select.lesson.element.empty();\n                    // LESSON: Get the \"Select lesson\" option\n                    let options = _this.create_options( 'lesson' );\n                    // LESSON: Set the options\n                    _this.elements.select.lesson.element.html( options );\n\n                    // QUIZ: Get the \"Select lesson\" option\n                    let options_quiz = _this.create_options( 'quiz' );\n                    // QUIZ: Get the \"Select lesson\" option\n                    _this.elements.select.quiz.element.html( options_quiz );\n\n                    // Render the tables again\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n\n                    // Return\n                    return;\n                }\n\n                // Get the relationships\n                let courses_to_show = groupEssays.courseGrouplessons[ group_id ];\n                courses_to_show     = courses_to_show === undefined ? [] : courses_to_show;\n\n                // Create the options\n                let options = _this.create_options( 'course', courses_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptions = options.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptions && options.length > 0 ){\n                    // DEBUG: console.log( '-- COURSES: There are courses' );\n                    // DEBUG: console.log( '-- COURSES: Hide the no results option' );\n\n                    // COURSE: Hide the \"no results\" option\n                    $noResultsOption = _this.elements.select[ 'course' ].element.find( '.ulgm-essays-no-results' );\n                    $noResultsOption.hide();\n\n                    // Add the options to the COURSE dropdown\n                    _this.elements.select.course.element.html( options );\n                    _this.elements.select.course.no_element.hide();\n\n                    // Select the empty option\n                    _this.__select_option( _this.elements.select.course.element, 0 );\n\n                    // Check if there is only one available course\n                    if ( options.length == 1 ){\n                        // DEBUG: console.log( '---- COURSES: Only one course found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'course' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.course.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'course' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.course.element.prop( 'disabled', false );\n                    }\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.groupId = group_id;\n                    // Trigger change after value set on load\n                    _this.elements.select.course.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- COURSES: There are NOT courses' );\n\n                    // Remove the \"h3-select\" class, so it looks like a select\n                    _this.elements.select[ 'course' ].element.removeClass( 'h3-select' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    // _this.elements.select.course.element.empty();\n\n                    let options_course = _this.create_options( 'course' );\n                    _this.elements.select.course.element.html( options_course );\n                    _this.elements.select.course.element.prop( 'disabled', true );\n\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    let options_quiz = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options_quiz );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n\n                    // Render the table again\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.groupId = group_id;\n\n                    // COURSE: Show the \"no results\" option\n                    $noResultsOption = _this.elements.select[ 'course' ].element.find( '.ulgm-essays-no-results' );\n                    $noResultsOption.show();\n                }\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( 0, 0, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status );\n            });\n\n            this.elements.select.course.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // DEBUG: console.log( '--------- COURSE ---------' );\n                // DEBUG: console.log( '-- COURSE: Value changed' );\n\n                // Course ID\n                let course_id = $this.val();\n\n                // Return if course id is 0\n                if ( course_id == 0 || course_id == '' ){\n                    _this.elements.select.lesson.element.empty();\n\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    let options_quiz = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options_quiz );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n                    return;\n                }\n\n                // Check if this group has at least one course with lessons\n                let lessons_to_show = [];\n                if ( \n                    typeof groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ] !== 'undefined' && \n                    typeof groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] !== 'undefined' && \n                    Array.isArray( groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] )\n                ) {\n                    // Get relationships\n                    lessons_to_show = groupEssays.relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ];\n                }\n\n                // Create options\n                let options = _this.create_options( 'lesson', lessons_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptions = options.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptions && options.length > 0 ){\n                    // DEBUG: console.log( '-- LESSONS: There are lessons' );\n\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.lesson.element.show();\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', false );\n\n                    jQuery( '#uo-group-report-lessons option' ).show();\n                    _this.elements.select.lesson.no_element.hide();\n\n                    // Check if there is only one available course\n                    if ( options.length == 1 ){\n                        // DEBUG: console.log( '---- LESSON: Only one lesson found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'lesson' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.lesson.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'lesson' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.lesson.element.prop( 'disabled', false );\n                    }\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.lesson.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.lesson.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- LESSONS: There are NOT lessons' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.lesson.element.empty();\n                    let options = _this.create_options( 'lesson' );\n                    _this.elements.select.lesson.element.html( options );\n                    _this.elements.select.lesson.element.prop( 'disabled', true );\n\n                    window.ulgmGroupManagement.Essays.createTable([]);\n                    window.ulgmGroupManagement.Essays.createTableHidden([]);\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n                }\n\n                let quizzes_to_show = [];\n                if ( \n                    typeof groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ] !== 'undefined' && \n                    typeof groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] !== 'undefined' && \n                    Array.isArray( groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ] )\n                ) {\n                    // Get relationships\n                    quizzes_to_show = groupEssays.quiz_relationships[ window.ulgmGroupManagement.Essays.groupId ][ course_id ];\n                }\n\n                // Create options\n                let options_quizzes = _this.create_options( 'quiz', quizzes_to_show );\n\n                // Check if the options are valid options\n                let hasValidOptionsQuizzes = options_quizzes.reduce(( accumulator, currentValue ) => {\n                    return accumulator && currentValue.val() !== '';\n                }, true );\n\n                if ( hasValidOptionsQuizzes && options_quizzes.length > 0 ){\n                    // DEBUG: console.log( '-- QUIZZES: There are quizzes' );\n\n                    // Show \"Select lesson\" dropdown\n                    _this.elements.select.quiz.element.show();\n                    _this.elements.select.quiz.element.html( options_quizzes );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                    jQuery('#uo-group-report-quizzes option').show();\n                    _this.elements.select.quiz.no_element.hide();\n\n                    // Check if there is only one available course\n                    if ( options_quizzes.length == 1 ){\n                        // DEBUG: console.log( '---- QUIZZES: Only one quiz found.' );\n\n                        // Add the \"h3-select\" class, so it doesn't look like a select\n                        _this.elements.select[ 'quiz' ].element.addClass( 'h3-select' );\n\n                        // Disable the select\n                        _this.elements.select.quiz.element.prop( 'disabled', true );\n                    }\n                    else {\n                        // Remove the \"h3-select\" class, so it looks like a select\n                        _this.elements.select[ 'quiz' ].element.removeClass( 'h3-select' );\n\n                        // Enable the select\n                        _this.elements.select.quiz.element.prop( 'disabled', false );\n                    }\n\n                    // Select empty option\n                    _this.__select_option( _this.elements.select.quiz.element, 0 );\n\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // trigger change after value set on load\n                    _this.elements.select.quiz.element.trigger( 'change' );\n                }\n                else {\n                    // DEBUG: console.log( '-- QUIZZES: There are NOT quizzes' );\n\n                    // Hide \"Select course\" dropdown, the empty option was selected\n                    _this.elements.select.quiz.element.empty();\n                    let options = _this.create_options( 'quiz' );\n                    _this.elements.select.quiz.element.html( options );\n                    _this.elements.select.quiz.element.prop( 'disabled', true );\n                    window.ulgmGroupManagement.Essays.createTable( [] );\n                    window.ulgmGroupManagement.Essays.createTableHidden( [] );\n                    // Save data in main object\n                    window.ulgmGroupManagement.Essays.courseId = course_id;\n                    // Request data\n                    window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n                }\n            });\n\n            this.elements.select.lesson.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n\n                // DEBUG: console.log( '--------- LESSON ---------' );\n                // DEBUG: console.log( '-- LESSON: Value changed' );\n\n                // lesson ID\n                let lesson_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.lessonId = lesson_id;\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( lesson_id, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, 0, window.ulgmGroupManagement.Essays.status  );\n            });\n\n            this.elements.select.quiz.element.on( 'change', function(){\n                // Save this DOM element\n                let $this = $(this);\n                // lesson ID\n                let quiz_id = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.quizId = quiz_id;\n\n                // DEBUG: console.log( '--------- QUIZ ---------' );\n                // DEBUG: console.log( '-- QUIZ: Value changed' );\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, window.ulgmGroupManagement.Essays.quizId, window.ulgmGroupManagement.Essays.status );\n            });\n\n            this.elements.select.status.element.on( 'change', function(){\n                // DEBUG: console.log( '--------- STATUS ---------' );\n                // DEBUG: console.log( '-- STATUS: Value changed' );\n\n                // Save this DOM element\n                let $this = $(this);\n                // lesson ID\n                let status = $this.val();\n                // Save data in main object\n                window.ulgmGroupManagement.Essays.status = status;\n\n                // Request data\n                window.ulgmGroupManagement.Essays.getEssaysData( 0, window.ulgmGroupManagement.Essays.courseId, window.ulgmGroupManagement.Essays.groupId, window.ulgmGroupManagement.Essays.quizId, window.ulgmGroupManagement.Essays.status );\n            });\n\n            // Trigger a change event on the groups dropdown on page load\n            this.elements.select.group.element.trigger( 'change' );\n\n            // Add event listener for opening and closing details\n            $('#uo-lesson-report-table').on('click', 'td.details-control', function () {\n\n                var tr = $(this).closest('tr');\n                var row = window.ulgmGroupManagement.Essays.uoTable.row(tr);\n\n                if (row.child.isShown()) {\n                    // This row is already open - close it\n                    row.child.hide();\n                    tr.removeClass('shown');\n                }\n                else {\n                    // Open this row\n                    row.child(window.ulgmGroupManagement.Essays.format(row.data())).show();\n                    tr.addClass('shown');\n                }\n            });\n\n        },\n\n        format: function (d) {\n\n            var rows = '';\n            $.each(d.answer, function (key, value) {\n                rows +=\n                    '<tr>' +\n                    '<td>' + d.question[key] + '</td>' +\n                    '<td>' + value + '</td>' +\n                    '</tr>';\n            });\n            // `d` is the original data object for the row\n            return '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n        },\n        isNormalInteger: function (str) {\n            var n = ~~Number(str);\n            return String(n) === str && n > 0;\n        },\n\n        getEssaysData: function (lessonId, courseId, groupId, quizId, status) {\n\n            var i = 0;\n\n            var loading = setInterval(function () {\n                i = ++i % 4;\n                $(\"#uo-group-essays-table tbody\").html(\"<div id='group-loader'>\" + groupEssays.localized.loadingRecords + new Array(i + 1).join(\".\") + \"</div>\");\n            }, 500);\n\n\n            var dataVars = {\n                groupId: groupId,\n                lessonId: lessonId,\n                quizId: quizId,\n                courseId: courseId,\n                status:status,\n            };\n\n            $.ajax({\n\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'get_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n\n                    clearInterval(loading);\n                    $('#group-loader').remove();\n\n                    window.ulgmGroupManagement.Essays.createTable(response);\n                    window.ulgmGroupManagement.Essays.createTableHidden(response);\n\n\n                },\n                fail: function (response) {\n                    alert('Rest Call Failed');\n                }\n\n            });\n\n        },\n        editEssaysData: function (postId) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            var dataVars = {\n                essay_id: postId,\n                action: 'edit_essays',\n                post_type:'sfwd-essay',\n                security:groupEssays.ajax_nonce\n            };\n\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'edit_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    $(\".modal\").remove();\n                    $(response.html).appendTo('body').modal();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        saveEssaysData: function () {\n            if (typeof tinymce !== 'undefined') {\n                for (edId in tinyMCE.editors) {\n                    if (\n                        typeof tinyMCE.editors[edId] !== 'undefined' &&\n                        typeof tinyMCE.editors[edId].save !== 'undefined' &&\n                        tinyMCE.editors[edId].save instanceof Function) {\n                        tinyMCE.editors[edId].save();\n                    }\n                }\n\n            }\n            var dataVars = $('#edit_essay_form').serialize();\n            var spinner = $('.uo-modal-spinner');\n            //$('#group-management-message').hide();\n            $('.uo-groups-message-ok').hide();\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'save_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger('change');\n                    //$('#group-management-message').html(response.message).show();\n                    $('.uo-groups-message-ok').html(response.message).show();\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        },\n        actionsEssays: function ( dataVars ) {\n            var spinner = $('.uo-modal-spinner');\n            spinner.show();\n            $.ajax({\n                method: \"POST\",\n                data: dataVars,\n                url: groupEssays.root + 'save_essays_data/',\n                beforeSend: function (xhr) {\n                    xhr.setRequestHeader('X-WP-Nonce', groupEssays.nonce);\n                },\n                success: function (response) {\n                    spinner.hide();\n                    window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger('change');\n                },\n                fail: function (response) {\n                    spinner.hide();\n                    alert('Rest Call Failed');\n                }\n            });\n        }\n    };\n\n\n})(jQuery);\n","( function ( $ ){ // Self Executing function with $ alias for jQuery\n\n\t/**\n\t *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n\t *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n\t */\n\t$( document ).ready( function (){\n\n\t\tif ($( '#group-report' ).length > 0) {\n\t\t\twindow.ulgmGroupManagement.reportingTemplating.constructor();\n\t\t}\n\n\t\tif ($( '#uo-quiz-report-table' ).length > 0) {\n\t\t\twindow.ulgmGroupManagement.quizReport.constructor();\n\t\t}\n\n\t\tif ($( '#uo-group-report-course' ) > 0) {\n\t\t\t$( '#uo-group-report-course' ).select2();\n\t\t}\n\n\t} );\n\n\twindow.ulgmGroupManagement.reportingTemplating = {\n\n\t\trowTemplate: '',\n\t\titemTemplate: '',\n\t\tliTemplate: '',\n\t\titems: [],\n\t\titemsEl: [],\n\t\tjpL: false,\n\n\t\t// initialize the code\n\t\tconstructor: function (){\n\t\t\tif ($( '#group-report' ).length > 0) {\n\t\t\t\t// Get Template\n\t\t\t\tthis.itemTemplate = $( 'script[data-template=\"item\"]' ).text().split( /\\$\\{(.+?)\\}/g );\n\t\t\t}\n\t\t},\n\n\t\tsetItems: function ( items ){\n\n\t\t\tvar _this = this;\n\n\t\t\t// Reset Items\n\t\t\tthis.itemsEl = [];\n\n\t\t\t// Create items from JSON\n\t\t\titems.map( function ( item ){\n\t\t\t\t_this.itemsEl.push( $( '<div class=\"uo-tbl-item body-row\">' + _this.itemTemplate.map( _this.render( item ) ).join( '' ) + '</div>' ) );\n\t\t\t\treturn '<div class=\"uo-tbl-item body-row\">' + _this.itemTemplate.map( _this.render( item ) ).join( '' ) + '</div>';\n\t\t\t} );\n\n\t\t},\n\n\t\trender: function ( props ){\n\t\t\treturn function ( tok, i ){\n\t\t\t\treturn ( i % 2 ) ? props[tok] : tok;\n\t\t\t};\n\t\t}\n\t};\n\n\twindow.ulgmGroupManagement.populateCoursesDropDown = function ( data ){\n\n\t\tvar courseDropDown = $( '#uo-group-report-course' );\n\t\tcourseDropDown.empty();\n\n\t\t$( '#course-group-id' ).val( data.group_id );\n\n\t\tif (data.group_courses.length > 1) {\n\t\t\tcourseDropDown.append(\n\t\t\t\t$( '<option>', {\n\t\t\t\t\tvalue: '0',\n\t\t\t\t\ttext: ulgmRestApiSetup.localized.selectCourse\n\t\t\t\t} )\n\t\t\t);\n\t\t}\n\t\t/**/\n\n\t\t$.each( data.group_courses, function ( i, course ){\n\n\t\t\tcourseDropDown.append(\n\t\t\t\t$( '<option>', {\n\t\t\t\t\tvalue: course.ID,\n\t\t\t\t\ttext: course.post_title\n\t\t\t\t} )\n\t\t\t);\n\n\t\t} );\n\n\t\tcourseDropDown.show().trigger( 'change' );\n\n\t};\n\n\n\twindow.ulgmGroupManagement.quizReport = {\n\n\t\tuoTable: null,\n\n\t\tuoTableHidden: null,\n\n\t\tquizId: 0,\n\n\t\tgroupId: 0,\n\n\t\tcourseId: 0,\n\n\t\tconstructor: function (){\n\t\t\tthis.$elements = {\n\t\t\t\tfilters: {\n\t\t\t\t\tgroup: document.getElementById( 'uo-group-report-group' ),\n\t\t\t\t\tcourse: document.getElementById( 'uo-group-report-courses' ),\n\t\t\t\t\tquiz: document.getElementById( 'uo-group-report-quizzes' ),\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// this.initSelect2();\n\t\t\tthis.createTable();\n\t\t\tthis.createTableHidden();\n\t\t\tthis.addEvents();\n\n\t\t\t// Trigger change on the first dropdown on load\n\t\t\tthis.$elements.filters.group.dispatchEvent( new Event( 'change' ) );\n\t\t},\n\n\t\tinitSelect2: function() {\n\t\t\ttry {\n\t\t\t\t[ this.$elements.filters.group, this.$elements.filters.course, this.$elements.filters.quiz ].forEach( ( $element ) => {\n\t\t\t\t\t$element.select2();\n\t\t\t\t} );\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.error( e );\n\t\t\t}\n\t\t},\n\n\t\tcreateTable: function ( data ){\n\n\t\t\tlet columnsVisibility = jQuery( '#uo-quiz-report-table' ).data( 'table_columns' );\n\t\t\tcolumnsVisibility     = columnsVisibility.split( ',' );\n\n\t\t\tvar columns = [\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.username,\n\t\t\t\t\ttargets: 0,\n\t\t\t\t\tdata: 'user_name',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"user_name\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.firstName,\n\t\t\t\t\ttargets: 1,\n\t\t\t\t\tdata: 'first_name',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"first_name\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.lastName,\n\t\t\t\t\ttargets: 2,\n\t\t\t\t\tdata: 'last_name',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"last_name\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.userEmail,\n\t\t\t\t\ttargets: 3,\n\t\t\t\t\tdata: 'user_email',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"user_email\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.quizScore,\n\t\t\t\t\ttargets: 4,\n\t\t\t\t\tdata: 'quiz_score',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"quiz_score\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.detailedReport,\n\t\t\t\t\torderable: false,\n\t\t\t\t\tsearchable: false,\n\t\t\t\t\ttargets: 5,\n\t\t\t\t\tdata: 'quiz_modal',\n\t\t\t\t\tdefaultContent: '',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"quiz_modal\" )\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttitle: groupQuizReportSetup.localized.date,\n\t\t\t\t\ttargets: 6,\n\t\t\t\t\tdata: 'quiz_date',\n\t\t\t\t\tvisible: columnsVisibility.includes( \"quiz_date\" )\n\t\t\t\t}\n\t\t\t];\n\n\n\t\t\t// Check what column has to be used to sort the table\n\t\t\tlet tableOrder = [];\n\t\t\t// Find the index of the column we have to use to sort\n\t\t\tlet tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmQuizReportShortcode.table.orderBy );\n\n\t\t\t// If the column doesn't exist, then try to get the default one\n\t\t\tif ( tableOrderByIndex === -1 ) {\n\t\t\t\ttableOrderByIndex = columns.findIndex( columnData => columnData.data == 'quiz_date' );\n\t\t\t}\n\t\t\t// If the one defined by the user, or the default one exists, add it\n\t\t\tif ( tableOrderByIndex !== -1 ) {\n\t\t\t\ttableOrder = [\n\t\t\t\t\t[\n\t\t\t\t\t\ttableOrderByIndex, // The ID of the column used to sort, defaults to `quiz_date`\n\t\t\t\t\t\tulgmQuizReportShortcode.table.order, // Designates the ascending or descending order of the orderby parameter, defaults to `desc`\n\t\t\t\t\t]\n\t\t\t\t];\n\t\t\t}\n\n\t\t\tvar tableVars = {\n\t\t\t\taLengthMenu: [\n\t\t\t\t\t[15, 30, 60, -1],\n\t\t\t\t\t[15, 30, 60, groupQuizReportSetup.localized.all]\n\t\t\t\t],\n\t\t\t\torder: tableOrder,\n\t\t\t\tiDisplayLength: 30,\n\t\t\t\tcolumns: columns,\n\t\t\t\tcolumnDefs: [{\n\t\t\t\t\t\"targets\": 5,\n\t\t\t\t\t\"orderable\": false,\n\t\t\t\t\t\"searchable\": false\n\t\t\t\t}]\n\t\t\t};\n\n\t\t\tlet initComplete = ( settings, d ) => {\n\n\t\t\t\tlet table = settings.oInstance.api();\n\t\t\t\tlet _this = this;\n\n\t\t\t\tvar colFilter_container = $( `<div id=\"${settings.sInstance}-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${settings.sInstance}-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${settings.sInstance}-filter-columns-field\" data-label-enable=\"${groupQuizReportSetup.localized.customizeColumns}\" data-label-disable=\"${groupQuizReportSetup.localized.hideCustomizeColumns}\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n\n\t\t\t\tif (settings.oSavedState !== null) {\n\t\t\t\t\tjQuery.each( settings.oSavedState.columns, function ( key, value ){\n\n\t\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.visible, table ) );\n\n\t\t\t\t\t} );\n\t\t\t\t} else {\n\t\t\t\t\tjQuery.each( settings.aoColumns, function ( key, value ){\n\n\t\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.bVisible, table ) );\n\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\t$( colFilter_container ).insertAfter( '#uo-quiz-report-table_filter' );\n\n\n\t\t\t};\n\n\t\t\ttableVars.initComplete = initComplete;\n\t\t\ttableVars.stateSave    = true;\n\n\t\t\tif (null !== this.uoTable) {\n\n\t\t\t\tthis.uoTable.destroy();\n\n\t\t\t\ttableVars.data = data;\n\t\t\t}\n\n\t\t\ttableVars.language = {\n\t\t\t\tprocessing: groupQuizReportSetup.localized.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: groupQuizReportSetup.localized.searchPlaceholder,\n\t\t\t\tlengthMenu: groupQuizReportSetup.localized.lengthMenu,\n\t\t\t\tinfo: groupQuizReportSetup.localized.info,\n\t\t\t\tinfoEmpty: groupQuizReportSetup.localized.infoEmpty,\n\t\t\t\tinfoFiltered: groupQuizReportSetup.localized.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: groupQuizReportSetup.localized.loadingRecords,\n\t\t\t\tzeroRecords: groupQuizReportSetup.localized.zeroRecords,\n\t\t\t\temptyTable: groupQuizReportSetup.localized.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: groupQuizReportSetup.localized.paginate.first,\n\t\t\t\t\tprevious: groupQuizReportSetup.localized.paginate.previous,\n\t\t\t\t\tnext: groupQuizReportSetup.localized.paginate.next,\n\t\t\t\t\tlast: groupQuizReportSetup.localized.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: groupQuizReportSetup.localized.sortAscending,\n\t\t\t\t\tsortDescending: groupQuizReportSetup.localized.sortDescending\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.uoTable = jQuery( '#uo-quiz-report-table' );\n\n\t\t\tif (jQuery( '#uo-quiz-report-table' ).length > 0) {\n\t\t\t\tthis.uoTable = jQuery( '#uo-quiz-report-table' ).DataTable( tableVars );\n\t\t\t}\n\n\n\t\t},\n\n\t\tcreateTableHidden: function ( data ){\n\n\t\t\tvar columns = [\n\t\t\t\t{title: groupQuizReportSetup.localized.username, data: 'user_name'},\n\t\t\t\t{title: groupQuizReportSetup.localized.firstName, data: 'first_name'},\n\t\t\t\t{title: groupQuizReportSetup.localized.lastName, data: 'last_name'},\n\t\t\t\t{title: groupQuizReportSetup.localized.userEmail, data: 'user_email'},\n\t\t\t\t{title: groupQuizReportSetup.localized.quizScore, data: 'quiz_score'},\n\t\t\t\t{title: groupQuizReportSetup.localized.date, data: 'quiz_date'}\n\t\t\t];\n\n\t\t\t/*var language = [\n\t\t\t\t\"lengthMenu\": groupQuizReportSetup.localized.lengthMenu,\n\t\t\t\t\"zeroRecords\": groupQuizReportSetup.localized.zeroRecords,\n\t\t\t\t\"info\": groupQuizReportSetup.localized.info,\n\t\t\t\t\"infoEmpty\": groupQuizReportSetup.localized.infoEmpty,\n\t\t\t\t\"infoFiltered\": groupQuizReportSetup.localized.infoFiltered,\n\t\t\t\t\"loadingRecords\": groupQuizReportSetup.localized.loadingRecords,\n\t\t\t\t\"emptyTable\": groupQuizReportSetup.localized.emptyTable\n\t\t\t];*/\n\t\t\tvar buttonCommon = {\n\t\t\t\texportOptions: {\n\t\t\t\t\tcolumns: ( id, data, node ) => {\n                        return this.uoTable.column( id ).visible();\n                    },\n                    \n\t\t\t\t\tformat: {\n\t\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar tableVars = {\n\t\t\t\tiDisplayLength: -1,\n\t\t\t\tcolumns: columns,\n\t\t\t\tdom: 'Bfrtip',\n\t\t\t\tbuttons: [\n\t\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\t\textend: 'csv',\n\t\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportCSV,\n\t\t\t\t\t\ttitle: 'quiz-report'\n\t\t\t\t\t}),\n\t\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\t\ttext: groupQuizReportSetup.i18n.exportExcel,\n\t\t\t\t\t\ttitle: 'quiz-report'\n\t\t\t\t\t}),\n\t\t\t\t]\n\t\t\t};\n\n\t\t\tif ($.fn.DataTable.isDataTable( '#uo-quiz-report-table-hidden' )) {\n\n\t\t\t\t$( '#uo-quiz-report-table-hidden' ).DataTable().destroy();\n\n\t\t\t\ttableVars.data = data;\n\n\t\t\t\ttableVars.columns = [\n\t\t\t\t\t{title: groupQuizReportSetup.localized.username, data: 'user_name'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.firstName, data: 'first_name'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.lastName, data: 'last_name'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.userEmail, data: 'user_email'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.quizScore, data: 'quiz_score'},\n\t\t\t\t\t{title: groupQuizReportSetup.localized.date, data: 'quiz_date'}\n\t\t\t\t];\n\n\t\t\t}\n\n\t\t\ttableVars.language = {\n\t\t\t\tprocessing: groupQuizReportSetup.localized.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: groupQuizReportSetup.localized.searchPlaceholder,\n\t\t\t\tlengthMenu: groupQuizReportSetup.localized.lengthMenu,\n\t\t\t\tinfo: groupQuizReportSetup.localized.info,\n\t\t\t\tinfoEmpty: groupQuizReportSetup.localized.infoEmpty,\n\t\t\t\tinfoFiltered: groupQuizReportSetup.localized.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: groupQuizReportSetup.localized.loadingRecords,\n\t\t\t\tzeroRecords: groupQuizReportSetup.localized.zeroRecords,\n\t\t\t\temptyTable: groupQuizReportSetup.localized.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: groupQuizReportSetup.localized.paginate.first,\n\t\t\t\t\tprevious: groupQuizReportSetup.localized.paginate.previous,\n\t\t\t\t\tnext: groupQuizReportSetup.localized.paginate.next,\n\t\t\t\t\tlast: groupQuizReportSetup.localized.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: groupQuizReportSetup.localized.sortAscending,\n\t\t\t\t\tsortDescending: groupQuizReportSetup.localized.sortDescending\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.uoTableHidden = jQuery( '#uo-quiz-report-table-hidden' );\n\n\t\t\tif (this.uoTableHidden.length > 0) {\n\t\t\t\tthis.uoTableHidden = jQuery( '#uo-quiz-report-table-hidden' ).DataTable( tableVars );\n\t\t\t}\n\n\t\t\t$( '.buttons-csv' ).show();\n\n\t\t},\n\n\t\taddColumnCourseCheckbox: function ( label, column_key, is_visible, table ){\n\n\t\t\tvar checkbox = jQuery( '<input />', {\n\t\t\t\ttype: 'checkbox',\n\t\t\t\tid: 'dt_' + column_key,\n\t\t\t\tvalue: column_key,\n\t\t\t\tchecked: is_visible\n\t\t\t} );\n\n\t\t\tcheckbox.on( 'change', function ( e ){\n\t\t\t\t// Get the column API object\n\t\t\t\tvar current_check = jQuery( this ).attr( 'value' );\n\t\t\t\tvar is_checked    = jQuery( this ).is( ':checked' );\n\n\t\t\t\ttable.columns().every( function ( index ){\n\n\t\t\t\t\tvar column = table.column( index );\n\n\t\t\t\t\t// ... do something with data(), or this.nodes(), etc\n\n\t\t\t\t\tif (index == current_check) {\n\t\t\t\t\t\tif (is_checked) {\n\t\t\t\t\t\t\t// Toggle the visibility\n\t\t\t\t\t\t\tcolumn.visible( true );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcolumn.visible( false );\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t} );\n\n\t\t\t} );\n\n\t\t\tvar $label = jQuery( '<label/>' ).append( checkbox ).append( label );\n\t\t\treturn $label;\n\t\t},\n\n\t\taddEvents: function (){\n\t\t\t// Listen changes to the \"Group\" dropdown\n\t\t\tthis.$elements.filters.group.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Set loading animation in the course dropdown\n\t\t\t\tthis.setLoading( {\n\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\tisLoading: true\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call to get courses\n\t\t\t\t$.ajax( {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { group_id: this.$elements.filters.group.value },\n\t\t\t\t\turl: groupQuizReportSetup.root + 'quiz-report-get-courses/',\n\t\t\t\t\tbeforeSend: xhr => xhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce ),\n\t\t\t\t\tsuccess: ( response ) => {\n\t\t\t\t\t\t// Check if the call is valid\n\t\t\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the returned data is valid\n\t\t\t\t\t\tif ( ! Array.isArray( response.options ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Set new options\n\t\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\t\tthis.$elements.filters.course,\n\t\t\t\t\t\t\tresponse.options,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tplaceholder: groupQuizReportSetup.i18n.coursePlaceholder\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Check if it has options\n\t\t\t\t\t\tif ( response.options.length === 0 ) {\n\t\t\t\t\t\t\t// Enable the dropdown\n\t\t\t\t\t\t\tthis.$elements.filters.course\n\t\t\t\t\t\t\t\t.setAttribute( 'disabled', 'disabled' );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.course,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Listen changes to the \"Course\" dropdown\n\t\t\tthis.$elements.filters.course.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Check if the course ID is valid\n\t\t\t\tif ( parseInt( this.$elements.filters.course.value ) === 0 ) {\n\t\t\t\t\t// Clear the \"Quiz\" dropdown\n\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\tthis.$elements.filters.quiz,\n\t\t\t\t\t\t[]\n\t\t\t\t\t);\n\n\t\t\t\t\t// Clear data on the table\n\t\t\t\t\ttry {\n\t\t\t\t\t\tthis.uoTable.clear().draw();\n\t\t\t\t\t} catch ( e ) {\n\t\t\t\t\t\tconsole.error( e );\n\t\t\t\t\t}\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Set loading animation in the quiz dropdown\n\t\t\t\tthis.setLoading( {\n\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\tisLoading: true\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call to get quizzes\n\t\t\t\t$.ajax( {\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: { \n\t\t\t\t\t\tgroup_id: this.$elements.filters.group.value,\n\t\t\t\t\t\tcourse_id: this.$elements.filters.course.value\n\t\t\t\t\t},\n\t\t\t\t\turl: groupQuizReportSetup.root + 'quiz-report-get-quizzes/',\n\t\t\t\t\tbeforeSend: xhr => xhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce ),\n\t\t\t\t\tsuccess: ( response ) => {\n\t\t\t\t\t\t// Check if the call is valid\n\t\t\t\t\t\tif ( ! response.success ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Check if the returned data is valid\n\t\t\t\t\t\tif ( ! Array.isArray( response.options ) ) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t// Set new options\n\t\t\t\t\t\tthis.setOptions(\n\t\t\t\t\t\t\tthis.$elements.filters.quiz,\n\t\t\t\t\t\t\tresponse.options,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tplaceholder: groupQuizReportSetup.i18n.quizPlaceholder\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\t// Check if it has options\n\t\t\t\t\t\tif ( response.options.length === 0 ) {\n\t\t\t\t\t\t\t// Enable the dropdown\n\t\t\t\t\t\t\tthis.$elements.filters.quiz\n\t\t\t\t\t\t\t\t.setAttribute( 'disabled', 'disabled' );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tfail: () => {\n\t\t\t\t\t\t// Set loading\n\t\t\t\t\t\tthis.setLoading( {\n\t\t\t\t\t\t\t$dropdown: this.$elements.filters.quiz,\n\t\t\t\t\t\t\tisLoading: false\n\t\t\t\t\t\t} );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Listen changes to the \"Quiz\" dropdown\n\t\t\tthis.$elements.filters.quiz.addEventListener( 'change', ( event ) => {\n\t\t\t\t// Request data\n\t\t\t\twindow.ulgmGroupManagement.quizReport.getQuizData(\n\t\t\t\t\t// Quiz ID\n\t\t\t\t\tthis.$elements.filters.quiz.value,\n\t\t\t\t\t// Group ID\n\t\t\t\t\tthis.$elements.filters.group.value,\n\t\t\t\t\t// Score type\n\t\t\t\t\tgroupQuizReportSetupScoreType\n\t\t\t\t);\n\t\t\t} );\n\t\t},\n\n\t\tsetOptions: ( $dropdown, options = [], dropdownSettings = {} ) => {\n\t\t\t// Empty the dropdown\n\t\t\t$dropdown.innerHTML = '';\n\n\t\t\t// Check if it doesn't have any options\n\t\t\tif ( options.length === 0 ) {\n\t\t\t\t$dropdown.innerHTML = `\n\t\t\t\t\t<option>${ groupQuizReportSetup.i18n.noResults }</option>\n\t\t\t\t`;\n\n\t\t\t\t$dropdown.classList.add( 'uo-groups-select-filter-select--empty' );\n\t\t\t} else {\n\t\t\t\t// Check if there is more than one option and if we should add a placeholder\n\t\t\t\tif ( options.length > 1 && typeof dropdownSettings.placeholder !== 'undefined' && dropdownSettings.placeholder !== '' ) {\n\t\t\t\t\t$dropdown.insertAdjacentHTML( 'beforeEnd', `<option value=\"0\">${ dropdownSettings.placeholder }</option>` );\n\t\t\t\t}\n\n\t\t\t\t// Add options\n\t\t\t\toptions.forEach( option => $dropdown.insertAdjacentHTML( 'beforeEnd', `<option value=\"${ option.value }\">${ option.text }</option>` ) );\n\n\t\t\t\t$dropdown.classList.remove( 'uo-groups-select-filter-select--empty' );\n\t\t\t}\n\n\t\t\t// Trigger change event, there are new options\n\t\t\t$dropdown.dispatchEvent( new Event( 'change' ) );\n\t\t},\n\n\t\tsetLoading: function( { isLoading, $dropdown } ) {\n\t\t\t// Get wrapper\n\t\t\tconst $wrapper = $dropdown.closest( '.uo-groups-select-filter' );\n\n\t\t\tif ( ! $wrapper ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( isLoading ) {\n\t\t\t\t// Add loading class\n\t\t\t\t$wrapper.classList.add( 'uo-groups-select-filter--loading' );\n\n\t\t\t\t// Disable the dropdown\n\t\t\t\t$dropdown.setAttribute( 'disabled', 'disabled' );\n\t\t\t} else {\n\t\t\t\t// Add the loading class\n\t\t\t\t$wrapper.classList.remove( 'uo-groups-select-filter--loading' );\n\n\t\t\t\t// Enable the dropdown\n\t\t\t\t$dropdown.removeAttribute( 'disabled' );\n\t\t\t}\n\t\t},\n\n\t\tformat: function ( d ){\n\n\t\t\tvar rows = '';\n\t\t\t$.each( d.answer, function ( key, value ){\n\t\t\t\trows +=\n\t\t\t\t\t'<tr>' +\n\t\t\t\t\t'<td>' + d.question[key] + '</td>' +\n\t\t\t\t\t'<td>' + value + '</td>' +\n\t\t\t\t\t'</tr>';\n\t\t\t} );\n\t\t\t// `d` is the original data object for the row\n\t\t\treturn '<table cellpadding=\"5\" cellspacing=\"0\" border=\"0\" style=\"padding-left:50px;\">' + rows + '</table>';\n\t\t},\n\n\t\tgetQuizData: function ( quizId, groupId, scoreType ){\n\t\t\t// Clear data on the table\n\t\t\ttry {\n\t\t\t\tthis.uoTable.clear().draw();\n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.error( e );\n\t\t\t}\n\n\t\t\tif (!window.ulgmGroupManagement.reporting.isNormalInteger( quizId )) {\n\t\t\t\t$( '#uo-group-report-course' ).addClass( 'missing' );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!window.ulgmGroupManagement.reporting.isNormalInteger( String( groupId ) )) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t$( '#uo-group-report-course' ).removeClass( 'missing' );\n\n\t\t\tvar i = 0;\n\n\t\t\tvar loading = setInterval( function (){\n\t\t\t\ti = ++i % 4;\n\t\t\t\t$( \"#uo-quiz-report-table tbody\" ).html( \"<div id='group-loader'>\" + groupQuizReportSetup.localized.loadingRecords + new Array( i + 1 ).join( \".\" ) + \"</div>\" );\n\t\t\t}, 500 );\n\n\n\t\t\tvar dataVars = {\n\t\t\t\tgroupId: groupId,\n\t\t\t\tquizId: quizId,\n\t\t\t\tscoreType: scoreType\n\t\t\t};\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupQuizReportSetup.root + 'get_quiz_data/',\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce );\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ){\n\t\t\t\t\tclearInterval( loading );\n\t\t\t\t\t$( '#group-loader' ).remove();\n\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTable( response );\n\t\t\t\t\twindow.ulgmGroupManagement.quizReport.createTableHidden( response );\n\n\n\t\t\t\t},\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\talert( 'Rest Call Failed' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t}\n\n\t};\n\n\twindow.ulgmGroupManagement.reporting = {\n\n\t\tgroupLeaderId: 0,\n\n\t\tgroupId: 0,\n\n\t\tgetGroupCourses: function ( groupId ){\n\n\t\t\tvar dataVars = {groupId: groupId};\n\n\t\t\tif (this.getQueryVariable( 'user_id' )) {\n\t\t\t\twindow.ulgmGroupManagement.reporting.groupLeaderId = this.getQueryVariable( 'user_id' );\n\t\t\t\tdataVars.userId                                    = window.ulgmGroupManagement.reporting.groupLeaderId;\n\t\t\t}\n\n\t\t\t$( '#uo-group-report-course' ).hide();\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\tdata: dataVars,\n\t\t\t\turl: groupQuizReportSetup.root + 'get_group_courses/',\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', groupQuizReportSetup.nonce );\n\t\t\t\t},\n\t\t\t\tsuccess: function ( response ){\n\t\t\t\t\twindow.ulgmGroupManagement.reporting.createCourseDropDown( response.courses );\n\n\t\t\t\t\tif ($( '#uo-quiz-report-table' ).length) {\n\t\t\t\t\t\twindow.ulgmGroupManagement.reporting.createUserDropDown( response.users );\n\t\t\t\t\t}\n\n\n\t\t\t\t},\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\talert( 'Rest Call Failed' );\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t},\n\n\t\tcreateCourseDropDown: function ( posts ){\n\t\t\tvar dropDown = $( '#uo-group-report-course' ),\n\t\t\t\toptions  = '<option value=\"0\">' + ulgmRestApiSetup.localized.selectCourse + '</option>';\n\n\t\t\tif (0 === posts.post_count) {\n\t\t\t\tdropDown.html( '<option value=\"0\">' + ulgmRestApiSetup.localized.noCourse + '</option>' );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$.each( posts.posts, function ( key, post ){\n\t\t\t\toptions += '<option value=\"' + post.ID + '\">' + post.post_title + '</option>';\n\t\t\t} );\n\n\t\t\tdropDown.html( options );\n\t\t\tdropDown.show();\n\n\t\t},\n\n\t\tcreateUserDropDown: function ( users ){\n\n\t\t\tvar dropDown = $( '#uo-group-report-user' ),\n\t\t\t\toptions  = '<option value=\"0\">' + groupQuizReportSetup.localized.selectUser + '</option>';\n\n\t\t\tif (0 === users.length) {\n\t\t\t\tdropDown.html( '<option value=\"0\">' + groupQuizReportSetup.localized.noUsers + '/option>' );\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t$.each( users, function ( key, user ){\n\t\t\t\toptions += '<option value=\"' + user.ID + '\">' + user.data.display_name + '</option>';\n\t\t\t} );\n\n\t\t\tdropDown.html( options );\n\t\t\tdropDown.show();\n\n\t\t},\n\n\t\tisNormalInteger: function ( str ){\n\t\t\tvar n = Math.trunc( str );\n\t\t\tn = isNaN( n ) ? 0 : n;\n\n\t\t\treturn String( n ) == str && n > 0;\n\t\t},\n\n\t\tgetQueryVariable: function ( variable ){\n\t\t\tvar query = window.location.search.substring( 1 );\n\t\t\tvar vars  = query.split( \"&\" );\n\t\t\tfor (var i = 0; i < vars.length; i++) {\n\t\t\t\tvar pair = vars[i].split( \"=\" );\n\t\t\t\tif (pair[0] == variable) {\n\t\t\t\t\treturn pair[1];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn ( false );\n\t\t}\n\n\t}\n\n\n} )( jQuery );\n","( function ( $ ){ // Self Executing function with $ alias for jQuery\n\n\t/**\n\t *  Initialization  similar to include once but since all js is loaded by the browser automatically the all\n\t *   we have to do is call our functions to initialize them, his is only run in the main configuration file\n\t */\n\t$( document ).ready( function (){\n\t\twindow.ulgmGroupManagement.restForms.constructor();\n\n\t\tvar file_frame;\n\n\t\tvar uploadedUsers;\n\n\t\tjQuery( '#ulgm_group_upload_image_button' ).on( 'click', function ( event ){\n\t\t\tevent.preventDefault();\n\n\t\t\tif (file_frame) {\n\n\t\t\t\tfile_frame.open();\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Create the media frame.\n\t\t\tfile_frame = wp.media.frames.file_frame = wp.media( {\n\t\t\t\ttitle: 'Select a image to upload',\n\t\t\t\tbutton: {\n\t\t\t\t\ttext: 'Use this image',\n\t\t\t\t},\n\t\t\t\tmultiple: false\n\t\t\t} );\n\t\t\t// When an image is selected, run a callback.\n\t\t\tfile_frame.on( 'select', function (){\n\t\t\t\tattachment = file_frame.state().get( 'selection' ).first().toJSON();\n\t\t\t\t$( '#ulgm_group_image_preview' ).attr( 'src', attachment.url ).css( 'width', 'auto' ).show();\n\t\t\t\t$( '#ulgm_group_image_attachment_id' ).val( attachment.id );\n\t\t\t} );\n\n\t\t\tfile_frame.open();\n\t\t} );\n\n\t} );\n\n\twindow.ulgmGroupManagement.restForms = {\n\n\t\t// initialize the code\n\t\tconstructor: function (){\n\n\t\t\tif (typeof window.ulgmRestApiSetup !== 'undefined') {\n\t\t\t\t// Add events for the group management page\n\t\t\t\tthis.addFormSubmitEvents();\n\n\t\t\t\ttry {\n\t\t\t\t\t$( '#ulgm_font_color' ).wpColorPicker();\n\t\t\t\t\t$( '#ulgm_main_color' ).wpColorPicker();\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Handle error(s) here\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tmakeAjaxCall: function ( endPoint, restData, associatedForm ){\n\n\t\t\tvar $title_container = associatedForm.find( '#group-management-title' );\n\n\t\t\tvar $error_container = associatedForm.find( '.group-management-rest-message' );\n\n\t\t\tvar spinner = $( '.uo-modal-spinner' );\n\n\t\t\tif ('upload_users' === endPoint) {\n\t\t\t\tuploadedUsers++;\n\t\t\t\trestData.uploaded_users = uploadedUsers;\n\t\t\t}\n\n\n\t\t\tvar _this = this;\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: ulgmRestApiSetup.root + endPoint + '/',\n\t\t\t\tdata: restData,\n\n\t\t\t\t// Attach Nonce the the header of the request\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', ulgmRestApiSetup.nonce );\n\t\t\t\t},\n\n\t\t\t\tstatusCode: {\n\t\t\t\t\t403: function ( response ){\n\t\t\t\t\t\tspinner.hide();\n\t\t\t\t\t\t$error_container.html( ulgmRestApiSetup.i18n.youCantDoThat ).show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\tif (true === response.success) {\n\n\t\t\t\t\t\t$( '#uo-group-report-course' ).show();\n\t\t\t\t\t\t$error_container.hide();\n\n\t\t\t\t\t\tvar url = window.location.href;\n\n\t\t\t\t\t\t//append rest message to url\n\t\t\t\t\t\tif (url.indexOf( '?' ) > -1) {\n\t\t\t\t\t\t\turl += '&message=' + encodeURIComponent( response.data.message );\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\turl += '?message=' + encodeURIComponent( response.data.message );\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (typeof response.data.reload === 'undefined') {\n\n\t\t\t\t\t\t\tvar name  = 'message';\n\t\t\t\t\t\t\tvar value = response.data.message;\n\n\t\t\t\t\t\t\tvar str = location.search;\n\t\t\t\t\t\t\tif (new RegExp( \"[&?]\" + name + \"([=&].+)?$\" ).test( str )) {\n\t\t\t\t\t\t\t\tstr = str.replace( new RegExp( \"(?:[&?])\" + name + \"[^&]*\", \"g\" ), \"\" )\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tstr += \"&\";\n\t\t\t\t\t\t\tstr += name + \"=\" + value;\n\t\t\t\t\t\t\tstr = \"?\" + str.slice( 1 );\n\n\t\t\t\t\t\t\t// there is an official order for the query and the hash if you didn't know.\n\t\t\t\t\t\t\tlocation.assign( location.origin + location.pathname + str + location.hash );\n\n\t\t\t\t\t\t} else if (typeof response.data.call_function !== 'undefined') {\n\n\t\t\t\t\t\t\tif (typeof response.data.function_vars !== 'undefined') {\n\t\t\t\t\t\t\t\twindow.ulgmGroupManagement[response.data.call_function]( response.data.function_vars );\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\twindow.ulgmGroupManagement[response.data.call_function]();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\ttypeof response.data.reload !== 'undefined' &&\n\t\t\t\t\t\t\ttypeof response.data.endpoint !== 'undefined' &&\n\t\t\t\t\t\t\tresponse.data.reload === false &&\n\t\t\t\t\t\t\t( response.data.endpoint === 'upload_users' || response.data.endpoint === 'send-enrollment' )\n\t\t\t\t\t\t) {\n\n\t\t\t\t\t\t\tif( 1 === response.data.uploaded_users ){\n\t\t\t\t\t\t\t\t// first time the upload ran\n\t\t\t\t\t\t\t\t$([document.documentElement, document.body]).animate({\n\t\t\t\t\t\t\t\t\tscrollTop: $(\"#group-management-users\").offset().top\n\t\t\t\t\t\t\t\t}, 2000);\n\n\t\t\t\t\t\t\t\t// Hide modal\n\t\t\t\t\t\t\t\t$( \"#group-management-upload-users .uo-close-modal\" ).click();\n\t\t\t\t\t\t\t\t// Show CSV log\n\t\t\t\t\t\t\t\t$( '#uo-groups-upload-summary' ).show();\n\t\t\t\t\t\t\t\t// Hide Users table to force page reload\n\t\t\t\t\t\t\t\t$( '.uo-groups-group-courses' ).hide();\n\t\t\t\t\t\t\t\t$( '.uo-groups-enrolled-users' ).hide();\n\t\t\t\t\t\t\t\t$( '#group-management-leaders' ).hide();\n\t\t\t\t\t\t\t}\n\n\n\n\n\t\t\t\t\t\t\t// Set summary info in heading\n\t\t\t\t\t\t\t$( '#uo-groups-upload-summary .uo-header-subtitle' ).text( response.data.message );\n\t\t\t\t\t\t\t$( '#csv-result-total' ).text( response.data.total_rows );\n\n\t\t\t\t\t\t\tconsole.log( 'this is the upload' );\n\t\t\t\t\t\t\tconsole.log( response );\n\n\t\t\t\t\t\t\tlet results = response.data.results;\n\t\t\t\t\t\t\tresults.forEach( function ( entry ){\n\n\t\t\t\t\t\t\t\tlet row = document.createElement( 'div' );\n\t\t\t\t\t\t\t\trow.setAttribute( \"class\", \"uo-row uo-table-content uo-tbl-item body-row\" );\n\n\t\t\t\t\t\t\t\tlet emailCol = document.createElement( 'div' );\n\t\t\t\t\t\t\t\temailCol.setAttribute( \"class\", \"content-leaders-email uo-table-cell uo-table-cell-3\" );\n\n\t\t\t\t\t\t\t\tlet statusCol = document.createElement( 'div' );\n\t\t\t\t\t\t\t\tstatusCol.setAttribute( \"class\", \"content-leaders-statu uo-table-cell uo-table-cell-7\" );\n\n\t\t\t\t\t\t\t\temailCol.innerText  = entry.email;\n\t\t\t\t\t\t\t\tstatusCol.innerText = ( 'use_error_code' === entry.status.reason ) ? entry.message : entry.status.reason;\n\n\t\t\t\t\t\t\t\trow.appendChild( emailCol );\n\n\t\t\t\t\t\t\t\trow.appendChild( statusCol );\n\n\t\t\t\t\t\t\t\tlet resultsDiv = document.getElementById( 'uo-groups-upload-result-rows' );\n\n\t\t\t\t\t\t\t\tif (null !== resultsDiv) {\n\t\t\t\t\t\t\t\t\tresultsDiv.appendChild( row );\n\n\t\t\t\t\t\t\t\t\t// new_created_added_to_group, new_failed, existing_added_to_group, existing_already_member, existing_failed\n\n\t\t\t\t\t\t\t\t\tif ('new_created_added_to_group' === entry.status.user ||\n\t\t\t\t\t\t\t\t\t\t'existing_added_to_group' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-added' ).text( parseInt( $( '#csv-result-added' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ('existing_already_member' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-member' ).text( parseInt( $( '#csv-result-member' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tif ('new_failed' === entry.status.user ||\n\t\t\t\t\t\t\t\t\t\t'existing_failed' === entry.status.user) {\n\t\t\t\t\t\t\t\t\t\t$( '#csv-result-unprocessed' ).text( parseInt( $( '#csv-result-unprocessed' ).text() ) + 1 );\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} );\n\n\t\t\t\t\t\t\tif (false === response.data.completed) {\n\t\t\t\t\t\t\t\tspinner.show();\n\t\t\t\t\t\t\t\tulgmGroupManagement.restForms.makeAjaxCall( endPoint, restData, associatedForm );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\t\tif (ulgmRestApiSetup.hasOwnProperty( 'localized' )) {\n\t\t\t\t\t\t\tif ('invalid-course-id' !== response.data.error) {\n\t\t\t\t\t\t\t\t$( '#uo-group-report-course' ).empty().append(\n\t\t\t\t\t\t\t\t\t$( '<option>', {\n\t\t\t\t\t\t\t\t\t\tvalue: '0',\n\t\t\t\t\t\t\t\t\t\ttext: ulgmRestApiSetup.localized.selectCourse\n\t\t\t\t\t\t\t\t\t} )\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$error_container\n\t\t\t\t\t\t\t.html( response.data.message )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\tspinner.hide();\n\t\t\t\t\t$error_container.html( response.data.message );\n\t\t\t\t}\n\n\t\t\t} );\n\t\t},\n\n\t\taddFormSubmitEvents: function (){\n\n\t\t\t// Add rest call to all link with a rest call attached\n\t\t\t$( '.submit-group-management-form' ).on( 'click', this.sendRestCall );\n\n\t\t\t// Add rest call to all link with a rest call attached\n\t\t\t$( '.change-group-management-form' ).on( 'change', this.sendRestCall );\n\n\t\t\t// Add rest call to all inputs of modal if enter is pressed\n\t\t\t$( '.group-management-modal input' ).on( 'keypress', this.sendRestCall );\n\n\t\t\t$( 'input[type=radio][name=action]' ).on( 'change', function (){\n\t\t\t\tvar selected_value = this.value;\n\t\t\t\tif (selected_value === 'add-invite') {\n\t\t\t\t\t$( '#uo-import-user-note' ).show();\n\t\t\t\t} else if (selected_value === 'send-enrollment') {\n\t\t\t\t\t$( '#uo-import-user-note' ).hide();\n\t\t\t\t}\n\t\t\t} );\n\t\t},\n\n\t\tsendRestCall: function ( e ){\n\n\t\t\tvar _currentTarget = e.currentTarget;\n\n\t\t\t// if the current target is a input then we assume the user pressed enter\n\t\t\tif ($( _currentTarget ).is( 'input' )) {\n\t\t\t\tif (e.key !== \"Enter\") {\n\t\t\t\t\t// Do more work\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\t// switch current target to the forms submit button to extract needed data\n\t\t\t\tlet _associatedForm = $( _currentTarget ).closest( '.group-management-form' );\n\t\t\t\t// Enter is only pressed inside th modal window\n\t\t\t\t_currentTarget      = _associatedForm.find( '.submit-group-management-form' );\n\t\t\t}\n\n\t\t\tvar spinner = $( '.uo-modal-spinner' );\n\n\t\t\t// The form or container of the input data\n\t\t\tvar associatedForm   = $( _currentTarget ).closest( '.group-management-form' );\n\t\t\tvar $error_container = associatedForm.find( '.group-management-rest-message' );\n\t\t\t$error_container.hide();\n\t\t\t$( '#uo-group-progress-report' ).hide();\n\n\t\t\t// Get the end point for the rest call from the clicked element\n\t\t\tvar endPoint = $( _currentTarget ).data( 'end-point' );\n\n\t\t\tif (typeof endPoint === 'undefined') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (endPoint == 'add_user') {\n\t\t\t\tdocument.getElementById( \"group-management-add-user-frm\" ).onsubmit = function ( e ){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!document.getElementById( \"group-management-add-user-frm\" ).checkValidity()) {\n\t\t\t\t\tdocument.getElementById( \"group-management-add-user-frm\" ).reportValidity();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (endPoint == 'edit_user') {\n\t\t\t\tdocument.getElementById( \"group-management-edit-user-frm\" ).onsubmit = function ( e ){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!document.getElementById( \"group-management-edit-user-frm\" ).checkValidity()) {\n\t\t\t\t\tdocument.getElementById( \"group-management-edit-user-frm\" ).reportValidity();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ($( _currentTarget ).attr( 'id' ) === \"group-id\" && $( _currentTarget ).val() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif ($( _currentTarget ).attr( 'id' ) === \"uo-group-report-course\" && $( _currentTarget ).val() == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Sometimes wp editor doesn't update the textarea input rigth way.\n\t\t\t// Let's save iFrame editors to textarea so we can serialize\n\t\t\tif (typeof tinymce !== 'undefined') {\n\t\t\t\tfor (edId in tinyMCE.editors) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttypeof tinyMCE.editors[edId] !== 'undefined' &&\n\t\t\t\t\t\ttypeof tinyMCE.editors[edId].save !== 'undefined' &&\n\t\t\t\t\t\ttinyMCE.editors[edId].save instanceof Function) {\n\t\t\t\t\t\ttinyMCE.editors[edId].save();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Create object that will save the data that's\n\t\t\t// going to be send to the AJAX call\n\t\t\tvar restData = {};\n\n\t\t\t// Get the fields\n\t\t\tvar fields = associatedForm.find( ':input' );\n\n\t\t\t// Get an array of objects with the name and value of the fields,\n\t\t\t// iterate each element, and add it to the restData object,\n\t\t\t// using the field name as the key, and field value as the value\n\t\t\t$.each( fields.serializeArray(), function ( index, field ){\n\t\t\t\trestData[field.name] = field.value;\n\t\t\t} );\n\n\t\t\tif (endPoint == 'email_users') {\n\t\t\t\trestData = fields.serializeArray();\n\t\t\t}\n\n\t\t\tspinner.show();\n\n\t\t\tif ('upload_users' === endPoint) {\n\t\t\t\tuploadedUsers = 0;\n\t\t\t}\n\n\t\t\tulgmGroupManagement.restForms.makeAjaxCall( endPoint, restData, associatedForm );\n\n\t\t}\n\t};\n\n\t/**\n\t * Extend serialize array to create a serialized object. This is the format that the rest call expects\n\t *\n\t * @returns object Returns key value pairs where the key is the input name and the value is the input value\n\t */\n\t// Extend serialize array to create an serialized object\n\t$.fn.serializeObject = function (){\n\t\tvar o = {};\n\t\tvar a = this.serializeArray();\n\t\t$.each( a, function (){\n\t\t\tif (o[this.name] !== undefined) {\n\t\t\t\tif (!o[this.name].push) {\n\t\t\t\t\to[this.name] = [o[this.name]];\n\t\t\t\t}\n\t\t\t\to[this.name].push( this.value || '' );\n\t\t\t} else {\n\t\t\t\to[this.name] = this.value || '';\n\t\t\t}\n\t\t} );\n\t\treturn o;\n\t};\n\n\n} )( jQuery );\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(['./ResizeSensor.js'], factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory(require('./ResizeSensor.js'));\n    } else {\n        root.ElementQueries = factory(root.ResizeSensor);\n        root.ElementQueries.listen();\n    }\n}(typeof window !== 'undefined' ? window : this, function (ResizeSensor) {\n\n    /**\n     *\n     * @type {Function}\n     * @constructor\n     */\n    var ElementQueries = function () {\n        //<style> element with our dynamically created styles\n        var cssStyleElement;\n\n        //all rules found for element queries\n        var allQueries = {};\n\n        //association map to identify which selector belongs to a element from the animationstart event.\n        var idToSelectorMapping = [];\n\n        /**\n         *\n         * @param element\n         * @returns {Number}\n         */\n        function getEmSize(element) {\n            if (!element) {\n                element = document.documentElement;\n            }\n            var fontSize = window.getComputedStyle(element, null).fontSize;\n            return parseFloat(fontSize) || 16;\n        }\n\n        /**\n         * Get element size\n         * @param {HTMLElement} element\n         * @returns {Object} {width, height}\n         */\n        function getElementSize(element) {\n            if (!element.getBoundingClientRect) {\n                return {\n                    width: element.offsetWidth,\n                    height: element.offsetHeight\n                }\n            }\n\n            var rect = element.getBoundingClientRect();\n            return {\n                width: Math.round(rect.width),\n                height: Math.round(rect.height)\n            }\n        }\n\n        /**\n         *\n         * @copyright https://github.com/Mr0grog/element-query/blob/master/LICENSE\n         *\n         * @param {HTMLElement} element\n         * @param {*} value\n         * @returns {*}\n         */\n        function convertToPx(element, value) {\n            var numbers = value.split(/\\d/);\n            var units = numbers[numbers.length - 1];\n            value = parseFloat(value);\n            switch (units) {\n                case \"px\":\n                    return value;\n                case \"em\":\n                    return value * getEmSize(element);\n                case \"rem\":\n                    return value * getEmSize();\n                // Viewport units!\n                // According to http://quirksmode.org/mobile/tableViewport.html\n                // documentElement.clientWidth/Height gets us the most reliable info\n                case \"vw\":\n                    return value * document.documentElement.clientWidth / 100;\n                case \"vh\":\n                    return value * document.documentElement.clientHeight / 100;\n                case \"vmin\":\n                case \"vmax\":\n                    var vw = document.documentElement.clientWidth / 100;\n                    var vh = document.documentElement.clientHeight / 100;\n                    var chooser = Math[units === \"vmin\" ? \"min\" : \"max\"];\n                    return value * chooser(vw, vh);\n                default:\n                    return value;\n                // for now, not supporting physical units (since they are just a set number of px)\n                // or ex/ch (getting accurate measurements is hard)\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {String} id\n         * @constructor\n         */\n        function SetupInformation(element, id) {\n            this.element = element;\n            var key, option, elementSize, value, actualValue, attrValues, attrValue, attrName;\n\n            var attributes = ['min-width', 'min-height', 'max-width', 'max-height'];\n\n            /**\n             * Extracts the computed width/height and sets to min/max- attribute.\n             */\n            this.call = function () {\n                // extract current dimensions\n                elementSize = getElementSize(this.element);\n\n                attrValues = {};\n\n                for (key in allQueries[id]) {\n                    if (!allQueries[id].hasOwnProperty(key)) {\n                        continue;\n                    }\n                    option = allQueries[id][key];\n\n                    value = convertToPx(this.element, option.value);\n\n                    actualValue = option.property === 'width' ? elementSize.width : elementSize.height;\n                    attrName = option.mode + '-' + option.property;\n                    attrValue = '';\n\n                    if (option.mode === 'min' && actualValue >= value) {\n                        attrValue += option.value;\n                    }\n\n                    if (option.mode === 'max' && actualValue <= value) {\n                        attrValue += option.value;\n                    }\n\n                    if (!attrValues[attrName]) attrValues[attrName] = '';\n                    if (attrValue && -1 === (' ' + attrValues[attrName] + ' ').indexOf(' ' + attrValue + ' ')) {\n                        attrValues[attrName] += ' ' + attrValue;\n                    }\n                }\n\n                for (var k in attributes) {\n                    if (!attributes.hasOwnProperty(k)) continue;\n\n                    if (attrValues[attributes[k]]) {\n                        this.element.setAttribute(attributes[k], attrValues[attributes[k]].substr(1));\n                    } else {\n                        this.element.removeAttribute(attributes[k]);\n                    }\n                }\n            };\n        }\n\n        /**\n         * @param {HTMLElement} element\n         * @param {Object}      id\n         */\n        function setupElement(element, id) {\n            if (!element.elementQueriesSetupInformation) {\n                element.elementQueriesSetupInformation = new SetupInformation(element, id);\n            }\n\n            if (!element.elementQueriesSensor) {\n                element.elementQueriesSensor = new ResizeSensor(element, function () {\n                    element.elementQueriesSetupInformation.call();\n                });\n            }\n        }\n\n        /**\n         * Stores rules to the selector that should be applied once resized.\n         *\n         * @param {String} selector\n         * @param {String} mode min|max\n         * @param {String} property width|height\n         * @param {String} value\n         */\n        function queueQuery(selector, mode, property, value) {\n            if (typeof(allQueries[selector]) === 'undefined') {\n                allQueries[selector] = [];\n                // add animation to trigger animationstart event, so we know exactly when a element appears in the DOM\n\n                var id = idToSelectorMapping.length;\n                cssStyleElement.innerHTML += '\\n' + selector + ' {animation: 0.1s element-queries;}';\n                cssStyleElement.innerHTML += '\\n' + selector + ' > .resize-sensor {min-width: '+id+'px;}';\n                idToSelectorMapping.push(selector);\n            }\n\n            allQueries[selector].push({\n                mode: mode,\n                property: property,\n                value: value\n            });\n        }\n\n        function getQuery(container) {\n            var query;\n            if (document.querySelectorAll) query = (container) ? container.querySelectorAll.bind(container) : document.querySelectorAll.bind(document);\n            if (!query && 'undefined' !== typeof $$) query = $$;\n            if (!query && 'undefined' !== typeof jQuery) query = jQuery;\n\n            if (!query) {\n                throw 'No document.querySelectorAll, jQuery or Mootools\\'s $$ found.';\n            }\n\n            return query;\n        }\n\n        /**\n         * If animationStart didn't catch a new element in the DOM, we can manually search for it\n         */\n        function findElementQueriesElements(container) {\n            var query = getQuery(container);\n\n            for (var selector in allQueries) if (allQueries.hasOwnProperty(selector)) {\n                // find all elements based on the extract query selector from the element query rule\n                var elements = query(selector, container);\n\n                for (var i = 0, j = elements.length; i < j; i++) {\n                    setupElement(elements[i], selector);\n                }\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         */\n        function attachResponsiveImage(element) {\n            var children = [];\n            var rules = [];\n            var sources = [];\n            var defaultImageId = 0;\n            var lastActiveImage = -1;\n            var loadedImages = [];\n\n            for (var i in element.children) {\n                if (!element.children.hasOwnProperty(i)) continue;\n\n                if (element.children[i].tagName && element.children[i].tagName.toLowerCase() === 'img') {\n                    children.push(element.children[i]);\n\n                    var minWidth = element.children[i].getAttribute('min-width') || element.children[i].getAttribute('data-min-width');\n                    //var minHeight = element.children[i].getAttribute('min-height') || element.children[i].getAttribute('data-min-height');\n                    var src = element.children[i].getAttribute('data-src') || element.children[i].getAttribute('url');\n\n                    sources.push(src);\n\n                    var rule = {\n                        minWidth: minWidth\n                    };\n\n                    rules.push(rule);\n\n                    if (!minWidth) {\n                        defaultImageId = children.length - 1;\n                        element.children[i].style.display = 'block';\n                    } else {\n                        element.children[i].style.display = 'none';\n                    }\n                }\n            }\n\n            lastActiveImage = defaultImageId;\n\n            function check() {\n                var imageToDisplay = false, i;\n\n                for (i in children) {\n                    if (!children.hasOwnProperty(i)) continue;\n\n                    if (rules[i].minWidth) {\n                        if (element.offsetWidth > rules[i].minWidth) {\n                            imageToDisplay = i;\n                        }\n                    }\n                }\n\n                if (!imageToDisplay) {\n                    //no rule matched, show default\n                    imageToDisplay = defaultImageId;\n                }\n\n                if (lastActiveImage !== imageToDisplay) {\n                    //image change\n\n                    if (!loadedImages[imageToDisplay]) {\n                        //image has not been loaded yet, we need to load the image first in memory to prevent flash of\n                        //no content\n\n                        var image = new Image();\n                        image.onload = function () {\n                            children[imageToDisplay].src = sources[imageToDisplay];\n\n                            children[lastActiveImage].style.display = 'none';\n                            children[imageToDisplay].style.display = 'block';\n\n                            loadedImages[imageToDisplay] = true;\n\n                            lastActiveImage = imageToDisplay;\n                        };\n\n                        image.src = sources[imageToDisplay];\n                    } else {\n                        children[lastActiveImage].style.display = 'none';\n                        children[imageToDisplay].style.display = 'block';\n                        lastActiveImage = imageToDisplay;\n                    }\n                } else {\n                    //make sure for initial check call the .src is set correctly\n                    children[imageToDisplay].src = sources[imageToDisplay];\n                }\n            }\n\n            element.resizeSensorInstance = new ResizeSensor(element, check);\n            check();\n        }\n\n        function findResponsiveImages() {\n            var query = getQuery();\n\n            var elements = query('[data-responsive-image],[responsive-image]');\n            for (var i = 0, j = elements.length; i < j; i++) {\n                attachResponsiveImage(elements[i]);\n            }\n        }\n\n        var regex = /,?[\\s\\t]*([^,\\n]*?)((?:\\[[\\s\\t]*?(?:min|max)-(?:width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"[^\"]*?\"[\\s\\t]*?])+)([^,\\n\\s\\{]*)/mgi;\n        var attrRegex = /\\[[\\s\\t]*?(min|max)-(width|height)[\\s\\t]*?[~$\\^]?=[\\s\\t]*?\"([^\"]*?)\"[\\s\\t]*?]/mgi;\n\n        /**\n         * @param {String} css\n         */\n        function extractQuery(css) {\n            var match, smatch, attrs, attrMatch;\n\n            css = css.replace(/'/g, '\"');\n            while (null !== (match = regex.exec(css))) {\n                smatch = match[1] + match[3];\n                attrs = match[2];\n\n                while (null !== (attrMatch = attrRegex.exec(attrs))) {\n                    queueQuery(smatch, attrMatch[1], attrMatch[2], attrMatch[3]);\n                }\n            }\n        }\n\n        /**\n         * @param {CssRule[]|String} rules\n         */\n        function readRules(rules) {\n            var selector = '';\n\n            if (!rules) {\n                return;\n            }\n\n            if ('string' === typeof rules) {\n                rules = rules.toLowerCase();\n                if (-1 !== rules.indexOf('min-width') || -1 !== rules.indexOf('max-width')) {\n                    extractQuery(rules);\n                }\n            } else {\n                for (var i = 0, j = rules.length; i < j; i++) {\n                    if (1 === rules[i].type) {\n                        selector = rules[i].selectorText || rules[i].cssText;\n                        if (-1 !== selector.indexOf('min-height') || -1 !== selector.indexOf('max-height')) {\n                            extractQuery(selector);\n                        } else if (-1 !== selector.indexOf('min-width') || -1 !== selector.indexOf('max-width')) {\n                            extractQuery(selector);\n                        }\n                    } else if (4 === rules[i].type) {\n                        readRules(rules[i].cssRules || rules[i].rules);\n                    } else if (3 === rules[i].type) {\n                        if(rules[i].styleSheet.hasOwnProperty(\"cssRules\")) {\n                            readRules(rules[i].styleSheet.cssRules);\n                        }\n                    }\n                }\n            }\n        }\n\n        var defaultCssInjected = false;\n\n        /**\n         * Searches all css rules and setups the event listener to all elements with element query rules..\n         */\n        this.init = function () {\n            var animationStart = 'animationstart';\n            if (typeof document.documentElement.style['webkitAnimationName'] !== 'undefined') {\n                animationStart = 'webkitAnimationStart';\n            } else if (typeof document.documentElement.style['MozAnimationName'] !== 'undefined') {\n                animationStart = 'mozanimationstart';\n            } else if (typeof document.documentElement.style['OAnimationName'] !== 'undefined') {\n                animationStart = 'oanimationstart';\n            }\n\n            document.body.addEventListener(animationStart, function (e) {\n                var element = e.target;\n                var styles = element && window.getComputedStyle(element, null);\n                var animationName = styles && styles.getPropertyValue('animation-name');\n                var requiresSetup = animationName && (-1 !== animationName.indexOf('element-queries'));\n\n                if (requiresSetup) {\n                    element.elementQueriesSensor = new ResizeSensor(element, function () {\n                        if (element.elementQueriesSetupInformation) {\n                            element.elementQueriesSetupInformation.call();\n                        }\n                    });\n\n                    var sensorStyles = window.getComputedStyle(element.resizeSensor, null);\n                    var id = sensorStyles.getPropertyValue('min-width');\n                    id = parseInt(id.replace('px', ''));\n                    setupElement(e.target, idToSelectorMapping[id]);\n                }\n            });\n\n            if (!defaultCssInjected) {\n                cssStyleElement = document.createElement('style');\n                cssStyleElement.type = 'text/css';\n                cssStyleElement.innerHTML = '[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}';\n\n                //safari wants at least one rule in keyframes to start working\n                cssStyleElement.innerHTML += '\\n@keyframes element-queries { 0% { visibility: inherit; } }';\n                document.getElementsByTagName('head')[0].appendChild(cssStyleElement);\n                defaultCssInjected = true;\n            }\n\n            for (var i = 0, j = document.styleSheets.length; i < j; i++) {\n                try {\n                    if (document.styleSheets[i].href && 0 === document.styleSheets[i].href.indexOf('file://')) {\n                        console.warn(\"CssElementQueries: unable to parse local css files, \" + document.styleSheets[i].href);\n                    }\n\n                    readRules(document.styleSheets[i].cssRules || document.styleSheets[i].rules || document.styleSheets[i].cssText);\n                } catch (e) {\n                }\n            }\n\n            findResponsiveImages();\n        };\n\n        /**\n         * Go through all collected rules (readRules()) and attach the resize-listener.\n         * Not necessary to call it manually, since we detect automatically when new elements\n         * are available in the DOM. However, sometimes handy for dirty DOM modifications.\n         *\n         * @param {HTMLElement} container only elements of the container are considered (document.body if not set)\n         */\n        this.findElementQueriesElements = function (container) {\n            findElementQueriesElements(container);\n        };\n\n        this.update = function () {\n            this.init();\n        };\n    };\n\n    ElementQueries.update = function () {\n        ElementQueries.instance.update();\n    };\n\n    /**\n     * Removes all sensor and elementquery information from the element.\n     *\n     * @param {HTMLElement} element\n     */\n    ElementQueries.detach = function (element) {\n        if (element.elementQueriesSetupInformation) {\n            //element queries\n            element.elementQueriesSensor.detach();\n            delete element.elementQueriesSetupInformation;\n            delete element.elementQueriesSensor;\n\n        } else if (element.resizeSensorInstance) {\n            //responsive image\n\n            element.resizeSensorInstance.detach();\n            delete element.resizeSensorInstance;\n        }\n    };\n\n    ElementQueries.init = function () {\n        if (!ElementQueries.instance) {\n            ElementQueries.instance = new ElementQueries();\n        }\n\n        ElementQueries.instance.init();\n    };\n\n    var domLoaded = function (callback) {\n        /* Mozilla, Chrome, Opera */\n        if (document.addEventListener) {\n            document.addEventListener('DOMContentLoaded', callback, false);\n        }\n        /* Safari, iCab, Konqueror */\n        else if (/KHTML|WebKit|iCab/i.test(navigator.userAgent)) {\n            var DOMLoadTimer = setInterval(function () {\n                if (/loaded|complete/i.test(document.readyState)) {\n                    callback();\n                    clearInterval(DOMLoadTimer);\n                }\n            }, 10);\n        }\n        /* Other web browsers */\n        else window.onload = callback;\n    };\n\n    ElementQueries.findElementQueriesElements = function (container) {\n        ElementQueries.instance.findElementQueriesElements(container);\n    };\n\n    ElementQueries.listen = function () {\n        domLoaded(ElementQueries.init);\n    };\n\n    return ElementQueries;\n\n}));\n","'use strict';\n\n/**\n * Copyright Marc J. Schmidt. See the LICENSE file at the top-level\n * directory of this distribution and at\n * https://github.com/marcj/css-element-queries/blob/master/LICENSE.\n */\n(function (root, factory) {\n    if (typeof define === \"function\" && define.amd) {\n        define(factory);\n    } else if (typeof exports === \"object\") {\n        module.exports = factory();\n    } else {\n        root.ResizeSensor = factory();\n    }\n}(typeof window !== 'undefined' ? window : this, function () {\n\n    // Make sure it does not throw in a SSR (Server Side Rendering) situation\n    if (typeof window === \"undefined\") {\n        return null;\n    }\n    // https://github.com/Semantic-Org/Semantic-UI/issues/3855\n    // https://github.com/marcj/css-element-queries/issues/257\n    var globalWindow = typeof window != 'undefined' && window.Math == Math\n        ? window\n        : typeof self != 'undefined' && self.Math == Math\n            ? self\n            : Function('return this')();\n    // Only used for the dirty checking, so the event callback count is limited to max 1 call per fps per sensor.\n    // In combination with the event based resize sensor this saves cpu time, because the sensor is too fast and\n    // would generate too many unnecessary events.\n    var requestAnimationFrame = globalWindow.requestAnimationFrame ||\n        globalWindow.mozRequestAnimationFrame ||\n        globalWindow.webkitRequestAnimationFrame ||\n        function (fn) {\n            return globalWindow.setTimeout(fn, 20);\n        };\n\n    var cancelAnimationFrame = globalWindow.cancelAnimationFrame ||\n        globalWindow.mozCancelAnimationFrame ||\n        globalWindow.webkitCancelAnimationFrame ||\n        function (timer) {\n            globalWindow.clearTimeout(timer);\n        };\n\n    /**\n     * Iterate over each of the provided element(s).\n     *\n     * @param {HTMLElement|HTMLElement[]} elements\n     * @param {Function}                  callback\n     */\n    function forEachElement(elements, callback){\n        var elementsType = Object.prototype.toString.call(elements);\n        var isCollectionTyped = ('[object Array]' === elementsType\n            || ('[object NodeList]' === elementsType)\n            || ('[object HTMLCollection]' === elementsType)\n            || ('[object Object]' === elementsType)\n            || ('undefined' !== typeof jQuery && elements instanceof jQuery) //jquery\n            || ('undefined' !== typeof Elements && elements instanceof Elements) //mootools\n        );\n        var i = 0, j = elements.length;\n        if (isCollectionTyped) {\n            for (; i < j; i++) {\n                callback(elements[i]);\n            }\n        } else {\n            callback(elements);\n        }\n    }\n\n    /**\n    * Get element size\n    * @param {HTMLElement} element\n    * @returns {Object} {width, height}\n    */\n    function getElementSize(element) {\n        if (!element.getBoundingClientRect) {\n            return {\n                width: element.offsetWidth,\n                height: element.offsetHeight\n            }\n        }\n\n        var rect = element.getBoundingClientRect();\n        return {\n            width: Math.round(rect.width),\n            height: Math.round(rect.height)\n        }\n    }\n\n    /**\n     * Apply CSS styles to element.\n     *\n     * @param {HTMLElement} element\n     * @param {Object} style\n     */\n    function setStyle(element, style) {\n        Object.keys(style).forEach(function(key) {\n            element.style[key] = style[key];\n        });\n    }\n\n    /**\n     * Class for dimension change detection.\n     *\n     * @param {Element|Element[]|Elements|jQuery} element\n     * @param {Function} callback\n     *\n     * @constructor\n     */\n    var ResizeSensor = function(element, callback) {\n        //Is used when checking in reset() only for invisible elements\n        var lastAnimationFrameForInvisibleCheck = 0;\n\n        /**\n         *\n         * @constructor\n         */\n        function EventQueue() {\n            var q = [];\n            this.add = function(ev) {\n                q.push(ev);\n            };\n\n            var i, j;\n            this.call = function(sizeInfo) {\n                for (i = 0, j = q.length; i < j; i++) {\n                    q[i].call(this, sizeInfo);\n                }\n            };\n\n            this.remove = function(ev) {\n                var newQueue = [];\n                for(i = 0, j = q.length; i < j; i++) {\n                    if(q[i] !== ev) newQueue.push(q[i]);\n                }\n                q = newQueue;\n            };\n\n            this.length = function() {\n                return q.length;\n            }\n        }\n\n        /**\n         *\n         * @param {HTMLElement} element\n         * @param {Function}    resized\n         */\n        function attachResizeEvent(element, resized) {\n            if (!element) return;\n            if (element.resizedAttached) {\n                element.resizedAttached.add(resized);\n                return;\n            }\n\n            element.resizedAttached = new EventQueue();\n            element.resizedAttached.add(resized);\n\n            element.resizeSensor = document.createElement('div');\n            element.resizeSensor.dir = 'ltr';\n            element.resizeSensor.className = 'resize-sensor';\n\n            var style = {\n                pointerEvents: 'none',\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                overflow: 'hidden',\n                zIndex: '-1',\n                visibility: 'hidden',\n                maxWidth: '100%'\n            };\n            var styleChild = {\n                position: 'absolute',\n                left: '0px',\n                top: '0px',\n                transition: '0s',\n            };\n\n            setStyle(element.resizeSensor, style);\n\n            var expand = document.createElement('div');\n            expand.className = 'resize-sensor-expand';\n            setStyle(expand, style);\n\n            var expandChild = document.createElement('div');\n            setStyle(expandChild, styleChild);\n            expand.appendChild(expandChild);\n\n            var shrink = document.createElement('div');\n            shrink.className = 'resize-sensor-shrink';\n            setStyle(shrink, style);\n\n            var shrinkChild = document.createElement('div');\n            setStyle(shrinkChild, styleChild);\n            setStyle(shrinkChild, { width: '200%', height: '200%' });\n            shrink.appendChild(shrinkChild);\n\n            element.resizeSensor.appendChild(expand);\n            element.resizeSensor.appendChild(shrink);\n            element.appendChild(element.resizeSensor);\n\n            var computedStyle = window.getComputedStyle(element);\n            var position = computedStyle ? computedStyle.getPropertyValue('position') : null;\n            if ('absolute' !== position && 'relative' !== position && 'fixed' !== position && 'sticky' !== position) {\n                element.style.position = 'relative';\n            }\n\n            var dirty = false;\n\n            //last request animation frame id used in onscroll event\n            var rafId = 0;\n            var size = getElementSize(element);\n            var lastWidth = 0;\n            var lastHeight = 0;\n            var initialHiddenCheck = true;\n            lastAnimationFrameForInvisibleCheck = 0;\n\n            var resetExpandShrink = function () {\n                var width = element.offsetWidth;\n                var height = element.offsetHeight;\n\n                expandChild.style.width = (width + 10) + 'px';\n                expandChild.style.height = (height + 10) + 'px';\n\n                expand.scrollLeft = width + 10;\n                expand.scrollTop = height + 10;\n\n                shrink.scrollLeft = width + 10;\n                shrink.scrollTop = height + 10;\n            };\n\n            var reset = function() {\n                // Check if element is hidden\n                if (initialHiddenCheck) {\n                    var invisible = element.offsetWidth === 0 && element.offsetHeight === 0;\n                    if (invisible) {\n                        // Check in next frame\n                        if (!lastAnimationFrameForInvisibleCheck){\n                            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                                lastAnimationFrameForInvisibleCheck = 0;\n                                reset();\n                            });\n                        }\n\n                        return;\n                    } else {\n                        // Stop checking\n                        initialHiddenCheck = false;\n                    }\n                }\n\n                resetExpandShrink();\n            };\n            element.resizeSensor.resetSensor = reset;\n\n            var onResized = function() {\n                rafId = 0;\n\n                if (!dirty) return;\n\n                lastWidth = size.width;\n                lastHeight = size.height;\n\n                if (element.resizedAttached) {\n                    element.resizedAttached.call(size);\n                }\n            };\n\n            var onScroll = function() {\n                size = getElementSize(element);\n                dirty = size.width !== lastWidth || size.height !== lastHeight;\n\n                if (dirty && !rafId) {\n                    rafId = requestAnimationFrame(onResized);\n                }\n\n                reset();\n            };\n\n            var addEvent = function(el, name, cb) {\n                if (el.attachEvent) {\n                    el.attachEvent('on' + name, cb);\n                } else {\n                    el.addEventListener(name, cb);\n                }\n            };\n\n            addEvent(expand, 'scroll', onScroll);\n            addEvent(shrink, 'scroll', onScroll);\n\n            // Fix for custom Elements and invisible elements\n            lastAnimationFrameForInvisibleCheck = requestAnimationFrame(function(){\n                lastAnimationFrameForInvisibleCheck = 0;\n                reset();\n            });\n        }\n\n        forEachElement(element, function(elem){\n            attachResizeEvent(elem, callback);\n        });\n\n        this.detach = function(ev) {\n            // clean up the unfinished animation frame to prevent a potential endless requestAnimationFrame of reset\n            if (!lastAnimationFrameForInvisibleCheck) {\n                cancelAnimationFrame(lastAnimationFrameForInvisibleCheck);\n                lastAnimationFrameForInvisibleCheck = 0;\n            }\n            ResizeSensor.detach(element, ev);\n        };\n\n        this.reset = function() {\n            element.resizeSensor.resetSensor();\n        };\n    };\n\n    ResizeSensor.reset = function(element) {\n        forEachElement(element, function(elem){\n            elem.resizeSensor.resetSensor();\n        });\n    };\n\n    ResizeSensor.detach = function(element, ev) {\n        forEachElement(element, function(elem){\n            if (!elem) return;\n            if(elem.resizedAttached && typeof ev === \"function\"){\n                elem.resizedAttached.remove(ev);\n                if(elem.resizedAttached.length()) return;\n            }\n            if (elem.resizeSensor) {\n                if (elem.contains(elem.resizeSensor)) {\n                    elem.removeChild(elem.resizeSensor);\n                }\n                delete elem.resizeSensor;\n                delete elem.resizedAttached;\n            }\n        });\n    };\n\n    if (typeof MutationObserver !== \"undefined\") {\n        var observer = new MutationObserver(function (mutations) {\n            for (var i in mutations) {\n                if (mutations.hasOwnProperty(i)) {\n                    var items = mutations[i].addedNodes;\n                    for (var j = 0; j < items.length; j++) {\n                        if (items[j].resizeSensor) {\n                            ResizeSensor.reset(items[j]);\n                        }\n                    }\n                }\n            }\n        });\n\n        document.addEventListener(\"DOMContentLoaded\", function (event) {\n            observer.observe(document.body, {\n                childList: true,\n                subtree: true,\n            });\n        });\n    }\n\n    return ResizeSensor;\n\n}));\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = jQuery;","import $ from 'jquery';\n\n/**\n * Performs a REST Call\n * \n * @return null\n */\n\nexport function restCall( parameters ){\n    // Define the valid endpoints\n    let validEndpoints = [ 'change_user_progress' ];\n\n    // Check if the endPoint parameter is a valid endpoint\n    if ( validEndpoints.includes( parameters.endpoint ) ){\n        // Do AJAX\n        $.ajax({\n            method: 'POST',\n            url:    parameters.url + parameters.endpoint + '/',\n            data:   $.param( parameters.data ) + '&' + $.param({ doing_rest: 1 }),\n\n            // Attach Nonce the the header of the request\n            beforeSend: function( xhr ){\n                xhr.setRequestHeader( 'X-WP-Nonce', parameters.nonce );\n            },\n\n            success: function( response ){\n\n                // Check if onDone is defined\n                if ( isDefined( parameters.onDone ) ){\n                    // Invoke callback\n                    parameters.onDone( response );\n                }\n\n                // Check if onSuccess is defined\n                if ( isDefined( parameters.onSuccess ) ){\n                    // Invoke callback\n                    parameters.onSuccess( response );\n                }\n            },\n\n            statusCode: {\n                403: function(){\n                    location.reload();\n                }\n            },\n\n            fail: function ( response ){\n                // Check if onDone is defined\n                if ( isDefined( parameters.onDone ) ){\n                    // Invoke callback\n                    parameters.onDone( response );\n                }\n                \n                if ( isDefined( parameters.onFail ) ){\n                    parameters.onFail( response );\n                }\n            },\n        });\n    }\n    else {\n        console.error( `The ${ parameters.endpoint } endPoint does not exists` );\n    }\n}\n\n/**\n * Determine if a variable is set and is not NULL\n *\n * @param  {mixed}      variable - The variable being evaluated\n * @return {boolean}    TRUE if the variable is defined\n */\n\nexport const isDefined = ( variable ) => {\n\t// Returns true if the variable is undefined\n    return typeof variable !== 'undefined' && variable !== null;\n}\n\n/**\n * Determine whether a variable is empty\n *\n * @param   {mixed}     variable - The variable being evaluated\n * @return  {boolean}   TRUE if the variable is empty\n */\n\nexport const isEmpty = ( variable ) => {\n    let response = true;\n\n    // Check if the variable is defined, otherwise is empty\n    if ( isDefined( variable ) ){\n        // Check if it's array\n        if ( variable.isArray ){\n            response = variable.length == 0;\n        }\n        else if ( isObject( variable ) ){\n            response = Object.keys( variable ).length;\n        }\n        else {\n            response = variable == '';\n        }\n    }\n\n    return response;\n}\n\n/**\n * Determine whether a variable is an object\n *\n * @param   {mixed}     variable - The variable being evaluated\n * @return  {boolean}   TRUE if the variable is an object\n */\n\nexport const isObject = ( variable ) => {\n    return typeof variable === 'object' && variable !== null;\n}\n\n/**\n * Format number\n * @param  {float}  amount        The number\n * @param  {int}    decimalCount  Number of decimals\n * @param  {string} decimal       The decimal separator\n * @param  {string} thousands     The thousands separator\n * @return {string}               Formatted number\n */\n\nexport const formatNumber = ( amount, decimalCount = 2, decimal = '.', thousands = ',' ) => {\n    decimalCount = Math.abs( decimalCount );\n    decimalCount = isNaN( decimalCount ) ? 2 : decimalCount;\n\n    let i = parseInt( amount = Math.abs( Number( amount ) || 0 ).toFixed( decimalCount ) ).toString();\n    let j = ( i.length > 3 ) ? i.length % 3 : 0;\n\n    return ( j ? i.substr( 0, j ) + thousands : '' ) + i.substr( j ).replace( /(\\d{3})(?=\\d)/g, '$1' + thousands ) + ( decimalCount ? decimal + Math.abs( amount - i ).toFixed( decimalCount ).slice( 2 ) : '' );\n};\n\n/**\n * Destroy iCheck\n */\n\nexport const destroyiCheck = () => {\n    // Check iCheck\n    if ( typeof jQuery.fn.iCheck !== 'undefined' ){\n        // Destroy iCheck checkboxes\n        jQuery( '.uo-checkbox input' ).iCheck( 'destroy' );\n        jQuery( '.uo-checkbox input' ).on( 'ifCreated', function( event ){\n            // Destroy iCheck\n            setTimeout(function(){\n                jQuery( event.currentTarget ).iCheck( 'destroy' );\n            }, 100 );\n        });\n    }  \n}\n\n/**\n * Debounces a function\n *\n * @param {Function} func     The function to debounce\n * @param {Integer}  interval The interval, in milliseconds\n * @return {Function}         The function debounced\n */\nexport const debounce = ( func, interval ) => {\n\tlet lastCall = -1;\n\n\treturn () => {\n\t\tclearTimeout( lastCall );\n\t\t// eslint-disable-next-line no-undef\n\t\tconst args = arguments;\n\t\tconst self = this;\n\t\tlastCall = setTimeout( () => {\n\t\t\tfunc.apply( self, args );\n\t\t}, interval );\n\t};\n};\n","import {\n\tdestroyiCheck\n} from './utilities';\n\n(function($){\n\t$(document).ready(function(){\n\t\thide_sort_buttons();\n\t\tcopy_to_clipboard();\n\t\tux_buttons();\n\t\thide_tables_while_loading();\n\n\t\tdestroyiCheck();\n\t});\n\n\tfunction hide_sort_buttons(){\n\t\tvar sort_buttons_container = $('.uo-table-sort-buttons');\n\t\tsort_buttons_container.on('click', '.uo-table-sort-btn', function(){\n\t\t\tvar closest_group = $(this).closest('.uo-table-sort-buttons'),\n\t\t\t\tdirection = $(this).data('direction');\n\t\t\t$(this).hide();\n\t\t\tclosest_group.find('.uo-table-sort-btn:not([data-direction=\"'+direction+'\"])').show();\n\t\t});\n\t}\n\n\tfunction copy_to_clipboard(){\n\t\tvar button = $('.uo-copy-to-clipboard-button');\n\t\tbutton.click(function(){\n\t\t\tvar container = $(this).closest('.uo-copy-to-clipboard'),\n\t\t\t\tinput = $(container.find('input'));\n\t\t\tinput.select();\n\t\t\tdocument.execCommand('Copy');\n\t\t});\n\t}\n\n\tfunction ux_buttons(){\n\t\t// group-management > enrolled users Hide \"Add user\" when an user is selected in the table\n\t\tvar btn_add_users = $('#uo_add_users_button');\n\n\t\t/* enrolled_user_checkboxes.change(function(){\n\t\t\tvar at_least_one_selected = enrolled_user_checkboxes.is(':checked');\n\n\t\t\tif (at_least_one_selected) {\n                //btn_add_users.hide();\n            }else {\n                //btn_add_users.show();\n            }\n\t\t}); */\n\n\t\t$( '#uo-open-bulk-add' ).on( 'click', function(){\n\t\t\tlet container = $( '.uo-groups-bulk' );\n\t\t\tcontainer.slideToggle( 500 );\n\n\t\t\t$( 'html, body' ).animate({\n\t\t\t\tscrollTop: container.offset().top - 100\n\t\t\t}, 500);\n\t\t});\n\n\t\t$( '.uo-groups-bulk-close' ).on( 'click', function(){\n\t\t\tlet container = $( '.uo-groups-bulk' );\n\t\t\tcontainer.slideToggle( 500 );\n\t\t});\n\n\t\t// group-management > group leaders Hide \"Add group leader\" when a leader is selected in the table\n\t\tvar group_leaders_checkboxes = $('.uo-groups-group-leaders input[name=\"group-leader-id[]\"], .uo-groups-enrolled-users input#select-all-group-leaders'),\n\t\t\tbtn_add_leader = $('.uo-groups-group-leaders .uo-btn[data-modal-id=\"#group-management-add-group-leader\"]');\n\n\t\tgroup_leaders_checkboxes.on('change', function(){\n\t\t\tvar at_least_one_selected = group_leaders_checkboxes.is(':checked');\n\n\t\t\tif (at_least_one_selected)\n\t\t\t\tbtn_add_leader.hide();\n\t\t\telse\n\t\t\t\tbtn_add_leader.show();\n\t\t});\n\n\t\t// Group buttons in small devices\n\t\t$( '.uo-groups-list-of-btns-main' ).click( function( event ){\n\t\t\t// Get the clicked button\n\t\t\tvar $currentButton    = $( event.currentTarget ),\n\t\t\t// then get the group id\n\t\t\t\tgroupId           = $currentButton.data( 'id' ),\n\t\t\t// and get the direction\n\t\t\t\tdropdownDirection = typeof $currentButton.data( 'direction' ) == 'undefined' ? 'right' : $currentButton.data( 'direction' );\n\n\t\t\t// Once we have the group id, get the main container, which contains the items to show\n\t\t\tvar $targetGroup   = $( '.uo-groups-list-of-btns[data-id=\"' + groupId + '\"]' );\n\n\t\t\t// Check if the group exists\n\t\t\tif ( $targetGroup.length == 1 ){\n\t\t\t\t// Check if it's open\n\t\t\t\tvar isGroupOpen = $targetGroup.hasClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t// Check if it's closed\n\t\t\t\tif ( ! isGroupOpen ){\n\t\t\t\t\t// Add class to show it\n\t\t\t\t\t$targetGroup.addClass( 'uo-groups-list-of-btns-open' );\n\n\t\t\t\t\t// Add the class to set the direction\n\t\t\t\t\tif ( dropdownDirection == 'left' || dropdownDirection == 'right' ){\n\t\t\t\t\t\t$targetGroup.addClass( 'uo-groups-list-of-btns--' + dropdownDirection );\n\t\t\t\t\t}\n\n\t\t\t\t\tbind_click_outside();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Remove class to show the group\n\t\t\t\t\t$targetGroup.removeClass( 'uo-groups-list-of-btns-open' );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tconsole.error( 'We couldn\\'t find the dropdown' );\n\t\t\t}\n\t\t});\n\n\t\t// Close if clicks on a button inside a list of buttons\n\t\tvar btns_inside_list = $('.uo-groups-list-of-btns .uo-groups-list .uo-btn');\n\t\tbtns_inside_list.click(function(){\n\t\t\tvar group = $(this).closest('.uo-groups-list-of-btns');\n\t\t\tgroup.removeClass('uo-groups-list-of-btns-open')\n\t\t});\n\n\t\tfunction bind_click_outside(){\n\t\t\t// Close if user taps outside\n\t\t\t$(document).mouseup(function(e){\n\t\t\t\tvar container = $('.uo-groups-list-of-btns');\n\t\t\t\tif (!container.is(e.target) && container.has(e.target).length === 0){\n\t\t\t\t\tcontainer.removeClass('uo-groups-list-of-btns-open');\n\t\t\t\t\tunbind_click_outside();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tfunction unbind_click_outside(){\n\t\t\t$('.uo-groups-list-of-btns').unbind('click', $(document)); \n\t\t}\n\t}\n\n\tfunction hide_tables_while_loading(){\n\t\t// /group-management-report/\n\t\tvar progress_report = $('#uo-group-progress-report'),\n\t\t\ttriggers = $('.uo-groups.uo-reports #group-report select.change-group-management-form');\n\n\t\ttriggers.change(function(){\n\t\t\tprogress_report.hide();\n\t\t});\n\t}\n})(jQuery);\n","import $ from 'jquery';\n\nimport { debounce, isEmpty } from './utilities';\n\nclass GroupManagement {\n\tconstructor(){\n\t\t// Check if it's the group management page\n\t\tif (this.isGroupManagement()) {\n\t\t\t// Create enrolled users table\n\t\t\tnew EnrolledUsersTable();\n\n\t\t\t// Setup modal popups\n\t\t\twindow.ulgmGroupManagement.groupManagementModal = new modals();\n\t\t}\n\t}\n\n\tisGroupManagement(){\n\t\treturn $( '#group-management' ).length == 1;\n\t}\n}\n\nclass modals {\n\tconstructor(){\n\t\t$( document ).on( 'modal:open', function ( e ){\n\t\t\tif (e.target.id === 'group-management-email-users') {\n\t\t\t\twp.editor.remove( 'group_email_text' );\n\t\t\t\twp.editor.initialize( 'group_email_text',\n\t\t\t\t\t{\n\t\t\t\t\t\ttinymce: {\n\t\t\t\t\t\t\tmin_height: 300,\n\t\t\t\t\t\t\tformats: {\n\t\t\t\t\t\t\t\talignleft: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"left\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"alignleft\"}],\n\t\t\t\t\t\t\t\taligncenter: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"center\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"aligncenter\"}],\n\t\t\t\t\t\t\t\talignright: [{\n\t\t\t\t\t\t\t\t\tselector: \"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li\",\n\t\t\t\t\t\t\t\t\tstyles: {textAlign: \"right\"}\n\t\t\t\t\t\t\t\t}, {selector: \"img,table,dl.wp-caption\", classes: \"alignright\"}],\n\t\t\t\t\t\t\t\tstrikethrough: {inline: \"del\"}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttoolbar1: 'formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor emoticons',\n\t\t\t\t\t\t\tplugins: \"charmap colorpicker hr lists media paste tabfocus textcolor fullscreen wordpress wpautoresize wpeditimage wpemoji wpgallery wplink wpdialogs wptextpattern wpview\"\n\t\t\t\t\t\t},\n\t\t\t\t\t\tquicktags: {\n\t\t\t\t\t\t\tbuttons: 'strong,em,link,ul,ol,li,code'\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t}\n\t\t} );\n\n\t\t// Add events for the group management page\n\t\tthis.addGroupManagementEvents();\n\t}\n\n\taddGroupManagementEvents(){\n\n\t\t// Clear file so we get a fresh copy every time\n\t\t$( \"#csv-file\" ).on( 'click', function (){\n\t\t\t$( this ).val( '' );\n\t\t} );\n\n\t\t// There may be other plugin/themes that are using this modal or using the same trigger. let customize the trigger\n\t\t$( 'body' ).on( 'click', '.ulgm-modal-link', this.openModal );\n\n\t\t// User csv file input change\n\t\t$( '#csv-file' ).on( 'change', this.parseCsv );\n\n\t\t//Hide inupts dependent on radio\n\t\t$( \"input:radio[name=action]\" ).click( function (){\n\t\t\tvar value          = $( this ).val();\n\t\t\tvar modalContainer = $( this ).parent();\n\n\t\t\tmodalContainer.children( '#first-name, #last-name, #email, label[for=first-name], label[for=last-name], label[for=email-name]' ).show();\n            $('#uo_add_user_password').show();\n\n\t\t\tif ('send-enrollment' === value || 'add-existing-user' === value) {\n\t\t\t\tmodalContainer.children( '#first-name, #last-name, label[for=first-name], label[for=last-name]' ).hide();\n\t\t\t\t$('#uo_add_user_password').hide();\n\t\t\t}\n\n\t\t} );\n\n\t\twindow.ulgmGroupManagement.downloadCsv = function ( csv ){\n\t\t\tvar blob = new Blob( [csv.csvDataString], {type: \"text/csv;charset=utf-8\"} );\n\t\t\tsaveAs( blob, csv.fileName + \".csv\" );\n\t\t};\n\t}\n\n\topenModal( e ){\n\t\te.preventDefault();\n\n\t\t// clear any error messages\n\t\t$( '.group-management-form' ).find( '.group-management-rest-message' ).html( '' ).hide();\n\n\t\tvar modalId   = $( this ).data( 'modal-id' );\n\t\tvar modalAjax = $( this ).data( 'modal-ajax' );\n\n\t\tif (modalAjax == true) {\n\t\t\tvar endpoint = $( this ).data( 'endpoint' );\n\t\t\tvar user     = $( this ).data( 'user-id' );\n\t\t\tvar group    = $( this ).data( 'group-id' );\n\t\t\tvar restData = {'action': 'get-user-details', 'user': user, 'group-id': group};\n\t\t\tvar spinner  = $( '.uo-modal-spinner' );\n\n\t\t\t$.ajax( {\n\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: ulgmRestApiSetup.root + endpoint + '/',\n\t\t\t\tdata: restData,\n\n\t\t\t\t// Attach Nonce the the header of the request\n\t\t\t\tbeforeSend: function ( xhr ){\n\t\t\t\t\txhr.setRequestHeader( 'X-WP-Nonce', ulgmRestApiSetup.nonce );\n\t\t\t\t},\n\n\t\t\t\tstatusCode: {\n\t\t\t\t\t403: function ( xhr ){\n\t\t\t\t\t\tspinner.hide();\n\t\t\t\t\t\t$error_container.html( ulgmRestApiSetup.i18n.youCantDoThat ).show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tsuccess: function ( response ){\n\n\t\t\t\t\tfor (var x in response.data) {\n\t\t\t\t\t\tif ($( '#' + x ).length > 0) {\n\t\t\t\t\t\t\t$( '#' + x ).val( response.data[x].value );\n\t\t\t\t\t\t\tif (response.data[x].is_editable == false) {\n\t\t\t\t\t\t\t\t$( '#' + x ).attr( 'disabled', 'disabled' );\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\tif (true === response.success) {\n\t\t\t\t\t\tvar modal = $( modalId );\n\t\t\t\t\t\tmodal.modal();\n\n\t\t\t\t\t\t$( '#group-management' ).trigger( 'modal-open', [modalId, modal] );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tspinner.hide();\n\n\t\t\t\t\t\t$error_container\n\t\t\t\t\t\t\t.html( response.data.message )\n\t\t\t\t\t\t\t.show();\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\tfail: function ( response ){\n\t\t\t\t\tspinner.hide();\n\t\t\t\t\t$error_container.html( response.data.message );\n\t\t\t\t},\n\n\t\t\t} );\n\n\t\t} else {\n\t\t\tvar modal = $( modalId );\n\t\t\tmodal.modal();\n\n\t\t\t$( '#group-management' ).trigger( 'modal-open', [modalId, modal] );\n\t\t}\n\t}\n\n\tparseCsv( e ){\n\n\t\tvar input            = $( this );\n\t\tvar messageContainer = $( input.closest( '.group-management-form' ) ).find( '.group-management-rest-message' )\n\n\t\t// Reset Message\n\t\tmessageContainer.hide();\n\t\tmessageContainer.text( '' );\n\n\t\ttry {\n\t\t\tvar reader = new FileReader();\n\t\t\t//do something\n\t\t} catch (e) {\n\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.file_api_is_not_supported ).css( 'display', 'inline-flex' );\n\t\t\treturn false;\n\t\t}\n\n\t\tvar file    = $( '#csv-file' )[0].files[0];\n\t\tvar csvText = false;\n\n\n\t\tif (file) {\n\t\t\t// check is csv extension\n\t\t\tif ('csv' !== file.name.split( '.' ).pop()) {\n\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.select_a_csv ).css( 'display', 'inline-flex' );\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treader.readAsText( file );\n\n\t\t\treader.onload = function ( e ){\n\n\t\t\t\tcsvText = e.target.result;\n\n\t\t\t\tif (!csvText) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.csv_file_error ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// split file text on line breaks\n\t\t\t\tvar csvArray = csvText.split( /\\r?\\n/g );\n\n\t\t\t\t// Preliminary checks\n\n\t\t\t\t// Pull out the header and store it\n\n\t\t\t\tvar csvHead = csvArray.shift();\n\n\t\t\t\tlet delimiter = \",\";\n\t\t\t\tif (csvHead.indexOf( \";\" ) !== -1) {\n\t\t\t\t\tdelimiter = \";\";\n\t\t\t\t}\n\n\n\t\t\t\tcsvHead = csvHead.split( delimiter );\n\n\t\t\t\t// Something is off ... create to detect CR only line breaks where CRLF is only supported but may detect other malformations\n\t\t\t\tif (csvHead.length !== 3 && csvArray.length === 0) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.incompatible_format ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Remove last line of csv that is always blank\n\t\t\t\tcsvArray.pop();\n\n\t\t\t\t// Require emails\n\t\t\t\tvar emailIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'user_email' );\n\t\t\t\tif ('error' === emailIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_email ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Require user first name\n\t\t\t\tvar firstNameIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'first_name' );\n\t\t\t\tif ('error' === firstNameIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_first ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t// Require user first name\n\t\t\t\tvar lastNameIndex = window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader( csvHead, 'last_name' );\n\t\t\t\tif ('error' === lastNameIndex) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.not_contains_last ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar newArray = csvArray.map( function mapper( v ){\n\t\t\t\t\tif (typeof v == \"string\") {\n\t\t\t\t\t\treturn v.split( delimiter );\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn v.map( mapper );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\n\t\t\t\t// Check for blank lines\n\t\t\t\tvar emptyRows = window.ulgmGroupManagement.groupManagementModal.verifyEmptyRows( newArray, emailIndex );\n\n\t\t\t\tif (emptyRows) {\n\t\t\t\t\tmessageContainer.text( ulgmGroupManagementLocalized.text.must_contain_email ).css( 'display', 'inline-flex' );\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\t$( '#csv-text' ).val( csvText );\n\n\n\t\t\t};\n\t\t} else {\n\t\t\t$( input.closest( '.group-management-form' ) ).find( '.group-management-rest-message' ).text( ulgmGroupManagementLocalized.text.choose_file );\n\t\t\treturn false;\n\t\t}\n\n\t}\n\n\tverifyEmptyRows( array, emailIndex ){\n\n\t\tfor (var i = 0; i < array.length; ++i) {\n\t\t\tif (array[i][emailIndex] === '') {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tverifyRequiredHeader( headerArray, type ){\n\n\t\tvar columnsAmount = 0;\n\t\tvar columnIndex   = false;\n\t\tfor (var i = 0; i < headerArray.length; i++) {\n\t\t\tif (headerArray[i] === type) {\n\t\t\t\tcolumnsAmount++;\n\t\t\t\tcolumnIndex = i;\n\t\t\t}\n\t\t}\n\n\t\tif (0 === columnsAmount) {\n\t\t\treturn 'error';\n\n\t\t}\n\n\t\tif (1 !== columnsAmount) {\n\t\t\treturn 'error';\n\t\t}\n\n\t\treturn columnIndex;\n\n\t}\n}\n\nclass EnrolledUsersTable {\n\tconstructor(){\n\t\t// Check if it has the enrolled users table\n\t\tif (this.hasEnrolledUsersTable()) {\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Get data\n\t\t\tthis.getData();\n\n\t\t\t// Add select2\n\t\t\tthis.addSelect2();\n\n\t\t\t// Create DataTable\n\t\t\tthis.createDataTables();\n\n\t\t\t// Listen the checkbox to select all the users\n\t\t\tthis.listenCheckboxToSelectAll();\n\n\t\t\t// Listen checkboxes changes\n\t\t\tthis.listenCheckboxesChanges();\n\n\t\t\t// Listen modal open and update data\n\t\t\tthis.updateDataOnModal();\n\n\t\t\t// Check if the \"First name\" and \"Last name\" fields when adding new users must be required\n\t\t\tthis.firstLastNamesRequired();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tcontainer: $( '#group-management' ),\n\t\t\tselectEl: $( '.uo-groups select' ),\n\t\t\tenrolledUsersTableDT: $( '#group-management-enrolled-users-datatable' ),\n\t\t\tenrolledLeaderTableDT: $( '#group-management-enrolled-leader-datatable' ),\n\t\t\tremoveUsersButton: $( '#group-management-enrolled-users-table-remove-users' ),\n\t\t\tremoveLeadersButton: $( '.group-leader-management-buttons' ),\n\t\t\tsendEmailsButton: $( '#group-management-enrolled-users-table-send-password' ),\n\t\t\tnumberOfUsers: $( '#group-management .uo-groups-enrolled-users .amount-users' ),\n\t\t\tsendEmailsModal: $( '#group-management-enrolled-users-table-send-password-modal' ),\n\t\t\tsendEmailsField: $( '#group-management-enrolled-users-table-send-password-field' ),\n\t\t\tremoveUsersField: $( '#group-management-remove-user #removing-users' ),\n\t\t\temailUsersCoursesDropdown: $( '#ulgm-management-send-email-courses' ),\n\t\t}\n\t}\n\n\taddSelect2(){\n\t\t// Init select2 in all dropdowns\n\t\ttry {\n\t\t\t// Iterate dropdowns\n\t\t\tthis.$elements.selectEl.each( ( index, $dropdown ) => {\n\t\t\t\t// Default select2 options\n\t\t\t\tconst select2Options = {}\n\n\t\t\t\t// Check if it's inside a modal\n\t\t\t\tif ( $dropdown.closest( '.group-management-modal' ) ) {\n\t\t\t\t\t// Init select2, but add the main wrapper inside the modal\n\t\t\t\t\tselect2Options.dropdownParent = $( $dropdown.parentNode );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t$( $dropdown ).select2( select2Options );\n\t\t\t} );\n\t\t} catch ( e ) {\n\t\t\tconsole.warn( e );\n\t\t}\n\n\t\tif ($( '#group-id' ).length > 0) {\n\t\t\t$( '#group-id' ).change( function (){\n\t\t\t\t$( this ).closest( 'form' ).submit();\n\t\t\t} );\n\t\t}\n\n\t\t// Set logic of the Email users > Courses dropdown\n\t\t// Cache the field value. We will use this to see what's the latest selected option\n\t\tthis.emailUsersCourses = this.$elements.emailUsersCoursesDropdown.val() || [];\n\t\tthis.$elements.emailUsersCoursesDropdown.on( 'change', () => {\n\n\t\t\t// Nice-to-have, so let's add it inside a try block\n\t\t\t// Even if this doesn't work, everything else will continue working\n\t\t\ttry {\n\t\t\t\t// Set the value of the \"All courses\" option\n\t\t\t\tconst optionAllCoursesValue = '-1';\n\n\t\t\t\t// Create a variable to know later if we changed the value of the dropdown\n\t\t\t\tlet hadWeChangedCoursesValues = false;\n\n\t\t\t\t// Get the values of the dropdown\n\t\t\t\tlet selectedCourses = this.$elements.emailUsersCoursesDropdown.val();\n\n\t\t\t\t// Check if there are courses selected\n\t\t\t\tif ( selectedCourses.length == 0 ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Get the latest selected option\n\t\t\t\t// To do so, get the symmetric difference\n\t\t\t\tconst latestChangedOption = this.emailUsersCourses\n\t\t\t\t\t.filter( courseID => ! selectedCourses.includes( courseID ) )\n\t\t\t\t\t.concat( selectedCourses.filter( courseID => ! this.emailUsersCourses.includes( courseID ) ) )[0];\n\n\t\t\t\t// Check if an option changed\n\t\t\t\tif ( typeof latestChangedOption === 'undefined' ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check whether the option was added (true) or removed (false)\n\t\t\t\tconst wasLastOptionAdded = this.emailUsersCourses\n\t\t\t\t\t.filter( courseID => ! selectedCourses.includes( courseID ) )\n\t\t\t\t\t.length == 0;\n\n\t\t\t\t// Check if the \"All courses\" option is selected\n\t\t\t\tconst isOptionAllCoursesSelected = selectedCourses.includes( optionAllCoursesValue );\n\n\t\t\t\tif (\n\t\t\t\t\t// Check if the user added the \"All courses\" option\n\t\t\t\t\tlatestChangedOption == optionAllCoursesValue && wasLastOptionAdded &&\n\t\t\t\t\t// And there are more options selected\n\t\t\t\t\tselectedCourses.length > 1\n\t\t\t\t) {\n\t\t\t\t\t// Select only \"All courses\"\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown.val( '' );\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown\n\t\t\t\t\t\t.find( `option[value=\"${ optionAllCoursesValue }\"]` )\n\t\t\t\t\t\t.prop( 'selected', true );\n\n\t\t\t\t\t// We changed the value, update the flag\n\t\t\t\t\thadWeChangedCoursesValues = true;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t// User added a different option than \"All courses\"\n\t\t\t\t\tlatestChangedOption != optionAllCoursesValue && wasLastOptionAdded &&\n\t\t\t\t\t// And \"All courses\" is seleceted\n\t\t\t\t\tisOptionAllCoursesSelected\n\t\t\t\t) {\n\t\t\t\t\t// Remove \"All courses\"\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown\n\t\t\t\t\t\t.find( `option[value=\"${ optionAllCoursesValue }\"]` )\n\t\t\t\t\t\t.prop( 'selected', false );\n\n\t\t\t\t\t// We changed the value, update the flag\n\t\t\t\t\thadWeChangedCoursesValues = true;\n\t\t\t\t}\n\n\t\t\t\t// Check if the value changed\n\t\t\t\tif ( hadWeChangedCoursesValues ) {\n\t\t\t\t\t// Update selected options\n\t\t\t\t\tthis.emailUsersCourses = this.$elements.emailUsersCoursesDropdown.val();\n\n\t\t\t\t\t// Trigger change event to update select2\n\t\t\t\t\tthis.$elements.emailUsersCoursesDropdown.trigger( 'change' );\n\t\t\t\t} \n\t\t\t} catch ( e ) {\n\t\t\t\tconsole.warn( e );\n\t\t\t}\n\t\t\t\n\t\t} );\n\t}\n\n\tgetData(){\n\t\t// Get data from DOM elements\n\t\tthis.data = {\n\t\t\tcanRemoveUsers: !!parseInt( this.$elements.enrolledUsersTableDT.data( 'can-remove-users' ) ),\n\t\t\tcanRemoveUsersAnytime: !!parseInt( this.$elements.enrolledUsersTableDT.data( 'can-remove-users-anytime' ) ),\n\t\t\tulgmGroupLeaderData: null !== ulgmGroupLeaderData ? ulgmGroupLeaderData : [],\n\t\t};\n\n\t\t// Set the default array for the selected users on page load\n\t\tthis.selectedUsers   = [];\n\t\tthis.selectedLeaders = [];\n\t}\n\n\tcreateDataTables(){\n\n\t\t/* Create an array with the values of all the input boxes in a column */\n\t\tjQuery.fn.dataTable.ext.type.order['uo-groups-anchor-asc'] = function ( a, b ){\n\t\t\t// Create the HTML element\n\t\t\tlet textA       = document.createElement( 'div' );\n\t\t\t// Insert the row content inside\n\t\t\ttextA.innerHTML = a;\n\t\t\t// Get only the text, not the HTML\n\t\t\ttextA           = textA.textContent;\n\t\t\t// Make it lowercase, and remove extra spaces\n\t\t\ttextA           = textA.toLowerCase().trim();\n\n\t\t\t// Now do the same with B\n\t\t\tlet textB       = document.createElement( 'div' );\n\t\t\ttextB.innerHTML = b;\n\t\t\ttextB           = textB.textContent;\n\t\t\ttextB           = textB.toLowerCase().trim();\n\n\t\t\t// Compare text A with text B\n\t\t\treturn textA.localeCompare( textB );\n\t\t};\n\n\t\tjQuery.fn.dataTable.ext.type.order['uo-groups-anchor-desc'] = function ( a, b ){\n\t\t\t// Create the HTML element\n\t\t\tlet textA       = document.createElement( 'div' );\n\t\t\t// Insert the row content inside\n\t\t\ttextA.innerHTML = a;\n\t\t\t// Get only the text, not the HTML\n\t\t\ttextA           = textA.textContent;\n\t\t\t// Make it lowercase, and remove extra spaces\n\t\t\ttextA           = textA.toLowerCase().trim();\n\n\t\t\t// Now do the same with B\n\t\t\tlet textB       = document.createElement( 'div' );\n\t\t\ttextB.innerHTML = b;\n\t\t\ttextB           = textB.textContent;\n\t\t\ttextB           = textB.toLowerCase().trim();\n\n\t\t\t// Compare text A with text B\n\t\t\treturn textB.localeCompare( textA );\n\t\t};\n\n\t\t// version 4.0- columns are defined in group-management-interface.php\n\t\tlet userColumns = this.data.ulgmGroupLeaderData.enrolled_user_columns;\n\n\t\t// Check if we should add the column with the checkbox\n\t\tif ( 'true' === this.data.ulgmGroupLeaderData.populate_management_features ) {\n\t\t\tuserColumns.unshift( {\n\t\t\t\tdata: 'check',\n\t\t\t\ttitle: this.data.ulgmGroupLeaderData.check_all,\n\t\t\t\tsearchable: false,\n\t\t\t\torderable: false,\n\t\t\t} );\n\t\t}\n\n\t\t// Check if we have to remove the \"Key\" column\n\t\tif ( true !== this.$elements.enrolledUsersTableDT.data( 'key_column' ) ) {\n\t\t\t// Remove it\n\t\t\tuserColumns = userColumns.filter( columnData => columnData.targets != 'key' );\n\t\t}\n\n\t\t// Create shared options applied to all export buttons\n\t\tconst buttonCommon = {\n\t\t\texportOptions: {\n\t\t\t\t// columns: ':visible'\n\t\t\t},\n\t\t\tfilename: () => {\n\t\t\t\tconst filenameParts = [\n\t\t\t\t\t'group-management',\n\t\t\t\t\tdocument.getElementById( 'ulgm_current_managed_group_id' ).value\n\t\t\t\t];\n\n\t\t\t\t// Add the Group name\n\t\t\t\tlet groupName = $( \"#group-id option:selected\" ).text();\n\t\t\t\tgroupName = groupName ? groupName : $( \"#group-name\" ).text();\n\t\t\t\tfilenameParts.push( groupName );\n\n\t\t\t\treturn filenameParts.join( ' - ' );\n\t\t\t}\n\t\t};\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet enrolledUsersOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet enrolledUsersOrderByIndex = userColumns.findIndex( columnData => columnData.title == ulgmGroupManagementShortcode.tables.enrolledUsers.orderBy );\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( enrolledUsersOrderByIndex === -1 ) {\n\t\t\tenrolledUsersOrderByIndex = userColumns.findIndex( columnData => columnData.targets == 'first_name' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( enrolledUsersOrderByIndex !== -1 ) {\n\t\t\tenrolledUsersOrder = [\n\t\t\t\t[\n\t\t\t\t\tenrolledUsersOrderByIndex, // The ID of the column used to sort, defaults to `first_name`\n\t\t\t\t\tulgmGroupManagementShortcode.tables.enrolledUsers.order, // Designates the ascending or descending order of the orderby parameter, defaults to `asc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\tlet userTableVars = {\n\t\t\tdata: this.data.ulgmGroupLeaderData.enrolled_user_data,\n\t\t\tsearchDelay: 400,\n\t\t\tcolumns: userColumns,\n\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\torder: enrolledUsersOrder,\n\t\t\tpageLength: parseInt( this.$elements.enrolledUsersTableDT.data( 'page_length' ) ),\n\t\t\tlengthMenu: [\n\t\t\t\t[10, 25, 50, 100],\n\t\t\t\t[10, 25, 50, 100]\n\t\t\t],\n\t\t\tbuttons: [\n\t\t\t\t$.extend( true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: ulgmRestApiSetup.language.buttons.csvExport,\n\t\t\t\t\t\n\t\t\t\t} ),\n\t\t\t\t$.extend( true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: ulgmRestApiSetup.i18n.exportExcel,\n\t\t\t\t} ),\n\t\t\t],\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.language.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.language.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.language.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.language.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.language.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.language.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.language.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.language.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.language.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.language.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.language.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.language.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.language.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.language.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.language.sortDescending\n\t\t\t\t}\n\t\t\t},\n\t\t\tprocessing: false,\n\t\t\tserverSide: false,\n\n\t\t\tcreatedRow: function( row, data, dataIndex ){\n\t\t\t\t$( row )\n\t\t\t\t\t.addClass( `status_id-${ data.status_id }` )\n\t\t\t},\n\n\t\t\tinitComplete: () => {\n\t\t\t\t// Get the export CSV button\n\t\t\t\tconst $fakeExportCSV = document.getElementById( 'group-management-users-export-csv' );\n\n\t\t\t\t// Get the export Excel button\n\t\t\t\tconst $fakeExportExcel = document.getElementById( 'group-management-users-export-excel' );\n\n\t\t\t\t// Check if the element exists\n\t\t\t\tif ( document.body.contains( $fakeExportCSV ) ){\n\t\t\t\t\t// Add an event listener to listen clicks\n\t\t\t\t\t$fakeExportCSV.addEventListener( 'click', () => {\n\t\t\t\t\t\t// Click the real \"Export CSV\" button\n\t\t\t\t\t\tconst $realExportCSV = document.querySelector( '#group-management-enrolled-users-datatable_wrapper .buttons-csv' );\n\n\t\t\t\t\t\t// Check if the element exists\n\t\t\t\t\t\tif ( document.body.contains( $realExportCSV ) ){\n\t\t\t\t\t\t\t// Click it\n\t\t\t\t\t\t\tconst event = document.createEvent( 'HTMLEvents' );\n\t\t\t\t\t\t\tevent.initEvent( 'click', true, false );\n\t\t\t\t\t\t\t$realExportCSV.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t// Check if the element exists\n\t\t\t\tif ( document.body.contains( $fakeExportExcel ) ){\n\t\t\t\t\t// Add an event listener to listen clicks\n\t\t\t\t\t$fakeExportExcel.addEventListener( 'click', () => {\n\t\t\t\t\t\t// Click the real \"Export CSV\" button\n\t\t\t\t\t\tconst $realExportExcel = document.querySelector( '#group-management-enrolled-users-datatable_wrapper .buttons-excel' );\n\n\t\t\t\t\t\t// Check if the element exists\n\t\t\t\t\t\tif ( document.body.contains( $realExportExcel ) ){\n\t\t\t\t\t\t\t// Click it\n\t\t\t\t\t\t\tconst event = document.createEvent( 'HTMLEvents' );\n\t\t\t\t\t\t\tevent.initEvent( 'click', true, false );\n\t\t\t\t\t\t\t$realExportExcel.dispatchEvent( event );\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet userTable = null;\n\n\t\t// User table\n\t\tuserTable = this.$elements.enrolledUsersTableDT.DataTable( userTableVars );\n\n\t\t$( document ).trigger( 'enrolledUsersTableDataTableCreated', {\n\t\t\tuserTableVars: userTableVars,\n\t\t\tuserTable: userTable,\n\t\t\tulgmGroupLeaderData: ulgmGroupLeaderData\n\t\t} );\n\n\t\tlet leaderColumns = this.data.ulgmGroupLeaderData.enrolled_leader_columns;\n\t\tif ('true' === this.data.ulgmGroupLeaderData.populate_management_features) {\n\t\t\tleaderColumns.unshift( {data: 'check', targets: 0, title: this.data.ulgmGroupLeaderData.check_all} );\n\t\t}\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet groupLeadersOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet groupLeadersOrderByIndex = leaderColumns.findIndex( columnData => columnData.title == ulgmGroupManagementShortcode.tables.groupLeaders.orderBy );\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( groupLeadersOrderByIndex === -1 ) {\n\t\t\tgroupLeadersOrderByIndex = leaderColumns.findIndex( columnData => columnData.data == 'first_name' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( groupLeadersOrderByIndex !== -1 ) {\n\t\t\tgroupLeadersOrder = [\n\t\t\t\t[\n\t\t\t\t\tgroupLeadersOrderByIndex, // The ID of the column used to sort, defaults to `first_name`\n\t\t\t\t\tulgmGroupManagementShortcode.tables.groupLeaders.order, // Designates the ascending or descending order of the orderby parameter, defaults to `asc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\tlet leaderTableVars = {\n\t\t\tdata: this.data.ulgmGroupLeaderData.enrolled_leader_data,\n\t\t\tcolumns: leaderColumns,\n\t\t\tcolumnDefs: [{\n\t\t\t\ttargets: 0,\n\t\t\t\tsearchable: false,\n\t\t\t\torderable: false,\n\t\t\t}],\n\t\t\tdom: 'frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\torder: groupLeadersOrder,\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.language.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.language.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.language.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.language.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.language.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.language.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.language.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.language.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.language.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.language.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.language.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.language.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.language.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.language.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.language.sortDescending\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet leaderTable;\n\n\t\t// Try to set the custom page length and length menu attributes\n\t\t// This will work only if the user didn't override the uo-groups template\n\t\t// before Groups 3.7.3\n\t\ttry {\n\t\t\t// Set custom page length\n\t\t\tleaderTableVars.pageLength = parseInt( this.$elements.enrolledLeaderTableDT.data( 'page_length' ) );\n\n\t\t\t// Set custom page length\n\t\t\tleaderTableVars.lengthMenu = this.$elements.enrolledLeaderTableDT.data( 'length_menu' );\n\n\t\t\t// Leader table\n\t\t\tleaderTable = this.$elements.enrolledLeaderTableDT.DataTable( leaderTableVars );\n\t\t} catch (e) {\n\t\t\tconsole.log( 'Beta: Could not set custom page length and custom menu length' );\n\t\t\tconsole.log( e );\n\n\t\t\t// Leader table\n\t\t\tleaderTable = this.$elements.enrolledLeaderTableDT.DataTable( leaderTableVars );\n\t\t}\n\n\t\t$( document ).trigger( 'enrolledLeaderTableDataTableCreated', {\n\t\t\tleaderTableVars: leaderTableVars,\n\t\t\tleaderTable: leaderTable,\n\t\t\tulgmGroupLeaderData: ulgmGroupLeaderData\n\t\t} );\n\t}\n\n\tlistenCheckboxToSelectAll(){\n\t\t// Listen changes to this checkbox\n\t\tthis.$elements.container.on( 'change', '.group-management-enrolled-select-all', ( event ) => {\n\n\t\t\t// Get checkbox status\n\t\t\tconst checkAllEl = $( event.currentTarget );\n\t\t\tconst isChecked  = checkAllEl.is( ':checked' );\n\n\t\t\t// Get all checkboxes\n\t\t\tconst $allCheckboxes = checkAllEl.closest( 'table' ).find( '.select-user' );\n\n\t\t\t// Check if it's checked\n\t\t\tif (isChecked) {\n\t\t\t\t// Select all users\n\t\t\t\t$allCheckboxes.prop( 'checked', true );\n\t\t\t} else {\n\t\t\t\t// Unselect all users\n\t\t\t\t$allCheckboxes.prop( 'checked', false );\n\t\t\t}\n\n\t\t\t// Get the current selected users\n\t\t\tthis.updateSelectedUsers();\n\n\t\t\t// Evalute the visibility of the \"Remove users\" button\n\t\t\tthis.evaluateRemoveUsersButtonVisiblity();\n\n\t\t\t// Evalute the visibility of the \"Remove leaders\" button\n\t\t\tthis.evaluateRemoveLeadersButtonVisiblity();\n\n\t\t\t// Evaluate the visibility of the \"Send emails\" button\n\t\t\tthis.evaluateSendEmailsButtonVisiblity();\n\t\t} );\n\t}\n\n\tlistenCheckboxesChanges(){\n\t\t// Add event listener to the checkboxes\n\t\tthis.$elements.container.on( 'change', 'input[type=\"checkbox\"].select-user', ( event ) => {\n\t\t\t// Get the current selected users\n\t\t\tthis.updateSelectedUsers();\n\n\t\t\t// Evalute the visibility of the \"Remove users\" button\n\t\t\tthis.evaluateRemoveUsersButtonVisiblity();\n\n\t\t\t// Evalute the visibility of the \"Remove leaders\" button\n\t\t\tthis.evaluateRemoveLeadersButtonVisiblity();\n\n\t\t\t// Evaluate the visibility of the \"Send emails\" button\n\t\t\tthis.evaluateSendEmailsButtonVisiblity();\n\t\t} );\n\t}\n\n\tupdateSelectedUsers(){\n\t\t// Create array to save selected users\n\t\tlet selectedUsers   = [];\n\t\tlet selectedLeaders = [];\n\n\t\t// Get all the checkboxes\n\t\tconst $allUserCheckboxes   = this.$elements.enrolledUsersTableDT.find( 'input[type=\"checkbox\"].select-user' );\n\t\tconst $allLeaderCheckboxes = this.$elements.enrolledLeaderTableDT.find( 'input[type=\"checkbox\"].select-user' );\n\n\t\t// Filter all checked and unchecked checkboxes\n\t\tconst allCheckedCheckboxes = {\n\t\t\tusers: $allUserCheckboxes.filter( ':checked' ),\n\t\t\tleaders: $allLeaderCheckboxes.filter( ':checked' ),\n\t\t};\n\n\t\t// Get the selected checkboxes\n\t\t$.each( allCheckedCheckboxes, ( type, $checkedCheckboxes ) => {\n\t\t\t$.each( $checkedCheckboxes, ( index, checkbox ) => {\n\t\t\t\t// Get the checkbox\n\t\t\t\tlet $checkbox = $( checkbox );\n\n\t\t\t\tlet $row = $checkbox.closest( 'tr' );\n\n\t\t\t\tif ('users' === type) {\n\t\t\t\t\tlet status = $row.find( '.status' ).data( 'status' );\n\n\t\t\t\t\tlet progressIsNotStarted;\n\t\t\t\t\tif ('not-started' === status) {\n\t\t\t\t\t\tprogressIsNotStarted = 1;\n\t\t\t\t\t} else if ('not-enrolled' === status) {\n\t\t\t\t\t\tprogressIsNotStarted = 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tprogressIsNotStarted = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Add data to the selectedUsers array\n\t\t\t\t\tselectedUsers.push( {\n\t\t\t\t\t\tuserId: $checkbox.val(),\n\t\t\t\t\t\tprogressIsNotStarted: progressIsNotStarted,\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t\tif ('leaders' === type) {\n\t\t\t\t\t// Add data to the selectedUsers array\n\t\t\t\t\tselectedLeaders.push( {\n\t\t\t\t\t\tuserId: $checkbox.val()\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\n\t\t// Update selected property\n\t\tthis.selectedUsers   = selectedUsers;\n\t\tthis.selectedLeaders = selectedLeaders;\n\t}\n\n\tevaluateRemoveUsersButtonVisiblity(){\n\t\t// Create the variable we're going to use to finally\n\t\t// decide if we have to show or not the button\n\t\tlet showRemoveUsersButton = false;\n\n\t\t// Check if there are selected rows\n\t\tif (this.selectedUsers.length > 0) {\n\t\t\t// Check if the option to remove users is enabled\n\t\t\tif (this.data.canRemoveUsers) {\n\t\t\t\t// Check if they can remove users anytime\n\t\t\t\tif (this.data.canRemoveUsersAnytime) {\n\t\t\t\t\t// Set variable to true to show the button later\n\t\t\t\t\tshowRemoveUsersButton = true;\n\t\t\t\t} else {\n\t\t\t\t\t// Check the progress status of the selected users\n\t\t\t\t\t// To do that, first set the main variable to true\n\t\t\t\t\t// We're going to iterate each selected row and if\n\t\t\t\t\t// at least of the checks fail we're going to set\n\t\t\t\t\t// it back to false\n\t\t\t\t\tshowRemoveUsersButton = true;\n\n\t\t\t\t\t// iterate each one\n\t\t\t\t\tthis.selectedUsers.forEach( ( user ) => {\n\t\t\t\t\t\t// Check if the progress is \"Not started\"\n\t\t\t\t\t\tshowRemoveUsersButton = showRemoveUsersButton && user.progressIsNotStarted;\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Now show or hide the button\n\t\tif (showRemoveUsersButton) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.removeUsersButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.removeUsersButton.hide();\n\t\t}\n\t}\n\n\tevaluateRemoveLeadersButtonVisiblity(){\n\t\t// Create the variable we're going to use to finally\n\t\t// decide if we have to show or not the button\n\t\tlet showRemoveLeadersButton = false;\n\n\t\t// Check if there are selected rows\n\t\tif (this.selectedLeaders.length > 0) {\n\t\t\tshowRemoveLeadersButton = true;\n\t\t}\n\n\t\t// Now show or hide the button\n\t\tif (showRemoveLeadersButton) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.removeLeadersButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.removeLeadersButton.hide();\n\t\t}\n\n\t\t// Add amount of users being removed to modal\n\t\t$( '.amount-group-leaders' ).text( this.selectedLeaders.length );\n\n\t\tlet groupLeaderIds = [];\n\t\t$.each( this.selectedLeaders, ( index, user ) => {\n\t\t\tgroupLeaderIds.push( user.userId );\n\t\t} );\n\n\t\t// Add all ids to button\n\t\t$( '#removing-group-leaders' ).val( groupLeaderIds.join( \",\" ) );\n\t}\n\n\tevaluateSendEmailsButtonVisiblity(){\n\t\t// For this one, just check if there are selected users\n\t\tif (this.selectedUsers.length > 0) {\n\t\t\t// Show the button\n\t\t\tthis.$elements.sendEmailsButton.show();\n\t\t} else {\n\t\t\t// Hide the button\n\t\t\tthis.$elements.sendEmailsButton.hide();\n\t\t}\n\t}\n\n\tupdateDataOnModal(){\n\t\t// Listen when the modal is being opened\n\t\tthis.$elements.container.on( 'modal-open', ( event, modalId, modal ) => {\n\n\t\t\t// Create an array with the list of users\n\t\t\tconst selectedUsers = this.selectedUsers.map( ( user ) => {\n\t\t\t\treturn user.userId;\n\t\t\t} );\n\n\t\t\t// Update number of users selected users\n\t\t\tthis.$elements.numberOfUsers.text( selectedUsers.length );\n\n\n\t\t\t// Check if the modal id the the ID of the \"Send emails\" modal\n\t\t\tif (modalId == '#group-management-enrolled-users-table-send-password-modal') {\n\t\t\t\t// Add the array as a string to a hidden field inside the Send password reset modal\n\t\t\t\tthis.$elements.sendEmailsField.val( JSON.stringify( selectedUsers ) );\n\t\t\t} else if (modalId == '#group-management-remove-user') {\n\n\t\t\t\t// Create a comma separated list with the IDs\n\t\t\t\tconst userIds = selectedUsers.join( ',' );\n\n\t\t\t\t// Add the list of IDs on a hidden field\n\t\t\t\tthis.$elements.removeUsersField.val( userIds );\n\t\t\t}\n\t\t} );\n\t}\n\n\thasEnrolledUsersTable(){\n\t\treturn $( '#group-management-enrolled-users-datatable' ).length == 1;\n\t}\n\n\t/**\n\t * Make the First and Last name fields of the \"Bulk add & Invite users\" required\n\t * Logic: Listen when the user types in one of the \"Email\" fields.\n\t * If the Email is not empty,\n\t * > Make First name and Last name fields required\n\t * \n\t */\n\tfirstLastNamesRequired() {\n\t\t// Check if we have to make them required first\n\t\tif ( ! ulgmGroupManagementShortcode.firstnameLastnameRequired ) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Create array with main CSS selectors\n\t\tconst requiredSelectors = {\n\t\t\temailFields: '#group-management-add-users .content-leaders-email input',\n\t\t\tfirstName: '.content-leaders-first-name input',\n\t\t\tlastName: '.content-leaders-last-name input',\n\t\t\trow: '.uo-row',\n\t\t\trowWithData: 'group-management-add-users-row--with-data'\n\t\t}\n\n\t\t// Get all the email fields\n\t\tconst $emailFields = document.querySelectorAll( requiredSelectors.emailFields );\n\n\t\t// Iterate fields\n\t\t$emailFields.forEach( ( $emailField ) => {\n\t\t\t// Listen changed to the field\n\t\t\t// Execute the callback up to once every 200ms\n\t\t\t$emailField.addEventListener(\n\t\t\t\t'input',\n\t\t\t\tdebounce( () => {\n\t\t\t\t\t// Get the field value\n\t\t\t\t\tconst emailValue = $emailField.value;\n\n\t\t\t\t\t// If it's not empty, make First name and Last name required\n\t\t\t\t\t// First, get the row and fields\n\t\t\t\t\tconst $rowElements = {\n\t\t\t\t\t\trow: $emailField.closest( requiredSelectors.row )\n\t\t\t\t\t}\n\n\t\t\t\t\t$rowElements.firstName = $rowElements.row.querySelector( requiredSelectors.firstName );\n\t\t\t\t\t$rowElements.lastName  = $rowElements.row.querySelector( requiredSelectors.lastName );\n\t\t\t\t\t\n\t\t\t\t\t// Check if it's empty\n\t\t\t\t\tif ( isEmpty( emailValue ) ) {\n\t\t\t\t\t\t// Remove the class used to identify rows with data\n\t\t\t\t\t\t$rowElements.row.classList.remove( requiredSelectors.rowWithData );\n\n\t\t\t\t\t\t// Make the fields optional\n\t\t\t\t\t\t$emailField.removeAttribute( 'required' )\n\t\t\t\t\t\t$emailField.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.emailAddress );\n\n\t\t\t\t\t\t$rowElements.firstName.removeAttribute( 'required' )\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.firstName );\n\n\t\t\t\t\t\t$rowElements.lastName.removeAttribute( 'required' )\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'placeholder', ulgmRestApiSetup.i18n.lastName );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Add the class used to identify rows with data\n\t\t\t\t\t\t$rowElements.row.classList.add( requiredSelectors.rowWithData );\n\n\t\t\t\t\t\t// Make the fields optional\n\t\t\t\t\t\t$emailField.setAttribute( 'required', '' );\n\t\t\t\t\t\t$emailField.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.emailAddress } *` );\n\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'required', '' );\n\t\t\t\t\t\t$rowElements.firstName.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.firstName } *` );\n\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'required', '' );\n\t\t\t\t\t\t$rowElements.lastName.setAttribute( 'placeholder', `${ ulgmRestApiSetup.i18n.lastName } *` );\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}, 200 )\n\t\t\t);\n\t\t} );\n\t}\n}\n\nexport default GroupManagement;\n","import $ from 'jquery';\n\nclass GroupCourseReport {\n\tconstructor(){\n\n\t\t// Check if it's the group course report page\n\t\tif (this.isCourseReport()) {\n\t\t\t// Create course report table\n\t\t\tnew CourseReportTable();\n\t\t}\n\t}\n\n\tisCourseReport(){\n\t\treturn $( '#group-course-report-datatable' ).length === 1;\n\t}\n}\n\nclass CourseReportTable {\n\tconstructor(){\n\n\t\tthis.table = null;\n\n\t\t// Get elements\n\t\tthis.getElements();\n\n\t\t// Listen dropdowns changes\n\t\tthis.filters();\n\n\t\t// Create DataTable\n\t\tthis.createDataTables();\n\n\t\t// Populate table after the group course is selected\n\t\tthis.restPopulateTable();\n\n\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tcourseReport: $( '#group-course-report-datatable' ),\n\t\t\tfilter: {\n\t\t\t\tall: $( '.uo-groups-select-filters select' ),\n\t\t\t\tgroupID: $( '#group-id' ),\n\t\t\t\tcourseID: $( '#uo-group-report-course' ),\n\t\t\t}\n\t\t}\n\t}\n\n\tfilters() {\n\t\t// Clear table when one of the filters change\n\t\tthis.$elements.filter.all.on( 'change', () => {\n\t\t\t// Check if the DataTable is defined\n\t\t\tif ( typeof this.$elements.courseReport === 'undefined' ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// Try to clear the DataTable\n\t\t\ttry {\n\t\t\t\t// Clear the table\n\t\t\t\tthis.table\n\t\t\t\t\t.clear()\n\t\t\t\t\t.draw()\n\t\t\t\t\t.columns.adjust()\n\t\t\t\t\t.responsive.recalc();\n\t\t\t} catch ( e ) {\n\t\t\t\t// console.warn( e );\n\t\t\t}\n\t\t} );\n\n\t\t// Check if there is only one group, and the dropdown is hidden\n\t\tif ( this.$elements.filter.groupID.hasClass( 'h3-select' ) ) {\n\t\t\t// Get the group ID\n\t\t\tlet groupID = this.$elements.filter.groupID\n\t\t\t\t.find( 'option:not([value=\"0\"]):not([value=\"\"])' )\n\t\t\t\t.last()\n\t\t\t\t.val();\n\n\t\t\t// Select the first option and trigger the change event\n\t\t\tthis.$elements.filter.groupID\n\t\t\t\t.val( groupID )\n\t\t\t\t.trigger( 'change' );\n\n\t\t\twindow.ulgmGroupManagement.restForms.sendRestCall( {\n\t\t\t\tcurrentTarget: this.$elements.filter.groupID\n\t\t\t} );\n\n\t\t\t// Disable the dropdown\t\t\t\n\t\t\tthis.$elements.filter.groupID.prop( 'disabled', 'disabled' );\n\t\t} else {\n\t\t\t// If there is more than one group, listen changes to clear the \"Course\" dropdown on change\n\t\t\tthis.$elements.filter.groupID.on( 'change', () => {\n\t\t\t\t// Clear the \"Course\" group\n\t\t\t\tthis.$elements.filter.courseID\n\t\t\t\t\t// Deselect the dropdown, without triggering the change event\n\t\t\t\t\t.val( '' )\n\t\t\t\t\t// Remove all options\n\t\t\t\t\t.find( 'option' )\n\t\t\t\t\t\t.remove();\n\t\t\t} );\n\t\t}\n\t}\n\n\tcreateDataTables(){\n\n\t\tlet that       = this;\n\t\tlet columnDefs = [];\n\n\t\tlet columnsVisibility = that.$elements.courseReport.data( 'table_columns' )\n\t\tcolumnsVisibility     = columnsVisibility.split( ',' );\n\n\t\tlet columns = [];\n\n\t\t// Check if we have to remove the \"Transcript\" column\n\t\tif ( ! ulgmCourseReportShortcode.shouldAddTranscriptColumn ) {\n\t\t\t// Remove Transcript column\n\t\t\tdelete ulgmRestApiSetup.tableColumns.transcript_page_url;\n\t\t}\n\n\t\t// Define array with the columns that we're going to send to DataTables\n\t\tObject.entries( ulgmRestApiSetup.tableColumns ).forEach( ( [ columnKey, columnName ] ) => {\n\t\t\tcolumns.push( {\n\t\t\t\tdata: columnKey,\n\t\t\t\ttitle: columnName,\n\t\t\t\tvisible: columnsVisibility.includes( columnKey )\n\t\t\t} );\n\t\t} );\n\n\t\t// If we have to add the \"Transcript\" column...\n\t\tif ( ulgmCourseReportShortcode.shouldAddTranscriptColumn ) {\n\t\t\t// Get index of the Transcript column\n\t\t\tconst transcriptColumnIndex = columns.findIndex( column => column.data == 'transcript_page_url' );\n\n\t\t\t// ...define the `render` callback to override the column value\n\t\t\tcolumnDefs = [\n\t\t\t\t{\n\t\t\t\t\t// The `data` parameter refers to the data for the cell (defined by the\n\t\t\t\t\t// `data` option, which defaults to the column being worked with, in\n\t\t\t\t\t// this case `data: 0`.\n\t\t\t\t\trender: function ( data, type, row ){\n\n\t\t\t\t\t\treturn `\n\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\thref=\"${ ulgmCourseReportShortcode.transcriptPageURL }?user-id=${ row.user_id }\"\n\t\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t${ ulgmRestApiSetup.localized.details }\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t`;\n\n\t\t\t\t\t},\n\t\t\t\t\ttargets: transcriptColumnIndex\n\t\t\t\t}\n\t\t\t]\n\t\t}\n\n\t\tlet initComplete = ( settings, d ) => {\n\n\t\t\tlet table = settings.oInstance.api();\n\t\t\tlet _this = this;\n\n\t\t\tvar colFilter_container = $( `<div id=\"${settings.sInstance}-filter-columns\" class=\"dataTables-filter-columns\"><input class=\"dataTables-filter-columns-field\" id=\"${settings.sInstance}-filter-columns-field\" type=\"checkbox\"><div class=\"dataTables-filter-columns__toggle\"><label for=\"${settings.sInstance}-filter-columns-field\" data-label-enable=\"${ulgmRestApiSetup.localized.customizeColumns}\" data-label-disable=\"${ulgmRestApiSetup.localized.hideCustomizeColumns}\"></label></div><div class=\"dataTables-filter-columns__fields\"></div></div>` );\n\n\t\t\tif (settings.oSavedState !== null) {\n\t\t\t\tjQuery.each( settings.oSavedState.columns, function ( key, value ){\n\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.visible, table ) );\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\tjQuery.each( settings.aoColumns, function ( key, value ){\n\n\t\t\t\t\tvar title = settings.aoColumns[key].sTitle;\n\t\t\t\t\tcolFilter_container.find( '.dataTables-filter-columns__fields' ).append( _this.addColumnCourseCheckbox( title, key, value.bVisible, table ) );\n\n\t\t\t\t} );\n\t\t\t}\n\t\t\t$( colFilter_container ).insertAfter( '#group-course-report-datatable_filter' );\n\t\t};\n\n\t\tvar buttonCommon = {\n\t\t\texportOptions: {\n\t\t\t\tcolumns: ( id, data, node ) => {\n                    return this.table.column( id ).visible();\n                },\n\n\t\t\t\tformat: {\n\t\t\t\t\tbody: function (data, row, column, node) {\n\t\t\t\t\t\t// Strips hidden timestamp <span>\n\t\t\t\t\t\treturn data.replace(/\\<span\\s(?:class\\=\\\"ulg\\-hidden\\-data\\\")(.*)\\<\\/span\\>/g, '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tfilename: function () {\n\t\t\t\tlet courseNamePrefix = 'Groups-Course-Report';\n\t\t\t\tlet $courseId = $('#uo-group-report-course').val();\n\t\t\t\tlet courseName = '-' + $(\"#uo-group-report-course option:selected\").text();\n\t\t\t\tlet name = '';\n\t\t\t\tif (typeof that.getUrlParameter('user_id') !== 'undefined') {\n\n\t\t\t\t\tname = that.$elements.courseReport.data('user_name');\n\n\t\t\t\t\tif (isNaN(name)) {\n\t\t\t\t\t\tname = '-for-user-' + name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tname = '-for-user-id-' + name;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn courseNamePrefix + name;\n\n\t\t\t\t} else if ('0' === $courseId) {\n\t\t\t\t\treturn courseNamePrefix;\n\t\t\t\t}\n\n\t\t\t\treturn courseNamePrefix + courseName;\n\t\t\t}\n\t\t};\n\n\t\t// Check what column has to be used to sort the table\n\t\tlet tableOrder = [];\n\t\t// Find the index of the column we have to use to sort\n\t\tlet tableOrderByIndex = columns.findIndex( columnData => columnData.title == ulgmCourseReportShortcode.table.orderBy );\n\n\t\t// If the column doesn't exist, then try to get the default one\n\t\tif ( tableOrderByIndex === -1 ) {\n\t\t\ttableOrderByIndex = columns.findIndex( columnData => columnData.data == 'date_completed' );\n\t\t}\n\t\t// If the one defined by the user, or the default one exists, add it\n\t\tif ( tableOrderByIndex !== -1 ) {\n\t\t\ttableOrder = [\n\t\t\t\t[\n\t\t\t\t\ttableOrderByIndex, // The ID of the column used to sort, defaults to `date_completed`\n\t\t\t\t\tulgmCourseReportShortcode.table.order, // Designates the ascending or descending order of the orderby parameter, defaults to `desc`\n\t\t\t\t]\n\t\t\t];\n\t\t}\n\n\t\t// User table\n\t\tthis.table = this.$elements.courseReport.DataTable({\n\t\t\tstateSave: true,\n\t\t\tinitComplete: initComplete,\n\t\t\tdom: '<\"uo-groups-datatable-header\"B>frt<\"uo-groups-datatable-footer\"lpi>',\n\t\t\tbuttons: [\n\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'csv',\n\t\t\t\t\ttext: ulgmRestApiSetup.i18n.exportCSV,\n\t\t\t\t}),\n\t\t\t\t$.extend(true, {}, buttonCommon, {\n\t\t\t\t\textend: 'excelHtml5',\n\t\t\t\t\ttext: ulgmRestApiSetup.i18n.exportExcel,\n\t\t\t\t}),\n\t\t\t],\n\t\t\torder: tableOrder,\n\n\t\t\tcolumns: columns,\n\t\t\t\"columnDefs\": columnDefs,\n\t\t\tlanguage: {\n\t\t\t\tprocessing: ulgmRestApiSetup.localized.processing,\n\t\t\t\tsearch: '_INPUT_',\n\t\t\t\tsearchPlaceholder: ulgmRestApiSetup.localized.searchPlaceholder,\n\t\t\t\tlengthMenu: ulgmRestApiSetup.localized.lengthMenu,\n\t\t\t\tinfo: ulgmRestApiSetup.localized.info,\n\t\t\t\tinfoEmpty: ulgmRestApiSetup.localized.infoEmpty,\n\t\t\t\tinfoFiltered: ulgmRestApiSetup.localized.infoFiltered,\n\t\t\t\tinfoPostFix: '',\n\t\t\t\tloadingRecords: ulgmRestApiSetup.localized.loadingRecords,\n\t\t\t\tzeroRecords: ulgmRestApiSetup.localized.zeroRecords,\n\t\t\t\temptyTable: ulgmRestApiSetup.localized.emptyTable,\n\t\t\t\tpaginate: {\n\t\t\t\t\tfirst: ulgmRestApiSetup.localized.paginate.first,\n\t\t\t\t\tprevious: ulgmRestApiSetup.localized.paginate.previous,\n\t\t\t\t\tnext: ulgmRestApiSetup.localized.paginate.next,\n\t\t\t\t\tlast: ulgmRestApiSetup.localized.paginate.last\n\t\t\t\t},\n\t\t\t\taria: {\n\t\t\t\t\tsortAscending: ulgmRestApiSetup.localized.sortAscending,\n\t\t\t\t\tsortDescending: ulgmRestApiSetup.localized.sortDescending\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\taddColumnCourseCheckbox( label, column_key, is_visible, table ){\n\n\t\tvar checkbox = jQuery( '<input />', {\n\t\t\ttype: 'checkbox',\n\t\t\tid: 'dt_' + column_key,\n\t\t\tvalue: column_key,\n\t\t\tchecked: is_visible\n\t\t} );\n\n\t\tcheckbox.on( 'change', function ( e ){\n\t\t\t// Get the column API object\n\t\t\tvar current_check = jQuery( this ).attr( 'value' );\n\t\t\tvar is_checked    = jQuery( this ).is( ':checked' );\n\n\t\t\ttable.columns().every( function ( index ){\n\n\t\t\t\tvar column = table.column( index );\n\n\t\t\t\t// ... do something with data(), or this.nodes(), etc\n\n\t\t\t\tif (index == current_check) {\n\t\t\t\t\tif (is_checked) {\n\t\t\t\t\t\t// Toggle the visibility\n\t\t\t\t\t\tcolumn.visible( true );\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcolumn.visible( false );\n\t\t\t\t\t}\n\t\t\t\t}\n\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tvar $label = jQuery( '<label/>' ).append( checkbox ).append( label );\n\t\treturn $label;\n\t}\n\n\trestPopulateTable(){\n\n\t\tlet that                                       = this;\n\t\twindow.ulgmGroupManagement.populateReportTable = function ( data ){\n\n\t\t\tlet courseReport = that.$elements.courseReport.DataTable();\n\n\t\t\tcourseReport.clear().draw();\n\t\t\tcourseReport.rows.add( data.user_course_data ); // Add new data\n\t\t\tcourseReport.columns.adjust().draw(); // Redraw the DataTable\n\t\t\tcourseReport.responsive.recalc();\n\n\t\t\tvar items = window.ulgmGroupManagement.reportingTemplating.items = data.user_course_data;\n\n\t\t\tif (0 === items.length) {\n\t\t\t\t$( '#test' ).html( '<div class=\"uo-row uo-table-content uo-tbl-item body-row\"><div class=\"uo-table-no-results\">There are no records to display.</div></div>' );\n\t\t\t} else {\n\t\t\t\t$( '#test' ).closest( '.uo-groups-rest-result' ).show();\n\t\t\t\twindow.ulgmGroupManagement.reportingTemplating.setItems( items );\n\t\t\t}\n\t\t};\n\t}\n\n\tgetUrlParameter( sParam ){\n\t\tlet sPageURL      = window.location.search.substring( 1 ),\n\t\t\tsURLVariables = sPageURL.split( '&' ),\n\t\t\tsParameterName,\n\t\t\ti;\n\n\t\tfor (i = 0; i < sURLVariables.length; i++) {\n\t\t\tsParameterName = sURLVariables[i].split( '=' );\n\n\t\t\tif (sParameterName[0] === sParam) {\n\t\t\t\treturn sParameterName[1] === undefined ? true : decodeURIComponent( sParameterName[1] );\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport default GroupCourseReport;\n","const ElementQueries = require( 'css-element-queries/src/ElementQueries' );\n\nimport $ from 'jquery';\n\nimport {\n\tisDefined,\n\tisEmpty\n} from './utilities.js';\n\nclass CourseDashboard {\n\tconstructor(){\n\t\t// Check if the required container is defined\n\t\tif ( this.hasDashboard() ){\n\t\t\t// Init ResizeSensor\n\t\t\tElementQueries.init();\n\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Define global settings\n\t\t\tthis.defineSettings();\n\t\t\t\n\t\t\t// Create courses using the DOM elements\n\t\t\tthis.createCourses();\n\n\t\t\t// Add function to expand and collapse all containers\n\t\t\t// this.slideAll();\n\n\t\t\t// Listen filters\n\t\t\tthis.filters();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\tfilters: {\n\t\t\t\tform:    $( '#ulg-manage-progress-filters-form' ),\n\t\t\t\tselects: $( '#ulg-manage-progress-filters-form select' )\n\t\t\t}\n\t\t}\n\t}\n\n\tdefineSettings(){\n\t\t// Create settings\n\t\tthis.settings = {\n\t\t\tslideToggleDuration: 300\n\t\t}\n\t}\n\n\tcreateCourses(){\n\t\t// Get all courses\n\t\tconst $courses = $( '.ulg-manage-progress-course' );\n\n\t\t// Create Courses\n\t\t$.each( $courses, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Course( $( $element ), this.settings );\n\t\t});\n\t}\n\n\thasDashboard(){\n\t\treturn $( '.ulg-manage-progress-courses' ).length > 0;\n\t}\n\n\tslideAll(){\n\t\t// Listen to the clicks on the buttons\n\t\t$( '.ulg-manage-progress .ulg-manage-progress-btn--expand-all' ).on( 'click', () => {\n\t\t\texpandAll();\n\t\t});\n\n\t\t$( '.ulg-manage-progress .ulg-manage-progress-btn--collapse-all' ).on( 'click', () => {\n\t\t\tcollapseAll();\n\t\t});\n\n\t\tconst expandAll = () => {\n\t\t\t// Get all the collapsed containers\n\t\t\tconst collapsedContainers = {\n\t\t\t\tcourses: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-course--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-course__toggle-btn'\n\t\t\t\t},\n\t\t\t\tlessons: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-lesson--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-lesson__toggle-btn'\n\t\t\t\t},\n\t\t\t\ttopic: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-topic--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-topic__toggle-btn'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.each( collapsedContainers, ( index, elementType ) => {\n\t\t\t\t// Get containers\n\t\t\t\tconst $containers = $( elementType.container );\n\n\t\t\t\t// Iterate each container\n\t\t\t\t$.each( $containers, ( index, container ) => {\n\t\t\t\t\t// Get container element\n\t\t\t\t\tconst $container = $( container );\n\n\t\t\t\t\t// Get toggle button\n\t\t\t\t\tconst $toggleButton = $container.find( elementType.toggle );\n\n\t\t\t\t\t// Trigger click\n\t\t\t\t\t$toggleButton.trigger( 'click' );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\tconst collapseAll = () => {\n\t\t\t// Get all the expanded containers\n\t\t\tconst expandedContainers = {\n\t\t\t\tcourses: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-course--expanded',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-course__toggle-btn'\n\t\t\t\t},\n\t\t\t\tlessons: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-lesson--expanded',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-lesson__toggle-btn'\n\t\t\t\t},\n\t\t\t\ttopic: {\n\t\t\t\t\tcontainer: '.ulg-manage-progress-topic--collapsed',\n\t\t\t\t\ttoggle:    '.ulg-manage-progress-topic__toggle-btn'\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.each( expandedContainers, ( index, elementType ) => {\n\t\t\t\t// Get containers\n\t\t\t\tconst $containers = $( elementType.container );\n\n\t\t\t\t// Iterate each container\n\t\t\t\t$.each( $containers, ( index, container ) => {\n\t\t\t\t\t// Get container element\n\t\t\t\t\tconst $container = $( container );\n\n\t\t\t\t\t// Get toggle button\n\t\t\t\t\tconst $toggleButton = $container.find( elementType.toggle );\n\n\t\t\t\t\t// Trigger click\n\t\t\t\t\t$toggleButton.trigger( 'click' );\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\n\tfilters(){\n\t\t// Listen to changes\n\t\tthis.$elements.filters.selects.on( 'change', () => {\n\t\t\t// Submit form\n\t\t\tthis.$elements.filters.form.trigger( 'submit' );\n\t\t});\n\t}\n}\n\nclass Course {\n\tconstructor( $container, settings ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get important elements from the container\n\t\tthis.getElements( $container );\n\n\t\t// Get course data\n\t\tthis.getCourseData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleCourseContent();\n\n\t\t// Create lessons using the DOM elements\n\t\tthis.createLessons();\n\n\t\t// Create quizzes using the DOM elements\n\t\t// this.createQuizzes();\n\t}\n\n\tgetCourseData(){\n\t\tthis.courseData = {\n\t\t\tcourseId:       this.$elements.container.data( 'course-id' ),\n\t\t\tstatus:         this.$elements.container.data( 'status' ),\n\t\t\thasLessons:     !! parseInt( this.$elements.container.data( 'has-lessons' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) ),\n\t\t\thasCertificate: !! parseInt( this.$elements.container.data( 'has-certificate' ) ),\n\t\t}\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-course--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-course--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-course--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-course--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-course__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-course__content' )\n\t\t}\n\t}\n\n\ttoggleCourseContent(){\n\t\t// Check if the course has lessons or quizzes\n\t\tif ( this.courseData.hasLessons || this.courseData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateLessons(){\n\t\t// Get all lessons\n\t\tconst $lessons = this.$elements.container.find( '.ulg-manage-progress-lesson' );\n\n\t\t// Create Courses\n\t\t$.each( $lessons, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Lesson( $( $element ), this.dashboardSettings, this.courseData );\n\t\t});\n\t}\n\n\tcreateQuizzes(){\n\t\t// Get all quizzes containers\n\t\tconst $quizzesContainers = this.$elements.container.find( '.ulg-manage-progress-course__quizzes .ulg-manage-progress-quizzes' );\n\n\t\t// Create Quizzes\n\t\t$.each( $quizzesContainers, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Quizzes( $( $element ), this.dashboardSettings, this.courseData );\n\t\t});\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nclass Lesson {\n\tconstructor( $container, settings, courseData ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\t\t// Save courseData\n\t\tthis.courseData = courseData;\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get important elements from the container\n\t\tthis.getElements( $container );\n\n\t\t// Get lesson data\n\t\tthis.getLessonData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleLessonContent();\n\n\t\t// Create topics using the DOM elements\n\t\tthis.createTopics();\n\n\t\t// Create quizzes using the DOM elements\n\t\t// this.createQuizzes();\n\t}\n\n\tgetLessonData(){\n\t\tthis.lessonData = {\n\t\t\tcourse:         this.courseData,\n\t\t\tlessonId:       this.$elements.container.data( 'lesson-id' ),\n\t\t\tavailableOn:    ! isEmpty( this.$elements.container.data( 'available-on' ) ) ? parseInt( this.$elements.container.data( 'available-on' ) ) : null,\n\t\t\tisCompleted:    !! parseInt( this.$elements.container.data( 'is-completed' ) ),\n\t\t\tisAvailable:    !! parseInt( this.$elements.container.data( 'is-available' ) ),\n\t\t\thasTopics:      !! parseInt( this.$elements.container.data( 'has-topics' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) ),\n\t\t}\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-lesson--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-lesson--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-lesson--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-lesson--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-lesson__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-lesson__content' )\n\t\t}\n\t}\n\n\ttoggleLessonContent(){\n\t\t// Check if the lesson has topics or quizzes\n\t\tif ( this.lessonData.hasTopics || this.lessonData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateTopics(){\n\t\t// Get all topics\n\t\tconst $topics = this.$elements.container.find( '.ulg-manage-progress-topic' );\n\n\t\t// Create Courses\n\t\t$.each( $topics, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Topic( $( $element ), this.dashboardSettings, this.courseData, this.lessonData );\n\t\t});\n\t}\n\n\tcreateQuizzes(){\n\t\t// Get all quizzes containers\n\t\tconst $quizzesContainers = this.$elements.container.find( '.ulg-manage-progress-lesson__quizzes .ulg-manage-progress-quizzes' );\n\n\t\t// Create Quizzes\n\t\t$.each( $quizzesContainers, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Quizzes( $( $element ), this.dashboardSettings, this.courseData, this.lessonData );\n\t\t});\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nclass Topic {\n\tconstructor( $container, settings, courseData, lessonData ){\n\t\t// Save settings in the object's instance\n\t\tthis.dashboardSettings = settings;\n\t\t// Save course data\n\t\tthis.courseData = courseData;\n\t\t// Save lesson data\n\t\tthis.lessonData = lessonData;\n\n\t\t// Get elements\n\t\tthis.getElements( $container );\n\n\t\t// Define the important CSS classes\n\t\tthis.defineCssClasses();\n\n\t\t// Get lesson data\n\t\tthis.getTopicData();\n\n\t\t// Add toggle functionality\n\t\tthis.toggleTopicContent();\n\t}\n\n\tgetElements( $container ){\n\t\tthis.$elements = {\n\t\t\tcontainer: $container,\n\t\t\ttoggleBtn: $container.find( '.ulg-manage-progress-topic__toggle-btn' ),\n\t\t\tcontent:   $container.find( '.ulg-manage-progress-topic__content' )\n\t\t}\n\t}\n\n\tgetTopicData(){\n\t\tthis.topicData = {\n\t\t\tcourse:         this.courseData,\n\t\t\tlesson:         this.lessonData,\n\t\t\ttopicId:        this.$elements.container.data( 'topic-id' ),\n\t\t\tisCompleted:    !! parseInt( this.$elements.container.data( 'is-completed' ) ),\n\t\t\thasQuizzes:     !! parseInt( this.$elements.container.data( 'has-quizzes' ) )\n\t\t}\n\n\t\tdelete this.topicData.lesson.course;\n\t}\n\n\tdefineCssClasses(){\n\t\tthis.cssClasses = {\n\t\t\ttoggle: {\n\t\t\t\tcollapsed:  'ulg-manage-progress-topic--collapsed',\n\t\t\t\tcollapsing: 'ulg-manage-progress-topic--collapsing',\n\t\t\t\texpanding:  'ulg-manage-progress-topic--expanding',\n\t\t\t\texpanded:   'ulg-manage-progress-topic--expanded',\n\t\t\t}\n\t\t}\n\t}\n\n\tsetToggleClass( status ){\n\t\t// First remove all the classes\n\t\tthis.$elements.container.removeClass( Object.values( this.cssClasses.toggle ).join( ' ' ) );\n\n\t\t// Then add the correct class\n\t\tthis.$elements.container.addClass( this.cssClasses.toggle[ status ] );\n\t}\n\n\ttoggleTopicContent(){\n\t\t// Check if the lesson has topics or quizzes\n\t\tif ( this.topicData.hasQuizzes ){\n\t\t\t// Listen to clicks on the toggle button\n\t\t\tthis.$elements.toggleBtn.on( 'click', () => {\n\t\t\t\t// Check if we have to close it or open it\n\t\t\t\tif ( this.isCollapsed() ){\n\t\t\t\t\t// As it's collapsed, we have to expand it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'expanding' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.hide().slideDown( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'expanded' );\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// As it's expanded, we have to collapse it\n\n\t\t\t\t\t// Set status\n\t\t\t\t\tthis.setToggleClass( 'collapsing' );\n\n\t\t\t\t\t// Do the slideDown\n\t\t\t\t\tthis.$elements.content.show().slideUp( this.dashboardSettings.slideToggleDuration, () => {\n\t\t\t\t\t\t// Set status\n\t\t\t\t\t\tthis.setToggleClass( 'collapsed' );\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tisCollapsed(){\n\t\t// Check if the container has the collapsed class\n\t\treturn this.$elements.container.hasClass( this.cssClasses.toggle.collapsed );\n\t}\n}\n\nexport default CourseDashboard;","let $ = jQuery;\n\nimport {\n\trestCall,\n\tisEmpty,\n\tisDefined\n} from './utilities.js';\n\nclass ManageProgress {\n\tconstructor(){\n\t\t// Check if there is a \"manage progress\" container\n\t\tif ( this.isManageProgress() ){\n\t\t\t// Check if the user can manage this progress\n\t\t\tif ( this.canManageProgress() ){\n\t\t\t\t// Set settings\n\t\t\t\tthis.setSettings();\n\n\t\t\t\t// Call to the functions that will add event listeners to the checkboxes\n\t\t\t\tthis.listenProgressChangesOnCourses();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetSettings(){\n\t\tthis.settings = {}\n\t}\n\n\tlistenProgressChangesOnCourses(){\n\t\t// Get all courses\n\t\tconst $courses = $( '.ulg-manage-progress-course' );\n\n\t\t// Create Courses\n\t\t$.each( $courses, ( index, $element ) => {\n\t\t\t// Create instance of Course\n\t\t\tnew Course( $( $element ), this.settings );\n\t\t} );\n\t}\n\n\tisManageProgress(){\n\t\treturn $( '.ulg-manage-progress--manage-progress' ).length > 0 && typeof ULGM_ManageProgress !== 'undefined';\n\t}\n\n\tcanManageProgress(){\n\t\treturn !! parseInt( ULGM_ManageProgress.canManageProgress );\n\t}\n}\n\nclass Course {\n\tconstructor( $course ){\n\n\t\t// Get elements\n\t\tthis.getElements( $course );\n\n\t\t// Get course data\n\t\tthis.getCourseData();\n\n\t\t// Create children\n\t\tthis.createChildren();\n\n\t\t// Listen clicks on the checkboxes\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $course ){\n\t\tthis.$elements = {\n\t\t\tcourse: $course,\n\t\t\tactions: $course.find( '.ulg-manage-progress-course__progress-actions' ),\n\t\t\tcheckbox: $course.find( '.ulg-manage-progress-course__progress-action-checkbox' ),\n\t\t\tcancel: $course.find( '.ulg-manage-progress-course__progress-action-cancel' ),\n\t\t\tprogress: {\n\t\t\t\tnumber: $course.find( '.ulg-manage-progress-course__progress-percentage span' ),\n\t\t\t\tbar: $course.find( '.ulg-manage-progress-course__progress-bar' )\n\t\t\t},\n\t\t\tlessons: $course.find( '.ulg-manage-progress-lesson' ),\n\t\t\tquizzes: $course.find( '.ulg-manage-progress-quiz' ),\n\t\t\ttopics: $course.find( '.ulg-manage-progress-topic' ),\n\t\t\trightContainer: $course.find( '.ulg-manage-progress-course__right' )\n\t\t}\n\t}\n\n\tgetCourseData(){\n\t\tthis.courseData = {\n\t\t\tcourseId: this.$elements.course.data( 'course-id' ),\n\t\t\tstatus: this.$elements.course.data( 'status' ),\n\t\t\thasLessons: !!parseInt( this.$elements.course.data( 'has-lessons' ) ),\n\t\t\thasQuizzes: !!parseInt( this.$elements.course.data( 'has-quizzes' ) ),\n\t\t\thasCertificate: !!parseInt( this.$elements.course.data( 'has-certificate' ) ),\n\t\t}\n\n\t\t// Parse status\n\t\tthis.courseData.status = this.courseData.status.replace( '_', '-' );\n\t}\n\n\tcreateChildren(){\n\t\t// Create empty arrays\n\t\tthis.courseData.children = {\n\t\t\tlessons: [],\n\t\t\tquizzes: [],\n\t\t\ttopics: []\n\t\t}\n\n\t\t// Create lessons\n\t\t$.each( this.$elements.lessons, ( index, lesson ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $lesson = $( lesson );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.lessons.push( new Lesson( this, $lesson ) );\n\t\t} );\n\n\t\t// Create quizzes\n\t\t$.each( this.$elements.quizzes, ( index, quiz ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $quiz = $( quiz );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.quizzes.push( new Quiz( this, $quiz ) );\n\t\t} );\n\n\t\t// Create topics\n\t\t$.each( this.$elements.topics, ( index, topic ) => {\n\t\t\t// Get jQuery element\n\t\t\tconst $topic = $( topic );\n\n\t\t\t// Create lesson instances\n\t\t\tthis.courseData.children.topics.push( new Topic( this, $topic ) );\n\t\t} );\n\n\t\t// Create object with all the children\n\t\tthis.courseData.children.all = [].concat( this.courseData.children.lessons, this.courseData.children.topics, this.courseData.children.quizzes )\n\t}\n\n\tsetProgress( percentage ){\n\t\t// Set new progress\n\t\tthis.$elements.progress.number.text( percentage );\n\t\tthis.$elements.progress.bar.css( {width: percentage} );\n\n\t\t// Set correct status class. First, remove all of them\n\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--not-started ulg-manage-progress-course--in-progress ulg-manage-progress-course--completed' );\n\n\t\t// Change status of the course\n\t\tif (percentage == 100) {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'completed';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--completed' );\n\t\t} else if (percentage == 0) {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'not-started';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--not-started' );\n\t\t} else {\n\t\t\t// Update status\n\t\t\tthis.courseData.status = 'in-progress';\n\n\t\t\t// Set status class\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--in-progress' );\n\t\t}\n\t}\n\n\tsetCertificate( certificateUrl ){\n\t\t// Find the container we have to remove\n\t\tthis.$elements.rightContainer.find( '.ulg-manage-progress-course__action' ).remove();\n\n\t\t// Check if we have to add the certificate button again\n\t\tif (!isEmpty( certificateUrl )) {\n\t\t\t// Create the \"Certificate\" button\n\t\t\tconst $certificateButton = $( `\n\t\t\t\t<div class=\"ulg-manage-progress-course__action\">\n\t\t\t\t\t<a href=\"${certificateUrl}\" target=\"_blank\" class=\"ulg-manage-progress-btn\">\n\t\t\t\t\t\t${ULGM_ManageProgress.i18n.certificate}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to the container\n\t\t\tthis.$elements.rightContainer.prepend( $certificateButton );\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif (this.confirmationVisible) {\n\t\t\t\t// Do request call\n\t\t\t\tlet wantsToCompleteCourse = 0;\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t\t// Check the current status\n\t\t\t\tif (['not-started', 'in-progress'].includes( this.courseData.status )) {\n\t\t\t\t\twantsToCompleteCourse = 1;\n\t\t\t\t}\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tlessons[lesson.lessonData.lessonId] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteCourse;\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteCourse;\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.courseData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--loading' );\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Add certificate\n\t\t\t\t\t\t\tthis.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-course__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tcompleteCourseItems( completedChildren ){\n\t\t// Change the array to an object where the keys\n\t\t// are the IDs\n\t\tlet completedChildrenObj = {}\n\n\t\t// Check if the completedChildren is empty\n\t\tcompletedChildren = Object.keys( completedChildren ).length == 0 ? [] : completedChildren;\n\n\t\t// Iterate all children\n\t\tcompletedChildren.forEach( ( element ) => {\n\t\t\t// Add children to the object\n\t\t\tcompletedChildrenObj[element.ID] = element;\n\t\t} );\n\n\t\t// Iterate each children\n\t\t$.each( this.courseData.children.all, function ( index, child ){\n\t\t\t// Check if the current children is included in the list of\n\t\t\t// completed children\n\t\t\tlet shouldBeCompleted = isDefined( completedChildrenObj[child.getTheId()] );\n\n\t\t\t// Mark all the children as not completed\n\t\t\tchild.markAsNotComplete( completedChildrenObj[child.getTheId()] );\n\n\t\t\t// And then check if we have to completed it\n\t\t\tif (shouldBeCompleted) {\n\t\t\t\t// Complete\n\t\t\t\tchild.markAsComplete( completedChildrenObj[child.getTheId()] );\n\t\t\t}\n\t\t} );\n\t}\n}\n\nclass Lesson {\n\tconstructor( Course, $lesson ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $lesson );\n\n\t\t// Get lesson data\n\t\tthis.getLessonData();\n\n\t\t// Listen to checkbox clicks\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $lesson ){\n\t\tthis.$elements = {\n\t\t\tcourse: $lesson.closest( '.ulg-manage-progress-course' ),\n\t\t\tlesson: $lesson,\n\t\t\tactions: $lesson.find( '.ulg-manage-progress-lesson__progress-actions' ),\n\t\t\tcheckbox: $lesson.find( '.ulg-manage-progress-lesson__progress-action-checkbox' ),\n\t\t\tcancel: $lesson.find( '.ulg-manage-progress-lesson__progress-action-cancel' ),\n\t\t}\n\t}\n\n\tgetLessonData(){\n\t\tthis.lessonData = {\n\t\t\tlessonId: this.$elements.lesson.data( 'lesson-id' ),\n\t\t\tcourseId: this.$elements.lesson.data( 'course-id' ),\n\t\t\tisCompleted: this.$elements.lesson.data( 'is-completed' ),\n\t\t\thasTopics: !!parseInt( this.$elements.lesson.data( 'has-topics' ) ),\n\t\t\thasQuizzes: !!parseInt( this.$elements.lesson.data( 'has-quizzes' ) ),\n\t\t}\n\n\t\t// Check if it has children\n\t\tthis.lessonData.hasChildren = this.lessonData.hasTopics || this.lessonData.hasQuizzes;\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif (!this.lessonData.hasChildren || this.confirmationVisible) {\n\t\t\t\t// Do request call\n\n\t\t\t\t// Check if it wants to complete or not the lesson\n\t\t\t\t// If the lesson is not completed then the user wants to complete it, if\n\t\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\t\tlet wantsToCompleteLesson = Number( !this.lessonData.isCompleted );\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\tif (lesson.lessonData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\tlessons[lesson.lessonData.lessonId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\tif (quiz.quizData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (topic.topicData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteLesson;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tif (topic.topicData.lessonId === this.lessonData.lessonId) {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteLesson;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t\t// console.log(\n\t\t\t\t// \t{\n\t\t\t\t// \t\tlessons: lessons,\n\t\t\t\t// \t\ttopics: topics,\n\t\t\t\t// \t\tquizzes: quizzes,\n\n\t\t\t\t// \t}\n\t\t\t\t// );\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.lessonData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--loading' );\n\n\t\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\t\tthis.lessonData.isCompleted = wantsToCompleteLesson;\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} else {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-lesson__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tmarkAsComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--not-completed' );\n\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.lesson.data( 'is-completed', true );\n\t\tthis.lessonData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.lesson.removeClass( 'ulg-manage-progress-lesson--completed' );\n\t\tthis.$elements.lesson.addClass( 'ulg-manage-progress-lesson--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.lesson.data( 'is-completed', false );\n\t\tthis.lessonData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.lessonData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.lessonData.lessonId;\n\t}\n}\n\nclass Topic {\n\tconstructor( Course, $topic ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $topic );\n\n\t\t// Get topic data\n\t\tthis.getTopicData();\n\n\t\t// Listen to checkbox clicks\n\t\tthis.listenCheckboxChanges();\n\n\t\t// Set the default value for the confirmationVisible property\n\t\tthis.confirmationVisible = false;\n\t}\n\n\tgetElements( $topic ){\n\t\tthis.$elements = {\n\t\t\tcourse: $topic.closest( '.ulg-manage-progress-course' ),\n\t\t\tlesson: $topic.closest( '.ulg-manage-progress-lesson' ),\n\t\t\ttopic: $topic,\n\t\t\tactions: $topic.find( '.ulg-manage-progress-topic__progress-actions' ),\n\t\t\tcheckbox: $topic.find( '.ulg-manage-progress-topic__progress-action-checkbox' ),\n\t\t\tcancel: $topic.find( '.ulg-manage-progress-topic__progress-action-cancel' ),\n\t\t}\n\t}\n\n\tgetTopicData(){\n\t\tthis.topicData = {\n\t\t\ttopicId:     this.$elements.topic.data( 'topic-id' ),\n\t\t\tlessonId:    this.$elements.topic.data( 'lesson-id' ),\n\t\t\tcourseId:    this.$elements.topic.data( 'course-id' ),\n\t\t\tisCompleted: this.$elements.topic.data( 'is-completed' ),\n\t\t\thasQuizzes:  this.$elements.topic.data( 'has-quizzes' ),\n\t\t\thasChildren: this.$elements.topic.data( 'has-quizzes' ),\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Check if we should do the change or if\n\t\t\t// we should show the confirmation buttons\n\t\t\tif ( ! this.topicData.hasChildren || this.confirmationVisible ){\n\t\t\t\t// Do request call\n\n\t\t\t\t// Check if it wants to complete or not the topic\n\t\t\t\t// If the topic is not completed then the user wants to complete it, if\n\t\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\t\tlet wantsToCompleteTopic = Number( ! this.topicData.isCompleted );\n\n\t\t\t\t// Add loading class to the actions container\n\t\t\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--loading' );\n\t\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t\t\tlet lessons = {};\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t\t} );\n\n\t\t\t\tlet topics  = {};\n\t\t\t\tlet quizzes = {};\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\t\tif ( quiz.quizData.topicId === this.topicData.topicId ){\n\t\t\t\t\t\tquizzes[ quiz.quizData.quizId ] = wantsToCompleteTopic;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t\t} );\n\n\t\t\t\t// Iterate all children\n\t\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (topic.topicData.topicId === this.topicData.topicId) {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = wantsToCompleteTopic;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t\t}\n\n\t\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\t\tif (topic.topicData.topicId === this.topicData.topicId) {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteTopic;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} );\n\t\t\t\t} );\n\n\t\t\t\t// Temporal fix\n\t\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\n\t\t\t\t// Do REST call\n\t\t\t\trestCall( {\n\t\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\t\trest_course_id: this.topicData.courseId,\n\t\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\t\trest_topics: topics,\n\t\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t\t},\n\t\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--loading' );\n\n\t\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\t\tthis.topicData.isCompleted = wantsToCompleteTopic;\n\n\t\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t\t// Temporal fix\n\t\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t\t},\n\t\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t\t// Check response\n\t\t\t\t\t\tif ( response.success ){\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t\t// Debug\n\t\t\t\t\t\tconsole.error( response );\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Show confirmation\n\t\t\t\tthis.confirmChanges();\n\t\t\t}\n\t\t} );\n\t}\n\n\tconfirmChanges(){\n\t\t// Add class so the user knows that it has to confirm the change\n\t\tthis.$elements.actions.addClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t// Change confirmation value\n\t\tthis.confirmationVisible = true;\n\n\t\t// Bind cancel button\n\t\tthis.$elements.cancel.on( 'click', () => {\n\t\t\t// Remove the class that shows both buttons without doing any other modification\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-topic__progress-actions--need-to-confirm' );\n\n\t\t\t// Remove listener\n\t\t\tthis.$elements.cancel.off( 'click' );\n\n\t\t\t// Change confirmation value\n\t\t\tthis.confirmationVisible = false;\n\t\t} );\n\t}\n\n\tmarkAsComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--not-completed' );\n\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.topic.data( 'is-completed', true );\n\t\tthis.topicData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete(){\n\t\t// Change the status class\n\t\tthis.$elements.topic.removeClass( 'ulg-manage-progress-topic--completed' );\n\t\tthis.$elements.topic.addClass( 'ulg-manage-progress-topic--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.topic.data( 'is-completed', false );\n\t\tthis.topicData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.topicData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.topicData.topicId;\n\t}\n}\n\nclass Quiz {\n\tconstructor( Course, $quiz ){\n\t\t// Save parent instance\n\t\tthis.Course = Course;\n\n\t\t// Get elements\n\t\tthis.getElements( $quiz );\n\n\t\t// Get quiz data\n\t\tthis.getQuizData();\n\n\t\t// Listen to checkbox changes\n\t\tthis.listenCheckboxChanges();\n\t}\n\n\tgetElements( $quiz ){\n\t\tthis.$elements = {\n\t\t\tcourse: $quiz.closest( '.ulg-manage-progress-course' ),\n\t\t\tquiz: $quiz,\n\t\t\tactions: $quiz.find( '.ulg-manage-progress-quiz__progress-actions' ),\n\t\t\tcheckbox: $quiz.find( '.ulg-manage-progress-quiz__progress-action-checkbox' ),\n\t\t\tcancel: $quiz.find( '.ulg-manage-progress-quiz__progress-action-cancel' ),\n\t\t\trightContainer: $quiz.find( '.ulg-manage-progress-quiz__right' )\n\t\t}\n\t}\n\n\tgetQuizData(){\n\t\tthis.quizData = {\n\t\t\tquizId: this.$elements.quiz.data( 'quiz-id' ),\n\t\t\tlessonId: this.$elements.quiz.data( 'lesson-id' ),\n\t\t\tcourseId: this.$elements.quiz.data( 'course-id' ),\n\t\t\ttopicId: this.$elements.quiz.data( 'topic-id' ),\n\t\t\tisCompleted: this.$elements.quiz.data( 'is-completed' ),\n\t\t}\n\t}\n\n\tsetCertificate( certificateUrl = null ){\n\t\t// Find the container we have to remove\n\t\tthis.$elements.rightContainer.find( '.ulg-manage-progress-quiz__action' ).remove();\n\n\t\t// Check if we have to add the certificate button again\n\t\tif (!isEmpty( certificateUrl )) {\n\t\t\t// Create the \"Certificate\" button\n\t\t\tconst $certificateButton = $( `\n\t\t\t\t<div class=\"ulg-manage-progress-quiz__action\">\n\t\t\t\t\t<a href=\"${certificateUrl}\" target=\"_blank\" class=\"ulg-manage-progress-btn\">\n\t\t\t\t\t\t${ULGM_ManageProgress.i18n.certificate}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t` );\n\n\t\t\t// Add button to the container\n\t\t\tthis.$elements.rightContainer.append( $certificateButton );\n\t\t}\n\t}\n\n\tlistenCheckboxChanges(){\n\t\t// Listen clicks on the checkbox\n\t\tthis.$elements.checkbox.on( 'click', ( event ) => {\n\t\t\t// Do request call\n\n\t\t\t// Check if it wants to complete or not the quiz\n\t\t\t// If the quiz is not completed then the user wants to complete it, if\n\t\t\t// it's completed then it wants to mark it as incomplete\n\t\t\tlet wantsToCompleteQuiz = Number( ! this.quizData.isCompleted ); // TODO NOT NEEDED\n\n\t\t\t// Add loading class to the actions container\n\t\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--loading' );\n\t\t\tthis.$elements.actions.removeClass( 'ulg-manage-progress-quiz__progress-actions--need-to-confirm' );\n\n\t\t\tlet lessons = {};\n\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.lessons.forEach( ( lesson ) => {\n\t\t\t\tlessons[lesson.lessonData.lessonId] = Number( lesson.lessonData.isCompleted );\n\t\t\t} );\n\n\t\t\tlet topics  = {};\n\t\t\tlet quizzes = {};\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.quizzes.forEach( ( quiz ) => {\n\t\t\t\tif (quiz.quizData.quizId === this.quizData.quizId) {\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = wantsToCompleteQuiz;\n\t\t\t\t} else {\n\t\t\t\t\tquizzes[quiz.quizData.quizId] = Number( quiz.quizData.isCompleted );\n\t\t\t\t}\n\n\t\t\t\t// 1 means that it needs to be complete\n\t\t\t\t//quizzes[ quiz.quizData.quizId ] = wantsToCompleteCourse;\n\t\t\t} );\n\n\t\t\t// Iterate all children\n\t\t\tthis.Course.courseData.children.topics.forEach( ( topic ) => {\n\t\t\t\t// 1 means that it needs to be complete\n\n\t\t\t\tif (typeof topics[topic.topicData.lessonId] === 'undefined') {\n\t\t\t\t\ttopics[topic.topicData.lessonId] = {};\n\t\t\t\t}\n\n\t\t\t\ttopics[topic.topicData.lessonId][topic.topicData.topicId] = Number( topic.topicData.isCompleted );\n\n\t\t\t\tlet topic_quizzes        = $( topic.$elements.topic ).data( 'topic-quizzes' );\n\n\t\t\t\tlet topic_quizzes_string = '';\n\t\t\t\tif( typeof topic_quizzes === 'string' ){\n\t\t\t\t\ttopic_quizzes_string = topic_quizzes.toString();\n\t\t\t\t}\n\n\t\t\t\tlet topic_quizzes_array  = topic_quizzes_string.split( ',' );\n\n\t\t\t\ttopic_quizzes_array.forEach( ( _topic ) => {\n\t\t\t\t\tlet _topic_id = parseInt( _topic );\n\t\t\t\t\tif (!isNaN( _topic_id )) {\n\t\t\t\t\t\tif (topic.topicData.topicId === this.quizData.topicId) {\n\t\t\t\t\t\t\tquizzes[_topic_id] = wantsToCompleteQuiz;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tquizzes[_topic_id] = '?';\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t} );\n\n\t\t\t// Temporal fix\n\t\t\t// Add the disabled class to all the chekboxes of the course\n\t\t\tthis.$elements.course.addClass( 'ulg-manage-progress-course--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).addClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).addClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).addClass( 'ulg-manage-progress-quiz--disabled' );\n\n\t\t\t// Do REST call\n\t\t\trestCall( {\n\t\t\t\turl: ULGM_ManageProgress.restUrl,\n\t\t\t\tendpoint: 'change_user_progress',\n\t\t\t\tnonce: ULGM_ManageProgress.nonce,\n\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\tdata: {\n\t\t\t\t\trest_user_id: ULGM_ManageProgress.userId,\n\t\t\t\t\trest_course_id: this.quizData.courseId,\n\t\t\t\t\trest_lessons: lessons,\n\t\t\t\t\trest_topics: topics,\n\t\t\t\t\trest_quizzes: quizzes,\n\t\t\t\t\tpostNonce: ULGM_ManageProgress.postNonce,\n\t\t\t\t},\n\t\t\t\tonDone: ( response ) => {\n\t\t\t\t\t// Remove loading and confirmation class to the actions container\n\t\t\t\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--loading' );\n\n\t\t\t\t\t// Update isCompleted property\n\t\t\t\t\tthis.quizData.isCompleted = wantsToCompleteQuiz;\n\n\t\t\t\t\t// Reset confirmation status\n\t\t\t\t\tthis.confirmationVisible = false;\n\n\t\t\t\t\t// Temporal fix\n\t\t\t\t\t// Remove the disabled class to all the chekboxes of the course\n\t\t\t\t\tthis.$elements.course.removeClass( 'ulg-manage-progress-course--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-lesson' ).removeClass( 'ulg-manage-progress-lesson--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-topic' ).removeClass( 'ulg-manage-progress-topic--disabled' );\n\t\t\t\t\tthis.$elements.course.find( '.ulg-manage-progress-quiz' ).removeClass( 'ulg-manage-progress-quiz--disabled' );\n\t\t\t\t},\n\t\t\t\tonSuccess: ( response ) => {\n\t\t\t\t\t// Check response\n\t\t\t\t\tif (response.success) {\n\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\tthis.Course.setProgress( response.progress.percentage );\n\n\t\t\t\t\t\t// Set progress\n\t\t\t\t\t\tthis.Course.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t// Set certificate\n\t\t\t\t\t\tthis.setCertificate( response.certificate_url );\n\n\t\t\t\t\t\t// Do the same with all the children\n\t\t\t\t\t\tthis.Course.completeCourseItems( response.progress.course_completed_children );\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonFail: ( response ) => {\n\t\t\t\t\t// Debug\n\t\t\t\t\tconsole.error( response );\n\t\t\t\t}\n\t\t\t} );\n\t\t} );\n\t}\n\n\tmarkAsComplete( childrenData ){\n\t\t// Remove certificate\n\t\tthis.setCertificate( childrenData.certificate_url );\n\n\t\t// Change the status class\n\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--not-completed' );\n\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.quiz.data( 'is-completed', true );\n\t\tthis.quizData.isCompleted = true;\n\t}\n\n\tmarkAsNotComplete( childrenData ){\n\t\t// Remove certificate\n\t\tthis.setCertificate();\n\n\t\t// Change the status class\n\t\tthis.$elements.quiz.removeClass( 'ulg-manage-progress-quiz--completed' );\n\t\tthis.$elements.quiz.addClass( 'ulg-manage-progress-quiz--not-completed' );\n\n\t\t// Change data status\n\t\tthis.$elements.quiz.data( 'is-completed', false );\n\t\tthis.quizData.isCompleted = false;\n\t}\n\n\tisComplete(){\n\t\treturn this.quizData.isCompleted;\n\t}\n\n\tgetTheId(){\n\t\treturn this.quizData.quizId;\n\t}\n}\n\nexport default ManageProgress;","import $ from 'jquery';\n\nimport {\n\tdestroyiCheck,\n\tformatNumber\n} from './utilities';\n\nclass BuyCourses {\n\tconstructor(){\n\t\t// Check if we have to invoke the methods\n\t\tif ( this.isBuyCourses() ){\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Get configuration\n\t\t\tthis.getConfiguration();\n\n\t\t\t// Destroy iCheck checkboxes\n\t\t\tdestroyiCheck();\n\n\t\t\t// Listen changes in the checkboxes\n\t\t\tthis.modifyCourses();\n\n\t\t\t// Listen changes to the quantity field\n\t\t\tthis.listenQuantityChanges();\n\n\t\t\t// Listen the form submission\n\t\t\tthis.listenFormSubmission();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\t// Get elements\n\t\tthis.$elements = {\n\t\t\tform:               $( '#uo-groups-buy-courses' ),\n\t\t\terrorNotice:        $( '#uo-groups-buy-course-error-notice' ),\n\t\t\tfield: {\n\t\t\t\tquantity:       $( '#uo-groups-buy-course-field-quantity' ),\n\t\t\t},\n\t\t\ttotals: {\n\t\t\t\tsubtotal:       $( '#uo-groups-buy-course-totals-subtotal' ),\n\t\t\t\tdiscount: {\n\t\t\t\t\tpercentage: $( '#uo-groups-buy-course-totals-discount-percentage' ),\n\t\t\t\t\ttotal:      $( '#uo-groups-buy-course-totals-discount' ),\n\t\t\t\t},\n\t\t\t\ttotal:          $( '#uo-groups-buy-course-totals-total' ),\n\t\t\t}\n\t\t}\n\t}\n\n\tgetConfiguration(){\n\t\t// Get bulk discount configuration\n\t\tlet bulkDiscountData = this.$elements.form.data( 'bulk-discount' );\n\t\t// Check if it's bulk discount is enabled\n\t\tlet bulkDiscountEnabled = bulkDiscountData.enabled == 'yes';\n\t\t// Check if there are discount groups\n\t\tbulkDiscountData.discounts = typeof bulkDiscountData.discounts !== 'undefined' ? bulkDiscountData.discounts : {};\n\t\t// Get discount groups\n\t\tlet bulkDiscountGroups = [];\n\t\t$.each( Object.values( bulkDiscountData.discounts ), ( index, group ) => {\n\t\t\tbulkDiscountGroups.push({\n\t\t\t\tminimumQuantity: parseInt( group.qty ),\n\t\t\t\tpercentage: parseFloat( group.percent )\n\t\t\t});\n\t\t});\n\n\t\t// Get configuration\n\t\tthis.config = {\n\t\t\tbulkDiscount: {\n\t\t\t\tenabled: bulkDiscountEnabled,\n\t\t\t\tgroups:  bulkDiscountGroups\n\t\t\t},\n\t\t\tformatPrice: {\n\t\t\t\ttemplate:          ULG_BuyCourses.formatPrice.template,\n\t\t\t\tnumberOfDecimals:  ULG_BuyCourses.formatPrice.numberOfDecimals,\n\t\t\t\tthousandSeparator: ULG_BuyCourses.formatPrice.thousandSeparator,\n\t\t\t\tdecimalSeparator:  ULG_BuyCourses.formatPrice.decimalSeparator,\n\t\t\t}\n\t\t}\n\n\t\t// Get totals\n\t\tthis.totals = {\n\t\t\tnumberOfSeats: 0,\n\t\t\tnumberOfStudents: 0,\n\t\t\tsubtotal: 0,\n\t\t\tdiscount: {\n\t\t\t\tpercentage: 0,\n\t\t\t\ttotal: 0\n\t\t\t},\n\t\t\ttotal: 0\n\t\t}\n\t}\n\n\tmodifyCourses(){\n\t\t// Listen changes to the checkboxes\n\t\tthis.$elements.form.on( 'change', '.uo-checkbox input', ( event ) => {\n\t\t\t// Get checkbox\n\t\t\tconst $checkbox = $( event.currentTarget );\n\n\t\t\t// Get row\n\t\t\tconst $row = $checkbox.closest( '.uo-groups-table-row' );\n\n\t\t\t// Toggle selected class\n\t\t\t$row.toggleClass( 'uo-groups-table-row--selected' );\n\n\t\t\t// Update totals\n\t\t\tthis.updateTotals();\n\t\t});\n\t}\n\n\tlistenFormSubmission(){\n\t\t// Listen form submission\n\t\tthis.$elements.form.on( 'submit', ( event ) => {\n\t\t\t// Validate\n\t\t\tconst validation = this.validate();\n\n\t\t\t// Show (or not) the error notice\n\t\t\tthis.errorNotice( ! validation.isValid, validation.message );\n\n\t\t\t// Check if it's not valid\n\t\t\tif ( ! validation.isValid ){\n\t\t\t\t// Prevent default\n\t\t\t\tevent.preventDefault();\n\t\t\t}\t\n\t\t});\n\t}\n\n\tlistenQuantityChanges(){\n\t\t// Listen quantity changes\n\t\tthis.$elements.field.quantity.on( 'input', () => {\n\t\t\t// Update totals\n\t\t\tthis.updateTotals();\n\t\t});\n\t}\n\n\tgetTotals(){\n\t\t// Get and update number of selected courses\n\t\tconst $selectedCourses = this.$elements.form.find( '.uo-checkbox input:checked' );\n\t\t// Update totals\n\t\tthis.totals.numberOfSeats = parseInt( this.$elements.field.quantity.val() );\n\t\t// Check if the number if valid\n\t\tthis.totals.numberOfSeats = isNaN( this.totals.numberOfSeats ) ? 1 : this.totals.numberOfSeats;\n\n\t\t// Get number of students\n\t\tlet numberOfStudents = this.$elements.field.quantity.val();\n\t\t// Update totals\n\t\tthis.totals.numberOfStudents = parseInt( numberOfStudents );\n\n\t\t// Get the number of selected courses\n\t\tthis.totals.numberOfCourses = $selectedCourses.length;\n\n\t\t// Get subtotal\n\t\tlet subtotal = numberOfStudents * $selectedCourses.toArray().reduce(( accumulator, course ) => {\n\t\t\t// Get jQuery object of the course\n\t\t\tconst $course = $( course );\n\n\t\t\t// Get price\n\t\t\tconst price = parseFloat( $course.data( 'price' ) );\n\n\t\t\t// Add price to the accumulator\n\t\t\treturn accumulator + price;\n\t\t}, 0 );\n\t\t// Update totals\n\t\tthis.totals.subtotal = subtotal;\n\n\t\t// Get discount\n\t\t// Get discount group\n\t\tconst discountGroup = this.getDiscountPercentage();\n\t\t// Get discount\n\t\tlet discount = -1 * subtotal * discountGroup.percentage / 100;\n\t\t// Update totals\n\t\tthis.totals.discount.percentage = discountGroup.percentage;\n\t\tthis.totals.discount.total = discount;\n\n\t\t// Get total\n\t\tlet total = subtotal + discount;\n\t\ttotal = total > 0 ? total : 0;\n\t\t// Update totals\n\t\tthis.totals.total = total;\n\t}\n\n\tgetDiscountPercentage(){\n\t\t// We will get what discount we have to apply\n\t\t// To do that, we're going to find the discount group\n\t\t// using the current number of selected groups, searching\n\t\t// for the group with the highest minimum\n\t\tlet discountGroup = {\n\t\t\tminimumQuantity: 0,\n\t\t\tpercentage: 0\n\t\t}\n\n\t\t// Check if the user has discount groups\n\t\tif ( this.config.bulkDiscount.enabled ){\n\t\t\t// Iterate groups\n\t\t\t$.each( this.config.bulkDiscount.groups, ( index, group ) => {\n\t\t\t\t// Check if the minimum is lower (or equal) than our number of seats\n\t\t\t\tif ( group.minimumQuantity <= this.totals.numberOfSeats ){\n\t\t\t\t\t// Save group\n\t\t\t\t\tdiscountGroup = group;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Return group\n\t\treturn discountGroup;\n\t}\n\n\tupdateTotals(){\n\t\t// Get totals\n\t\tthis.getTotals();\n\n\t\t// Update subtotal\n\t\tthis.$elements.totals.subtotal.html( this.formatPrice( this.totals.subtotal ) );\n\t\t\n\t\t// Update discount\n\t\t// If it's 0, remove percentage from the DOM\n\t\tif ( this.totals.discount.percentage == 0 ){\n\t\t\tthis.$elements.totals.discount.percentage.text( '' );\n\t\t}\n\t\t// Otherwise, add it\n\t\telse {\n\t\t\tthis.$elements.totals.discount.percentage.text( `${ this.totals.discount.percentage }% - ` );\n\t\t}\n\t\tthis.$elements.totals.discount.total.html( this.formatPrice( this.totals.discount.total ) );\n\n\t\t// Update total\n\t\tthis.$elements.totals.total.html( this.formatPrice( this.totals.total ) );\n\n\t\t// Add updated class\n\t\tthis.$elements.form.addClass( 'uo-groups-buy-courses--totals-updated' );\n\t\t// Remove class after 150ms\n\t\tsetTimeout(() => {\n\t\t\tthis.$elements.form.removeClass( 'uo-groups-buy-courses--totals-updated' );\n\t\t}, 150 );\n\t}\n\n\tvalidate(){\n\t\t// Default value\n\t\tlet response = {\n\t\t\tisValid: false,\n\t\t\tmessage: ''\n\t\t};\n\n\t\t// Check if there is at least one course selected\n\t\tif ( this.totals.numberOfSeats > 0 && this.totals.numberOfCourses > 0 ){\n\t\t\t// Update validation\n\t\t\tresponse.isValid = true;\n\t\t}\n\t\telse {\n\t\t\t// Otherwise, add message\n\t\t\tresponse.message = ULG_BuyCourses.i18n.selectAtLeastOne;\n\t\t}\n\n\t\t// Return response\n\t\treturn response;\n\t}\n\n\terrorNotice( hasError = false, message = '' ){\n\t\t// Check if we have to show or hide the notice\n\t\tif ( hasError ){\n\t\t\t// Show notice\n\t\t\tthis.$elements.errorNotice.show().html( message );\n\t\t}\n\t\telse {\n\t\t\t// Hide notice\n\t\t\tthis.$elements.errorNotice.hide();\n\t\t}\n\t}\n\n\tformatPrice( price ){\n\t\t// Get price format\n\t\tconst $price = $( this.config.formatPrice.template );\n\n\t\t// Replace dummy price with real price\n\t\t$price.html(( index, oldHtml ) => {\n\t\t\t// Get the number of wc_price( 0 )\n\t\t\tconst dummyPrice = formatNumber( 0, this.config.formatPrice.numberOfDecimals, this.config.formatPrice.decimalSeparator, this.config.formatPrice.thousandSeparator );\n\n\t\t\t// Format real price\n\t\t\tconst priceFormatted = formatNumber( price, this.config.formatPrice.numberOfDecimals, this.config.formatPrice.decimalSeparator, this.config.formatPrice.thousandSeparator );\n\n\t\t\t// Replace text\n\t\t\treturn oldHtml.replace( dummyPrice, priceFormatted );  \n\t\t});\n\n\t\t// Check if the price is negative\n\t\tif ( price < 0 ){\n\t\t\t// Add minus character\n\t\t\t$price.prepend( '-' );\n\t\t}\n\n\t\t// Return price jQuery element\n\t\treturn $price;\n\t}\n\n\tisBuyCourses(){\n\t\treturn $( '#uo-groups-buy-courses' ).length == 1 && typeof ULG_BuyCourses !== 'undefined';\n\t}\n}\n\nexport default BuyCourses;","import $ from 'jquery';\n\nclass CreateGroup {\n\tconstructor(){\n\t\t// Check if the page has the [uo_groups_create_group] \n\t\t// shortcode, or the respective Gutenberg block\n\t\tif ( this.isCreateGroup() ){\n\t\t\t// Get elements\n\t\t\tthis.getElements();\n\n\t\t\t// Add multi-select pillbox to the\n\t\t\t// \"Group Courses\" field\n\t\t\tthis.addPillboxToGroupCourses();\n\t\t}\n\t}\n\n\tgetElements(){\n\t\tthis.$elements = {\n\t\t\tcoursesList: $( '#ulg-create-group__courses-list' )\n\t\t}\n\t}\n\n\t/**\n\t * Add multi-select pillbox to the\n\t * \"Group Courses\" field\n\t */\n\taddPillboxToGroupCourses(){\n\t\tthis.$elements.coursesList.select2({\n\t\t\ttheme: 'default ulg-select2'\n\t\t});\n\t}\n\n\t/**\n\t * Check if the page has the [uo_groups_create_group] \n\t * shortcode, or the respective Gutenberg block\n\t */\n\tisCreateGroup(){\n\t\treturn $( '#ulg-create-group' ).length == 1;\n\t}\n}\n\nexport default CreateGroup;","import './js/define-main-object.js';\n\nimport './js/ulgm-rest-forms.js';\nimport './js/ulgm-assignments.js';\nimport './js/ulgm-essays.js';\nimport './js/ulgm-reporting.js';\nimport './js/front.js';\nimport './js/learndash_template_script.js';\nimport './js/uncanny-owl-groups-ui.js';\n\nimport GroupManagement from './js/group-management.js';\nimport GroupCourseReport from './js/group-course-report.js';\nimport CourseDashboard from './js/course-dashboard.js';\nimport ManageProgress from './js/manage-progress.js';\nimport BuyCourses from './js/buy-courses.js';\nimport CreateGroup from './js/create-group.js';\n\nimport './scss/main.scss';\n\n// Do on DOM ready\ndocument.addEventListener( 'DOMContentLoaded', () => {\n\tnew GroupManagement();\n\tnew GroupCourseReport();\n\tnew CourseDashboard();\n\tnew ManageProgress();\n\tnew BuyCourses();\n\tnew CreateGroup();\n});\n"],"names":["window","ulgmGroupManagement","jQuery","$","accountSwitch","length","attr","parent","hide","show","String","prototype","toHHMMSS","sec_numb","parseInt","this","hours","Math","floor","minutes","seconds","f1","f2","css","undefined","replace","document","ready","timer_el","timer_seconds","timer_button_el","cookie_key","cookie_name","cookie_timer_seconds","cookie","removeCookie","learndash_timer_var","setInterval","time_display","toString","html","clearInterval","trigger","sfwd_data","json","parseJSON","on","e","_this","addressValue","indexOf","groupLeaderCourseReportSetup","preventDefault","dataVars","essayUrl","ajax","method","data","url","root","beforeSend","xhr","setRequestHeader","nonce","success","response","essay","append","fail","alert","refId","quizId","userId","statistic_nonce","action","groupQuizReportSetup","statistic_action","ULGM_ManageProgress","post_data","content","type","ajaxurl","dataType","cache","error","jqXHR","textStatus","errorThrown","reply_data","remove","find","click","parents","next","toggle","transitionTimeout","Assignments","constructor","assignment_id","val","serialize","actionsAssignment","post_id","editAssignmentsData","saveAssignmentsData","mouseenter","clearTimeout","focusedRowActions","not","removeClass","addClass","mouseleave","setTimeout","uoTable","uoTableHidden","lessonId","groupId","courseId","status","elements","select","group","element","options","course","no_element","lesson","createTable","createTableHidden","addEvents","getAssignmentsData","$table","getElementById","columns","title","className","groupAssignments","localized","name","visible","columns_visibilities","first_name","last_name","author","orderable","points","assignedCourse","assignedlesson","comments","date","buttonsShared","exportOptions","id","node","matches","column","format","body","row","classList","contains","querySelector","i18n","notApproved","innerText","trim","filename","filenameParts","reportBaseName","forEach","filterID","$filter","filterValue","value","push","join","reportButtons","dataset","csv","Object","assign","extend","text","exportCSV","excel","exportExcel","tableVars","aLengthMenu","all","responsive","iDisplayLength","columnDefs","full","meta","style","selector","stateSave","dom","buttons","destroy","language","processing","search","searchPlaceholder","lengthMenu","info","infoEmpty","infoFiltered","infoPostFix","loadingRecords","zeroRecords","emptyTable","paginate","first","previous","last","aria","sortAscending","sortDescending","initComplete","s","d","approveAssignments","deleteAssignments","insertAfter","addColumnsFilter","tableOrder","tableOrderByIndex","findIndex","columnData","ulgmAssignmentReportShortcode","table","orderBy","order","DataTable","fn","dataTable","ColReorder","buttonCommon","csvExport","isDataTable","flattenArray","array","remove_stats","flatArray","each","key","question","key2","value2","state","colFilter_container","sInstance","customizeColumns","hideCustomizeColumns","__this","oSavedState","aoColumns","sTitle","addColumnCheckbox","bVisible","label","column_key","is_visible","checkbox","checked","headers","header","current_check","is_checked","is","selectot","create_options","source","ids","map","Number","$this","select_option","$select","prop","__select_option","index","el","get","indeterminate","group_id","empty","options_course","courses_to_show","courseGrouplessons","removeAttr","course_id","lessons_to_show","relationships","lesson_id","tr","closest","child","isShown","rows","answer","isNormalInteger","str","n","spinner","i","loading","Array","postId","post_type","security","ajax_nonce","appendTo","modal","message","Essays","essay_id","actionsEssays","editEssaysData","saveEssaysData","quiz","getEssaysData","getParam","results","RegExp","exec","location","decodeURIComponent","groupEssays","idColumn","question_text","assignedquiz","ulgmEssayReportShortcode","ungraded","$input","targets","draw","clone","filter","submit","options_quiz","reduce","accumulator","currentValue","$noResultsOption","isArray","quizzes_to_show","quiz_relationships","options_quizzes","quiz_id","tinymce","edId","tinyMCE","editors","save","Function","reportingTemplating","quizReport","select2","rowTemplate","itemTemplate","liTemplate","items","itemsEl","jpL","split","setItems","item","render","props","tok","populateCoursesDropDown","courseDropDown","group_courses","ulgmRestApiSetup","selectCourse","ID","post_title","$elements","filters","dispatchEvent","Event","initSelect2","$element","console","columnsVisibility","username","includes","firstName","lastName","userEmail","quizScore","detailedReport","searchable","defaultContent","ulgmQuizReportShortcode","settings","oInstance","api","addColumnCourseCheckbox","every","addEventListener","event","setLoading","$dropdown","isLoading","setOptions","placeholder","coursePlaceholder","setAttribute","quizPlaceholder","clear","getQuizData","groupQuizReportSetupScoreType","dropdownSettings","innerHTML","noResults","add","insertAdjacentHTML","option","$wrapper","removeAttribute","scoreType","reporting","groupLeaderId","getGroupCourses","getQueryVariable","createCourseDropDown","courses","createUserDropDown","users","posts","dropDown","post_count","noCourse","post","selectUser","noUsers","user","display_name","trunc","isNaN","variable","vars","substring","pair","file_frame","restForms","wp","media","frames","button","multiple","attachment","toJSON","open","addFormSubmitEvents","wpColorPicker","err","makeAjaxCall","endPoint","restData","associatedForm","$error_container","uploadedUsers","uploaded_users","statusCode","youCantDoThat","href","encodeURIComponent","reload","test","slice","origin","pathname","hash","call_function","function_vars","endpoint","documentElement","animate","scrollTop","offset","top","total_rows","log","entry","createElement","emailCol","statusCol","email","reason","appendChild","resultsDiv","completed","hasOwnProperty","sendRestCall","selected_value","_currentTarget","currentTarget","onsubmit","checkValidity","fields","serializeArray","field","reportValidity","serializeObject","o","a","ResizeSensor","ElementQueries","cssStyleElement","allQueries","idToSelectorMapping","getEmSize","fontSize","getComputedStyle","parseFloat","convertToPx","numbers","units","clientWidth","clientHeight","vw","vh","chooser","SetupInformation","elementSize","actualValue","attrValues","attrValue","attrName","attributes","call","getBoundingClientRect","width","offsetWidth","height","offsetHeight","rect","round","getElementSize","property","mode","k","substr","setupElement","elementQueriesSetupInformation","elementQueriesSensor","queueQuery","getQuery","container","query","querySelectorAll","bind","$$","attachResponsiveImage","children","rules","sources","defaultImageId","lastActiveImage","loadedImages","tagName","toLowerCase","minWidth","getAttribute","src","rule","display","check","imageToDisplay","image","Image","onload","resizeSensorInstance","regex","attrRegex","extractQuery","match","smatch","attrs","attrMatch","readRules","j","selectorText","cssText","cssRules","styleSheet","defaultCssInjected","init","animationStart","target","styles","animationName","getPropertyValue","resizeSensor","getElementsByTagName","styleSheets","warn","findResponsiveImages","findElementQueriesElements","update","instance","detach","listen","callback","navigator","userAgent","DOMLoadTimer","readyState","domLoaded","globalWindow","self","requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","cancelAnimationFrame","mozCancelAnimationFrame","webkitCancelAnimationFrame","timer","forEachElement","elementsType","isCollectionTyped","Elements","setStyle","keys","lastAnimationFrameForInvisibleCheck","EventQueue","q","ev","sizeInfo","newQueue","attachResizeEvent","resized","resizedAttached","dir","pointerEvents","position","left","right","bottom","overflow","zIndex","visibility","maxWidth","styleChild","transition","expand","expandChild","shrink","shrinkChild","computedStyle","dirty","rafId","size","lastWidth","lastHeight","initialHiddenCheck","reset","scrollLeft","resetSensor","onResized","onScroll","addEvent","cb","attachEvent","elem","removeChild","MutationObserver","observer","mutations","addedNodes","observe","childList","subtree","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","getter","__esModule","definition","defineProperty","enumerable","obj","restCall","parameters","doing_rest","isDefined","onDone","onSuccess","onFail","isEmpty","isObject","formatNumber","amount","decimalCount","decimal","thousands","abs","toFixed","destroyiCheck","iCheck","progress_report","closest_group","direction","execCommand","slideToggle","group_leaders_checkboxes","btn_add_leader","bind_click_outside","mouseup","has","unbind","$currentButton","dropdownDirection","$targetGroup","hasClass","ux_buttons","change","GroupManagement","isGroupManagement","EnrolledUsersTable","groupManagementModal","modals","editor","initialize","min_height","formats","alignleft","textAlign","classes","aligncenter","alignright","strikethrough","inline","toolbar1","plugins","quicktags","addGroupManagementEvents","openModal","parseCsv","modalContainer","downloadCsv","blob","Blob","csvDataString","saveAs","fileName","modalId","x","is_editable","input","messageContainer","reader","FileReader","ulgmGroupManagementLocalized","file_api_is_not_supported","file","files","csvText","pop","select_a_csv","readAsText","result","csv_file_error","csvArray","csvHead","shift","delimiter","incompatible_format","emailIndex","verifyRequiredHeader","not_contains_email","not_contains_first","not_contains_last","newArray","mapper","v","verifyEmptyRows","must_contain_email","choose_file","headerArray","columnsAmount","columnIndex","hasEnrolledUsersTable","getElements","getData","addSelect2","createDataTables","listenCheckboxToSelectAll","listenCheckboxesChanges","updateDataOnModal","firstLastNamesRequired","selectEl","enrolledUsersTableDT","enrolledLeaderTableDT","removeUsersButton","removeLeadersButton","sendEmailsButton","numberOfUsers","sendEmailsModal","sendEmailsField","removeUsersField","emailUsersCoursesDropdown","select2Options","dropdownParent","parentNode","emailUsersCourses","optionAllCoursesValue","hadWeChangedCoursesValues","selectedCourses","latestChangedOption","courseID","concat","wasLastOptionAdded","isOptionAllCoursesSelected","canRemoveUsers","canRemoveUsersAnytime","ulgmGroupLeaderData","selectedUsers","selectedLeaders","ext","b","textA","textContent","textB","localeCompare","userColumns","enrolled_user_columns","populate_management_features","unshift","check_all","groupName","enrolledUsersOrder","enrolledUsersOrderByIndex","ulgmGroupManagementShortcode","tables","enrolledUsers","userTable","userTableVars","enrolled_user_data","searchDelay","pageLength","serverSide","createdRow","dataIndex","status_id","$fakeExportCSV","$fakeExportExcel","$realExportCSV","createEvent","initEvent","$realExportExcel","leaderColumns","enrolled_leader_columns","groupLeadersOrder","groupLeadersOrderByIndex","groupLeaders","leaderTable","leaderTableVars","enrolled_leader_data","checkAllEl","isChecked","$allCheckboxes","updateSelectedUsers","evaluateRemoveUsersButtonVisiblity","evaluateRemoveLeadersButtonVisiblity","evaluateSendEmailsButtonVisiblity","$allUserCheckboxes","$allLeaderCheckboxes","allCheckedCheckboxes","leaders","$checkedCheckboxes","$checkbox","$row","progressIsNotStarted","showRemoveUsersButton","showRemoveLeadersButton","groupLeaderIds","JSON","stringify","userIds","firstnameLastnameRequired","requiredSelectors","$emailField","func","lastCall","emailValue","$rowElements","emailAddress","args","arguments","apply","GroupCourseReport","isCourseReport","CourseReportTable","restPopulateTable","courseReport","groupID","adjust","recalc","that","ulgmCourseReportShortcode","shouldAddTranscriptColumn","tableColumns","transcript_page_url","entries","columnKey","columnName","transcriptPageURL","user_id","details","courseNamePrefix","$courseId","courseName","getUrlParameter","populateReportTable","user_course_data","sParam","sParameterName","sURLVariables","require","CourseDashboard","hasDashboard","defineSettings","createCourses","form","selects","slideToggleDuration","$courses","Course","expandAll","collapseAll","lessons","topic","elementType","$containers","$container","dashboardSettings","defineCssClasses","getCourseData","toggleCourseContent","createLessons","courseData","hasLessons","hasQuizzes","hasCertificate","cssClasses","collapsed","collapsing","expanding","expanded","toggleBtn","isCollapsed","setToggleClass","slideDown","slideUp","$lessons","Lesson","$quizzesContainers","Quizzes","values","getLessonData","toggleLessonContent","createTopics","lessonData","availableOn","isCompleted","isAvailable","hasTopics","$topics","Topic","getTopicData","toggleTopicContent","topicData","topicId","ManageProgress","isManageProgress","canManageProgress","setSettings","listenProgressChangesOnCourses","$course","createChildren","listenCheckboxChanges","confirmationVisible","actions","cancel","progress","number","bar","quizzes","topics","rightContainer","$lesson","$quiz","Quiz","$topic","percentage","certificateUrl","$certificateButton","certificate","prepend","wantsToCompleteCourse","quizData","topic_quizzes","topic_quizzes_string","_topic","_topic_id","restUrl","rest_user_id","rest_course_id","rest_lessons","rest_topics","rest_quizzes","postNonce","setProgress","setCertificate","certificate_url","completeCourseItems","course_completed_children","confirmChanges","off","completedChildren","completedChildrenObj","shouldBeCompleted","getTheId","markAsNotComplete","markAsComplete","hasChildren","wantsToCompleteLesson","wantsToCompleteTopic","wantsToCompleteQuiz","childrenData","BuyCourses","isBuyCourses","getConfiguration","modifyCourses","listenQuantityChanges","listenFormSubmission","errorNotice","quantity","totals","subtotal","discount","total","bulkDiscountData","bulkDiscountEnabled","enabled","discounts","bulkDiscountGroups","minimumQuantity","qty","percent","config","bulkDiscount","groups","formatPrice","template","ULG_BuyCourses","numberOfDecimals","thousandSeparator","decimalSeparator","numberOfSeats","numberOfStudents","toggleClass","updateTotals","validation","validate","isValid","$selectedCourses","numberOfCourses","toArray","discountGroup","getDiscountPercentage","getTotals","selectAtLeastOne","hasError","price","$price","oldHtml","dummyPrice","priceFormatted","CreateGroup","isCreateGroup","addPillboxToGroupCourses","coursesList","theme"],"sourceRoot":""}