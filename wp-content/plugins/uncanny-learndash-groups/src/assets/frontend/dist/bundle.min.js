(()=>{var e={26:()=>{window.ulgmGroupManagement={}},712:()=>{jQuery((function(e){var s=e("input#createaccount");s.length&&(s.attr("checked",!0).parent().hide(),e(".create-account").show(),s.parent().hide())}))},258:()=>{String.prototype.toHHMMSS=function(){sec_numb=parseInt(this,10);var e=Math.floor(sec_numb/3600),s=Math.floor((sec_numb-3600*e)/60),t=sec_numb-3600*e-60*s;return e<10&&(e="0"+e),s<10&&(s="0"+s),t<10&&(t="0"+t),e+":"+s+":"+t},jQuery((function(){var e,s;e=jQuery("#course_navigation .learndash_navigation_lesson_topics_list a").css("font-size"),s=jQuery("#course_navigation .learndash_navigation_lesson_topics_list a span").css("font-size"),(null!=e&&e.replace("px","")>12||null!=s&&s.replace("px","")>12)&&jQuery("#course_navigation .learndash_navigation_lesson_topics_list a, #course_navigation .learndash_navigation_lesson_topics_list a span").css("font-size",12)})),jQuery(document).ready((function(){if(jQuery("#learndash_timer").length){var e=jQuery("#learndash_timer"),s=e.attr("data-timer-seconds"),t=jQuery(e.attr("data-button"));if(void 0!==s&&void 0!==t){t.attr("disabled",!0),s=parseInt(s);var n=e.attr("data-cookie-key");if(void 0!==n)var o="learndash_timer_cookie_"+n;else o="learndash_timer_cookie";if(cookie_timer_seconds=jQuery.cookie(o),"undefined"!=typeof cookie_timer_seconds&&(s=parseInt(cookie_timer_seconds)),jQuery.removeCookie(o),s>=1)var a=setInterval((function(){var n=(s-=1).toString().toHHMMSS();e.html(n),s<=0&&(clearInterval(a),t.attr("disabled",!1),e.html(""),jQuery.cookie(o,0),t.trigger("learndash-time-finished")),jQuery.cookie(o,s)}),1e3);else t.attr("disabled",!1),e.html(""),jQuery.cookie(o,0)}}})),jQuery(document).ready((function(){"undefined"!=typeof sfwd_data&&void 0!==sfwd_data.json&&(sfwd_data=sfwd_data.json.replace(/&quot;/g,'"'),sfwd_data=jQuery.parseJSON(sfwd_data)),jQuery(document).on("click",".wpProQuiz_sortablezzz a",(function(e){var s=jQuery(this),t=jQuery(this).attr("href");if(-1!==t.indexOf("essay")&&"undefined"!=typeof groupLeaderCourseReportSetup){e.preventDefault();var n={essayUrl:t};jQuery.ajax({method:"POST",data:n,url:groupLeaderCourseReportSetup.root+"get_user_essay/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupLeaderCourseReportSetup.nonce)},success:function(e){var t='<div style="background:white;padding:10px;">'+e+"</div>";s.parent().append(t),s.hide()},fail:function(e){alert("Rest Call Failed")}})}})),jQuery(document).on("click","a.user_statistic",(function(e){e.preventDefault();var s=jQuery(this).data("ref_id"),t=jQuery(this).data("quiz_id"),n=jQuery(this).data("user_id"),o=jQuery(this).data("statistic_nonce"),a="wp_pro_quiz_admin_ajax",l=jQuery(this).data("nonce");"undefined"!=typeof groupQuizReportSetup&&void 0!==groupQuizReportSetup.statistic_action&&(a=groupQuizReportSetup.statistic_action),"undefined"!=typeof ULGM_ManageProgress&&void 0!==ULGM_ManageProgress.statistic_action&&(a=ULGM_ManageProgress.statistic_action);var i={action:a,func:"statisticLoadUser",nonce:l,data:{quizId:t,userId:n,refId:s,statistic_nonce:o,avg:0}};jQuery("#wpProQuiz_user_overlay, #wpProQuiz_loadUserData").show();var r=jQuery("#wpProQuiz_user_content").hide();jQuery.ajax({type:"POST",url:sfwd_data.ajaxurl,dataType:"json",cache:!1,data:i,error:function(e,s,t){},success:function(e){void 0!==e.html&&(r.html(e.html),jQuery("a.wpProQuiz_update",r).remove(),jQuery("a#wpProQuiz_resetUserStatistic",r).remove(),jQuery("#wpProQuiz_user_content").show(),jQuery("#wpProQuiz_loadUserData").hide(),r.find(".statistic_data").click((function(){return jQuery(this).parents("tr").next().toggle("fast"),!1})))}}),jQuery("#wpProQuiz_overlay_close").click((function(){jQuery("#wpProQuiz_user_overlay").hide()}))}))}))},457:()=>{function e(e,s,t){return s in e?Object.defineProperty(e,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[s]=t,e}var s;(s=jQuery)(document).ready((function(){var e;s("#uo-group-assignments-table").length>0&&(window.ulgmGroupManagement.Assignments.constructor(),jQuery("form#uo-groups-assignments-management-form").on("click","button.assignment_approve_single,a.assignment_approve_single,button#group-approve-assignments-button",(function(e){e.preventDefault();var t=jQuery(this).attr("id").replace("assignment_approve_","");if(void 0!==(t=t.replace("a_",""))&&""!=t){jQuery("form#uo-groups-assignments-management-form input#bulk-post-selector-top").length&&jQuery("form#uo-groups-assignments-management-form input#bulk-post-selector-top").val(t),jQuery("form#uo-groups-assignments-management-form input#bulk-action-selector-top").length&&jQuery("form#uo-groups-assignments-management-form input#bulk-action-selector-top").val("approve_assignment");var n=s("form#uo-groups-assignments-management-form").serialize();window.ulgmGroupManagement.Assignments.actionsAssignment(n)}})),jQuery("form#uo-groups-assignments-management-form").on("click","a.delete_assignment_single,button#group-trash-assignments-button",(function(e){e.preventDefault();var t=jQuery(this).attr("id").replace("a_assignment_trash_","");if(void 0!==t&&""!=t){jQuery("form#uo-groups-assignments-management-form input#bulk-post-selector-top").length&&jQuery("form#uo-groups-assignments-management-form input#bulk-post-selector-top").val(t),jQuery("form#uo-groups-assignments-management-form input#bulk-action-selector-top").length&&jQuery("form#uo-groups-assignments-management-form input#bulk-action-selector-top").val("trash_assignment");var n=s("form#uo-groups-assignments-management-form").serialize();window.ulgmGroupManagement.Assignments.actionsAssignment(n)}})),s("#uo-group-assignments-table").on("click","a.edit_assignment_single",(function(){var e=s(this).data("assignment-id");window.ulgmGroupManagement.Assignments.editAssignmentsData(e)})),s("body").on("click","button#uo-assignment-edit-button",(function(){window.ulgmGroupManagement.Assignments.saveAssignmentsData()})),s("body").on("click","#uo-assignment-update-button",(function(){window.ulgmGroupManagement.Assignments.saveAssignmentsData()})),s("#uo-group-assignments-table tbody").on({mouseenter:function(){clearTimeout(e),focusedRowActions=s(this).find(".row-actions"),s(".row-actions").not(this).removeClass("visible"),focusedRowActions.addClass("visible")},mouseleave:function(){e=setTimeout((function(){focusedRowActions.removeClass("visible")}),30)}},"tr"))})),window.ulgmGroupManagement.Assignments={uoTable:null,uoTableHidden:null,lessonId:0,groupId:0,courseId:0,status:"not-approved",elements:{select:{group:{element:null,options:null},course:{element:null,options:null,no_element:null},lesson:{element:null,options:null,no_element:null},status:{element:null,options:null}}},constructor:function(){this.elements.select.group.element=s("#uo-group-report-group"),this.elements.select.course.element=s("#uo-group-report-courses"),this.elements.select.lesson.element=s("#uo-group-report-lessons"),this.elements.select.status.element=s("#uo-group-report-status"),this.elements.select.course.no_element=s("#uo-group-report-nocourses"),this.elements.select.lesson.no_element=s("#uo-group-report-nolessons"),this.elements.select.group.options=s("#uo-group-report-group option"),this.elements.select.course.options=s("#uo-group-report-courses option"),this.elements.select.lesson.options=s("#uo-group-report-lessons option"),this.elements.select.status.options=s("#uo-group-report-status option"),this.createTable(),this.createTableHidden(),this.addEvents(),window.ulgmGroupManagement.Assignments.status=this.elements.select.status.element.val(),window.ulgmGroupManagement.Assignments.getAssignmentsData(0,0,window.ulgmGroupManagement.Assignments.groupId,window.ulgmGroupManagement.Assignments.status)},createTable:function(t){var n=this,o=document.getElementById("uo-group-assignments-table"),a=[{title:"select",className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row"},e({title:groupAssignments.localized.title,data:"title",className:"has-row-actions",name:"title",visible:groupAssignments.columns_visibilities.title},"className","ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title"),{title:groupAssignments.localized.first_name,data:"first_name",name:"first_name",visible:groupAssignments.columns_visibilities.first_name,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name"},{title:groupAssignments.localized.last_name,data:"last_name",name:"last_name",visible:groupAssignments.columns_visibilities.last_name,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name"},{title:groupAssignments.localized.author,data:"author",name:"author",visible:groupAssignments.columns_visibilities.author,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author"},{title:groupAssignments.localized.status,data:"status",orderable:!0,name:"status",visible:groupAssignments.columns_visibilities.status,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status"},{title:groupAssignments.localized.points,data:"points",orderable:!1,name:"points",visible:groupAssignments.columns_visibilities.points,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points"},{title:groupAssignments.localized.assignedCourse,data:"assignedCourse",orderable:!0,name:"assignedCourse",visible:groupAssignments.columns_visibilities.assignedCourse,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course"},{title:groupAssignments.localized.assignedlesson,data:"assignedlesson",orderable:!0,name:"assignedlesson",visible:groupAssignments.columns_visibilities.assignedlesson,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson"},{title:groupAssignments.localized.comments,data:"comments",name:"comments",visible:groupAssignments.columns_visibilities.comments,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments"},{title:groupAssignments.localized.date,data:"date",name:"date",visible:groupAssignments.columns_visibilities.date,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date"}],l={exportOptions:{columns:function(e,s,t){return!t.matches(".ulg-report-assignments-cell--select-row")&&!t.matches(".ulg-report-assignments-cell--title")&&n.uoTable.column(e).visible()},format:{body:function(e,s,t,n){return n.classList.contains("ulg-report-assignments-cell--status")?n.querySelector("button.assignment_approve_single")&&(e=groupAssignments.i18n.notApproved):e=n.innerText.trim(),e}}},filename:function(){var e=[groupAssignments.i18n.reportBaseName];return["uo-group-report-group","uo-group-report-courses","uo-group-report-lessons","uo-group-report-status"].forEach((function(s){var t=document.getElementById(s);try{if(t){var n=t.value;""!==n&&"0"!=n&&e.push(t.querySelector('option[value="'.concat(n,'"]')).innerText.trim())}}catch(e){}})),e.join(" - ")}},i=[];"show"==o.dataset.csv&&i.push(Object.assign({},l,{extend:"csv",text:groupAssignments.i18n.exportCSV})),"show"==o.dataset.excel&&i.push(Object.assign({},l,{extend:"excelHtml5",text:groupAssignments.i18n.exportExcel}));var r={aLengthMenu:[[15,30,60,-1],[15,30,60,groupAssignments.localized.all]],responsive:!0,iDisplayLength:30,columns:a,columnDefs:[{targets:0,orderable:!1,searchable:!1,render:function(e,t,n,o){return'<input type="checkbox" name="post[]" value="'+s("<div/>").text(e).html()+'">'},checkboxes:{selectRow:!0}}],select:{style:"multi",selector:"td:first-child"},stateSave:!0,dom:'<"uo-groups-datatable-header"B>frt<"uo-groups-datatable-footer"lpi>',buttons:i};null!==this.uoTable&&(this.uoTable.destroy(),r.data=t,r.columns=[{title:'<input type="checkbox" name="select_all" value="1" id="uo-assignments-select-all">',data:"id",className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--select-row"},e({title:groupAssignments.localized.title,data:"title",className:"has-row-actions",name:"title",visible:groupAssignments.columns_visibilities.title},"className","ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--title"),{title:groupAssignments.localized.first_name,data:"first_name",name:"first_name",visible:groupAssignments.columns_visibilities.first_name,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--first-name"},{title:groupAssignments.localized.last_name,data:"last_name",name:"last_name",visible:groupAssignments.columns_visibilities.last_name,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--last-name"},{title:groupAssignments.localized.author,data:"author",name:"author",visible:groupAssignments.columns_visibilities.author,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--author"},{title:groupAssignments.localized.status,data:"status",orderable:!0,name:"status",visible:groupAssignments.columns_visibilities.status,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--status"},{title:groupAssignments.localized.points,data:"points",orderable:!1,name:"points",visible:groupAssignments.columns_visibilities.points,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--points"},{title:groupAssignments.localized.assignedCourse,data:"assignedCourse",orderable:!0,name:"assignedCourse",visible:groupAssignments.columns_visibilities.assignedCourse,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-course"},{title:groupAssignments.localized.assignedlesson,data:"assignedlesson",orderable:!0,name:"assignedlesson",visible:groupAssignments.columns_visibilities.assignedlesson,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--assigned-lesson"},{title:groupAssignments.localized.comments,data:"comments",name:"comments",visible:groupAssignments.columns_visibilities.comments,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--comments"},{title:groupAssignments.localized.date,data:"date",name:"date",visible:groupAssignments.columns_visibilities.date,className:"ulg-report-cell ulg-report-assignments-cell ulg-report-assignments-cell--date"}]),r.language={processing:groupAssignments.localized.processing,search:"_INPUT_",searchPlaceholder:groupAssignments.localized.searchPlaceholder,lengthMenu:groupAssignments.localized.lengthMenu,info:groupAssignments.localized.info,infoEmpty:groupAssignments.localized.infoEmpty,infoFiltered:groupAssignments.localized.infoFiltered,infoPostFix:"",loadingRecords:groupAssignments.localized.loadingRecords,zeroRecords:groupAssignments.localized.zeroRecords,emptyTable:groupAssignments.localized.emptyTable,paginate:{first:groupAssignments.localized.paginate.first,previous:groupAssignments.localized.paginate.previous,next:groupAssignments.localized.paginate.next,last:groupAssignments.localized.paginate.last},aria:{sortAscending:groupAssignments.localized.sortAscending,sortDescending:groupAssignments.localized.sortDescending}},r.initComplete=function(e,s){jQuery('\n                    <div class="group-assignments-buttons uo-hidden">\n                        <button class="uo-btn uo-left" id="group-approve-assignments-button">\n                            '.concat(groupAssignments.localized.approveAssignments,'\n                        </button>\n                        <button class="uo-btn uo-left" id="group-trash-assignments-button">\n                            ').concat(groupAssignments.localized.deleteAssignments,"\n                        </button>\n                    </div>\n                ")).insertAfter("#uo-group-assignments-table_filter"),jQuery(window.ulgmGroupManagement.Assignments.addColumnsFilter(e)).insertAfter("#uo-group-assignments-table_filter")};var u=[],c=a.findIndex((function(e){return e.title==ulgmAssignmentReportShortcode.table.orderBy}));-1===c&&(c=a.findIndex((function(e){return"date"==e.data}))),-1!==c&&(u=[[c,ulgmAssignmentReportShortcode.table.order]]),r.order=u,this.uoTable=jQuery("#uo-group-assignments-table"),jQuery("#uo-group-assignments-table").length>0&&(this.uoTable=jQuery("#uo-group-assignments-table").DataTable(r),new jQuery.fn.dataTable.ColReorder(this.uoTable))},createTableHidden:function(e){var t=this,n={exportOptions:{columns:function(e,s,n){return!n.matches(".ulg-report-assignments-cell--select-row")&&!n.matches(".ulg-report-assignments-cell--title")&&t.uoTable.column(e).visible()},format:{body:function(e,s,t,n){return e.replace(/\<span\s(?:class\=\"ulg\-hidden\-data\")(.*)\<\/span\>/g,"")}}}},o={iDisplayLength:-1,columns:[{title:groupAssignments.localized.title,data:"title",className:"has-row-actions",name:"title",visible:groupAssignments.columns_visibilities.title},{title:groupAssignments.localized.first_name,data:"first_name",name:"first_name",visible:groupAssignments.columns_visibilities.first_name},{title:groupAssignments.localized.last_name,data:"last_name",name:"last_name",visible:groupAssignments.columns_visibilities.last_name},{title:groupAssignments.localized.author,data:"author",name:"author",visible:groupAssignments.columns_visibilities.author},{title:groupAssignments.localized.status,data:"status",orderable:!0,name:"status",visible:groupAssignments.columns_visibilities.status},{title:groupAssignments.localized.points,data:"points",orderable:!1,name:"points",visible:groupAssignments.columns_visibilities.points},{title:groupAssignments.localized.assignedCourse,data:"assignedCourse",orderable:!0,name:"assignedCourse",visible:groupAssignments.columns_visibilities.assignedCourse},{title:groupAssignments.localized.assignedlesson,data:"assignedlesson",orderable:!0,name:"assignedlesson",visible:groupAssignments.columns_visibilities.assignedlesson},{title:groupAssignments.localized.comments,data:"comments",name:"comments",visible:groupAssignments.columns_visibilities.comments},{title:groupAssignments.localized.date,data:"date",name:"date",visible:groupAssignments.columns_visibilities.date}],dom:"Bfrtip",buttons:[s.extend(!0,{},n,{extend:"csv",text:groupAssignments.localized.buttons.csvExport,title:"lesson-report"})],stateSave:!0};s.fn.DataTable.isDataTable("#uo-lesson-report-table-hidden")&&(s("#uo-lesson-report-table-hidden").DataTable().destroy(),o.data=e,o.columns=[{title:groupAssignments.localized.title,data:"title",name:"title",visible:groupAssignments.columns_visibilities.title},{title:groupAssignments.localized.first_name,data:"first_name",name:"first_name",visible:groupAssignments.columns_visibilities.first_name},{title:groupAssignments.localized.last_name,data:"last_name",name:"last_name",visible:groupAssignments.columns_visibilities.last_name},{title:groupAssignments.localized.author,data:"author",name:"author",visible:groupAssignments.columns_visibilities.author},{title:groupAssignments.localized.status,data:"status",orderable:!0,name:"status",visible:groupAssignments.columns_visibilities.status},{title:groupAssignments.localized.points,data:"points",orderable:!1,name:"points",visible:groupAssignments.columns_visibilities.points},{title:groupAssignments.localized.assignedCourse,data:"assignedCourse",orderable:!0,name:"assignedCourse",visible:groupAssignments.columns_visibilities.assignedCourse},{title:groupAssignments.localized.assignedlesson,data:"assignedlesson",orderable:!0,name:"assignedlesson",visible:groupAssignments.columns_visibilities.assignedlesson},{title:groupAssignments.localized.comments,data:"comments",name:"comments",visible:groupAssignments.columns_visibilities.comments},{title:groupAssignments.localized.date,data:"date",name:"date",visible:groupAssignments.columns_visibilities.date}]),o.language={processing:groupAssignments.localized.processing,search:"_INPUT_",searchPlaceholder:groupAssignments.localized.searchPlaceholder,lengthMenu:groupAssignments.localized.lengthMenu,info:groupAssignments.localized.info,infoEmpty:groupAssignments.localized.infoEmpty,infoFiltered:groupAssignments.localized.infoFiltered,infoPostFix:"",loadingRecords:groupAssignments.localized.loadingRecords,zeroRecords:groupAssignments.localized.zeroRecords,emptyTable:groupAssignments.localized.emptyTable,paginate:{first:groupAssignments.localized.paginate.first,previous:groupAssignments.localized.paginate.previous,next:groupAssignments.localized.paginate.next,last:groupAssignments.localized.paginate.last},aria:{sortAscending:groupAssignments.localized.sortAscending,sortDescending:groupAssignments.localized.sortDescending}},jQuery("#uo-lesson-report-table-hidden").length>0&&jQuery("#uo-lesson-report-table-hidden").DataTable(o),s(".buttons-csv").show()},flattenArray:function(e,s){var t=[];return jQuery.each(e,(function(e,s){jQuery.each(s.question,(function(e,n){t.push({title:s.title,first_name:s.first_name,last_name:s.last_name,author:s.author,status:s.status,points:s.points,assignedCourse:s.assignedCourse,assignedlesson:s.assignedlesson,comments:s.comments,date:s.date})}))})),t},addColumnsFilter:function(e){var t=s('<div id="'.concat(e.sInstance,'-filter-columns" class="dataTables-filter-columns"><input class="dataTables-filter-columns-field" id="').concat(e.sInstance,'-filter-columns-field" type="checkbox"><div class="dataTables-filter-columns__toggle"><label for="').concat(e.sInstance,'-filter-columns-field" data-label-enable="').concat(groupAssignments.localized.customizeColumns,'" data-label-disable="').concat(groupAssignments.localized.hideCustomizeColumns,'"></label></div><div class="dataTables-filter-columns__fields"></div></div>'));return __this=window.ulgmGroupManagement.Assignments,null!==e.oSavedState?jQuery.each(e.oSavedState.columns,(function(s,n){if(s>0){var o=e.aoColumns[s].sTitle;t.find(".dataTables-filter-columns__fields").append(__this.addColumnCheckbox(o,s,n.visible))}})):jQuery.each(e.aoColumns,(function(s,n){if(s>0){var o=e.aoColumns[s].sTitle;t.find(".dataTables-filter-columns__fields").append(__this.addColumnCheckbox(o,s,n.bVisible))}})),t},addColumnCheckbox:function(e,s,t){var n=jQuery("<input />",{type:"checkbox",id:"dt_"+s,value:e,checked:t});return n.on("change",(function(e){var s=window.ulgmGroupManagement.Assignments.uoTable.columns().header(),t=jQuery(this).attr("value"),n=jQuery(this).is(":checked");jQuery.each(s,(function(e,s){if(jQuery(s).html()===t){var o=window.ulgmGroupManagement.Assignments.uoTable.column(e);n?o.visible(!0):o.visible(!1)}}))})),jQuery("<label/>").append(n).append(e)},create_options:function(e,t){var n=[];return(t=t.map(Number)).length>1&&t.push(0),this.elements.select[e].options.each((function(){var e=s(this),o=parseInt(e.val());e.show(),-1!=t.indexOf(o)&&n.push(e)})),n},select_option:function(e,s){e.find("option").prop("selected",!1),e.find('option[value="'+s+'"]').prop("selected",!0)},__select_option:function(e,s){e.find("option").prop("selected",!1),e.find("option["+s+"]").prop("selected",!0)},addEvents:function(){var e=this;s("#uo-groups-assignments-management").on("click","#uo-assignments-select-all",(function(){s('input[name="post[]"]').prop("checked",this.checked),s('input[name="post[]"]').is(":checked")?s(".group-assignments-buttons").show():(s(".group-assignments-buttons").hide(),s("#uo-assignments-select-all").prop("checked",!1))})),s("#uo-group-assignments-table tbody").on("change",'input[name="post[]"]',(function(){if(!this.checked){var e=s("#uo-assignments-select-all").get(0);e&&e.checked&&"indeterminate"in e&&(e.indeterminate=!0)}s('input[name="post[]"]').is(":checked")?s(".group-assignments-buttons").show():(s(".group-assignments-buttons").hide(),s("#uo-assignments-select-all").prop("checked",!1))})),s("#uo-groups-assignments-management").on("click","#group-approve-assignments-button",(function(){jQuery("form#uo-groups-assignments-management-form input#bulk-action-selector-top").length&&jQuery("form#uo-groups-assignments-management-form input#bulk-action-selector-top").val("approve_assignment")})),s("#uo-groups-assignments-management").on("click","#group-trash-assignments-button",(function(){jQuery("form#uo-groups-assignments-management-form input#bulk-action-selector-top").length&&jQuery("form#uo-groups-assignments-management-form input#bulk-action-selector-top").val("trash_assignment")})),this.elements.select.group.element.on("change",(function(){var t=s(this);e.elements.select.course.element.show();var n=t.val();if(0==n||null==n){e.elements.select.course.element.empty();var o=e.create_options("course",[0]);e.elements.select.course.element.html(o),e.elements.select.course.element.attr("disabled","disabled"),e.elements.select.lesson.element.empty();var a=e.create_options("lesson",[0]);return e.elements.select.lesson.element.html(a),e.elements.select.lesson.element.attr("disabled","disabled"),window.ulgmGroupManagement.Assignments.createTable([]),void window.ulgmGroupManagement.Assignments.createTableHidden([])}var l=groupAssignments.courseGrouplessons[n];l=void 0===l?[]:l;var i=e.create_options("course",l);if(i.length>0)e.elements.select.course.element.show(),e.elements.select.course.element.html(i),e.elements.select.course.no_element.hide(),e.elements.select.course.element.removeAttr("disabled"),e.__select_option(e.elements.select.course.element,0),window.ulgmGroupManagement.Assignments.groupId=n,e.elements.select.course.element.trigger("change");else{e.elements.select.course.element.empty();var r=e.create_options("course",[0]);e.elements.select.course.element.html(r),e.elements.select.course.element.attr("disabled","disabled"),e.elements.select.lesson.element.empty();var u=e.create_options("lesson",[0]);e.elements.select.lesson.element.html(u),e.elements.select.lesson.element.attr("disabled","disabled"),window.ulgmGroupManagement.Assignments.createTable([]),window.ulgmGroupManagement.Assignments.createTableHidden([]),window.ulgmGroupManagement.Assignments.groupId=n}window.ulgmGroupManagement.Assignments.getAssignmentsData(0,0,window.ulgmGroupManagement.Assignments.groupId,window.ulgmGroupManagement.Assignments.status)})),this.elements.select.course.element.on("change",(function(){var t=s(this).val();if(0==t){e.elements.select.lesson.element.empty();var n=e.create_options("lesson",[0]);return e.elements.select.lesson.element.html(n),e.elements.select.lesson.element.attr("disabled","disabled"),window.ulgmGroupManagement.Assignments.createTable([]),void window.ulgmGroupManagement.Assignments.createTableHidden([])}var o=groupAssignments.relationships[window.ulgmGroupManagement.Assignments.groupId][t];o=void 0===o?[]:o;var a=e.create_options("lesson",o);if(a.length>0)e.elements.select.lesson.element.show(),e.elements.select.lesson.element.html(a),jQuery("#uo-group-report-lessons option").show(),e.elements.select.lesson.no_element.hide(),e.__select_option(e.elements.select.lesson.element,0),e.elements.select.lesson.element.removeAttr("disabled"),window.ulgmGroupManagement.Assignments.courseId=t,e.elements.select.lesson.element.trigger("change");else{e.elements.select.lesson.element.empty();var l=e.create_options("lesson",[0]);e.elements.select.lesson.element.html(l),e.elements.select.lesson.element.attr("disabled","disabled"),window.ulgmGroupManagement.Assignments.createTable([]),window.ulgmGroupManagement.Assignments.createTableHidden([]),window.ulgmGroupManagement.Assignments.courseId=t,window.ulgmGroupManagement.Assignments.getAssignmentsData(0,window.ulgmGroupManagement.Assignments.courseId,window.ulgmGroupManagement.Assignments.groupId,window.ulgmGroupManagement.Assignments.status)}})),this.elements.select.lesson.element.on("change",(function(){var e=s(this).val();window.ulgmGroupManagement.Assignments.lessonId=e,window.ulgmGroupManagement.Assignments.getAssignmentsData(e,window.ulgmGroupManagement.Assignments.courseId,window.ulgmGroupManagement.Assignments.groupId,window.ulgmGroupManagement.Assignments.status)})),this.elements.select.status.element.on("change",(function(){var e=s(this).val();window.ulgmGroupManagement.Assignments.status=e,window.ulgmGroupManagement.Assignments.getAssignmentsData(window.ulgmGroupManagement.Assignments.lessonId,window.ulgmGroupManagement.Assignments.courseId,window.ulgmGroupManagement.Assignments.groupId,e)})),s("#uo-lesson-report-table").on("click","td.details-control",(function(){var e=s(this).closest("tr"),t=window.ulgmGroupManagement.Assignments.uoTable.row(e);t.child.isShown()?(t.child.hide(),e.removeClass("shown")):(t.child(window.ulgmGroupManagement.Assignments.format(t.data())).show(),e.addClass("shown"))}))},format:function(e){var t="";return s.each(e.answer,(function(s,n){t+="<tr><td>"+e.question[s]+"</td><td>"+n+"</td></tr>"})),'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+t+"</table>"},isNormalInteger:function(e){var s=~~Number(e);return String(s)===e&&s>0},getAssignmentsData:function(e,t,n,o){var a=s(".uo-modal-spinner");a.show();var l=0,i=setInterval((function(){l=++l%4,s("#uo-group-assignments-table tbody").html("<div id='group-loader'>"+groupAssignments.localized.loadingRecords+new Array(l+1).join(".")+"</div>")}),500),r={groupId:n,lessonId:e,courseId:t,status:o};s.ajax({method:"POST",data:r,url:groupAssignments.root+"get_assignments_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupAssignments.nonce)},success:function(e){a.hide(),clearInterval(i),s("#group-loader").remove(),window.ulgmGroupManagement.Assignments.createTable(e),window.ulgmGroupManagement.Assignments.createTableHidden(e)},fail:function(e){alert("Rest Call Failed")}})},editAssignmentsData:function(e){var t=s(".uo-modal-spinner");t.show();var n={assignment_id:e,action:"edit_assignments",post_type:"sfwd-assignment",security:groupAssignments.ajax_nonce};s.ajax({method:"POST",data:n,url:groupAssignments.root+"edit_assignments_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupAssignments.nonce)},success:function(e){t.hide(),s(".modal").remove(),s(e.html).appendTo("body").modal()},fail:function(e){t.hide(),alert("Rest Call Failed")}})},saveAssignmentsData:function(){var e=s("#edit_assignment_form").serialize(),t=s(".uo-modal-spinner");s(".uo-groups-message-ok").hide(),t.show(),s.ajax({method:"POST",data:e,url:groupAssignments.root+"save_assignments_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupAssignments.nonce)},success:function(e){t.hide(),window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger("change"),s(".uo-groups-message-ok").html(e.message).show()},fail:function(e){t.hide(),alert("Rest Call Failed")}})},actionsAssignment:function(e){var t=s(".uo-modal-spinner");t.show(),s.ajax({method:"POST",data:e,url:groupAssignments.root+"save_assignments_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupAssignments.nonce)},success:function(e){t.hide(),window.ulgmGroupManagement.Assignments.elements.select.lesson.element.trigger("change")},fail:function(e){t.hide(),alert("Rest Call Failed")}})}}},780:()=>{var e;(e=jQuery)(document).ready((function(){var s;e("#uo-group-essays-table").length>0&&(window.ulgmGroupManagement.Essays.constructor(),jQuery("form#uo-groups-essays-management-form").on("click","button.essay_approve_single,a.essay_approve_single",(function(s){s.preventDefault();var t=jQuery(this).attr("id").replace("essay_approve_","");if(void 0!==(t=t.replace("a_",""))&&""!=t){jQuery("form#uo-groups-essays-management-form input#bulk-post-selector-top").length&&jQuery("form#uo-groups-essays-management-form input#bulk-post-selector-top").val(t),jQuery("form#uo-groups-essays-management-form input#bulk-action-selector-top").length&&jQuery("form#uo-groups-essays-management-form input#bulk-action-selector-top").val("graded");var n=e("form#uo-groups-essays-management-form").serialize();window.ulgmGroupManagement.Essays.actionsEssays(n)}})),jQuery("form#uo-groups-essays-management-form").on("click","a.delete_essay_single",(function(s){s.preventDefault();var t=jQuery(this).attr("id").replace("a_essay_trash_","");if(void 0!==t&&""!=t){jQuery("form#uo-groups-essays-management-form input#bulk-post-selector-top").length&&jQuery("form#uo-groups-essays-management-form input#bulk-post-selector-top").val(t),jQuery("form#uo-groups-essays-management-form input#bulk-action-selector-top").length&&jQuery("form#uo-groups-essays-management-form input#bulk-action-selector-top").val("trash_essay");var n=e("form#uo-groups-essays-management-form").serialize();window.ulgmGroupManagement.Essays.actionsEssays(n)}})),e("#uo-group-essays-table").on("click","a.edit_essay_single",(function(){var s=e(this).data("essay-id");window.ulgmGroupManagement.Essays.editEssaysData(s)})),e("body").on("click","button#uo-essay-edit-button",(function(){window.ulgmGroupManagement.Essays.saveEssaysData()})),e("body").on("click","#uo-essay-update-button",(function(){window.ulgmGroupManagement.Essays.saveEssaysData()})),e("#uo-group-essays-table tbody").on({mouseenter:function(){clearTimeout(s),focusedRowActions=e(this).find(".row-actions"),e(".row-actions").not(this).removeClass("visible"),focusedRowActions.addClass("visible")},mouseleave:function(){s=setTimeout((function(){focusedRowActions.removeClass("visible")}),30)}},"tr"))})),window.ulgmGroupManagement.Essays={uoTable:null,uoTableHidden:null,lessonId:0,groupId:0,courseId:0,quizId:0,status:"ungraded",elements:{select:{group:{element:null,options:null},course:{element:null,options:null,no_element:null},lesson:{element:null,options:null,no_element:null},quiz:{element:null,options:null,no_element:null},status:{element:null,options:null,no_element:null}}},constructor:function(){this.elements.select.group.element=e("#uo-group-report-group"),this.elements.select.course.element=e("#uo-group-report-courses"),this.elements.select.lesson.element=e("#uo-group-report-lessons"),this.elements.select.quiz.element=e("#uo-group-report-quizzes"),this.elements.select.status.element=e("#uo-group-report-status"),this.elements.select.course.no_element=e("#uo-group-report-nocourses"),this.elements.select.lesson.no_element=e("#uo-group-report-nolessons"),this.elements.select.quiz.no_element=e("#uo-group-report-noquizzes"),this.elements.select.group.options=e("#uo-group-report-group option"),this.elements.select.course.options=e("#uo-group-report-courses option"),this.elements.select.lesson.options=e("#uo-group-report-lessons option"),this.elements.select.quiz.options=e("#uo-group-report-quizzes option"),this.elements.select.status.options=e("#uo-group-report-status option"),this.status=this.elements.select.status.element.val(),this.createTable(),this.createTableHidden(),this.addEvents(),window.ulgmGroupManagement.Essays.getEssaysData(0,0,window.ulgmGroupManagement.Essays.groupId,0,window.ulgmGroupManagement.Essays.status)},getParam:function(e){e=e.replace(/[[]/,"[").replace(/[]]/,"]");var s=new RegExp("[?&]"+e+"=([^&#]*)").exec(location.search);return null===s?"":decodeURIComponent(s[1].replace("+"," "))},createTable:function(s){var t=this,n=document.getElementById("uo-group-essays-table"),o=[{data:"id",title:groupEssays.localized.idColumn,className:"ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id"},{data:"title",title:groupEssays.localized.title,visible:groupEssays.columns_visibilities.title,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title"},{data:"first_name",title:groupEssays.localized.first_name,visible:groupEssays.columns_visibilities.first_name,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name"},{data:"last_name",title:groupEssays.localized.last_name,visible:groupEssays.columns_visibilities.last_name,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name"},{data:"author",title:groupEssays.localized.author,visible:groupEssays.columns_visibilities.author,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author"},{data:"status",title:groupEssays.localized.status,visible:groupEssays.columns_visibilities.status,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status"},{data:"points",title:groupEssays.localized.points,visible:groupEssays.columns_visibilities.points,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points"},{data:"question_text",title:groupEssays.localized.question_text,visible:groupEssays.columns_visibilities.question_text,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text"},{data:"content",title:groupEssays.localized.content,visible:groupEssays.columns_visibilities.content,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content"},{data:"assignedCourse",title:groupEssays.localized.assignedCourse,visible:groupEssays.columns_visibilities.assignedCourse,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course"},{data:"assignedlesson",title:groupEssays.localized.assignedlesson,visible:groupEssays.columns_visibilities.assignedlesson,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson"},{data:"assignedquiz",title:groupEssays.localized.assignedquiz,visible:groupEssays.columns_visibilities.assignedquiz,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz"},{data:"comments",title:groupEssays.localized.comments,visible:groupEssays.columns_visibilities.comments,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments"},{data:"date",title:groupEssays.localized.date,visible:groupEssays.columns_visibilities.date,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date"}],a=[],l=o.findIndex((function(e){return e.title==ulgmEssayReportShortcode.table.orderBy}));-1===l&&(l=o.findIndex((function(e){return"date"==e.data}))),-1!==l&&(a=[[l,ulgmEssayReportShortcode.table.order]]);var i={exportOptions:{columns:function(e,s,n){return t.uoTable.column(e).visible()},format:{body:function(e,s,t,n){if(n.classList.contains("ulg-report-essays-cell--status"))n.querySelector("button.essay_approve_single")&&(e=groupEssays.i18n.ungraded);else if(n.classList.contains("ulg-report-essays-cell--points")){var o=n.querySelector("input");o&&(e="".concat(o.value," ").concat(n.innerText.trim()))}else{if(n.classList.contains("ulg-report-essays-cell--date"))return e.replace(/\<span\s(?:class\=\"ulg\-hidden\-data\")(.*)\<\/span\>/g,"");e=n.innerText.trim()}return e}}},filename:function(){var e=[groupEssays.i18n.reportBaseName];return["uo-group-report-group","uo-group-report-courses","uo-group-report-lessons","uo-group-report-quizzes","uo-group-report-status"].forEach((function(s){var t=document.getElementById(s);try{if(t){var n=t.value;""!==n&&"0"!=n&&e.push(t.querySelector('option[value="'.concat(n,'"]')).innerText.trim())}}catch(e){}})),e.join(" - ")}},r=[];"show"==n.dataset.csv&&r.push(Object.assign({},i,{extend:"csv",text:groupEssays.i18n.exportCSV})),"show"==n.dataset.excel&&r.push(Object.assign({},i,{extend:"excelHtml5",text:groupEssays.i18n.exportExcel}));var u={aLengthMenu:[[15,30,60,-1],[15,30,60,groupEssays.localized.all]],order:a,responsive:!0,iDisplayLength:30,columns:o,columnDefs:[{targets:0,orderable:!1,searchable:!1,render:function(s,t,n,o){return'<input type="checkbox" name="post[]" value="'+e("<div/>").text(s).html()+'">'},checkboxes:{selectRow:!0}}],select:{style:"multi",selector:"td:first-child"},stateSave:!0,dom:'<"uo-groups-datatable-header"B>frt<"uo-groups-datatable-footer"lpi>',buttons:r};if(null!==this.uoTable&&(this.uoTable.destroy(),u.data=s,u.columnDefs=[{className:"uo-groups__cell-checkbox",targets:[0]}],u.columns=[{data:"id",title:groupEssays.localized.idColumn,className:"ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id"},{data:"title",title:groupEssays.localized.title,visible:groupEssays.columns_visibilities.title,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title"},{data:"first_name",title:groupEssays.localized.first_name,visible:groupEssays.columns_visibilities.first_name,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name"},{data:"last_name",title:groupEssays.localized.last_name,visible:groupEssays.columns_visibilities.last_name,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name"},{data:"author",title:groupEssays.localized.author,visible:groupEssays.columns_visibilities.author,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author"},{data:"status",title:groupEssays.localized.status,visible:groupEssays.columns_visibilities.status,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status"},{data:"points",title:groupEssays.localized.points,visible:groupEssays.columns_visibilities.points,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points"},{data:"question_text",title:groupEssays.localized.question_text,visible:groupEssays.columns_visibilities.question_text,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text"},{data:"content",title:groupEssays.localized.content,visible:groupEssays.columns_visibilities.content,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content"},{data:"assignedCourse",title:groupEssays.localized.assignedCourse,visible:groupEssays.columns_visibilities.assignedCourse,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course"},{data:"assignedlesson",title:groupEssays.localized.assignedlesson,visible:groupEssays.columns_visibilities.assignedlesson,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson"},{data:"assignedquiz",title:groupEssays.localized.assignedquiz,visible:groupEssays.columns_visibilities.assignedquiz,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz"},{data:"comments",title:groupEssays.localized.comments,visible:groupEssays.columns_visibilities.comments,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments"},{data:"date",title:groupEssays.localized.date,visible:groupEssays.columns_visibilities.date,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date"}]),u.language={processing:groupEssays.localized.processing,search:"_INPUT_",searchPlaceholder:groupEssays.localized.searchPlaceholder,lengthMenu:groupEssays.localized.lengthMenu,info:groupEssays.localized.info,infoEmpty:groupEssays.localized.infoEmpty,infoFiltered:groupEssays.localized.infoFiltered,infoPostFix:"",loadingRecords:groupEssays.localized.loadingRecords,zeroRecords:groupEssays.localized.zeroRecords,emptyTable:groupEssays.localized.emptyTable,paginate:{first:groupEssays.localized.paginate.first,previous:groupEssays.localized.paginate.previous,next:groupEssays.localized.paginate.next,last:groupEssays.localized.paginate.last},aria:{sortAscending:groupEssays.localized.sortAscending,sortDescending:groupEssays.localized.sortDescending}},u.initComplete=function(e,s){jQuery(window.ulgmGroupManagement.Essays.addColumnsFilter(e)).insertAfter("#uo-group-essays-table_filter")},this.uoTable=jQuery("#uo-group-essays-table"),jQuery("#uo-group-essays-table").length>0){this.uoTable=jQuery("#uo-group-essays-table").DataTable(u),new jQuery.fn.dataTable.ColReorder(this.uoTable);var c=window.ulgmGroupManagement.Essays.getParam("search");c&&window.ulgmGroupManagement.Essays.uoTable.search(c).draw()}},createTableHidden:function(s){var t={iDisplayLength:-1,columns:[{title:groupEssays.localized.title,data:"title",className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title"},{title:groupEssays.localized.first_name,data:"first_name",className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name"},{title:groupEssays.localized.last_name,data:"last_name",className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name"},{title:groupEssays.localized.author,data:"author",className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author"},{title:groupEssays.localized.status,data:"status",orderable:!1,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status"},{title:groupEssays.localized.points,data:"points",orderable:!1,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points"},{title:groupEssays.localized.question_text,data:"question_text",orderable:!1,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text"},{title:groupEssays.localized.content,data:"content",orderable:!1,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content"},{title:groupEssays.localized.assignedCourse,data:"assignedCourse",orderable:!1,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course"},{title:groupEssays.localized.assignedlesson,data:"assignedlesson",orderable:!1,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson"},{title:groupEssays.localized.assignedquiz,data:"assignedquiz",orderable:!1,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz"},{title:groupEssays.localized.comments,data:"comments",className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments"},{title:groupEssays.localized.date,data:"date",className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date"}],dom:"Bfrtip",buttons:[{extend:"csv",text:groupEssays.localized.buttons.csvExport,title:"lesson-report"}],stateSave:!0,responsive:!0};e.fn.DataTable.isDataTable("#uo-lesson-report-table-hidden")&&(e("#uo-lesson-report-table-hidden").DataTable().destroy(),t.data=s,t.columns=[{data:"id",title:groupEssays.localized.idColumn,className:"ulg-report-cell ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--id"},{data:"title",title:groupEssays.localized.title,visible:groupEssays.columns_visibilities.title,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--title"},{data:"first_name",title:groupEssays.localized.first_name,visible:groupEssays.columns_visibilities.first_name,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--first-name"},{data:"last_name",title:groupEssays.localized.last_name,visible:groupEssays.columns_visibilities.last_name,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--last-name"},{data:"author",title:groupEssays.localized.author,visible:groupEssays.columns_visibilities.author,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--author"},{data:"status",title:groupEssays.localized.status,visible:groupEssays.columns_visibilities.status,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--status"},{data:"points",title:groupEssays.localized.points,visible:groupEssays.columns_visibilities.points,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--points"},{data:"question_text",title:groupEssays.localized.question_text,visible:groupEssays.columns_visibilities.question_text,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--question-text"},{data:"content",title:groupEssays.localized.content,visible:groupEssays.columns_visibilities.content,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--content"},{data:"assignedCourse",title:groupEssays.localized.assignedCourse,visible:groupEssays.columns_visibilities.assignedCourse,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-course"},{data:"assignedlesson",title:groupEssays.localized.assignedlesson,visible:groupEssays.columns_visibilities.assignedlesson,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-lesson"},{data:"assignedquiz",title:groupEssays.localized.assignedquiz,visible:groupEssays.columns_visibilities.assignedquiz,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--assigned-quiz"},{data:"comments",title:groupEssays.localized.comments,visible:groupEssays.columns_visibilities.comments,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--comments"},{data:"date",title:groupEssays.localized.date,visible:groupEssays.columns_visibilities.date,className:"ulg-report-cell ulg-report-essays-cell ulg-report-essays-cell--date"}]),t.language={processing:groupEssays.localized.processing,search:"_INPUT_",searchPlaceholder:groupEssays.localized.searchPlaceholder,lengthMenu:groupEssays.localized.lengthMenu,info:groupEssays.localized.info,infoEmpty:groupEssays.localized.infoEmpty,infoFiltered:groupEssays.localized.infoFiltered,infoPostFix:"",loadingRecords:groupEssays.localized.loadingRecords,zeroRecords:groupEssays.localized.zeroRecords,emptyTable:groupEssays.localized.emptyTable,paginate:{first:groupEssays.localized.paginate.first,previous:groupEssays.localized.paginate.previous,next:groupEssays.localized.paginate.next,last:groupEssays.localized.paginate.last},aria:{sortAscending:groupEssays.localized.sortAscending,sortDescending:groupEssays.localized.sortDescending}},this.uoTableHidden=jQuery("#uo-lesson-report-table-hidden"),jQuery("#uo-lesson-report-table-hidden").length>0&&(this.uoTableHidden=jQuery("#uo-lesson-report-table-hidden").DataTable(t)),e(".buttons-csv").show()},flattenArray:function(e,s){var t=[];return jQuery.each(e,(function(e,s){jQuery.each(s.question,(function(e,n){t.push({title:s.title,author:s.author,status:s.status,points:s.points,question_text:s.question_text,content:s.content,assignedCourse:s.assignedCourse,assignedlesson:s.assignedlesson,assignedquiz:s.assignedquiz,comments:s.comments,date:s.date})}))})),t},create_options:function(s){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[];return(t=t.map(Number)).length>1&&t.push(0),this.elements.select[s].options.each((function(){var s=e(this).clone(),o=parseInt(s.val());s.show(),-1!=t.indexOf(o)&&n.push(s)})),1==n.length&&0==parseInt(n[0].val())&&(n=[]),0==n.length&&n.push(this.elements.select[s].options.filter(".ulgm-essays-no-results")),n},select_option:function(e,s){e.find("option").prop("selected",!1),e.find('option[value="'+s+'"]').prop("selected",!0)},__select_option:function(e,s){e.find("option").prop("selected",!1),e.find("option["+s+"]").prop("selected",!0)},addColumnsFilter:function(s){var t=e('<div id="'.concat(s.sInstance,'-filter-columns" class="dataTables-filter-columns"><input class="dataTables-filter-columns-field" id="').concat(s.sInstance,'-filter-columns-field" type="checkbox"><div class="dataTables-filter-columns__toggle"><label for="').concat(s.sInstance,'-filter-columns-field" data-label-enable="').concat(groupEssays.localized.customizeColumns,'" data-label-disable="').concat(groupEssays.localized.hideCustomizeColumns,'"></label></div><div class="dataTables-filter-columns__fields"></div></div>'));return __this=window.ulgmGroupManagement.Essays,null!==s.oSavedState?jQuery.each(s.oSavedState.columns,(function(e,n){if(e>0){var o=s.aoColumns[e].sTitle;t.find(".dataTables-filter-columns__fields").append(__this.addColumnCheckbox(o,e,n.visible))}})):jQuery.each(s.aoColumns,(function(e,n){if(e>0){var o=s.aoColumns[e].sTitle;t.find(".dataTables-filter-columns__fields").append(__this.addColumnCheckbox(o,e,n.bVisible))}})),t},addColumnCheckbox:function(e,s,t){var n=jQuery("<input />",{type:"checkbox",id:"dt_"+s,value:e,checked:t});return n.on("change",(function(e){var s=window.ulgmGroupManagement.Essays.uoTable.columns().header(),t=jQuery(this).attr("value"),n=jQuery(this).is(":checked");jQuery.each(s,(function(e,s){if(jQuery(s).html()===t){var o=window.ulgmGroupManagement.Essays.uoTable.column(e);n?o.visible(!0):o.visible(!1)}}))})),jQuery("<label/>").append(n).append(e)},addEvents:function(){var s=this;e("#uo-groups-essays-management").on("click"," #uo-essays-select-all",(function(){e('input[name="post[]"]').prop("checked",this.checked),e('input[name="post[]"]').is(":checked")?e(".group-essays-buttons").show():(e(".group-essays-buttons").hide(),e("#uo-essays-select-all").prop("checked",!1))})),e("#uo-group-essays-table tbody").on("change",'input[name="post[]"]',(function(){if(!this.checked){var s=e("#uo-essays-select-all").get(0);s&&s.checked&&"indeterminate"in s&&(s.indeterminate=!0)}e('input[name="post[]"]').is(":checked")?e(".group-essays-buttons").show():(e(".group-essays-buttons").hide(),e("#uo-essays-select-all").prop("checked",!1))})),e("#uo-groups-essays-management").on("click","#group-approve-essays-button",(function(){jQuery("form#uo-groups-essays-management-form input#bulk-action-selector-top").length&&jQuery("form#uo-groups-essays-management-form input#bulk-action-selector-top").val("approve_essay"),jQuery("form#uo-groups-essays-management-form").submit()})),e("#uo-groups-essays-management").on("click","#group-trash-essays-button",(function(){jQuery("form#uo-groups-essays-management-form input#bulk-action-selector-top").length&&jQuery("form#uo-groups-essays-management-form input#bulk-action-selector-top").val("trash_essay"),jQuery("form#uo-groups-essays-management-form").submit()})),this.elements.select.group.element.on("change",(function(){var t=e(this).val();if(0==t||null==t){s.elements.select.course.element.empty();var n=s.create_options("course");s.elements.select.course.element.html(n),s.elements.select.lesson.element.empty();var o=s.create_options("lesson");s.elements.select.lesson.element.html(o);var a=s.create_options("quiz");return s.elements.select.quiz.element.html(a),window.ulgmGroupManagement.Essays.createTable([]),void window.ulgmGroupManagement.Essays.createTableHidden([])}var l=groupEssays.courseGrouplessons[t];l=void 0===l?[]:l;var i=s.create_options("course",l);if(i.reduce((function(e,s){return e&&""!==s.val()}),!0)&&i.length>0)$noResultsOption=s.elements.select.course.element.find(".ulgm-essays-no-results"),$noResultsOption.hide(),s.elements.select.course.element.html(i),s.elements.select.course.no_element.hide(),s.__select_option(s.elements.select.course.element,0),1==i.length?(s.elements.select.course.element.addClass("h3-select"),s.elements.select.course.element.prop("disabled",!0)):(s.elements.select.course.element.removeClass("h3-select"),s.elements.select.course.element.prop("disabled",!1)),window.ulgmGroupManagement.Essays.groupId=t,s.elements.select.course.element.trigger("change");else{s.elements.select.course.element.removeClass("h3-select");var r=s.create_options("course");s.elements.select.course.element.html(r),s.elements.select.course.element.prop("disabled",!0),s.elements.select.lesson.element.empty();var u=s.create_options("lesson");s.elements.select.lesson.element.html(u),s.elements.select.lesson.element.prop("disabled",!0);var c=s.create_options("quiz");s.elements.select.quiz.element.html(c),s.elements.select.quiz.element.prop("disabled",!0),window.ulgmGroupManagement.Essays.createTable([]),window.ulgmGroupManagement.Essays.createTableHidden([]),window.ulgmGroupManagement.Essays.groupId=t,$noResultsOption=s.elements.select.course.element.find(".ulgm-essays-no-results"),$noResultsOption.show()}window.ulgmGroupManagement.Essays.getEssaysData(0,0,window.ulgmGroupManagement.Essays.groupId,0,window.ulgmGroupManagement.Essays.status)})),this.elements.select.course.element.on("change",(function(){var t=e(this).val();if(0==t||""==t){s.elements.select.lesson.element.empty();var n=s.create_options("lesson");s.elements.select.lesson.element.html(n),s.elements.select.lesson.element.prop("disabled",!0);var o=s.create_options("quiz");return s.elements.select.quiz.element.html(o),s.elements.select.quiz.element.prop("disabled",!0),window.ulgmGroupManagement.Essays.createTable([]),void window.ulgmGroupManagement.Essays.createTableHidden([])}var a=[];void 0!==groupEssays.relationships[window.ulgmGroupManagement.Essays.groupId]&&void 0!==groupEssays.relationships[window.ulgmGroupManagement.Essays.groupId][t]&&Array.isArray(groupEssays.relationships[window.ulgmGroupManagement.Essays.groupId][t])&&(a=groupEssays.relationships[window.ulgmGroupManagement.Essays.groupId][t]);var l=s.create_options("lesson",a);if(l.reduce((function(e,s){return e&&""!==s.val()}),!0)&&l.length>0)s.elements.select.lesson.element.show(),s.elements.select.lesson.element.html(l),s.elements.select.lesson.element.prop("disabled",!1),jQuery("#uo-group-report-lessons option").show(),s.elements.select.lesson.no_element.hide(),1==l.length?(s.elements.select.lesson.element.addClass("h3-select"),s.elements.select.lesson.element.prop("disabled",!0)):(s.elements.select.lesson.element.removeClass("h3-select"),s.elements.select.lesson.element.prop("disabled",!1)),s.__select_option(s.elements.select.lesson.element,0),window.ulgmGroupManagement.Essays.courseId=t,s.elements.select.lesson.element.trigger("change");else{s.elements.select.lesson.element.empty();var i=s.create_options("lesson");s.elements.select.lesson.element.html(i),s.elements.select.lesson.element.prop("disabled",!0),window.ulgmGroupManagement.Essays.createTable([]),window.ulgmGroupManagement.Essays.createTableHidden([]),window.ulgmGroupManagement.Essays.courseId=t,window.ulgmGroupManagement.Essays.getEssaysData(0,window.ulgmGroupManagement.Essays.courseId,window.ulgmGroupManagement.Essays.groupId,0,window.ulgmGroupManagement.Essays.status)}var r=[];void 0!==groupEssays.quiz_relationships[window.ulgmGroupManagement.Essays.groupId]&&void 0!==groupEssays.quiz_relationships[window.ulgmGroupManagement.Essays.groupId][t]&&Array.isArray(groupEssays.quiz_relationships[window.ulgmGroupManagement.Essays.groupId][t])&&(r=groupEssays.quiz_relationships[window.ulgmGroupManagement.Essays.groupId][t]);var u=s.create_options("quiz",r);if(u.reduce((function(e,s){return e&&""!==s.val()}),!0)&&u.length>0)s.elements.select.quiz.element.show(),s.elements.select.quiz.element.html(u),s.elements.select.quiz.element.prop("disabled",!0),jQuery("#uo-group-report-quizzes option").show(),s.elements.select.quiz.no_element.hide(),1==u.length?(s.elements.select.quiz.element.addClass("h3-select"),s.elements.select.quiz.element.prop("disabled",!0)):(s.elements.select.quiz.element.removeClass("h3-select"),s.elements.select.quiz.element.prop("disabled",!1)),s.__select_option(s.elements.select.quiz.element,0),window.ulgmGroupManagement.Essays.courseId=t,s.elements.select.quiz.element.trigger("change");else{s.elements.select.quiz.element.empty();var c=s.create_options("quiz");s.elements.select.quiz.element.html(c),s.elements.select.quiz.element.prop("disabled",!0),window.ulgmGroupManagement.Essays.createTable([]),window.ulgmGroupManagement.Essays.createTableHidden([]),window.ulgmGroupManagement.Essays.courseId=t,window.ulgmGroupManagement.Essays.getEssaysData(0,window.ulgmGroupManagement.Essays.courseId,window.ulgmGroupManagement.Essays.groupId,0,window.ulgmGroupManagement.Essays.status)}})),this.elements.select.lesson.element.on("change",(function(){var s=e(this).val();window.ulgmGroupManagement.Essays.lessonId=s,window.ulgmGroupManagement.Essays.getEssaysData(s,window.ulgmGroupManagement.Essays.courseId,window.ulgmGroupManagement.Essays.groupId,0,window.ulgmGroupManagement.Essays.status)})),this.elements.select.quiz.element.on("change",(function(){var s=e(this).val();window.ulgmGroupManagement.Essays.quizId=s,window.ulgmGroupManagement.Essays.getEssaysData(0,window.ulgmGroupManagement.Essays.courseId,window.ulgmGroupManagement.Essays.groupId,window.ulgmGroupManagement.Essays.quizId,window.ulgmGroupManagement.Essays.status)})),this.elements.select.status.element.on("change",(function(){var s=e(this).val();window.ulgmGroupManagement.Essays.status=s,window.ulgmGroupManagement.Essays.getEssaysData(0,window.ulgmGroupManagement.Essays.courseId,window.ulgmGroupManagement.Essays.groupId,window.ulgmGroupManagement.Essays.quizId,window.ulgmGroupManagement.Essays.status)})),this.elements.select.group.element.trigger("change"),e("#uo-lesson-report-table").on("click","td.details-control",(function(){var s=e(this).closest("tr"),t=window.ulgmGroupManagement.Essays.uoTable.row(s);t.child.isShown()?(t.child.hide(),s.removeClass("shown")):(t.child(window.ulgmGroupManagement.Essays.format(t.data())).show(),s.addClass("shown"))}))},format:function(s){var t="";return e.each(s.answer,(function(e,n){t+="<tr><td>"+s.question[e]+"</td><td>"+n+"</td></tr>"})),'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+t+"</table>"},isNormalInteger:function(e){var s=~~Number(e);return String(s)===e&&s>0},getEssaysData:function(s,t,n,o,a){var l=0,i=setInterval((function(){l=++l%4,e("#uo-group-essays-table tbody").html("<div id='group-loader'>"+groupEssays.localized.loadingRecords+new Array(l+1).join(".")+"</div>")}),500),r={groupId:n,lessonId:s,quizId:o,courseId:t,status:a};e.ajax({method:"POST",data:r,url:groupEssays.root+"get_essays_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupEssays.nonce)},success:function(s){clearInterval(i),e("#group-loader").remove(),window.ulgmGroupManagement.Essays.createTable(s),window.ulgmGroupManagement.Essays.createTableHidden(s)},fail:function(e){alert("Rest Call Failed")}})},editEssaysData:function(s){var t=e(".uo-modal-spinner");t.show();var n={essay_id:s,action:"edit_essays",post_type:"sfwd-essay",security:groupEssays.ajax_nonce};e.ajax({method:"POST",data:n,url:groupEssays.root+"edit_essays_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupEssays.nonce)},success:function(s){t.hide(),e(".modal").remove(),e(s.html).appendTo("body").modal()},fail:function(e){t.hide(),alert("Rest Call Failed")}})},saveEssaysData:function(){if("undefined"!=typeof tinymce)for(edId in tinyMCE.editors)void 0!==tinyMCE.editors[edId]&&void 0!==tinyMCE.editors[edId].save&&tinyMCE.editors[edId].save instanceof Function&&tinyMCE.editors[edId].save();var s=e("#edit_essay_form").serialize(),t=e(".uo-modal-spinner");e(".uo-groups-message-ok").hide(),t.show(),e.ajax({method:"POST",data:s,url:groupEssays.root+"save_essays_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupEssays.nonce)},success:function(s){t.hide(),window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger("change"),e(".uo-groups-message-ok").html(s.message).show()},fail:function(e){t.hide(),alert("Rest Call Failed")}})},actionsEssays:function(s){var t=e(".uo-modal-spinner");t.show(),e.ajax({method:"POST",data:s,url:groupEssays.root+"save_essays_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupEssays.nonce)},success:function(e){t.hide(),window.ulgmGroupManagement.Essays.elements.select.lesson.element.trigger("change")},fail:function(e){t.hide(),alert("Rest Call Failed")}})}}},541:()=>{var e;(e=jQuery)(document).ready((function(){e("#group-report").length>0&&window.ulgmGroupManagement.reportingTemplating.constructor(),e("#uo-quiz-report-table").length>0&&window.ulgmGroupManagement.quizReport.constructor(),e("#uo-group-report-course")>0&&e("#uo-group-report-course").select2()})),window.ulgmGroupManagement.reportingTemplating={rowTemplate:"",itemTemplate:"",liTemplate:"",items:[],itemsEl:[],jpL:!1,constructor:function(){e("#group-report").length>0&&(this.itemTemplate=e('script[data-template="item"]').text().split(/\$\{(.+?)\}/g))},setItems:function(s){var t=this;this.itemsEl=[],s.map((function(s){return t.itemsEl.push(e('<div class="uo-tbl-item body-row">'+t.itemTemplate.map(t.render(s)).join("")+"</div>")),'<div class="uo-tbl-item body-row">'+t.itemTemplate.map(t.render(s)).join("")+"</div>"}))},render:function(e){return function(s,t){return t%2?e[s]:s}}},window.ulgmGroupManagement.populateCoursesDropDown=function(s){var t=e("#uo-group-report-course");t.empty(),e("#course-group-id").val(s.group_id),s.group_courses.length>1&&t.append(e("<option>",{value:"0",text:ulgmRestApiSetup.localized.selectCourse})),e.each(s.group_courses,(function(s,n){t.append(e("<option>",{value:n.ID,text:n.post_title}))})),t.show().trigger("change")},window.ulgmGroupManagement.quizReport={uoTable:null,uoTableHidden:null,quizId:0,groupId:0,courseId:0,constructor:function(){this.$elements={filters:{group:document.getElementById("uo-group-report-group"),course:document.getElementById("uo-group-report-courses"),quiz:document.getElementById("uo-group-report-quizzes")}},this.createTable(),this.createTableHidden(),this.addEvents(),this.$elements.filters.group.dispatchEvent(new Event("change"))},initSelect2:function(){try{[this.$elements.filters.group,this.$elements.filters.course,this.$elements.filters.quiz].forEach((function(e){e.select2()}))}catch(e){console.error(e)}},createTable:function(s){var t=this,n=jQuery("#uo-quiz-report-table").data("table_columns");n=n.split(",");var o=[{title:groupQuizReportSetup.localized.username,targets:0,data:"user_name",visible:n.includes("user_name")},{title:groupQuizReportSetup.localized.firstName,targets:1,data:"first_name",visible:n.includes("first_name")},{title:groupQuizReportSetup.localized.lastName,targets:2,data:"last_name",visible:n.includes("last_name")},{title:groupQuizReportSetup.localized.userEmail,targets:3,data:"user_email",visible:n.includes("user_email")},{title:groupQuizReportSetup.localized.quizScore,targets:4,data:"quiz_score",visible:n.includes("quiz_score")},{title:groupQuizReportSetup.localized.detailedReport,orderable:!1,searchable:!1,targets:5,data:"quiz_modal",defaultContent:"",visible:n.includes("quiz_modal")},{title:groupQuizReportSetup.localized.date,targets:6,data:"quiz_date",visible:n.includes("quiz_date")}],a=[],l=o.findIndex((function(e){return e.title==ulgmQuizReportShortcode.table.orderBy}));-1===l&&(l=o.findIndex((function(e){return"quiz_date"==e.data}))),-1!==l&&(a=[[l,ulgmQuizReportShortcode.table.order]]);var i={aLengthMenu:[[15,30,60,-1],[15,30,60,groupQuizReportSetup.localized.all]],order:a,iDisplayLength:30,columns:o,columnDefs:[{targets:5,orderable:!1,searchable:!1}],initComplete:function(s,n){var o=s.oInstance.api(),a=t,l=e('<div id="'.concat(s.sInstance,'-filter-columns" class="dataTables-filter-columns"><input class="dataTables-filter-columns-field" id="').concat(s.sInstance,'-filter-columns-field" type="checkbox"><div class="dataTables-filter-columns__toggle"><label for="').concat(s.sInstance,'-filter-columns-field" data-label-enable="').concat(groupQuizReportSetup.localized.customizeColumns,'" data-label-disable="').concat(groupQuizReportSetup.localized.hideCustomizeColumns,'"></label></div><div class="dataTables-filter-columns__fields"></div></div>'));null!==s.oSavedState?jQuery.each(s.oSavedState.columns,(function(e,t){var n=s.aoColumns[e].sTitle;l.find(".dataTables-filter-columns__fields").append(a.addColumnCourseCheckbox(n,e,t.visible,o))})):jQuery.each(s.aoColumns,(function(e,t){var n=s.aoColumns[e].sTitle;l.find(".dataTables-filter-columns__fields").append(a.addColumnCourseCheckbox(n,e,t.bVisible,o))})),e(l).insertAfter("#uo-quiz-report-table_filter")},stateSave:!0};null!==this.uoTable&&(this.uoTable.destroy(),i.data=s),i.language={processing:groupQuizReportSetup.localized.processing,search:"_INPUT_",searchPlaceholder:groupQuizReportSetup.localized.searchPlaceholder,lengthMenu:groupQuizReportSetup.localized.lengthMenu,info:groupQuizReportSetup.localized.info,infoEmpty:groupQuizReportSetup.localized.infoEmpty,infoFiltered:groupQuizReportSetup.localized.infoFiltered,infoPostFix:"",loadingRecords:groupQuizReportSetup.localized.loadingRecords,zeroRecords:groupQuizReportSetup.localized.zeroRecords,emptyTable:groupQuizReportSetup.localized.emptyTable,paginate:{first:groupQuizReportSetup.localized.paginate.first,previous:groupQuizReportSetup.localized.paginate.previous,next:groupQuizReportSetup.localized.paginate.next,last:groupQuizReportSetup.localized.paginate.last},aria:{sortAscending:groupQuizReportSetup.localized.sortAscending,sortDescending:groupQuizReportSetup.localized.sortDescending}},this.uoTable=jQuery("#uo-quiz-report-table"),jQuery("#uo-quiz-report-table").length>0&&(this.uoTable=jQuery("#uo-quiz-report-table").DataTable(i))},createTableHidden:function(s){var t=this,n={exportOptions:{columns:function(e,s,n){return t.uoTable.column(e).visible()},format:{body:function(e,s,t,n){return e.replace(/\<span\s(?:class\=\"ulg\-hidden\-data\")(.*)\<\/span\>/g,"")}}}},o={iDisplayLength:-1,columns:[{title:groupQuizReportSetup.localized.username,data:"user_name"},{title:groupQuizReportSetup.localized.firstName,data:"first_name"},{title:groupQuizReportSetup.localized.lastName,data:"last_name"},{title:groupQuizReportSetup.localized.userEmail,data:"user_email"},{title:groupQuizReportSetup.localized.quizScore,data:"quiz_score"},{title:groupQuizReportSetup.localized.date,data:"quiz_date"}],dom:"Bfrtip",buttons:[e.extend(!0,{},n,{extend:"csv",text:groupQuizReportSetup.i18n.exportCSV,title:"quiz-report"}),e.extend(!0,{},n,{extend:"excelHtml5",text:groupQuizReportSetup.i18n.exportExcel,title:"quiz-report"})]};e.fn.DataTable.isDataTable("#uo-quiz-report-table-hidden")&&(e("#uo-quiz-report-table-hidden").DataTable().destroy(),o.data=s,o.columns=[{title:groupQuizReportSetup.localized.username,data:"user_name"},{title:groupQuizReportSetup.localized.firstName,data:"first_name"},{title:groupQuizReportSetup.localized.lastName,data:"last_name"},{title:groupQuizReportSetup.localized.userEmail,data:"user_email"},{title:groupQuizReportSetup.localized.quizScore,data:"quiz_score"},{title:groupQuizReportSetup.localized.date,data:"quiz_date"}]),o.language={processing:groupQuizReportSetup.localized.processing,search:"_INPUT_",searchPlaceholder:groupQuizReportSetup.localized.searchPlaceholder,lengthMenu:groupQuizReportSetup.localized.lengthMenu,info:groupQuizReportSetup.localized.info,infoEmpty:groupQuizReportSetup.localized.infoEmpty,infoFiltered:groupQuizReportSetup.localized.infoFiltered,infoPostFix:"",loadingRecords:groupQuizReportSetup.localized.loadingRecords,zeroRecords:groupQuizReportSetup.localized.zeroRecords,emptyTable:groupQuizReportSetup.localized.emptyTable,paginate:{first:groupQuizReportSetup.localized.paginate.first,previous:groupQuizReportSetup.localized.paginate.previous,next:groupQuizReportSetup.localized.paginate.next,last:groupQuizReportSetup.localized.paginate.last},aria:{sortAscending:groupQuizReportSetup.localized.sortAscending,sortDescending:groupQuizReportSetup.localized.sortDescending}},this.uoTableHidden=jQuery("#uo-quiz-report-table-hidden"),this.uoTableHidden.length>0&&(this.uoTableHidden=jQuery("#uo-quiz-report-table-hidden").DataTable(o)),e(".buttons-csv").show()},addColumnCourseCheckbox:function(e,s,t,n){var o=jQuery("<input />",{type:"checkbox",id:"dt_"+s,value:s,checked:t});return o.on("change",(function(e){var s=jQuery(this).attr("value"),t=jQuery(this).is(":checked");n.columns().every((function(e){var o=n.column(e);e==s&&(t?o.visible(!0):o.visible(!1))}))})),jQuery("<label/>").append(o).append(e)},addEvents:function(){var s=this;this.$elements.filters.group.addEventListener("change",(function(t){s.setLoading({$dropdown:s.$elements.filters.course,isLoading:!0}),e.ajax({method:"POST",data:{group_id:s.$elements.filters.group.value},url:groupQuizReportSetup.root+"quiz-report-get-courses/",beforeSend:function(e){return e.setRequestHeader("X-WP-Nonce",groupQuizReportSetup.nonce)},success:function(e){e.success&&Array.isArray(e.options)&&(s.setLoading({$dropdown:s.$elements.filters.course,isLoading:!1}),s.setOptions(s.$elements.filters.course,e.options,{placeholder:groupQuizReportSetup.i18n.coursePlaceholder}),0===e.options.length&&s.$elements.filters.course.setAttribute("disabled","disabled"))},fail:function(){s.setLoading({$dropdown:s.$elements.filters.course,isLoading:!1})}})})),this.$elements.filters.course.addEventListener("change",(function(t){if(0!==parseInt(s.$elements.filters.course.value))s.setLoading({$dropdown:s.$elements.filters.quiz,isLoading:!0}),e.ajax({method:"POST",data:{group_id:s.$elements.filters.group.value,course_id:s.$elements.filters.course.value},url:groupQuizReportSetup.root+"quiz-report-get-quizzes/",beforeSend:function(e){return e.setRequestHeader("X-WP-Nonce",groupQuizReportSetup.nonce)},success:function(e){e.success&&Array.isArray(e.options)&&(s.setLoading({$dropdown:s.$elements.filters.quiz,isLoading:!1}),s.setOptions(s.$elements.filters.quiz,e.options,{placeholder:groupQuizReportSetup.i18n.quizPlaceholder}),0===e.options.length&&s.$elements.filters.quiz.setAttribute("disabled","disabled"))},fail:function(){s.setLoading({$dropdown:s.$elements.filters.quiz,isLoading:!1})}});else{s.setOptions(s.$elements.filters.quiz,[]);try{s.uoTable.clear().draw()}catch(e){console.error(e)}}})),this.$elements.filters.quiz.addEventListener("change",(function(e){window.ulgmGroupManagement.quizReport.getQuizData(s.$elements.filters.quiz.value,s.$elements.filters.group.value,groupQuizReportSetupScoreType)}))},setOptions:function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e.innerHTML="",0===s.length?(e.innerHTML="\n\t\t\t\t\t<option>".concat(groupQuizReportSetup.i18n.noResults,"</option>\n\t\t\t\t"),e.classList.add("uo-groups-select-filter-select--empty")):(s.length>1&&void 0!==t.placeholder&&""!==t.placeholder&&e.insertAdjacentHTML("beforeEnd",'<option value="0">'.concat(t.placeholder,"</option>")),s.forEach((function(s){return e.insertAdjacentHTML("beforeEnd",'<option value="'.concat(s.value,'">').concat(s.text,"</option>"))})),e.classList.remove("uo-groups-select-filter-select--empty")),e.dispatchEvent(new Event("change"))},setLoading:function(e){var s=e.isLoading,t=e.$dropdown,n=t.closest(".uo-groups-select-filter");n&&(s?(n.classList.add("uo-groups-select-filter--loading"),t.setAttribute("disabled","disabled")):(n.classList.remove("uo-groups-select-filter--loading"),t.removeAttribute("disabled")))},format:function(s){var t="";return e.each(s.answer,(function(e,n){t+="<tr><td>"+s.question[e]+"</td><td>"+n+"</td></tr>"})),'<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">'+t+"</table>"},getQuizData:function(s,t,n){try{this.uoTable.clear().draw()}catch(e){console.error(e)}if(!window.ulgmGroupManagement.reporting.isNormalInteger(s))return e("#uo-group-report-course").addClass("missing"),!1;if(!window.ulgmGroupManagement.reporting.isNormalInteger(String(t)))return!1;e("#uo-group-report-course").removeClass("missing");var o=0,a=setInterval((function(){o=++o%4,e("#uo-quiz-report-table tbody").html("<div id='group-loader'>"+groupQuizReportSetup.localized.loadingRecords+new Array(o+1).join(".")+"</div>")}),500),l={groupId:t,quizId:s,scoreType:n};e.ajax({method:"POST",data:l,url:groupQuizReportSetup.root+"get_quiz_data/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupQuizReportSetup.nonce)},success:function(s){clearInterval(a),e("#group-loader").remove(),window.ulgmGroupManagement.quizReport.createTable(s),window.ulgmGroupManagement.quizReport.createTableHidden(s)},fail:function(e){alert("Rest Call Failed")}})}},window.ulgmGroupManagement.reporting={groupLeaderId:0,groupId:0,getGroupCourses:function(s){var t={groupId:s};this.getQueryVariable("user_id")&&(window.ulgmGroupManagement.reporting.groupLeaderId=this.getQueryVariable("user_id"),t.userId=window.ulgmGroupManagement.reporting.groupLeaderId),e("#uo-group-report-course").hide(),e.ajax({method:"POST",data:t,url:groupQuizReportSetup.root+"get_group_courses/",beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",groupQuizReportSetup.nonce)},success:function(s){window.ulgmGroupManagement.reporting.createCourseDropDown(s.courses),e("#uo-quiz-report-table").length&&window.ulgmGroupManagement.reporting.createUserDropDown(s.users)},fail:function(e){alert("Rest Call Failed")}})},createCourseDropDown:function(s){var t=e("#uo-group-report-course"),n='<option value="0">'+ulgmRestApiSetup.localized.selectCourse+"</option>";if(0===s.post_count)return t.html('<option value="0">'+ulgmRestApiSetup.localized.noCourse+"</option>"),!0;e.each(s.posts,(function(e,s){n+='<option value="'+s.ID+'">'+s.post_title+"</option>"})),t.html(n),t.show()},createUserDropDown:function(s){var t=e("#uo-group-report-user"),n='<option value="0">'+groupQuizReportSetup.localized.selectUser+"</option>";if(0===s.length)return t.html('<option value="0">'+groupQuizReportSetup.localized.noUsers+"/option>"),!0;e.each(s,(function(e,s){n+='<option value="'+s.ID+'">'+s.data.display_name+"</option>"})),t.html(n),t.show()},isNormalInteger:function(e){var s=Math.trunc(e);return s=isNaN(s)?0:s,String(s)==e&&s>0},getQueryVariable:function(e){for(var s=window.location.search.substring(1).split("&"),t=0;t<s.length;t++){var n=s[t].split("=");if(n[0]==e)return n[1]}return!1}}},416:()=>{var e;(e=jQuery)(document).ready((function(){var s;window.ulgmGroupManagement.restForms.constructor(),jQuery("#ulgm_group_upload_image_button").on("click",(function(t){t.preventDefault(),s||(s=wp.media.frames.file_frame=wp.media({title:"Select a image to upload",button:{text:"Use this image"},multiple:!1})).on("select",(function(){attachment=s.state().get("selection").first().toJSON(),e("#ulgm_group_image_preview").attr("src",attachment.url).css("width","auto").show(),e("#ulgm_group_image_attachment_id").val(attachment.id)})),s.open()}))})),window.ulgmGroupManagement.restForms={constructor:function(){if(void 0!==window.ulgmRestApiSetup){this.addFormSubmitEvents();try{e("#ulgm_font_color").wpColorPicker(),e("#ulgm_main_color").wpColorPicker()}catch(e){}}},makeAjaxCall:function(s,t,n){n.find("#group-management-title");var o=n.find(".group-management-rest-message"),a=e(".uo-modal-spinner");"upload_users"===s&&(uploadedUsers++,t.uploaded_users=uploadedUsers),e.ajax({method:"POST",url:ulgmRestApiSetup.root+s+"/",data:t,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",ulgmRestApiSetup.nonce)},statusCode:{403:function(e){a.hide(),o.html(ulgmRestApiSetup.i18n.youCantDoThat).show()}},success:function(l){if(a.hide(),!0===l.success){e("#uo-group-report-course").show(),o.hide();var i=window.location.href;if(i.indexOf("?")>-1?i+="&message="+encodeURIComponent(l.data.message):i+="?message="+encodeURIComponent(l.data.message),void 0===l.data.reload){var r=l.data.message,u=location.search;new RegExp("[&?]message([=&].+)?$").test(u)&&(u=u.replace(new RegExp("(?:[&?])message[^&]*","g"),"")),u+="&",u="?"+(u+="message="+r).slice(1),location.assign(location.origin+location.pathname+u+location.hash)}else void 0!==l.data.call_function?void 0!==l.data.function_vars?window.ulgmGroupManagement[l.data.call_function](l.data.function_vars):window.ulgmGroupManagement[l.data.call_function]():void 0===l.data.reload||void 0===l.data.endpoint||!1!==l.data.reload||"upload_users"!==l.data.endpoint&&"send-enrollment"!==l.data.endpoint||(1===l.data.uploaded_users&&(e([document.documentElement,document.body]).animate({scrollTop:e("#group-management-users").offset().top},2e3),e("#group-management-upload-users .uo-close-modal").click(),e("#uo-groups-upload-summary").show(),e(".uo-groups-group-courses").hide(),e(".uo-groups-enrolled-users").hide(),e("#group-management-leaders").hide()),e("#uo-groups-upload-summary .uo-header-subtitle").text(l.data.message),e("#csv-result-total").text(l.data.total_rows),console.log("this is the upload"),console.log(l),l.data.results.forEach((function(s){var t=document.createElement("div");t.setAttribute("class","uo-row uo-table-content uo-tbl-item body-row");var n=document.createElement("div");n.setAttribute("class","content-leaders-email uo-table-cell uo-table-cell-3");var o=document.createElement("div");o.setAttribute("class","content-leaders-statu uo-table-cell uo-table-cell-7"),n.innerText=s.email,o.innerText="use_error_code"===s.status.reason?s.message:s.status.reason,t.appendChild(n),t.appendChild(o);var a=document.getElementById("uo-groups-upload-result-rows");null!==a&&(a.appendChild(t),"new_created_added_to_group"!==s.status.user&&"existing_added_to_group"!==s.status.user||e("#csv-result-added").text(parseInt(e("#csv-result-added").text())+1),"existing_already_member"===s.status.user&&e("#csv-result-member").text(parseInt(e("#csv-result-member").text())+1),"new_failed"!==s.status.user&&"existing_failed"!==s.status.user||e("#csv-result-unprocessed").text(parseInt(e("#csv-result-unprocessed").text())+1))})),!1===l.data.completed&&(a.show(),ulgmGroupManagement.restForms.makeAjaxCall(s,t,n)))}else a.hide(),ulgmRestApiSetup.hasOwnProperty("localized")&&"invalid-course-id"!==l.data.error&&e("#uo-group-report-course").empty().append(e("<option>",{value:"0",text:ulgmRestApiSetup.localized.selectCourse})),o.html(l.data.message).show()},fail:function(e){a.hide(),o.html(e.data.message)}})},addFormSubmitEvents:function(){e(".submit-group-management-form").on("click",this.sendRestCall),e(".change-group-management-form").on("change",this.sendRestCall),e(".group-management-modal input").on("keypress",this.sendRestCall),e("input[type=radio][name=action]").on("change",(function(){var s=this.value;"add-invite"===s?e("#uo-import-user-note").show():"send-enrollment"===s&&e("#uo-import-user-note").hide()}))},sendRestCall:function(s){var t=s.currentTarget;if(e(t).is("input")){if("Enter"!==s.key)return!0;t=e(t).closest(".group-management-form").find(".submit-group-management-form")}var n=e(".uo-modal-spinner"),o=e(t).closest(".group-management-form");o.find(".group-management-rest-message").hide(),e("#uo-group-progress-report").hide();var a=e(t).data("end-point");if(void 0===a)return!1;if("add_user"!=a||(document.getElementById("group-management-add-user-frm").onsubmit=function(e){return e.preventDefault(),!1},document.getElementById("group-management-add-user-frm").checkValidity()))if("edit_user"!=a||(document.getElementById("group-management-edit-user-frm").onsubmit=function(e){return e.preventDefault(),!1},document.getElementById("group-management-edit-user-frm").checkValidity())){if(!("group-id"===e(t).attr("id")&&0==e(t).val()||"uo-group-report-course"===e(t).attr("id")&&0==e(t).val())){if("undefined"!=typeof tinymce)for(edId in tinyMCE.editors)void 0!==tinyMCE.editors[edId]&&void 0!==tinyMCE.editors[edId].save&&tinyMCE.editors[edId].save instanceof Function&&tinyMCE.editors[edId].save();var l={},i=o.find(":input");e.each(i.serializeArray(),(function(e,s){l[s.name]=s.value})),"email_users"==a&&(l=i.serializeArray()),n.show(),"upload_users"===a&&(uploadedUsers=0),ulgmGroupManagement.restForms.makeAjaxCall(a,l,o)}}else document.getElementById("group-management-edit-user-frm").reportValidity();else document.getElementById("group-management-add-user-frm").reportValidity()}},e.fn.serializeObject=function(){var s={},t=this.serializeArray();return e.each(t,(function(){void 0!==s[this.name]?(s[this.name].push||(s[this.name]=[s[this.name]]),s[this.name].push(this.value||"")):s[this.name]=this.value||""})),s}},456:function(e,s,t){"use strict";var n,o,a;"undefined"!=typeof window&&window,o=[t(87)],void 0===(a="function"==typeof(n=function(e){var s=function(){var s,t={},n=[];function o(e){e||(e=document.documentElement);var s=window.getComputedStyle(e,null).fontSize;return parseFloat(s)||16}function a(e,s){var t=s.split(/\d/),n=t[t.length-1];switch(s=parseFloat(s),n){case"px":default:return s;case"em":return s*o(e);case"rem":return s*o();case"vw":return s*document.documentElement.clientWidth/100;case"vh":return s*document.documentElement.clientHeight/100;case"vmin":case"vmax":var a=document.documentElement.clientWidth/100,l=document.documentElement.clientHeight/100;return s*(0,Math["vmin"===n?"min":"max"])(a,l)}}function l(e,s){var n,o,l,i,r,u,c,g;this.element=e;var d=["min-width","min-height","max-width","max-height"];this.call=function(){for(n in l=function(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var s=e.getBoundingClientRect();return{width:Math.round(s.width),height:Math.round(s.height)}}(this.element),u={},t[s])t[s].hasOwnProperty(n)&&(o=t[s][n],i=a(this.element,o.value),r="width"===o.property?l.width:l.height,g=o.mode+"-"+o.property,c="","min"===o.mode&&r>=i&&(c+=o.value),"max"===o.mode&&r<=i&&(c+=o.value),u[g]||(u[g]=""),c&&-1===(" "+u[g]+" ").indexOf(" "+c+" ")&&(u[g]+=" "+c));for(var e in d)d.hasOwnProperty(e)&&(u[d[e]]?this.element.setAttribute(d[e],u[d[e]].substr(1)):this.element.removeAttribute(d[e]))}}function i(s,t){s.elementQueriesSetupInformation||(s.elementQueriesSetupInformation=new l(s,t)),s.elementQueriesSensor||(s.elementQueriesSensor=new e(s,(function(){s.elementQueriesSetupInformation.call()})))}function r(e,o,a,l){if(void 0===t[e]){t[e]=[];var i=n.length;s.innerHTML+="\n"+e+" {animation: 0.1s element-queries;}",s.innerHTML+="\n"+e+" > .resize-sensor {min-width: "+i+"px;}",n.push(e)}t[e].push({mode:o,property:a,value:l})}function u(e){var s;if(document.querySelectorAll&&(s=e?e.querySelectorAll.bind(e):document.querySelectorAll.bind(document)),s||"undefined"==typeof $$||(s=$$),s||"undefined"==typeof jQuery||(s=jQuery),!s)throw"No document.querySelectorAll, jQuery or Mootools's $$ found.";return s}function c(s){var t=[],n=[],o=[],a=0,l=-1,i=[];for(var r in s.children)if(s.children.hasOwnProperty(r)&&s.children[r].tagName&&"img"===s.children[r].tagName.toLowerCase()){t.push(s.children[r]);var u=s.children[r].getAttribute("min-width")||s.children[r].getAttribute("data-min-width"),c=s.children[r].getAttribute("data-src")||s.children[r].getAttribute("url");o.push(c);var g={minWidth:u};n.push(g),u?s.children[r].style.display="none":(a=t.length-1,s.children[r].style.display="block")}function d(){var e,r=!1;for(e in t)t.hasOwnProperty(e)&&n[e].minWidth&&s.offsetWidth>n[e].minWidth&&(r=e);if(r||(r=a),l!==r)if(i[r])t[l].style.display="none",t[r].style.display="block",l=r;else{var u=new Image;u.onload=function(){t[r].src=o[r],t[l].style.display="none",t[r].style.display="block",i[r]=!0,l=r},u.src=o[r]}else t[r].src=o[r]}l=a,s.resizeSensorInstance=new e(s,d),d()}var g=/,?[\s\t]*([^,\n]*?)((?:\[[\s\t]*?(?:min|max)-(?:width|height)[\s\t]*?[~$\^]?=[\s\t]*?"[^"]*?"[\s\t]*?])+)([^,\n\s\{]*)/gim,d=/\[[\s\t]*?(min|max)-(width|height)[\s\t]*?[~$\^]?=[\s\t]*?"([^"]*?)"[\s\t]*?]/gim;function p(e){var s,t,n,o;for(e=e.replace(/'/g,'"');null!==(s=g.exec(e));)for(t=s[1]+s[3],n=s[2];null!==(o=d.exec(n));)r(t,o[1],o[2],o[3])}function m(e){var s="";if(e)if("string"==typeof e)-1===(e=e.toLowerCase()).indexOf("min-width")&&-1===e.indexOf("max-width")||p(e);else for(var t=0,n=e.length;t<n;t++)1===e[t].type?-1!==(s=e[t].selectorText||e[t].cssText).indexOf("min-height")||-1!==s.indexOf("max-height")?p(s):-1===s.indexOf("min-width")&&-1===s.indexOf("max-width")||p(s):4===e[t].type?m(e[t].cssRules||e[t].rules):3===e[t].type&&e[t].styleSheet.hasOwnProperty("cssRules")&&m(e[t].styleSheet.cssRules)}var h=!1;this.init=function(){var t="animationstart";void 0!==document.documentElement.style.webkitAnimationName?t="webkitAnimationStart":void 0!==document.documentElement.style.MozAnimationName?t="mozanimationstart":void 0!==document.documentElement.style.OAnimationName&&(t="oanimationstart"),document.body.addEventListener(t,(function(s){var t=s.target,o=t&&window.getComputedStyle(t,null),a=o&&o.getPropertyValue("animation-name");if(a&&-1!==a.indexOf("element-queries")){t.elementQueriesSensor=new e(t,(function(){t.elementQueriesSetupInformation&&t.elementQueriesSetupInformation.call()}));var l=window.getComputedStyle(t.resizeSensor,null).getPropertyValue("min-width");l=parseInt(l.replace("px","")),i(s.target,n[l])}})),h||((s=document.createElement("style")).type="text/css",s.innerHTML="[responsive-image] > img, [data-responsive-image] {overflow: hidden; padding: 0; } [responsive-image] > img, [data-responsive-image] > img {width: 100%;}",s.innerHTML+="\n@keyframes element-queries { 0% { visibility: inherit; } }",document.getElementsByTagName("head")[0].appendChild(s),h=!0);for(var o=0,a=document.styleSheets.length;o<a;o++)try{document.styleSheets[o].href&&0===document.styleSheets[o].href.indexOf("file://")&&console.warn("CssElementQueries: unable to parse local css files, "+document.styleSheets[o].href),m(document.styleSheets[o].cssRules||document.styleSheets[o].rules||document.styleSheets[o].cssText)}catch(e){}!function(){for(var e=u()("[data-responsive-image],[responsive-image]"),s=0,t=e.length;s<t;s++)c(e[s])}()},this.findElementQueriesElements=function(e){!function(e){var s=u(e);for(var n in t)if(t.hasOwnProperty(n))for(var o=s(n,e),a=0,l=o.length;a<l;a++)i(o[a],n)}(e)},this.update=function(){this.init()}};s.update=function(){s.instance.update()},s.detach=function(e){e.elementQueriesSetupInformation?(e.elementQueriesSensor.detach(),delete e.elementQueriesSetupInformation,delete e.elementQueriesSensor):e.resizeSensorInstance&&(e.resizeSensorInstance.detach(),delete e.resizeSensorInstance)},s.init=function(){s.instance||(s.instance=new s),s.instance.init()};return s.findElementQueriesElements=function(e){s.instance.findElementQueriesElements(e)},s.listen=function(){!function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var s=setInterval((function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(s))}),10);else window.onload=e}(s.init)},s})?n.apply(s,o):n)||(e.exports=a)},87:function(e,s,t){"use strict";var n,o;"undefined"!=typeof window&&window,void 0===(o="function"==typeof(n=function(){if("undefined"==typeof window)return null;var e="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),s=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(s){return e.setTimeout(s,20)},t=e.cancelAnimationFrame||e.mozCancelAnimationFrame||e.webkitCancelAnimationFrame||function(s){e.clearTimeout(s)};function n(e,s){var t=Object.prototype.toString.call(e),n="[object Array]"===t||"[object NodeList]"===t||"[object HTMLCollection]"===t||"[object Object]"===t||"undefined"!=typeof jQuery&&e instanceof jQuery||"undefined"!=typeof Elements&&e instanceof Elements,o=0,a=e.length;if(n)for(;o<a;o++)s(e[o]);else s(e)}function o(e){if(!e.getBoundingClientRect)return{width:e.offsetWidth,height:e.offsetHeight};var s=e.getBoundingClientRect();return{width:Math.round(s.width),height:Math.round(s.height)}}function a(e,s){Object.keys(s).forEach((function(t){e.style[t]=s[t]}))}var l=function(e,i){var r=0;function u(){var e,s,t=[];this.add=function(e){t.push(e)},this.call=function(n){for(e=0,s=t.length;e<s;e++)t[e].call(this,n)},this.remove=function(n){var o=[];for(e=0,s=t.length;e<s;e++)t[e]!==n&&o.push(t[e]);t=o},this.length=function(){return t.length}}function c(e,t){if(e)if(e.resizedAttached)e.resizedAttached.add(t);else{e.resizedAttached=new u,e.resizedAttached.add(t),e.resizeSensor=document.createElement("div"),e.resizeSensor.dir="ltr",e.resizeSensor.className="resize-sensor";var n={pointerEvents:"none",position:"absolute",left:"0px",top:"0px",right:"0px",bottom:"0px",overflow:"hidden",zIndex:"-1",visibility:"hidden",maxWidth:"100%"},l={position:"absolute",left:"0px",top:"0px",transition:"0s"};a(e.resizeSensor,n);var i=document.createElement("div");i.className="resize-sensor-expand",a(i,n);var c=document.createElement("div");a(c,l),i.appendChild(c);var g=document.createElement("div");g.className="resize-sensor-shrink",a(g,n);var d=document.createElement("div");a(d,l),a(d,{width:"200%",height:"200%"}),g.appendChild(d),e.resizeSensor.appendChild(i),e.resizeSensor.appendChild(g),e.appendChild(e.resizeSensor);var p=window.getComputedStyle(e),m=p?p.getPropertyValue("position"):null;"absolute"!==m&&"relative"!==m&&"fixed"!==m&&"sticky"!==m&&(e.style.position="relative");var h=!1,f=0,v=o(e),y=0,b=0,_=!0;r=0;var z=function(){if(_){if(0===e.offsetWidth&&0===e.offsetHeight)return void(r||(r=s((function(){r=0,z()}))));_=!1}var t,n;t=e.offsetWidth,n=e.offsetHeight,c.style.width=t+10+"px",c.style.height=n+10+"px",i.scrollLeft=t+10,i.scrollTop=n+10,g.scrollLeft=t+10,g.scrollTop=n+10};e.resizeSensor.resetSensor=z;var w=function(){f=0,h&&(y=v.width,b=v.height,e.resizedAttached&&e.resizedAttached.call(v))},C=function(){v=o(e),(h=v.width!==y||v.height!==b)&&!f&&(f=s(w)),z()},E=function(e,s,t){e.attachEvent?e.attachEvent("on"+s,t):e.addEventListener(s,t)};E(i,"scroll",C),E(g,"scroll",C),r=s((function(){r=0,z()}))}}n(e,(function(e){c(e,i)})),this.detach=function(s){r||(t(r),r=0),l.detach(e,s)},this.reset=function(){e.resizeSensor.resetSensor()}};if(l.reset=function(e){n(e,(function(e){e.resizeSensor.resetSensor()}))},l.detach=function(e,s){n(e,(function(e){e&&(e.resizedAttached&&"function"==typeof s&&(e.resizedAttached.remove(s),e.resizedAttached.length())||e.resizeSensor&&(e.contains(e.resizeSensor)&&e.removeChild(e.resizeSensor),delete e.resizeSensor,delete e.resizedAttached))}))},"undefined"!=typeof MutationObserver){var i=new MutationObserver((function(e){for(var s in e)if(e.hasOwnProperty(s))for(var t=e[s].addedNodes,n=0;n<t.length;n++)t[n].resizeSensor&&l.reset(t[n])}));document.addEventListener("DOMContentLoaded",(function(e){i.observe(document.body,{childList:!0,subtree:!0})}))}return l})?n.call(s,t,s,e):n)||(e.exports=o)}},s={};function t(n){var o=s[n];if(void 0!==o)return o.exports;var a=s[n]={exports:{}};return e[n].call(a.exports,a,a.exports,t),a.exports}t.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},t.d=(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{"use strict";t(26),t(416),t(457),t(780),t(541),t(712),t(258);const e=jQuery;var s=t.n(e),n="undefined"==typeof arguments?void 0:arguments;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function a(e){["change_user_progress"].includes(e.endpoint)?s().ajax({method:"POST",url:e.url+e.endpoint+"/",data:s().param(e.data)+"&"+s().param({doing_rest:1}),beforeSend:function(s){s.setRequestHeader("X-WP-Nonce",e.nonce)},success:function(s){l(e.onDone)&&e.onDone(s),l(e.onSuccess)&&e.onSuccess(s)},statusCode:{403:function(){location.reload()}},fail:function(s){l(e.onDone)&&e.onDone(s),l(e.onFail)&&e.onFail(s)}}):console.error("The ".concat(e.endpoint," endPoint does not exists"))}var l=function(e){return null!=e},i=function(e){var s=!0;return l(e)&&(s=e.isArray?0==e.length:r(e)?Object.keys(e).length:""==e),s},r=function(e){return"object"===o(e)&&null!==e},u=function(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:",";s=Math.abs(s),s=isNaN(s)?2:s;var o=parseInt(e=Math.abs(Number(e)||0).toFixed(s)).toString(),a=o.length>3?o.length%3:0;return(a?o.substr(0,a)+n:"")+o.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+n)+(s?t+Math.abs(e-o).toFixed(s).slice(2):"")},c=function(){void 0!==jQuery.fn.iCheck&&(jQuery(".uo-checkbox input").iCheck("destroy"),jQuery(".uo-checkbox input").on("ifCreated",(function(e){setTimeout((function(){jQuery(e.currentTarget).iCheck("destroy")}),100)})))};function g(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function d(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,s,t){return s&&d(e.prototype,s),t&&d(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(e){e(document).ready((function(){var s;e(".uo-table-sort-buttons").on("click",".uo-table-sort-btn",(function(){var s=e(this).closest(".uo-table-sort-buttons"),t=e(this).data("direction");e(this).hide(),s.find('.uo-table-sort-btn:not([data-direction="'+t+'"])').show()})),e(".uo-copy-to-clipboard-button").click((function(){var s=e(this).closest(".uo-copy-to-clipboard");e(s.find("input")).select(),document.execCommand("Copy")})),function(){e("#uo_add_users_button"),e("#uo-open-bulk-add").on("click",(function(){var s=e(".uo-groups-bulk");s.slideToggle(500),e("html, body").animate({scrollTop:s.offset().top-100},500)})),e(".uo-groups-bulk-close").on("click",(function(){e(".uo-groups-bulk").slideToggle(500)}));var s=e('.uo-groups-group-leaders input[name="group-leader-id[]"], .uo-groups-enrolled-users input#select-all-group-leaders'),t=e('.uo-groups-group-leaders .uo-btn[data-modal-id="#group-management-add-group-leader"]');function n(){e(document).mouseup((function(s){var t=e(".uo-groups-list-of-btns");t.is(s.target)||0!==t.has(s.target).length||(t.removeClass("uo-groups-list-of-btns-open"),e(".uo-groups-list-of-btns").unbind("click",e(document)))}))}s.on("change",(function(){s.is(":checked")?t.hide():t.show()})),e(".uo-groups-list-of-btns-main").click((function(s){var t=e(s.currentTarget),o=t.data("id"),a=void 0===t.data("direction")?"right":t.data("direction"),l=e('.uo-groups-list-of-btns[data-id="'+o+'"]');1==l.length?l.hasClass("uo-groups-list-of-btns-open")?l.removeClass("uo-groups-list-of-btns-open"):(l.addClass("uo-groups-list-of-btns-open"),"left"!=a&&"right"!=a||l.addClass("uo-groups-list-of-btns--"+a),n()):console.error("We couldn't find the dropdown")})),e(".uo-groups-list-of-btns .uo-groups-list .uo-btn").click((function(){e(this).closest(".uo-groups-list-of-btns").removeClass("uo-groups-list-of-btns-open")}))}(),s=e("#uo-group-progress-report"),e(".uo-groups.uo-reports #group-report select.change-group-management-form").change((function(){s.hide()})),c()}))}(jQuery);var m=function(){function e(){g(this,e),this.isGroupManagement()&&(new f,window.ulgmGroupManagement.groupManagementModal=new h)}return p(e,[{key:"isGroupManagement",value:function(){return 1==s()("#group-management").length}}]),e}(),h=function(){function e(){g(this,e),s()(document).on("modal:open",(function(e){"group-management-email-users"===e.target.id&&(wp.editor.remove("group_email_text"),wp.editor.initialize("group_email_text",{tinymce:{min_height:300,formats:{alignleft:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"}},{selector:"img,table,dl.wp-caption",classes:"alignleft"}],aligncenter:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"}},{selector:"img,table,dl.wp-caption",classes:"aligncenter"}],alignright:[{selector:"p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"}},{selector:"img,table,dl.wp-caption",classes:"alignright"}],strikethrough:{inline:"del"}},toolbar1:"formatselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | forecolor backcolor emoticons",plugins:"charmap colorpicker hr lists media paste tabfocus textcolor fullscreen wordpress wpautoresize wpeditimage wpemoji wpgallery wplink wpdialogs wptextpattern wpview"},quicktags:{buttons:"strong,em,link,ul,ol,li,code"}}))})),this.addGroupManagementEvents()}return p(e,[{key:"addGroupManagementEvents",value:function(){s()("#csv-file").on("click",(function(){s()(this).val("")})),s()("body").on("click",".ulgm-modal-link",this.openModal),s()("#csv-file").on("change",this.parseCsv),s()("input:radio[name=action]").click((function(){var e=s()(this).val(),t=s()(this).parent();t.children("#first-name, #last-name, #email, label[for=first-name], label[for=last-name], label[for=email-name]").show(),s()("#uo_add_user_password").show(),"send-enrollment"!==e&&"add-existing-user"!==e||(t.children("#first-name, #last-name, label[for=first-name], label[for=last-name]").hide(),s()("#uo_add_user_password").hide())})),window.ulgmGroupManagement.downloadCsv=function(e){var s=new Blob([e.csvDataString],{type:"text/csv;charset=utf-8"});saveAs(s,e.fileName+".csv")}}},{key:"openModal",value:function(e){e.preventDefault(),s()(".group-management-form").find(".group-management-rest-message").html("").hide();var t=s()(this).data("modal-id");if(1==s()(this).data("modal-ajax")){var n=s()(this).data("endpoint"),o={action:"get-user-details",user:s()(this).data("user-id"),"group-id":s()(this).data("group-id")},a=s()(".uo-modal-spinner");s().ajax({method:"POST",url:ulgmRestApiSetup.root+n+"/",data:o,beforeSend:function(e){e.setRequestHeader("X-WP-Nonce",ulgmRestApiSetup.nonce)},statusCode:{403:function(e){a.hide(),$error_container.html(ulgmRestApiSetup.i18n.youCantDoThat).show()}},success:function(e){for(var n in e.data)s()("#"+n).length>0&&(s()("#"+n).val(e.data[n].value),0==e.data[n].is_editable&&s()("#"+n).attr("disabled","disabled"));if(a.hide(),!0===e.success){var o=s()(t);o.modal(),s()("#group-management").trigger("modal-open",[t,o])}else a.hide(),$error_container.html(e.data.message).show()},fail:function(e){a.hide(),$error_container.html(e.data.message)}})}else{var l=s()(t);l.modal(),s()("#group-management").trigger("modal-open",[t,l])}}},{key:"parseCsv",value:function(e){var t=s()(this),n=s()(t.closest(".group-management-form")).find(".group-management-rest-message");n.hide(),n.text("");try{var o=new FileReader}catch(e){return n.text(ulgmGroupManagementLocalized.text.file_api_is_not_supported).css("display","inline-flex"),!1}var a=s()("#csv-file")[0].files[0],l=!1;return a?"csv"!==a.name.split(".").pop()?(n.text(ulgmGroupManagementLocalized.text.select_a_csv).css("display","inline-flex"),!1):(o.readAsText(a),void(o.onload=function(e){if(!(l=e.target.result))return n.text(ulgmGroupManagementLocalized.text.csv_file_error).css("display","inline-flex"),!1;var t=l.split(/\r?\n/g),o=t.shift(),a=",";if(-1!==o.indexOf(";")&&(a=";"),3!==(o=o.split(a)).length&&0===t.length)return n.text(ulgmGroupManagementLocalized.text.incompatible_format).css("display","inline-flex"),!1;t.pop();var i=window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader(o,"user_email");if("error"===i)return n.text(ulgmGroupManagementLocalized.text.not_contains_email).css("display","inline-flex"),!1;if("error"===window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader(o,"first_name"))return n.text(ulgmGroupManagementLocalized.text.not_contains_first).css("display","inline-flex"),!1;if("error"===window.ulgmGroupManagement.groupManagementModal.verifyRequiredHeader(o,"last_name"))return n.text(ulgmGroupManagementLocalized.text.not_contains_last).css("display","inline-flex"),!1;var r=t.map((function e(s){return"string"==typeof s?s.split(a):s.map(e)}));if(window.ulgmGroupManagement.groupManagementModal.verifyEmptyRows(r,i))return n.text(ulgmGroupManagementLocalized.text.must_contain_email).css("display","inline-flex"),!1;s()("#csv-text").val(l)})):(s()(t.closest(".group-management-form")).find(".group-management-rest-message").text(ulgmGroupManagementLocalized.text.choose_file),!1)}},{key:"verifyEmptyRows",value:function(e,s){for(var t=0;t<e.length;++t)if(""===e[t][s])return!0;return!1}},{key:"verifyRequiredHeader",value:function(e,s){for(var t=0,n=!1,o=0;o<e.length;o++)e[o]===s&&(t++,n=o);return 0===t||1!==t?"error":n}}]),e}(),f=function(){function e(){g(this,e),this.hasEnrolledUsersTable()&&(this.getElements(),this.getData(),this.addSelect2(),this.createDataTables(),this.listenCheckboxToSelectAll(),this.listenCheckboxesChanges(),this.updateDataOnModal(),this.firstLastNamesRequired())}return p(e,[{key:"getElements",value:function(){this.$elements={container:s()("#group-management"),selectEl:s()(".uo-groups select"),enrolledUsersTableDT:s()("#group-management-enrolled-users-datatable"),enrolledLeaderTableDT:s()("#group-management-enrolled-leader-datatable"),removeUsersButton:s()("#group-management-enrolled-users-table-remove-users"),removeLeadersButton:s()(".group-leader-management-buttons"),sendEmailsButton:s()("#group-management-enrolled-users-table-send-password"),numberOfUsers:s()("#group-management .uo-groups-enrolled-users .amount-users"),sendEmailsModal:s()("#group-management-enrolled-users-table-send-password-modal"),sendEmailsField:s()("#group-management-enrolled-users-table-send-password-field"),removeUsersField:s()("#group-management-remove-user #removing-users"),emailUsersCoursesDropdown:s()("#ulgm-management-send-email-courses")}}},{key:"addSelect2",value:function(){var e=this;try{this.$elements.selectEl.each((function(e,t){var n={};t.closest(".group-management-modal")&&(n.dropdownParent=s()(t.parentNode)),s()(t).select2(n)}))}catch(e){console.warn(e)}s()("#group-id").length>0&&s()("#group-id").change((function(){s()(this).closest("form").submit()})),this.emailUsersCourses=this.$elements.emailUsersCoursesDropdown.val()||[],this.$elements.emailUsersCoursesDropdown.on("change",(function(){try{var s="-1",t=!1,n=e.$elements.emailUsersCoursesDropdown.val();if(0==n.length)return;var o=e.emailUsersCourses.filter((function(e){return!n.includes(e)})).concat(n.filter((function(s){return!e.emailUsersCourses.includes(s)})))[0];if(void 0===o)return;var a=0==e.emailUsersCourses.filter((function(e){return!n.includes(e)})).length,l=n.includes(s);o==s&&a&&n.length>1&&(e.$elements.emailUsersCoursesDropdown.val(""),e.$elements.emailUsersCoursesDropdown.find('option[value="'.concat(s,'"]')).prop("selected",!0),t=!0),o!=s&&a&&l&&(e.$elements.emailUsersCoursesDropdown.find('option[value="'.concat(s,'"]')).prop("selected",!1),t=!0),t&&(e.emailUsersCourses=e.$elements.emailUsersCoursesDropdown.val(),e.$elements.emailUsersCoursesDropdown.trigger("change"))}catch(e){console.warn(e)}}))}},{key:"getData",value:function(){this.data={canRemoveUsers:!!parseInt(this.$elements.enrolledUsersTableDT.data("can-remove-users")),canRemoveUsersAnytime:!!parseInt(this.$elements.enrolledUsersTableDT.data("can-remove-users-anytime")),ulgmGroupLeaderData:null!==ulgmGroupLeaderData?ulgmGroupLeaderData:[]},this.selectedUsers=[],this.selectedLeaders=[]}},{key:"createDataTables",value:function(){jQuery.fn.dataTable.ext.type.order["uo-groups-anchor-asc"]=function(e,s){var t=document.createElement("div");t.innerHTML=e,t=(t=t.textContent).toLowerCase().trim();var n=document.createElement("div");return n.innerHTML=s,n=(n=n.textContent).toLowerCase().trim(),t.localeCompare(n)},jQuery.fn.dataTable.ext.type.order["uo-groups-anchor-desc"]=function(e,s){var t=document.createElement("div");t.innerHTML=e,t=(t=t.textContent).toLowerCase().trim();var n=document.createElement("div");return n.innerHTML=s,(n=(n=n.textContent).toLowerCase().trim()).localeCompare(t)};var e=this.data.ulgmGroupLeaderData.enrolled_user_columns;"true"===this.data.ulgmGroupLeaderData.populate_management_features&&e.unshift({data:"check",title:this.data.ulgmGroupLeaderData.check_all,searchable:!1,orderable:!1}),!0!==this.$elements.enrolledUsersTableDT.data("key_column")&&(e=e.filter((function(e){return"key"!=e.targets})));var t={exportOptions:{},filename:function(){var e=["group-management",document.getElementById("ulgm_current_managed_group_id").value],t=s()("#group-id option:selected").text();return t=t||s()("#group-name").text(),e.push(t),e.join(" - ")}},n=[],o=e.findIndex((function(e){return e.title==ulgmGroupManagementShortcode.tables.enrolledUsers.orderBy}));-1===o&&(o=e.findIndex((function(e){return"first_name"==e.targets}))),-1!==o&&(n=[[o,ulgmGroupManagementShortcode.tables.enrolledUsers.order]]);var a,l={data:this.data.ulgmGroupLeaderData.enrolled_user_data,searchDelay:400,columns:e,dom:'<"uo-groups-datatable-header"B>frt<"uo-groups-datatable-footer"lpi>',order:n,pageLength:parseInt(this.$elements.enrolledUsersTableDT.data("page_length")),lengthMenu:[[10,25,50,100],[10,25,50,100]],buttons:[s().extend(!0,{},t,{extend:"csv",text:ulgmRestApiSetup.language.buttons.csvExport}),s().extend(!0,{},t,{extend:"excelHtml5",text:ulgmRestApiSetup.i18n.exportExcel})],language:{processing:ulgmRestApiSetup.language.processing,search:"_INPUT_",searchPlaceholder:ulgmRestApiSetup.language.searchPlaceholder,lengthMenu:ulgmRestApiSetup.language.lengthMenu,info:ulgmRestApiSetup.language.info,infoEmpty:ulgmRestApiSetup.language.infoEmpty,infoFiltered:ulgmRestApiSetup.language.infoFiltered,infoPostFix:"",loadingRecords:ulgmRestApiSetup.language.loadingRecords,zeroRecords:ulgmRestApiSetup.language.zeroRecords,emptyTable:ulgmRestApiSetup.language.emptyTable,paginate:{first:ulgmRestApiSetup.language.paginate.first,previous:ulgmRestApiSetup.language.paginate.previous,next:ulgmRestApiSetup.language.paginate.next,last:ulgmRestApiSetup.language.paginate.last},aria:{sortAscending:ulgmRestApiSetup.language.sortAscending,sortDescending:ulgmRestApiSetup.language.sortDescending}},processing:!1,serverSide:!1,createdRow:function(e,t,n){s()(e).addClass("status_id-".concat(t.status_id))},initComplete:function(){var e=document.getElementById("group-management-users-export-csv"),s=document.getElementById("group-management-users-export-excel");document.body.contains(e)&&e.addEventListener("click",(function(){var e=document.querySelector("#group-management-enrolled-users-datatable_wrapper .buttons-csv");if(document.body.contains(e)){var s=document.createEvent("HTMLEvents");s.initEvent("click",!0,!1),e.dispatchEvent(s)}})),document.body.contains(s)&&s.addEventListener("click",(function(){var e=document.querySelector("#group-management-enrolled-users-datatable_wrapper .buttons-excel");if(document.body.contains(e)){var s=document.createEvent("HTMLEvents");s.initEvent("click",!0,!1),e.dispatchEvent(s)}}))}};a=this.$elements.enrolledUsersTableDT.DataTable(l),s()(document).trigger("enrolledUsersTableDataTableCreated",{userTableVars:l,userTable:a,ulgmGroupLeaderData});var i=this.data.ulgmGroupLeaderData.enrolled_leader_columns;"true"===this.data.ulgmGroupLeaderData.populate_management_features&&i.unshift({data:"check",targets:0,title:this.data.ulgmGroupLeaderData.check_all});var r=[],u=i.findIndex((function(e){return e.title==ulgmGroupManagementShortcode.tables.groupLeaders.orderBy}));-1===u&&(u=i.findIndex((function(e){return"first_name"==e.data}))),-1!==u&&(r=[[u,ulgmGroupManagementShortcode.tables.groupLeaders.order]]);var c,g={data:this.data.ulgmGroupLeaderData.enrolled_leader_data,columns:i,columnDefs:[{targets:0,searchable:!1,orderable:!1}],dom:'frt<"uo-groups-datatable-footer"lpi>',order:r,language:{processing:ulgmRestApiSetup.language.processing,search:"_INPUT_",searchPlaceholder:ulgmRestApiSetup.language.searchPlaceholder,lengthMenu:ulgmRestApiSetup.language.lengthMenu,info:ulgmRestApiSetup.language.info,infoEmpty:ulgmRestApiSetup.language.infoEmpty,infoFiltered:ulgmRestApiSetup.language.infoFiltered,infoPostFix:"",loadingRecords:ulgmRestApiSetup.language.loadingRecords,zeroRecords:ulgmRestApiSetup.language.zeroRecords,emptyTable:ulgmRestApiSetup.language.emptyTable,paginate:{first:ulgmRestApiSetup.language.paginate.first,previous:ulgmRestApiSetup.language.paginate.previous,next:ulgmRestApiSetup.language.paginate.next,last:ulgmRestApiSetup.language.paginate.last},aria:{sortAscending:ulgmRestApiSetup.language.sortAscending,sortDescending:ulgmRestApiSetup.language.sortDescending}}};try{g.pageLength=parseInt(this.$elements.enrolledLeaderTableDT.data("page_length")),g.lengthMenu=this.$elements.enrolledLeaderTableDT.data("length_menu"),c=this.$elements.enrolledLeaderTableDT.DataTable(g)}catch(e){console.log("Beta: Could not set custom page length and custom menu length"),console.log(e),c=this.$elements.enrolledLeaderTableDT.DataTable(g)}s()(document).trigger("enrolledLeaderTableDataTableCreated",{leaderTableVars:g,leaderTable:c,ulgmGroupLeaderData})}},{key:"listenCheckboxToSelectAll",value:function(){var e=this;this.$elements.container.on("change",".group-management-enrolled-select-all",(function(t){var n=s()(t.currentTarget),o=n.is(":checked"),a=n.closest("table").find(".select-user");o?a.prop("checked",!0):a.prop("checked",!1),e.updateSelectedUsers(),e.evaluateRemoveUsersButtonVisiblity(),e.evaluateRemoveLeadersButtonVisiblity(),e.evaluateSendEmailsButtonVisiblity()}))}},{key:"listenCheckboxesChanges",value:function(){var e=this;this.$elements.container.on("change",'input[type="checkbox"].select-user',(function(s){e.updateSelectedUsers(),e.evaluateRemoveUsersButtonVisiblity(),e.evaluateRemoveLeadersButtonVisiblity(),e.evaluateSendEmailsButtonVisiblity()}))}},{key:"updateSelectedUsers",value:function(){var e=[],t=[],n=this.$elements.enrolledUsersTableDT.find('input[type="checkbox"].select-user'),o=this.$elements.enrolledLeaderTableDT.find('input[type="checkbox"].select-user'),a={users:n.filter(":checked"),leaders:o.filter(":checked")};s().each(a,(function(n,o){s().each(o,(function(o,a){var l=s()(a),i=l.closest("tr");if("users"===n){var r,u=i.find(".status").data("status");r="not-started"===u||"not-enrolled"===u?1:0,e.push({userId:l.val(),progressIsNotStarted:r})}"leaders"===n&&t.push({userId:l.val()})}))})),this.selectedUsers=e,this.selectedLeaders=t}},{key:"evaluateRemoveUsersButtonVisiblity",value:function(){var e=!1;this.selectedUsers.length>0&&this.data.canRemoveUsers&&(this.data.canRemoveUsersAnytime?e=!0:(e=!0,this.selectedUsers.forEach((function(s){e=e&&s.progressIsNotStarted})))),e?this.$elements.removeUsersButton.show():this.$elements.removeUsersButton.hide()}},{key:"evaluateRemoveLeadersButtonVisiblity",value:function(){var e=!1;this.selectedLeaders.length>0&&(e=!0),e?this.$elements.removeLeadersButton.show():this.$elements.removeLeadersButton.hide(),s()(".amount-group-leaders").text(this.selectedLeaders.length);var t=[];s().each(this.selectedLeaders,(function(e,s){t.push(s.userId)})),s()("#removing-group-leaders").val(t.join(","))}},{key:"evaluateSendEmailsButtonVisiblity",value:function(){this.selectedUsers.length>0?this.$elements.sendEmailsButton.show():this.$elements.sendEmailsButton.hide()}},{key:"updateDataOnModal",value:function(){var e=this;this.$elements.container.on("modal-open",(function(s,t,n){var o=e.selectedUsers.map((function(e){return e.userId}));if(e.$elements.numberOfUsers.text(o.length),"#group-management-enrolled-users-table-send-password-modal"==t)e.$elements.sendEmailsField.val(JSON.stringify(o));else if("#group-management-remove-user"==t){var a=o.join(",");e.$elements.removeUsersField.val(a)}}))}},{key:"hasEnrolledUsersTable",value:function(){return 1==s()("#group-management-enrolled-users-datatable").length}},{key:"firstLastNamesRequired",value:function(){if(ulgmGroupManagementShortcode.firstnameLastnameRequired){var e="group-management-add-users-row--with-data";document.querySelectorAll("#group-management-add-users .content-leaders-email input").forEach((function(s){var t,o;s.addEventListener("input",(t=function(){var t=s.value,n={row:s.closest(".uo-row")};n.firstName=n.row.querySelector(".content-leaders-first-name input"),n.lastName=n.row.querySelector(".content-leaders-last-name input"),i(t)?(n.row.classList.remove(e),s.removeAttribute("required"),s.setAttribute("placeholder",ulgmRestApiSetup.i18n.emailAddress),n.firstName.removeAttribute("required"),n.firstName.setAttribute("placeholder",ulgmRestApiSetup.i18n.firstName),n.lastName.removeAttribute("required"),n.lastName.setAttribute("placeholder",ulgmRestApiSetup.i18n.lastName)):(n.row.classList.add(e),s.setAttribute("required",""),s.setAttribute("placeholder","".concat(ulgmRestApiSetup.i18n.emailAddress," *")),n.firstName.setAttribute("required",""),n.firstName.setAttribute("placeholder","".concat(ulgmRestApiSetup.i18n.firstName," *")),n.lastName.setAttribute("required",""),n.lastName.setAttribute("placeholder","".concat(ulgmRestApiSetup.i18n.lastName," *")))},200,o=-1,function(){clearTimeout(o);var e=n;o=setTimeout((function(){t.apply(void 0,e)}),200)}))}))}}}]),e}();const v=m;function y(e,s){(null==s||s>e.length)&&(s=e.length);for(var t=0,n=new Array(s);t<s;t++)n[t]=e[t];return n}function b(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function _(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function z(e,s,t){return s&&_(e.prototype,s),t&&_(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var w=function(){function e(){b(this,e),this.isCourseReport()&&new C}return z(e,[{key:"isCourseReport",value:function(){return 1===s()("#group-course-report-datatable").length}}]),e}(),C=function(){function e(){b(this,e),this.table=null,this.getElements(),this.filters(),this.createDataTables(),this.restPopulateTable()}return z(e,[{key:"getElements",value:function(){this.$elements={courseReport:s()("#group-course-report-datatable"),filter:{all:s()(".uo-groups-select-filters select"),groupID:s()("#group-id"),courseID:s()("#uo-group-report-course")}}}},{key:"filters",value:function(){var e=this;if(this.$elements.filter.all.on("change",(function(){if(void 0!==e.$elements.courseReport)try{e.table.clear().draw().columns.adjust().responsive.recalc()}catch(e){}})),this.$elements.filter.groupID.hasClass("h3-select")){var s=this.$elements.filter.groupID.find('option:not([value="0"]):not([value=""])').last().val();this.$elements.filter.groupID.val(s).trigger("change"),window.ulgmGroupManagement.restForms.sendRestCall({currentTarget:this.$elements.filter.groupID}),this.$elements.filter.groupID.prop("disabled","disabled")}else this.$elements.filter.groupID.on("change",(function(){e.$elements.filter.courseID.val("").find("option").remove()}))}},{key:"createDataTables",value:function(){var e=this,t=this,n=[],o=t.$elements.courseReport.data("table_columns");o=o.split(",");var a=[];ulgmCourseReportShortcode.shouldAddTranscriptColumn||delete ulgmRestApiSetup.tableColumns.transcript_page_url,Object.entries(ulgmRestApiSetup.tableColumns).forEach((function(e){var s,t,n=(t=2,function(e){if(Array.isArray(e))return e}(s=e)||function(e,s){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var n,o,a=[],l=!0,i=!1;try{for(t=t.call(e);!(l=(n=t.next()).done)&&(a.push(n.value),!s||a.length!==s);l=!0);}catch(e){i=!0,o=e}finally{try{l||null==t.return||t.return()}finally{if(i)throw o}}return a}}(s,t)||function(e,s){if(e){if("string"==typeof e)return y(e,s);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?y(e,s):void 0}}(s,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=n[0],i=n[1];a.push({data:l,title:i,visible:o.includes(l)})})),ulgmCourseReportShortcode.shouldAddTranscriptColumn&&(n=[{render:function(e,s,t){return'\n\t\t\t\t\t\t\t<a \n\t\t\t\t\t\t\t\thref="'.concat(ulgmCourseReportShortcode.transcriptPageURL,"?user-id=").concat(t.user_id,'"\n\t\t\t\t\t\t\t\ttarget="_blank"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t').concat(ulgmRestApiSetup.localized.details,"\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t")},targets:a.findIndex((function(e){return"transcript_page_url"==e.data}))}]);var l={exportOptions:{columns:function(s,t,n){return e.table.column(s).visible()},format:{body:function(e,s,t,n){return e.replace(/\<span\s(?:class\=\"ulg\-hidden\-data\")(.*)\<\/span\>/g,"")}}},filename:function(){var e="Groups-Course-Report",n=s()("#uo-group-report-course").val(),o="-"+s()("#uo-group-report-course option:selected").text(),a="";return void 0!==t.getUrlParameter("user_id")?(a=t.$elements.courseReport.data("user_name"),e+(a=isNaN(a)?"-for-user-"+a:"-for-user-id-"+a)):"0"===n?e:e+o}},i=[],r=a.findIndex((function(e){return e.title==ulgmCourseReportShortcode.table.orderBy}));-1===r&&(r=a.findIndex((function(e){return"date_completed"==e.data}))),-1!==r&&(i=[[r,ulgmCourseReportShortcode.table.order]]),this.table=this.$elements.courseReport.DataTable({stateSave:!0,initComplete:function(t,n){var o=t.oInstance.api(),a=e,l=s()('<div id="'.concat(t.sInstance,'-filter-columns" class="dataTables-filter-columns"><input class="dataTables-filter-columns-field" id="').concat(t.sInstance,'-filter-columns-field" type="checkbox"><div class="dataTables-filter-columns__toggle"><label for="').concat(t.sInstance,'-filter-columns-field" data-label-enable="').concat(ulgmRestApiSetup.localized.customizeColumns,'" data-label-disable="').concat(ulgmRestApiSetup.localized.hideCustomizeColumns,'"></label></div><div class="dataTables-filter-columns__fields"></div></div>'));null!==t.oSavedState?jQuery.each(t.oSavedState.columns,(function(e,s){var n=t.aoColumns[e].sTitle;l.find(".dataTables-filter-columns__fields").append(a.addColumnCourseCheckbox(n,e,s.visible,o))})):jQuery.each(t.aoColumns,(function(e,s){var n=t.aoColumns[e].sTitle;l.find(".dataTables-filter-columns__fields").append(a.addColumnCourseCheckbox(n,e,s.bVisible,o))})),s()(l).insertAfter("#group-course-report-datatable_filter")},dom:'<"uo-groups-datatable-header"B>frt<"uo-groups-datatable-footer"lpi>',buttons:[s().extend(!0,{},l,{extend:"csv",text:ulgmRestApiSetup.i18n.exportCSV}),s().extend(!0,{},l,{extend:"excelHtml5",text:ulgmRestApiSetup.i18n.exportExcel})],order:i,columns:a,columnDefs:n,language:{processing:ulgmRestApiSetup.localized.processing,search:"_INPUT_",searchPlaceholder:ulgmRestApiSetup.localized.searchPlaceholder,lengthMenu:ulgmRestApiSetup.localized.lengthMenu,info:ulgmRestApiSetup.localized.info,infoEmpty:ulgmRestApiSetup.localized.infoEmpty,infoFiltered:ulgmRestApiSetup.localized.infoFiltered,infoPostFix:"",loadingRecords:ulgmRestApiSetup.localized.loadingRecords,zeroRecords:ulgmRestApiSetup.localized.zeroRecords,emptyTable:ulgmRestApiSetup.localized.emptyTable,paginate:{first:ulgmRestApiSetup.localized.paginate.first,previous:ulgmRestApiSetup.localized.paginate.previous,next:ulgmRestApiSetup.localized.paginate.next,last:ulgmRestApiSetup.localized.paginate.last},aria:{sortAscending:ulgmRestApiSetup.localized.sortAscending,sortDescending:ulgmRestApiSetup.localized.sortDescending}}})}},{key:"addColumnCourseCheckbox",value:function(e,s,t,n){var o=jQuery("<input />",{type:"checkbox",id:"dt_"+s,value:s,checked:t});return o.on("change",(function(e){var s=jQuery(this).attr("value"),t=jQuery(this).is(":checked");n.columns().every((function(e){var o=n.column(e);e==s&&(t?o.visible(!0):o.visible(!1))}))})),jQuery("<label/>").append(o).append(e)}},{key:"restPopulateTable",value:function(){var e=this;window.ulgmGroupManagement.populateReportTable=function(t){var n=e.$elements.courseReport.DataTable();n.clear().draw(),n.rows.add(t.user_course_data),n.columns.adjust().draw(),n.responsive.recalc();var o=window.ulgmGroupManagement.reportingTemplating.items=t.user_course_data;0===o.length?s()("#test").html('<div class="uo-row uo-table-content uo-tbl-item body-row"><div class="uo-table-no-results">There are no records to display.</div></div>'):(s()("#test").closest(".uo-groups-rest-result").show(),window.ulgmGroupManagement.reportingTemplating.setItems(o))}}},{key:"getUrlParameter",value:function(e){var s,t,n=window.location.search.substring(1).split("&");for(t=0;t<n.length;t++)if((s=n[t].split("="))[0]===e)return void 0===s[1]||decodeURIComponent(s[1])}}]),e}();const E=w;function A(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function S(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function x(e,s,t){return s&&S(e.prototype,s),t&&S(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var k=t(456),D=function(){function e(){A(this,e),this.hasDashboard()&&(k.init(),this.getElements(),this.defineSettings(),this.createCourses(),this.filters())}return x(e,[{key:"getElements",value:function(){this.$elements={filters:{form:s()("#ulg-manage-progress-filters-form"),selects:s()("#ulg-manage-progress-filters-form select")}}}},{key:"defineSettings",value:function(){this.settings={slideToggleDuration:300}}},{key:"createCourses",value:function(){var e=this,t=s()(".ulg-manage-progress-course");s().each(t,(function(t,n){new T(s()(n),e.settings)}))}},{key:"hasDashboard",value:function(){return s()(".ulg-manage-progress-courses").length>0}},{key:"slideAll",value:function(){s()(".ulg-manage-progress .ulg-manage-progress-btn--expand-all").on("click",(function(){e()})),s()(".ulg-manage-progress .ulg-manage-progress-btn--collapse-all").on("click",(function(){t()}));var e=function(){s().each({courses:{container:".ulg-manage-progress-course--collapsed",toggle:".ulg-manage-progress-course__toggle-btn"},lessons:{container:".ulg-manage-progress-lesson--collapsed",toggle:".ulg-manage-progress-lesson__toggle-btn"},topic:{container:".ulg-manage-progress-topic--collapsed",toggle:".ulg-manage-progress-topic__toggle-btn"}},(function(e,t){var n=s()(t.container);s().each(n,(function(e,n){s()(n).find(t.toggle).trigger("click")}))}))},t=function(){s().each({courses:{container:".ulg-manage-progress-course--expanded",toggle:".ulg-manage-progress-course__toggle-btn"},lessons:{container:".ulg-manage-progress-lesson--expanded",toggle:".ulg-manage-progress-lesson__toggle-btn"},topic:{container:".ulg-manage-progress-topic--collapsed",toggle:".ulg-manage-progress-topic__toggle-btn"}},(function(e,t){var n=s()(t.container);s().each(n,(function(e,n){s()(n).find(t.toggle).trigger("click")}))}))}}},{key:"filters",value:function(){var e=this;this.$elements.filters.selects.on("change",(function(){e.$elements.filters.form.trigger("submit")}))}}]),e}(),T=function(){function e(s,t){A(this,e),this.dashboardSettings=t,this.defineCssClasses(),this.getElements(s),this.getCourseData(),this.toggleCourseContent(),this.createLessons()}return x(e,[{key:"getCourseData",value:function(){this.courseData={courseId:this.$elements.container.data("course-id"),status:this.$elements.container.data("status"),hasLessons:!!parseInt(this.$elements.container.data("has-lessons")),hasQuizzes:!!parseInt(this.$elements.container.data("has-quizzes")),hasCertificate:!!parseInt(this.$elements.container.data("has-certificate"))}}},{key:"defineCssClasses",value:function(){this.cssClasses={toggle:{collapsed:"ulg-manage-progress-course--collapsed",collapsing:"ulg-manage-progress-course--collapsing",expanding:"ulg-manage-progress-course--expanding",expanded:"ulg-manage-progress-course--expanded"}}}},{key:"getElements",value:function(e){this.$elements={container:e,toggleBtn:e.find(".ulg-manage-progress-course__toggle-btn"),content:e.find(".ulg-manage-progress-course__content")}}},{key:"toggleCourseContent",value:function(){var e=this;(this.courseData.hasLessons||this.courseData.hasQuizzes)&&this.$elements.toggleBtn.on("click",(function(){e.isCollapsed()?(e.setToggleClass("expanding"),e.$elements.content.hide().slideDown(e.dashboardSettings.slideToggleDuration,(function(){e.setToggleClass("expanded")}))):(e.setToggleClass("collapsing"),e.$elements.content.show().slideUp(e.dashboardSettings.slideToggleDuration,(function(){e.setToggleClass("collapsed")})))}))}},{key:"createLessons",value:function(){var e=this,t=this.$elements.container.find(".ulg-manage-progress-lesson");s().each(t,(function(t,n){new M(s()(n),e.dashboardSettings,e.courseData)}))}},{key:"createQuizzes",value:function(){var e=this,t=this.$elements.container.find(".ulg-manage-progress-course__quizzes .ulg-manage-progress-quizzes");s().each(t,(function(t,n){new Quizzes(s()(n),e.dashboardSettings,e.courseData)}))}},{key:"setToggleClass",value:function(e){this.$elements.container.removeClass(Object.values(this.cssClasses.toggle).join(" ")),this.$elements.container.addClass(this.cssClasses.toggle[e])}},{key:"isCollapsed",value:function(){return this.$elements.container.hasClass(this.cssClasses.toggle.collapsed)}}]),e}(),M=function(){function e(s,t,n){A(this,e),this.dashboardSettings=t,this.courseData=n,this.defineCssClasses(),this.getElements(s),this.getLessonData(),this.toggleLessonContent(),this.createTopics()}return x(e,[{key:"getLessonData",value:function(){this.lessonData={course:this.courseData,lessonId:this.$elements.container.data("lesson-id"),availableOn:i(this.$elements.container.data("available-on"))?null:parseInt(this.$elements.container.data("available-on")),isCompleted:!!parseInt(this.$elements.container.data("is-completed")),isAvailable:!!parseInt(this.$elements.container.data("is-available")),hasTopics:!!parseInt(this.$elements.container.data("has-topics")),hasQuizzes:!!parseInt(this.$elements.container.data("has-quizzes"))}}},{key:"defineCssClasses",value:function(){this.cssClasses={toggle:{collapsed:"ulg-manage-progress-lesson--collapsed",collapsing:"ulg-manage-progress-lesson--collapsing",expanding:"ulg-manage-progress-lesson--expanding",expanded:"ulg-manage-progress-lesson--expanded"}}}},{key:"getElements",value:function(e){this.$elements={container:e,toggleBtn:e.find(".ulg-manage-progress-lesson__toggle-btn"),content:e.find(".ulg-manage-progress-lesson__content")}}},{key:"toggleLessonContent",value:function(){var e=this;(this.lessonData.hasTopics||this.lessonData.hasQuizzes)&&this.$elements.toggleBtn.on("click",(function(){e.isCollapsed()?(e.setToggleClass("expanding"),e.$elements.content.hide().slideDown(e.dashboardSettings.slideToggleDuration,(function(){e.setToggleClass("expanded")}))):(e.setToggleClass("collapsing"),e.$elements.content.show().slideUp(e.dashboardSettings.slideToggleDuration,(function(){e.setToggleClass("collapsed")})))}))}},{key:"createTopics",value:function(){var e=this,t=this.$elements.container.find(".ulg-manage-progress-topic");s().each(t,(function(t,n){new I(s()(n),e.dashboardSettings,e.courseData,e.lessonData)}))}},{key:"createQuizzes",value:function(){var e=this,t=this.$elements.container.find(".ulg-manage-progress-lesson__quizzes .ulg-manage-progress-quizzes");s().each(t,(function(t,n){new Quizzes(s()(n),e.dashboardSettings,e.courseData,e.lessonData)}))}},{key:"setToggleClass",value:function(e){this.$elements.container.removeClass(Object.values(this.cssClasses.toggle).join(" ")),this.$elements.container.addClass(this.cssClasses.toggle[e])}},{key:"isCollapsed",value:function(){return this.$elements.container.hasClass(this.cssClasses.toggle.collapsed)}}]),e}(),I=function(){function e(s,t,n,o){A(this,e),this.dashboardSettings=t,this.courseData=n,this.lessonData=o,this.getElements(s),this.defineCssClasses(),this.getTopicData(),this.toggleTopicContent()}return x(e,[{key:"getElements",value:function(e){this.$elements={container:e,toggleBtn:e.find(".ulg-manage-progress-topic__toggle-btn"),content:e.find(".ulg-manage-progress-topic__content")}}},{key:"getTopicData",value:function(){this.topicData={course:this.courseData,lesson:this.lessonData,topicId:this.$elements.container.data("topic-id"),isCompleted:!!parseInt(this.$elements.container.data("is-completed")),hasQuizzes:!!parseInt(this.$elements.container.data("has-quizzes"))},delete this.topicData.lesson.course}},{key:"defineCssClasses",value:function(){this.cssClasses={toggle:{collapsed:"ulg-manage-progress-topic--collapsed",collapsing:"ulg-manage-progress-topic--collapsing",expanding:"ulg-manage-progress-topic--expanding",expanded:"ulg-manage-progress-topic--expanded"}}}},{key:"setToggleClass",value:function(e){this.$elements.container.removeClass(Object.values(this.cssClasses.toggle).join(" ")),this.$elements.container.addClass(this.cssClasses.toggle[e])}},{key:"toggleTopicContent",value:function(){var e=this;this.topicData.hasQuizzes&&this.$elements.toggleBtn.on("click",(function(){e.isCollapsed()?(e.setToggleClass("expanding"),e.$elements.content.hide().slideDown(e.dashboardSettings.slideToggleDuration,(function(){e.setToggleClass("expanded")}))):(e.setToggleClass("collapsing"),e.$elements.content.show().slideUp(e.dashboardSettings.slideToggleDuration,(function(){e.setToggleClass("collapsed")})))}))}},{key:"isCollapsed",value:function(){return this.$elements.container.hasClass(this.cssClasses.toggle.collapsed)}}]),e}();const q=D;function R(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function $(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q(e,s,t){return s&&$(e.prototype,s),t&&$(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e}var j=jQuery,G=function(){function e(){R(this,e),this.isManageProgress()&&this.canManageProgress()&&(this.setSettings(),this.listenProgressChangesOnCourses())}return Q(e,[{key:"setSettings",value:function(){this.settings={}}},{key:"listenProgressChangesOnCourses",value:function(){var e=this,s=j(".ulg-manage-progress-course");j.each(s,(function(s,t){new N(j(t),e.settings)}))}},{key:"isManageProgress",value:function(){return j(".ulg-manage-progress--manage-progress").length>0&&"undefined"!=typeof ULGM_ManageProgress}},{key:"canManageProgress",value:function(){return!!parseInt(ULGM_ManageProgress.canManageProgress)}}]),e}(),N=function(){function e(s){R(this,e),this.getElements(s),this.getCourseData(),this.createChildren(),this.listenCheckboxChanges(),this.confirmationVisible=!1}return Q(e,[{key:"getElements",value:function(e){this.$elements={course:e,actions:e.find(".ulg-manage-progress-course__progress-actions"),checkbox:e.find(".ulg-manage-progress-course__progress-action-checkbox"),cancel:e.find(".ulg-manage-progress-course__progress-action-cancel"),progress:{number:e.find(".ulg-manage-progress-course__progress-percentage span"),bar:e.find(".ulg-manage-progress-course__progress-bar")},lessons:e.find(".ulg-manage-progress-lesson"),quizzes:e.find(".ulg-manage-progress-quiz"),topics:e.find(".ulg-manage-progress-topic"),rightContainer:e.find(".ulg-manage-progress-course__right")}}},{key:"getCourseData",value:function(){this.courseData={courseId:this.$elements.course.data("course-id"),status:this.$elements.course.data("status"),hasLessons:!!parseInt(this.$elements.course.data("has-lessons")),hasQuizzes:!!parseInt(this.$elements.course.data("has-quizzes")),hasCertificate:!!parseInt(this.$elements.course.data("has-certificate"))},this.courseData.status=this.courseData.status.replace("_","-")}},{key:"createChildren",value:function(){var e=this;this.courseData.children={lessons:[],quizzes:[],topics:[]},j.each(this.$elements.lessons,(function(s,t){var n=j(t);e.courseData.children.lessons.push(new L(e,n))})),j.each(this.$elements.quizzes,(function(s,t){var n=j(t);e.courseData.children.quizzes.push(new O(e,n))})),j.each(this.$elements.topics,(function(s,t){var n=j(t);e.courseData.children.topics.push(new P(e,n))})),this.courseData.children.all=[].concat(this.courseData.children.lessons,this.courseData.children.topics,this.courseData.children.quizzes)}},{key:"setProgress",value:function(e){this.$elements.progress.number.text(e),this.$elements.progress.bar.css({width:e}),this.$elements.course.removeClass("ulg-manage-progress-course--not-started ulg-manage-progress-course--in-progress ulg-manage-progress-course--completed"),100==e?(this.courseData.status="completed",this.$elements.course.addClass("ulg-manage-progress-course--completed")):0==e?(this.courseData.status="not-started",this.$elements.course.addClass("ulg-manage-progress-course--not-started")):(this.courseData.status="in-progress",this.$elements.course.addClass("ulg-manage-progress-course--in-progress"))}},{key:"setCertificate",value:function(e){if(this.$elements.rightContainer.find(".ulg-manage-progress-course__action").remove(),!i(e)){var s=j('\n\t\t\t\t<div class="ulg-manage-progress-course__action">\n\t\t\t\t\t<a href="'.concat(e,'" target="_blank" class="ulg-manage-progress-btn">\n\t\t\t\t\t\t').concat(ULGM_ManageProgress.i18n.certificate,"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"));this.$elements.rightContainer.prepend(s)}}},{key:"listenCheckboxChanges",value:function(){var e=this;this.$elements.checkbox.on("click",(function(s){if(e.confirmationVisible){var t=0;e.$elements.course.addClass("ulg-manage-progress-course--disabled"),e.$elements.course.find(".ulg-manage-progress-lesson").addClass("ulg-manage-progress-lesson--disabled"),e.$elements.course.find(".ulg-manage-progress-topic").addClass("ulg-manage-progress-topic--disabled"),e.$elements.course.find(".ulg-manage-progress-quiz").addClass("ulg-manage-progress-quiz--disabled"),["not-started","in-progress"].includes(e.courseData.status)&&(t=1),e.$elements.course.addClass("ulg-manage-progress-course--loading"),e.$elements.actions.removeClass("ulg-manage-progress-course__progress-actions--need-to-confirm");var n={};e.courseData.children.lessons.forEach((function(e){n[e.lessonData.lessonId]=t}));var o={},l={};e.courseData.children.quizzes.forEach((function(e){l[e.quizData.quizId]=t})),e.courseData.children.topics.forEach((function(e){void 0===o[e.topicData.lessonId]&&(o[e.topicData.lessonId]={}),o[e.topicData.lessonId][e.topicData.topicId]=t;var s=j(e.$elements.topic).data("topic-quizzes"),n="";"string"==typeof s&&(n=s.toString()),n.split(",").forEach((function(e){var s=parseInt(e);isNaN(s)||(l[s]=t)}))})),a({url:ULGM_ManageProgress.restUrl,endpoint:"change_user_progress",nonce:ULGM_ManageProgress.nonce,data:{rest_user_id:ULGM_ManageProgress.userId,rest_course_id:e.courseData.courseId,rest_lessons:n,rest_topics:o,rest_quizzes:l,postNonce:ULGM_ManageProgress.postNonce},onDone:function(s){e.$elements.course.removeClass("ulg-manage-progress-course--loading"),e.confirmationVisible=!1,e.$elements.course.removeClass("ulg-manage-progress-course--disabled"),e.$elements.course.find(".ulg-manage-progress-lesson").removeClass("ulg-manage-progress-lesson--disabled"),e.$elements.course.find(".ulg-manage-progress-topic").removeClass("ulg-manage-progress-topic--disabled"),e.$elements.course.find(".ulg-manage-progress-quiz").removeClass("ulg-manage-progress-quiz--disabled")},onSuccess:function(s){s.success&&(e.setProgress(s.progress.percentage),e.setCertificate(s.certificate_url),e.completeCourseItems(s.progress.course_completed_children))},onFail:function(e){console.error(e)}})}else e.confirmChanges()}))}},{key:"confirmChanges",value:function(){var e=this;this.$elements.actions.addClass("ulg-manage-progress-course__progress-actions--need-to-confirm"),this.confirmationVisible=!0,this.$elements.cancel.on("click",(function(){e.$elements.actions.removeClass("ulg-manage-progress-course__progress-actions--need-to-confirm"),e.$elements.cancel.off("click"),e.confirmationVisible=!1}))}},{key:"completeCourseItems",value:function(e){var s={};(e=0==Object.keys(e).length?[]:e).forEach((function(e){s[e.ID]=e})),j.each(this.courseData.children.all,(function(e,t){var n=l(s[t.getTheId()]);t.markAsNotComplete(s[t.getTheId()]),n&&t.markAsComplete(s[t.getTheId()])}))}}]),e}(),L=function(){function e(s,t){R(this,e),this.Course=s,this.getElements(t),this.getLessonData(),this.listenCheckboxChanges(),this.confirmationVisible=!1}return Q(e,[{key:"getElements",value:function(e){this.$elements={course:e.closest(".ulg-manage-progress-course"),lesson:e,actions:e.find(".ulg-manage-progress-lesson__progress-actions"),checkbox:e.find(".ulg-manage-progress-lesson__progress-action-checkbox"),cancel:e.find(".ulg-manage-progress-lesson__progress-action-cancel")}}},{key:"getLessonData",value:function(){this.lessonData={lessonId:this.$elements.lesson.data("lesson-id"),courseId:this.$elements.lesson.data("course-id"),isCompleted:this.$elements.lesson.data("is-completed"),hasTopics:!!parseInt(this.$elements.lesson.data("has-topics")),hasQuizzes:!!parseInt(this.$elements.lesson.data("has-quizzes"))},this.lessonData.hasChildren=this.lessonData.hasTopics||this.lessonData.hasQuizzes}},{key:"listenCheckboxChanges",value:function(){var e=this;this.$elements.checkbox.on("click",(function(s){if(!e.lessonData.hasChildren||e.confirmationVisible){var t=Number(!e.lessonData.isCompleted);e.$elements.lesson.addClass("ulg-manage-progress-lesson--loading"),e.$elements.actions.removeClass("ulg-manage-progress-lesson__progress-actions--need-to-confirm");var n={};e.Course.courseData.children.lessons.forEach((function(s){s.lessonData.lessonId===e.lessonData.lessonId?n[s.lessonData.lessonId]=t:n[s.lessonData.lessonId]=Number(s.lessonData.isCompleted)}));var o={},l={};e.Course.courseData.children.quizzes.forEach((function(s){s.quizData.lessonId===e.lessonData.lessonId?l[s.quizData.quizId]=t:l[s.quizData.quizId]=Number(s.quizData.isCompleted)})),e.Course.courseData.children.topics.forEach((function(s){void 0===o[s.topicData.lessonId]&&(o[s.topicData.lessonId]={}),s.topicData.lessonId===e.lessonData.lessonId?o[s.topicData.lessonId][s.topicData.topicId]=t:o[s.topicData.lessonId][s.topicData.topicId]=Number(s.topicData.isCompleted);var n=j(s.$elements.topic).data("topic-quizzes"),a="";"string"==typeof n&&(a=n.toString()),a.split(",").forEach((function(n){var o=parseInt(n);isNaN(o)||(s.topicData.lessonId===e.lessonData.lessonId?l[o]=t:l[o]="?")}))})),e.$elements.course.addClass("ulg-manage-progress-course--disabled"),e.$elements.course.find(".ulg-manage-progress-lesson").addClass("ulg-manage-progress-lesson--disabled"),e.$elements.course.find(".ulg-manage-progress-topic").addClass("ulg-manage-progress-topic--disabled"),e.$elements.course.find(".ulg-manage-progress-quiz").addClass("ulg-manage-progress-quiz--disabled"),a({url:ULGM_ManageProgress.restUrl,endpoint:"change_user_progress",nonce:ULGM_ManageProgress.nonce,data:{rest_user_id:ULGM_ManageProgress.userId,rest_course_id:e.lessonData.courseId,rest_lessons:n,rest_topics:o,rest_quizzes:l,postNonce:ULGM_ManageProgress.postNonce},onDone:function(s){e.$elements.lesson.removeClass("ulg-manage-progress-lesson--loading"),e.lessonData.isCompleted=t,e.confirmationVisible=!1,e.$elements.course.removeClass("ulg-manage-progress-course--disabled"),e.$elements.course.find(".ulg-manage-progress-lesson").removeClass("ulg-manage-progress-lesson--disabled"),e.$elements.course.find(".ulg-manage-progress-topic").removeClass("ulg-manage-progress-topic--disabled"),e.$elements.course.find(".ulg-manage-progress-quiz").removeClass("ulg-manage-progress-quiz--disabled")},onSuccess:function(s){s.success&&(e.Course.setProgress(s.progress.percentage),e.Course.setCertificate(s.certificate_url),e.Course.completeCourseItems(s.progress.course_completed_children))},onFail:function(e){console.error(e)}})}else e.confirmChanges()}))}},{key:"confirmChanges",value:function(){var e=this;this.$elements.actions.addClass("ulg-manage-progress-lesson__progress-actions--need-to-confirm"),this.confirmationVisible=!0,this.$elements.cancel.on("click",(function(){e.$elements.actions.removeClass("ulg-manage-progress-lesson__progress-actions--need-to-confirm"),e.$elements.cancel.off("click"),e.confirmationVisible=!1}))}},{key:"markAsComplete",value:function(){this.$elements.lesson.removeClass("ulg-manage-progress-lesson--not-completed"),this.$elements.lesson.addClass("ulg-manage-progress-lesson--completed"),this.$elements.lesson.data("is-completed",!0),this.lessonData.isCompleted=!0}},{key:"markAsNotComplete",value:function(){this.$elements.lesson.removeClass("ulg-manage-progress-lesson--completed"),this.$elements.lesson.addClass("ulg-manage-progress-lesson--not-completed"),this.$elements.lesson.data("is-completed",!1),this.lessonData.isCompleted=!1}},{key:"isComplete",value:function(){return this.lessonData.isCompleted}},{key:"getTheId",value:function(){return this.lessonData.lessonId}}]),e}(),P=function(){function e(s,t){R(this,e),this.Course=s,this.getElements(t),this.getTopicData(),this.listenCheckboxChanges(),this.confirmationVisible=!1}return Q(e,[{key:"getElements",value:function(e){this.$elements={course:e.closest(".ulg-manage-progress-course"),lesson:e.closest(".ulg-manage-progress-lesson"),topic:e,actions:e.find(".ulg-manage-progress-topic__progress-actions"),checkbox:e.find(".ulg-manage-progress-topic__progress-action-checkbox"),cancel:e.find(".ulg-manage-progress-topic__progress-action-cancel")}}},{key:"getTopicData",value:function(){this.topicData={topicId:this.$elements.topic.data("topic-id"),lessonId:this.$elements.topic.data("lesson-id"),courseId:this.$elements.topic.data("course-id"),isCompleted:this.$elements.topic.data("is-completed"),hasQuizzes:this.$elements.topic.data("has-quizzes"),hasChildren:this.$elements.topic.data("has-quizzes")}}},{key:"listenCheckboxChanges",value:function(){var e=this;this.$elements.checkbox.on("click",(function(s){if(!e.topicData.hasChildren||e.confirmationVisible){var t=Number(!e.topicData.isCompleted);e.$elements.topic.addClass("ulg-manage-progress-topic--loading"),e.$elements.actions.removeClass("ulg-manage-progress-topic__progress-actions--need-to-confirm");var n={};e.Course.courseData.children.lessons.forEach((function(e){n[e.lessonData.lessonId]=Number(e.lessonData.isCompleted)}));var o={},l={};e.Course.courseData.children.quizzes.forEach((function(s){s.quizData.topicId===e.topicData.topicId?l[s.quizData.quizId]=t:l[s.quizData.quizId]=Number(s.quizData.isCompleted)})),e.Course.courseData.children.topics.forEach((function(s){void 0===o[s.topicData.lessonId]&&(o[s.topicData.lessonId]={}),s.topicData.topicId===e.topicData.topicId?o[s.topicData.lessonId][s.topicData.topicId]=t:o[s.topicData.lessonId][s.topicData.topicId]=Number(s.topicData.isCompleted);var n=j(s.$elements.topic).data("topic-quizzes"),a="";"string"==typeof n&&(a=n.toString()),a.split(",").forEach((function(n){var o=parseInt(n);isNaN(o)||(s.topicData.topicId===e.topicData.topicId?l[o]=t:l[o]="?")}))})),e.$elements.course.addClass("ulg-manage-progress-course--disabled"),e.$elements.course.find(".ulg-manage-progress-lesson").addClass("ulg-manage-progress-lesson--disabled"),e.$elements.course.find(".ulg-manage-progress-topic").addClass("ulg-manage-progress-topic--disabled"),e.$elements.course.find(".ulg-manage-progress-quiz").addClass("ulg-manage-progress-quiz--disabled"),a({url:ULGM_ManageProgress.restUrl,endpoint:"change_user_progress",nonce:ULGM_ManageProgress.nonce,postNonce:ULGM_ManageProgress.postNonce,data:{rest_user_id:ULGM_ManageProgress.userId,rest_course_id:e.topicData.courseId,rest_lessons:n,rest_topics:o,rest_quizzes:l,postNonce:ULGM_ManageProgress.postNonce},onDone:function(s){e.$elements.topic.removeClass("ulg-manage-progress-topic--loading"),e.topicData.isCompleted=t,e.confirmationVisible=!1,e.$elements.course.removeClass("ulg-manage-progress-course--disabled"),e.$elements.course.find(".ulg-manage-progress-lesson").removeClass("ulg-manage-progress-lesson--disabled"),e.$elements.course.find(".ulg-manage-progress-topic").removeClass("ulg-manage-progress-topic--disabled"),e.$elements.course.find(".ulg-manage-progress-quiz").removeClass("ulg-manage-progress-quiz--disabled")},onSuccess:function(s){s.success&&(e.Course.setProgress(s.progress.percentage),e.Course.setCertificate(s.certificate_url),e.Course.completeCourseItems(s.progress.course_completed_children))},onFail:function(e){console.error(e)}})}else e.confirmChanges()}))}},{key:"confirmChanges",value:function(){var e=this;this.$elements.actions.addClass("ulg-manage-progress-topic__progress-actions--need-to-confirm"),this.confirmationVisible=!0,this.$elements.cancel.on("click",(function(){e.$elements.actions.removeClass("ulg-manage-progress-topic__progress-actions--need-to-confirm"),e.$elements.cancel.off("click"),e.confirmationVisible=!1}))}},{key:"markAsComplete",value:function(){this.$elements.topic.removeClass("ulg-manage-progress-topic--not-completed"),this.$elements.topic.addClass("ulg-manage-progress-topic--completed"),this.$elements.topic.data("is-completed",!0),this.topicData.isCompleted=!0}},{key:"markAsNotComplete",value:function(){this.$elements.topic.removeClass("ulg-manage-progress-topic--completed"),this.$elements.topic.addClass("ulg-manage-progress-topic--not-completed"),this.$elements.topic.data("is-completed",!1),this.topicData.isCompleted=!1}},{key:"isComplete",value:function(){return this.topicData.isCompleted}},{key:"getTheId",value:function(){return this.topicData.topicId}}]),e}(),O=function(){function e(s,t){R(this,e),this.Course=s,this.getElements(t),this.getQuizData(),this.listenCheckboxChanges()}return Q(e,[{key:"getElements",value:function(e){this.$elements={course:e.closest(".ulg-manage-progress-course"),quiz:e,actions:e.find(".ulg-manage-progress-quiz__progress-actions"),checkbox:e.find(".ulg-manage-progress-quiz__progress-action-checkbox"),cancel:e.find(".ulg-manage-progress-quiz__progress-action-cancel"),rightContainer:e.find(".ulg-manage-progress-quiz__right")}}},{key:"getQuizData",value:function(){this.quizData={quizId:this.$elements.quiz.data("quiz-id"),lessonId:this.$elements.quiz.data("lesson-id"),courseId:this.$elements.quiz.data("course-id"),topicId:this.$elements.quiz.data("topic-id"),isCompleted:this.$elements.quiz.data("is-completed")}}},{key:"setCertificate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(this.$elements.rightContainer.find(".ulg-manage-progress-quiz__action").remove(),!i(e)){var s=j('\n\t\t\t\t<div class="ulg-manage-progress-quiz__action">\n\t\t\t\t\t<a href="'.concat(e,'" target="_blank" class="ulg-manage-progress-btn">\n\t\t\t\t\t\t').concat(ULGM_ManageProgress.i18n.certificate,"\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t"));this.$elements.rightContainer.append(s)}}},{key:"listenCheckboxChanges",value:function(){var e=this;this.$elements.checkbox.on("click",(function(s){var t=Number(!e.quizData.isCompleted);e.$elements.quiz.addClass("ulg-manage-progress-quiz--loading"),e.$elements.actions.removeClass("ulg-manage-progress-quiz__progress-actions--need-to-confirm");var n={};e.Course.courseData.children.lessons.forEach((function(e){n[e.lessonData.lessonId]=Number(e.lessonData.isCompleted)}));var o={},l={};e.Course.courseData.children.quizzes.forEach((function(s){s.quizData.quizId===e.quizData.quizId?l[s.quizData.quizId]=t:l[s.quizData.quizId]=Number(s.quizData.isCompleted)})),e.Course.courseData.children.topics.forEach((function(s){void 0===o[s.topicData.lessonId]&&(o[s.topicData.lessonId]={}),o[s.topicData.lessonId][s.topicData.topicId]=Number(s.topicData.isCompleted);var n=j(s.$elements.topic).data("topic-quizzes"),a="";"string"==typeof n&&(a=n.toString()),a.split(",").forEach((function(n){var o=parseInt(n);isNaN(o)||(s.topicData.topicId===e.quizData.topicId?l[o]=t:l[o]="?")}))})),e.$elements.course.addClass("ulg-manage-progress-course--disabled"),e.$elements.course.find(".ulg-manage-progress-lesson").addClass("ulg-manage-progress-lesson--disabled"),e.$elements.course.find(".ulg-manage-progress-topic").addClass("ulg-manage-progress-topic--disabled"),e.$elements.course.find(".ulg-manage-progress-quiz").addClass("ulg-manage-progress-quiz--disabled"),a({url:ULGM_ManageProgress.restUrl,endpoint:"change_user_progress",nonce:ULGM_ManageProgress.nonce,postNonce:ULGM_ManageProgress.postNonce,data:{rest_user_id:ULGM_ManageProgress.userId,rest_course_id:e.quizData.courseId,rest_lessons:n,rest_topics:o,rest_quizzes:l,postNonce:ULGM_ManageProgress.postNonce},onDone:function(s){e.$elements.quiz.removeClass("ulg-manage-progress-quiz--loading"),e.quizData.isCompleted=t,e.confirmationVisible=!1,e.$elements.course.removeClass("ulg-manage-progress-course--disabled"),e.$elements.course.find(".ulg-manage-progress-lesson").removeClass("ulg-manage-progress-lesson--disabled"),e.$elements.course.find(".ulg-manage-progress-topic").removeClass("ulg-manage-progress-topic--disabled"),e.$elements.course.find(".ulg-manage-progress-quiz").removeClass("ulg-manage-progress-quiz--disabled")},onSuccess:function(s){s.success&&(e.Course.setProgress(s.progress.percentage),e.Course.setCertificate(s.certificate_url),e.setCertificate(s.certificate_url),e.Course.completeCourseItems(s.progress.course_completed_children))},onFail:function(e){console.error(e)}})}))}},{key:"markAsComplete",value:function(e){this.setCertificate(e.certificate_url),this.$elements.quiz.removeClass("ulg-manage-progress-quiz--not-completed"),this.$elements.quiz.addClass("ulg-manage-progress-quiz--completed"),this.$elements.quiz.data("is-completed",!0),this.quizData.isCompleted=!0}},{key:"markAsNotComplete",value:function(e){this.setCertificate(),this.$elements.quiz.removeClass("ulg-manage-progress-quiz--completed"),this.$elements.quiz.addClass("ulg-manage-progress-quiz--not-completed"),this.$elements.quiz.data("is-completed",!1),this.quizData.isCompleted=!1}},{key:"isComplete",value:function(){return this.quizData.isCompleted}},{key:"getTheId",value:function(){return this.quizData.quizId}}]),e}();const U=G;function F(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const H=function(){function e(){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,e),this.isBuyCourses()&&(this.getElements(),this.getConfiguration(),c(),this.modifyCourses(),this.listenQuantityChanges(),this.listenFormSubmission())}var t,n;return t=e,n=[{key:"getElements",value:function(){this.$elements={form:s()("#uo-groups-buy-courses"),errorNotice:s()("#uo-groups-buy-course-error-notice"),field:{quantity:s()("#uo-groups-buy-course-field-quantity")},totals:{subtotal:s()("#uo-groups-buy-course-totals-subtotal"),discount:{percentage:s()("#uo-groups-buy-course-totals-discount-percentage"),total:s()("#uo-groups-buy-course-totals-discount")},total:s()("#uo-groups-buy-course-totals-total")}}}},{key:"getConfiguration",value:function(){var e=this.$elements.form.data("bulk-discount"),t="yes"==e.enabled;e.discounts=void 0!==e.discounts?e.discounts:{};var n=[];s().each(Object.values(e.discounts),(function(e,s){n.push({minimumQuantity:parseInt(s.qty),percentage:parseFloat(s.percent)})})),this.config={bulkDiscount:{enabled:t,groups:n},formatPrice:{template:ULG_BuyCourses.formatPrice.template,numberOfDecimals:ULG_BuyCourses.formatPrice.numberOfDecimals,thousandSeparator:ULG_BuyCourses.formatPrice.thousandSeparator,decimalSeparator:ULG_BuyCourses.formatPrice.decimalSeparator}},this.totals={numberOfSeats:0,numberOfStudents:0,subtotal:0,discount:{percentage:0,total:0},total:0}}},{key:"modifyCourses",value:function(){var e=this;this.$elements.form.on("change",".uo-checkbox input",(function(t){s()(t.currentTarget).closest(".uo-groups-table-row").toggleClass("uo-groups-table-row--selected"),e.updateTotals()}))}},{key:"listenFormSubmission",value:function(){var e=this;this.$elements.form.on("submit",(function(s){var t=e.validate();e.errorNotice(!t.isValid,t.message),t.isValid||s.preventDefault()}))}},{key:"listenQuantityChanges",value:function(){var e=this;this.$elements.field.quantity.on("input",(function(){e.updateTotals()}))}},{key:"getTotals",value:function(){var e=this.$elements.form.find(".uo-checkbox input:checked");this.totals.numberOfSeats=parseInt(this.$elements.field.quantity.val()),this.totals.numberOfSeats=isNaN(this.totals.numberOfSeats)?1:this.totals.numberOfSeats;var t=this.$elements.field.quantity.val();this.totals.numberOfStudents=parseInt(t),this.totals.numberOfCourses=e.length;var n=t*e.toArray().reduce((function(e,t){var n=s()(t);return e+parseFloat(n.data("price"))}),0);this.totals.subtotal=n;var o=this.getDiscountPercentage(),a=-1*n*o.percentage/100;this.totals.discount.percentage=o.percentage,this.totals.discount.total=a;var l=n+a;l=l>0?l:0,this.totals.total=l}},{key:"getDiscountPercentage",value:function(){var e=this,t={minimumQuantity:0,percentage:0};return this.config.bulkDiscount.enabled&&s().each(this.config.bulkDiscount.groups,(function(s,n){n.minimumQuantity<=e.totals.numberOfSeats&&(t=n)})),t}},{key:"updateTotals",value:function(){var e=this;this.getTotals(),this.$elements.totals.subtotal.html(this.formatPrice(this.totals.subtotal)),0==this.totals.discount.percentage?this.$elements.totals.discount.percentage.text(""):this.$elements.totals.discount.percentage.text("".concat(this.totals.discount.percentage,"% - ")),this.$elements.totals.discount.total.html(this.formatPrice(this.totals.discount.total)),this.$elements.totals.total.html(this.formatPrice(this.totals.total)),this.$elements.form.addClass("uo-groups-buy-courses--totals-updated"),setTimeout((function(){e.$elements.form.removeClass("uo-groups-buy-courses--totals-updated")}),150)}},{key:"validate",value:function(){var e={isValid:!1,message:""};return this.totals.numberOfSeats>0&&this.totals.numberOfCourses>0?e.isValid=!0:e.message=ULG_BuyCourses.i18n.selectAtLeastOne,e}},{key:"errorNotice",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e?this.$elements.errorNotice.show().html(s):this.$elements.errorNotice.hide()}},{key:"formatPrice",value:function(e){var t=this,n=s()(this.config.formatPrice.template);return n.html((function(s,n){var o=u(0,t.config.formatPrice.numberOfDecimals,t.config.formatPrice.decimalSeparator,t.config.formatPrice.thousandSeparator),a=u(e,t.config.formatPrice.numberOfDecimals,t.config.formatPrice.decimalSeparator,t.config.formatPrice.thousandSeparator);return n.replace(o,a)})),e<0&&n.prepend("-"),n}},{key:"isBuyCourses",value:function(){return 1==s()("#uo-groups-buy-courses").length&&"undefined"!=typeof ULG_BuyCourses}}],n&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,s){for(var t=0;t<s.length;t++){var n=s[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}const V=function(){function e(){!function(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}(this,e),this.isCreateGroup()&&(this.getElements(),this.addPillboxToGroupCourses())}var t,n;return t=e,(n=[{key:"getElements",value:function(){this.$elements={coursesList:s()("#ulg-create-group__courses-list")}}},{key:"addPillboxToGroupCourses",value:function(){this.$elements.coursesList.select2({theme:"default ulg-select2"})}},{key:"isCreateGroup",value:function(){return 1==s()("#ulg-create-group").length}}])&&B(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();document.addEventListener("DOMContentLoaded",(function(){new v,new E,new q,new U,new H,new V}))})()})();
//# sourceMappingURL=bundle.min.js.map