{"version":3,"file":"scormdriver.min.js","sources":["scormdriver.min.js"],"sourcesContent":["/*! xAPIWrapper v 1.11.0 | Built on 2020-01-29 13:51:08-0500 */\n\nvar CryptoJS = (CryptoJS = CryptoJS || function (l) {\n\tvar t = {}, e = t.lib = {}, i = e.Base = {\n\t\textend: function (t) {\n\t\t\tn.prototype = this;\n\t\t\tvar e = new n;\n\t\t\treturn t && e.mixIn(t), e.hasOwnProperty(\"init\") || (e.init = function () {\n\t\t\t\te.$super.init.apply(this, arguments)\n\t\t\t}), (e.init.prototype = e).$super = this, e\n\t\t}, create: function () {\n\t\t\tvar t = this.extend();\n\t\t\treturn t.init.apply(t, arguments), t\n\t\t}, init: function () {\n\t\t}, mixIn: function (t) {\n\t\t\tfor (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]);\n\t\t\tt.hasOwnProperty(\"toString\") && (this.toString = t.toString)\n\t\t}, clone: function () {\n\t\t\treturn this.init.prototype.extend(this)\n\t\t}\n\t};\n\n\tfunction n() {\n\t}\n\n\tvar u = e.WordArray = i.extend({\n\t\tinit: function (t, e) {\n\t\t\tt = this.words = t || [], this.sigBytes = null != e ? e : 4 * t.length\n\t\t}, toString: function (t) {\n\t\t\treturn (t || o).stringify(this)\n\t\t}, concat: function (t) {\n\t\t\tvar e = this.words, i = t.words, n = this.sigBytes, r = t.sigBytes;\n\t\t\tif (this.clamp(), n % 4) for (var o = 0; o < r; o++) {\n\t\t\t\tvar s = i[o >>> 2] >>> 24 - o % 4 * 8 & 255;\n\t\t\t\te[n + o >>> 2] |= s << 24 - (n + o) % 4 * 8\n\t\t\t} else if (65535 < i.length) for (o = 0; o < r; o += 4) e[n + o >>> 2] = i[o >>> 2]; else e.push.apply(e, i);\n\t\t\treturn this.sigBytes += r, this\n\t\t}, clamp: function () {\n\t\t\tvar t = this.words, e = this.sigBytes;\n\t\t\tt[e >>> 2] &= 4294967295 << 32 - e % 4 * 8, t.length = l.ceil(e / 4)\n\t\t}, clone: function () {\n\t\t\tvar t = i.clone.call(this);\n\t\t\treturn t.words = this.words.slice(0), t\n\t\t}, random: function (t) {\n\t\t\tfor (var e = [], i = 0; i < t; i += 4) e.push(4294967296 * l.random() | 0);\n\t\t\treturn new u.init(e, t)\n\t\t}\n\t}), r = t.enc = {}, o = r.Hex = {\n\t\tstringify: function (t) {\n\t\t\tfor (var e = t.words, i = t.sigBytes, n = [], r = 0; r < i; r++) {\n\t\t\t\tvar o = e[r >>> 2] >>> 24 - r % 4 * 8 & 255;\n\t\t\t\tn.push((o >>> 4).toString(16)), n.push((15 & o).toString(16))\n\t\t\t}\n\t\t\treturn n.join(\"\")\n\t\t}, parse: function (t) {\n\t\t\tfor (var e = t.length, i = [], n = 0; n < e; n += 2) i[n >>> 3] |= parseInt(t.substr(n, 2), 16) << 24 - n % 8 * 4;\n\t\t\treturn new u.init(i, e / 2)\n\t\t}\n\t}, s = r.Latin1 = {\n\t\tstringify: function (t) {\n\t\t\tfor (var e = t.words, i = t.sigBytes, n = [], r = 0; r < i; r++) {\n\t\t\t\tvar o = e[r >>> 2] >>> 24 - r % 4 * 8 & 255;\n\t\t\t\tn.push(String.fromCharCode(o))\n\t\t\t}\n\t\t\treturn n.join(\"\")\n\t\t}, parse: function (t) {\n\t\t\tfor (var e = t.length, i = [], n = 0; n < e; n++) i[n >>> 2] |= (255 & t.charCodeAt(n)) << 24 - n % 4 * 8;\n\t\t\treturn new u.init(i, e)\n\t\t}\n\t}, a = r.Utf8 = {\n\t\tstringify: function (t) {\n\t\t\ttry {\n\t\t\t\treturn decodeURIComponent(escape(s.stringify(t)))\n\t\t\t} catch (t) {\n\t\t\t\tthrow new Error(\"Malformed UTF-8 data\")\n\t\t\t}\n\t\t}, parse: function (t) {\n\t\t\treturn s.parse(unescape(encodeURIComponent(t)))\n\t\t}\n\t}, p = (r.Base64 = {\n\t\tstringify: function (t) {\n\t\t\tvar e = t.words, i = t.sigBytes, n = this._map;\n\t\t\tt.clamp();\n\t\t\tfor (var r = [], o = 0; o < i; o += 3) for (var s = (e[o >>> 2] >>> 24 - o % 4 * 8 & 255) << 16 | (e[o + 1 >>> 2] >>> 24 - (o + 1) % 4 * 8 & 255) << 8 | e[o + 2 >>> 2] >>> 24 - (o + 2) % 4 * 8 & 255, a = 0; a < 4 && o + .75 * a < i; a++) r.push(n.charAt(s >>> 6 * (3 - a) & 63));\n\t\t\tvar p = n.charAt(64);\n\t\t\tif (p) for (; r.length % 4;) r.push(p);\n\t\t\treturn r.join(\"\")\n\t\t}, parse: function (t) {\n\t\t\tvar e = t.length, i = this._map, n = i.charAt(64);\n\t\t\tif (n) {\n\t\t\t\tvar r = t.indexOf(n);\n\t\t\t\t-1 != r && (e = r)\n\t\t\t}\n\t\t\tfor (var o = [], s = 0, a = 0; a < e; a++) if (a % 4) {\n\t\t\t\tvar p = i.indexOf(t.charAt(a - 1)) << a % 4 * 2, c = i.indexOf(t.charAt(a)) >>> 6 - a % 4 * 2;\n\t\t\t\to[s >>> 2] |= (p | c) << 24 - s % 4 * 8, s++\n\t\t\t}\n\t\t\treturn u.create(o, s)\n\t\t}, _map: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\"\n\t}, e.BufferedBlockAlgorithm = i.extend({\n\t\treset: function () {\n\t\t\tthis._data = new u.init, this._nDataBytes = 0\n\t\t}, _append: function (t) {\n\t\t\t\"string\" == typeof t && (t = a.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes\n\t\t}, _process: function (t) {\n\t\t\tvar e = this._data, i = e.words, n = e.sigBytes, r = this.blockSize, o = n / (4 * r),\n\t\t\t\ts = (o = t ? l.ceil(o) : l.max((0 | o) - this._minBufferSize, 0)) * r, a = l.min(4 * s, n);\n\t\t\tif (s) {\n\t\t\t\tfor (var p = 0; p < s; p += r) this._doProcessBlock(i, p);\n\t\t\t\tvar c = i.splice(0, s);\n\t\t\t\te.sigBytes -= a\n\t\t\t}\n\t\t\treturn new u.init(c, a)\n\t\t}, clone: function () {\n\t\t\tvar t = i.clone.call(this);\n\t\t\treturn t._data = this._data.clone(), t\n\t\t}, _minBufferSize: 0\n\t})), c = e.Hasher = p.extend({\n\t\tcfg: i.extend(), init: function (t) {\n\t\t\tthis.cfg = this.cfg.extend(t), this.reset()\n\t\t}, reset: function () {\n\t\t\tp.reset.call(this), this._doReset()\n\t\t}, update: function (t) {\n\t\t\treturn this._append(t), this._process(), this\n\t\t}, finalize: function (t) {\n\t\t\treturn t && this._append(t), this._doFinalize()\n\t\t}, blockSize: 16, _createHelper: function (i) {\n\t\t\treturn function (t, e) {\n\t\t\t\treturn new i.init(e).finalize(t)\n\t\t\t}\n\t\t}, _createHmacHelper: function (i) {\n\t\t\treturn function (t, e) {\n\t\t\t\treturn new d.HMAC.init(i, e).finalize(t)\n\t\t\t}\n\t\t}\n\t}), d = t.algo = {}, h = [], f = d.SHA1 = c.extend({\n\t\t_doReset: function () {\n\t\t\tthis._hash = new u.init([1732584193, 4023233417, 2562383102, 271733878, 3285377520])\n\t\t}, _doProcessBlock: function (t, e) {\n\t\t\tfor (var i = this._hash.words, n = i[0], r = i[1], o = i[2], s = i[3], a = i[4], p = 0; p < 80; p++) {\n\t\t\t\tif (p < 16) h[p] = 0 | t[e + p]; else {\n\t\t\t\t\tvar c = h[p - 3] ^ h[p - 8] ^ h[p - 14] ^ h[p - 16];\n\t\t\t\t\th[p] = c << 1 | c >>> 31\n\t\t\t\t}\n\t\t\t\tvar l = (n << 5 | n >>> 27) + a + h[p];\n\t\t\t\tl += p < 20 ? 1518500249 + (r & o | ~r & s) : p < 40 ? 1859775393 + (r ^ o ^ s) : p < 60 ? (r & o | r & s | o & s) - 1894007588 : (r ^ o ^ s) - 899497514, a = s, s = o, o = r << 30 | r >>> 2, r = n, n = l\n\t\t\t}\n\t\t\ti[0] = i[0] + n | 0, i[1] = i[1] + r | 0, i[2] = i[2] + o | 0, i[3] = i[3] + s | 0, i[4] = i[4] + a | 0\n\t\t}, _doFinalize: function () {\n\t\t\tvar t = this._data, e = t.words, i = 8 * this._nDataBytes, n = 8 * t.sigBytes;\n\t\t\treturn e[n >>> 5] |= 128 << 24 - n % 32, e[14 + (64 + n >>> 9 << 4)] = l.floor(i / 4294967296), e[15 + (64 + n >>> 9 << 4)] = i, t.sigBytes = 4 * e.length, this._process(), this._hash\n\t\t}, clone: function () {\n\t\t\tvar t = c.clone.call(this);\n\t\t\treturn t._hash = this._hash.clone(), t\n\t\t}\n\t});\n\treturn t.SHA1 = c._createHelper(f), t.HmacSHA1 = c._createHmacHelper(f), t\n}(Math)) || function (a) {\n\tfunction i() {\n\t}\n\n\tvar t = {}, e = t.lib = {}, n = e.Base = {\n\t\textend: function (t) {\n\t\t\ti.prototype = this;\n\t\t\tvar e = new i;\n\t\t\treturn t && e.mixIn(t), e.hasOwnProperty(\"init\") || (e.init = function () {\n\t\t\t\te.$super.init.apply(this, arguments)\n\t\t\t}), (e.init.prototype = e).$super = this, e\n\t\t}, create: function () {\n\t\t\tvar t = this.extend();\n\t\t\treturn t.init.apply(t, arguments), t\n\t\t}, init: function () {\n\t\t}, mixIn: function (t) {\n\t\t\tfor (var e in t) t.hasOwnProperty(e) && (this[e] = t[e]);\n\t\t\tt.hasOwnProperty(\"toString\") && (this.toString = t.toString)\n\t\t}, clone: function () {\n\t\t\treturn this.init.prototype.extend(this)\n\t\t}\n\t}, p = e.WordArray = n.extend({\n\t\tinit: function (t, e) {\n\t\t\tt = this.words = t || [], this.sigBytes = null != e ? e : 4 * t.length\n\t\t}, toString: function (t) {\n\t\t\treturn (t || o).stringify(this)\n\t\t}, concat: function (t) {\n\t\t\tvar e = this.words, i = t.words, n = this.sigBytes;\n\t\t\tif (t = t.sigBytes, this.clamp(), n % 4) for (var r = 0; r < t; r++) e[n + r >>> 2] |= (i[r >>> 2] >>> 24 - r % 4 * 8 & 255) << 24 - (n + r) % 4 * 8; else if (65535 < i.length) for (r = 0; r < t; r += 4) e[n + r >>> 2] = i[r >>> 2]; else e.push.apply(e, i);\n\t\t\treturn this.sigBytes += t, this\n\t\t}, clamp: function () {\n\t\t\tvar t = this.words, e = this.sigBytes;\n\t\t\tt[e >>> 2] &= 4294967295 << 32 - e % 4 * 8, t.length = a.ceil(e / 4)\n\t\t}, clone: function () {\n\t\t\tvar t = n.clone.call(this);\n\t\t\treturn t.words = this.words.slice(0), t\n\t\t}, random: function (t) {\n\t\t\tfor (var e = [], i = 0; i < t; i += 4) e.push(4294967296 * a.random() | 0);\n\t\t\treturn new p.init(e, t)\n\t\t}\n\t}), r = t.enc = {}, o = r.Hex = {\n\t\tstringify: function (t) {\n\t\t\tvar e = t.words;\n\t\t\tt = t.sigBytes;\n\t\t\tfor (var i = [], n = 0; n < t; n++) {\n\t\t\t\tvar r = e[n >>> 2] >>> 24 - n % 4 * 8 & 255;\n\t\t\t\ti.push((r >>> 4).toString(16)), i.push((15 & r).toString(16))\n\t\t\t}\n\t\t\treturn i.join(\"\")\n\t\t}, parse: function (t) {\n\t\t\tfor (var e = t.length, i = [], n = 0; n < e; n += 2) i[n >>> 3] |= parseInt(t.substr(n, 2), 16) << 24 - n % 8 * 4;\n\t\t\treturn new p.init(i, e / 2)\n\t\t}\n\t}, s = r.Latin1 = {\n\t\tstringify: function (t) {\n\t\t\tvar e = t.words;\n\t\t\tt = t.sigBytes;\n\t\t\tfor (var i = [], n = 0; n < t; n++) i.push(String.fromCharCode(e[n >>> 2] >>> 24 - n % 4 * 8 & 255));\n\t\t\treturn i.join(\"\")\n\t\t}, parse: function (t) {\n\t\t\tfor (var e = t.length, i = [], n = 0; n < e; n++) i[n >>> 2] |= (255 & t.charCodeAt(n)) << 24 - n % 4 * 8;\n\t\t\treturn new p.init(i, e)\n\t\t}\n\t}, c = r.Utf8 = {\n\t\tstringify: function (t) {\n\t\t\ttry {\n\t\t\t\treturn decodeURIComponent(escape(s.stringify(t)))\n\t\t\t} catch (t) {\n\t\t\t\tthrow Error(\"Malformed UTF-8 data\")\n\t\t\t}\n\t\t}, parse: function (t) {\n\t\t\treturn s.parse(unescape(encodeURIComponent(t)))\n\t\t}\n\t}, l = e.BufferedBlockAlgorithm = n.extend({\n\t\treset: function () {\n\t\t\tthis._data = new p.init, this._nDataBytes = 0\n\t\t}, _append: function (t) {\n\t\t\t\"string\" == typeof t && (t = c.parse(t)), this._data.concat(t), this._nDataBytes += t.sigBytes\n\t\t}, _process: function (t) {\n\t\t\tvar e = this._data, i = e.words, n = e.sigBytes, r = this.blockSize, o = n / (4 * r);\n\t\t\tif (t = (o = t ? a.ceil(o) : a.max((0 | o) - this._minBufferSize, 0)) * r, n = a.min(4 * t, n), t) {\n\t\t\t\tfor (var s = 0; s < t; s += r) this._doProcessBlock(i, s);\n\t\t\t\ts = i.splice(0, t), e.sigBytes -= n\n\t\t\t}\n\t\t\treturn new p.init(s, n)\n\t\t}, clone: function () {\n\t\t\tvar t = n.clone.call(this);\n\t\t\treturn t._data = this._data.clone(), t\n\t\t}, _minBufferSize: 0\n\t});\n\te.Hasher = l.extend({\n\t\tcfg: n.extend(), init: function (t) {\n\t\t\tthis.cfg = this.cfg.extend(t), this.reset()\n\t\t}, reset: function () {\n\t\t\tl.reset.call(this), this._doReset()\n\t\t}, update: function (t) {\n\t\t\treturn this._append(t), this._process(), this\n\t\t}, finalize: function (t) {\n\t\t\treturn t && this._append(t), this._doFinalize()\n\t\t}, blockSize: 16, _createHelper: function (i) {\n\t\t\treturn function (t, e) {\n\t\t\t\treturn new i.init(e).finalize(t)\n\t\t\t}\n\t\t}, _createHmacHelper: function (i) {\n\t\t\treturn function (t, e) {\n\t\t\t\treturn new u.HMAC.init(i, e).finalize(t)\n\t\t\t}\n\t\t}\n\t});\n\tvar u = t.algo = {};\n\treturn t\n}(Math);\n\nfunction toBase64(t) {\n\treturn CryptoJS && CryptoJS.enc.Base64 ? CryptoJS.enc.Base64.stringify(CryptoJS.enc.Latin1.parse(t)) : Base64.encode(t)\n}\n\nfunction toSHA1(t) {\n\treturn CryptoJS && CryptoJS.SHA1 ? CryptoJS.SHA1(t).toString() : Crypto.util.bytesToHex(Crypto.SHA1(t, {asBytes: !0}))\n}\n\nfunction toSHA256(t) {\n\tif (\"[object ArrayBuffer]\" !== Object.prototype.toString.call(t)) return CryptoJS.SHA256(t).toString(CryptoJS.enc.Hex);\n\tfor (var e = new Uint8Array(t), i = [], n = 0; n < e.length; n += 4) i.push(e[n] << 24 | e[n + 1] << 16 | e[n + 2] << 8 | e[n + 3]);\n\treturn CryptoJS.SHA256(CryptoJS.lib.WordArray.create(i, e.length)).toString(CryptoJS.enc.Hex)\n}\n\nfunction isDate(t) {\n\tif (\"[object Date]\" === Object.prototype.toString.call(t)) var e = t; else e = new Date(t);\n\treturn \"[object Date]\" === Object.prototype.toString.call(e) ? isNaN(e.valueOf()) ? (ADL.XAPIWrapper.log(\"Invalid date String passed\"), null) : e : (ADL.XAPIWrapper.log(\"Invalid date object\"), null)\n}\n\n!function (r) {\n\tfunction t(t) {\n\t\treturn 4294967296 * (t - (0 | t)) | 0\n\t}\n\n\tfor (var e = CryptoJS, i = (o = e.lib).WordArray, n = o.Hasher, o = e.algo, s = [], f = [], a = 2, p = 0; p < 64;) {\n\t\tvar c;\n\t\tt:{\n\t\t\tc = a;\n\t\t\tfor (var l = r.sqrt(c), u = 2; u <= l; u++) if (!(c % u)) {\n\t\t\t\tc = !1;\n\t\t\t\tbreak t\n\t\t\t}\n\t\t\tc = !0\n\t\t}\n\t\tc && (p < 8 && (s[p] = t(r.pow(a, .5))), f[p] = t(r.pow(a, 1 / 3)), p++), a++\n\t}\n\tvar g = [];\n\to = o.SHA256 = n.extend({\n\t\t_doReset: function () {\n\t\t\tthis._hash = new i.init(s.slice(0))\n\t\t}, _doProcessBlock: function (t, e) {\n\t\t\tfor (var i = this._hash.words, n = i[0], r = i[1], o = i[2], s = i[3], a = i[4], p = i[5], c = i[6], l = i[7], u = 0; u < 64; u++) {\n\t\t\t\tif (u < 16) g[u] = 0 | t[e + u]; else {\n\t\t\t\t\tvar d = g[u - 15], h = g[u - 2];\n\t\t\t\t\tg[u] = ((d << 25 | d >>> 7) ^ (d << 14 | d >>> 18) ^ d >>> 3) + g[u - 7] + ((h << 15 | h >>> 17) ^ (h << 13 | h >>> 19) ^ h >>> 10) + g[u - 16]\n\t\t\t\t}\n\t\t\t\td = l + ((a << 26 | a >>> 6) ^ (a << 21 | a >>> 11) ^ (a << 7 | a >>> 25)) + (a & p ^ ~a & c) + f[u] + g[u], h = ((n << 30 | n >>> 2) ^ (n << 19 | n >>> 13) ^ (n << 10 | n >>> 22)) + (n & r ^ n & o ^ r & o), l = c, c = p, p = a, a = s + d | 0, s = o, o = r, r = n, n = d + h | 0\n\t\t\t}\n\t\t\ti[0] = i[0] + n | 0, i[1] = i[1] + r | 0, i[2] = i[2] + o | 0, i[3] = i[3] + s | 0, i[4] = i[4] + a | 0, i[5] = i[5] + p | 0, i[6] = i[6] + c | 0, i[7] = i[7] + l | 0\n\t\t}, _doFinalize: function () {\n\t\t\tvar t = this._data, e = t.words, i = 8 * this._nDataBytes, n = 8 * t.sigBytes;\n\t\t\treturn e[n >>> 5] |= 128 << 24 - n % 32, e[14 + (64 + n >>> 9 << 4)] = r.floor(i / 4294967296), e[15 + (64 + n >>> 9 << 4)] = i, t.sigBytes = 4 * e.length, this._process(), this._hash\n\t\t}, clone: function () {\n\t\t\tvar t = n.clone.call(this);\n\t\t\treturn t._hash = this._hash.clone(), t\n\t\t}\n\t});\n\te.SHA256 = n._createHelper(o), e.HmacSHA256 = n._createHmacHelper(o)\n}(Math), function () {\n\tvar c = CryptoJS.enc.Utf8;\n\tCryptoJS.algo.HMAC = CryptoJS.lib.Base.extend({\n\t\tinit: function (t, e) {\n\t\t\tt = this._hasher = new t.init, \"string\" == typeof e && (e = c.parse(e));\n\t\t\tvar i = t.blockSize, n = 4 * i;\n\t\t\te.sigBytes > n && (e = t.finalize(e)), e.clamp();\n\t\t\tfor (var r = this._oKey = e.clone(), o = this._iKey = e.clone(), s = r.words, a = o.words, p = 0; p < i; p++) s[p] ^= 1549556828, a[p] ^= 909522486;\n\t\t\tr.sigBytes = o.sigBytes = n, this.reset()\n\t\t}, reset: function () {\n\t\t\tvar t = this._hasher;\n\t\t\tt.reset(), t.update(this._iKey)\n\t\t}, update: function (t) {\n\t\t\treturn this._hasher.update(t), this\n\t\t}, finalize: function (t) {\n\t\t\tvar e = this._hasher;\n\t\t\treturn t = e.finalize(t), e.reset(), e.finalize(this._oKey.clone().concat(t))\n\t\t}\n\t})\n}(), function (t) {\n\tif (void 0 === t.TextEncoder) {\n\t\tfunction p(t, e) {\n\t\t\tif (String.prototype.codePointAt) return t.codePointAt(e);\n\t\t\tvar i = (t = String(t)).length, n = e ? Number(e) : 0;\n\t\t\tif (n != n && (n = 0), !(n < 0 || i <= n)) {\n\t\t\t\tvar r, o = t.charCodeAt(n);\n\t\t\t\treturn 55296 <= o && o <= 56319 && n + 1 < i && 56320 <= (r = t.charCodeAt(n + 1)) && r <= 57343 ? 1024 * (o - 55296) + r - 56320 + 65536 : o\n\t\t\t}\n\t\t}\n\n\t\tfunction e(t) {\n\t\t\tswitch (t = t || \"utf8\") {\n\t\t\t\tcase\"utf-8\":\n\t\t\t\tcase\"utf8\":\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow\"TextEncoder only supports utf8\"\n\t\t\t}\n\t\t}\n\n\t\te.prototype.encode = function (t) {\n\t\t\tfor (var e = new Uint8Array(3 * t.length), i = -1, n = t.length, r = 0; r < n;) {\n\t\t\t\tvar o = p(t, r), s = 0, a = 0;\n\t\t\t\tfor (o <= 127 ? a = s = 0 : o <= 2047 ? (s = 6, a = 192) : o <= 65535 ? (s = 12, a = 224) : o <= 2097151 && (s = 18, a = 240), e[i += 1] = a | o >> s, s -= 6; 0 <= s;) e[i += 1] = 128 | o >> s & 63, s -= 6;\n\t\t\t\tr += 65536 <= o ? 2 : 1\n\t\t\t}\n\t\t\treturn e.subarray(0, i + 1)\n\t\t}, t.TextEncoder = e\n\t}\n\tif (void 0 === t.TextDecoder) {\n\t\tfunction a(t) {\n\t\t\tif (String.fromCodePoint) return String.fromCodePoint(t);\n\t\t\tfor (var e = [], i = \"\", n = 0, r = arguments.length; n !== r; ++n) {\n\t\t\t\tvar o = +arguments[n];\n\t\t\t\tif (!(o < 1114111 && o >>> 0 === o)) throw RangeError(\"Invalid code point: \" + o);\n\t\t\t\t16383 <= (o <= 65535 ? e.push(o) : (o -= 65536, e.push(55296 + (o >> 10), o % 1024 + 56320))) && (i += String.fromCharCode.apply(null, e), e.length = 0)\n\t\t\t}\n\t\t\treturn i + String.fromCharCode.apply(null, e)\n\t\t}\n\n\t\tfunction i(t) {\n\t\t\tswitch (t = t || \"utf8\") {\n\t\t\t\tcase\"utf-8\":\n\t\t\t\tcase\"utf8\":\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow\"TextDecoder only supports utf8\"\n\t\t\t}\n\t\t}\n\n\t\ti.prototype.decode = function (t) {\n\t\t\tfor (var e = \"\", i = 0; i < t.length;) {\n\t\t\t\tvar n = t[i], r = 0, o = 0;\n\t\t\t\tif (n <= 127 ? (r = 0, o = 255 & n) : n <= 223 ? (r = 1, o = 31 & n) : n <= 239 ? (r = 2, o = 15 & n) : n <= 244 && (r = 3, o = 7 & n), 0 < t.length - i - r) for (var s = 0; s < r;) o = o << 6 | 63 & (n = t[i + s + 1]), s += 1; else o = 65533, r = t.length - i;\n\t\t\t\te += a(o), i += r + 1\n\t\t\t}\n\t\t\treturn e\n\t\t}, t.TextDecoder = i\n\t}\n}(this), (window.ADL = window.ADL || {}).activityTypes = {\n\tassessment: \"http://adlnet.gov/expapi/activities/assessment\",\n\tattempt: \"http://adlnet.gov/expapi/activities/attempt\",\n\tcourse: \"http://adlnet.gov/expapi/activities/course\",\n\tfile: \"http://adlnet.gov/expapi/activities/file\",\n\tcmiInteraction: \"http://adlnet.gov/expapi/activities/cmi.interaction\",\n\tinteraction: \"http://adlnet.gov/expapi/activities/interaction\",\n\tlesson: \"http://adlnet.gov/expapi/activities/lesson\",\n\tlink: \"http://adlnet.gov/expapi/activities/link\",\n\tmedia: \"http://adlnet.gov/expapi/activities/media\",\n\tmeeting: \"http://adlnet.gov/expapi/activities/meeting\",\n\tmodule: \"http://adlnet.gov/expapi/activities/module\",\n\tobjective: \"http://adlnet.gov/expapi/activities/objective\",\n\tperformance: \"http://adlnet.gov/expapi/activities/performance\",\n\tprofile: \"http://adlnet.gov/expapi/activities/profile\",\n\tquestion: \"http://adlnet.gov/expapi/activities/question\",\n\tsimulation: \"http://adlnet.gov/expapi/activities/simulation\"\n}, (window.ADL = window.ADL || {}).verbs = {\n\tabandoned: {id: \"https://w3id.org/xapi/adl/verbs/abandoned\", display: {\"en-US\": \"abandoned\"}},\n\tanswered: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/answered\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"beantwortete\",\n\t\t\t\"en-US\": \"answered\",\n\t\t\t\"fr-FR\": \"a répondu\",\n\t\t\t\"es-ES\": \"contestó\",\n\t\t\t\"ar-AR\": \"أجاب\"\n\t\t}\n\t},\n\tasked: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/asked\",\n\t\tdisplay: {\"de-DE\": \"fragte\", \"en-US\": \"asked\", \"fr-FR\": \"a demandé\", \"es-ES\": \"preguntó\", \"ar-AR\": \"طلب\"}\n\t},\n\tattempted: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/attempted\",\n\t\tdisplay: {\"de-DE\": \"versuchte\", \"en-US\": \"attempted\", \"fr-FR\": \"a essayé\", \"es-ES\": \"intentó\", \"ar-AR\": \"حاول\"}\n\t},\n\tattended: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/attended\",\n\t\tdisplay: {\"de-DE\": \"nahm teil an\", \"en-US\": \"attended\", \"fr-FR\": \"a suivi\", \"es-ES\": \"asistió\", \"ar-AR\": \"حضر\"}\n\t},\n\tcommented: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/commented\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"kommentierte\",\n\t\t\t\"en-US\": \"commented\",\n\t\t\t\"fr-FR\": \"a commenté\",\n\t\t\t\"es-ES\": \"comentó\",\n\t\t\t\"ar-AR\": \"علق\"\n\t\t}\n\t},\n\tcompleted: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/completed\",\n\t\tdisplay: {\"de-DE\": \"beendete\", \"en-US\": \"completed\", \"fr-FR\": \"a terminé\", \"es-ES\": \"completó\", \"ar-AR\": \"أكمل\"}\n\t},\n\texited: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/exited\",\n\t\tdisplay: {\"de-DE\": \"verließ\", \"en-US\": \"exited\", \"fr-FR\": \"a quitté\", \"es-ES\": \"salió\", \"ar-AR\": \"خرج\"}\n\t},\n\texperienced: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/experienced\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"erlebte\",\n\t\t\t\"en-US\": \"experienced\",\n\t\t\t\"fr-FR\": \"a éprouvé\",\n\t\t\t\"es-ES\": \"experimentó\",\n\t\t\t\"ar-AR\": \"شاهد\"\n\t\t}\n\t},\n\tfailed: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/failed\",\n\t\tdisplay: {\"de-DE\": \"verfehlte\", \"en-US\": \"failed\", \"fr-FR\": \"a échoué\", \"es-ES\": \"fracasó\", \"ar-AR\": \"فشل\"}\n\t},\n\timported: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/imported\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"importierte\",\n\t\t\t\"en-US\": \"imported\",\n\t\t\t\"fr-FR\": \"a importé\",\n\t\t\t\"es-ES\": \"importó\",\n\t\t\t\"ar-AR\": \"مستورد\"\n\t\t}\n\t},\n\tinitialized: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/initialized\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"initialisierte\",\n\t\t\t\"en-US\": \"initialized\",\n\t\t\t\"fr-FR\": \"a initialisé\",\n\t\t\t\"es-ES\": \"inicializó\",\n\t\t\t\"ar-AR\": \"بدأ\"\n\t\t}\n\t},\n\tinteracted: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/interacted\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"interagierte\",\n\t\t\t\"en-US\": \"interacted\",\n\t\t\t\"fr-FR\": \"a interagi\",\n\t\t\t\"es-ES\": \"interactuó\",\n\t\t\t\"ar-AR\": \"تفاعل\"\n\t\t}\n\t},\n\tlaunched: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/launched\",\n\t\tdisplay: {\"de-DE\": \"startete\", \"en-US\": \"launched\", \"fr-FR\": \"a lancé\", \"es-ES\": \"lanzó\", \"ar-AR\": \"أطلق\"}\n\t},\n\tmastered: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/mastered\",\n\t\tdisplay: {\"de-DE\": \"meisterte\", \"en-US\": \"mastered\", \"fr-FR\": \"a maîtrisé\", \"es-ES\": \"dominó\", \"ar-AR\": \"أتقن\"}\n\t},\n\tpassed: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/passed\",\n\t\tdisplay: {\"de-DE\": \"bestand\", \"en-US\": \"passed\", \"fr-FR\": \"a réussi\", \"es-ES\": \"aprobó\", \"ar-AR\": \"نجح\"}\n\t},\n\tpreferred: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/preferred\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"bevorzugte\",\n\t\t\t\"en-US\": \"preferred\",\n\t\t\t\"fr-FR\": \"a préféré\",\n\t\t\t\"es-ES\": \"prefirió\",\n\t\t\t\"ar-AR\": \"فضل\"\n\t\t}\n\t},\n\tprogressed: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/progressed\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"machte Fortschritt mit\",\n\t\t\t\"en-US\": \"progressed\",\n\t\t\t\"fr-FR\": \"a progressé\",\n\t\t\t\"es-ES\": \"progresó\",\n\t\t\t\"ar-AR\": \"تقدم\"\n\t\t}\n\t},\n\tregistered: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/registered\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"registrierte\",\n\t\t\t\"en-US\": \"registered\",\n\t\t\t\"fr-FR\": \"a enregistré\",\n\t\t\t\"es-ES\": \"registró\",\n\t\t\t\"ar-AR\": \"سجل\"\n\t\t}\n\t},\n\tresponded: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/responded\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"reagierte\",\n\t\t\t\"en-US\": \"responded\",\n\t\t\t\"fr-FR\": \"a répondu\",\n\t\t\t\"es-ES\": \"respondió\",\n\t\t\t\"ar-AR\": \"استجاب\"\n\t\t}\n\t},\n\tresumed: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/resumed\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"setzte fort\",\n\t\t\t\"en-US\": \"resumed\",\n\t\t\t\"fr-FR\": \"a repris\",\n\t\t\t\"es-ES\": \"continuó\",\n\t\t\t\"ar-AR\": \"استأنف\"\n\t\t}\n\t},\n\tsatisfied: {\n\t\tid: \"https://w3id.org/xapi/adl/verbs/satisfied\",\n\t\tdisplay: {\n\t\t\t\"de-DE\": \"befriedigt\",\n\t\t\t\"en-US\": \"satisfied\",\n\t\t\t\"fr-FR\": \"satisfaite\",\n\t\t\t\"es-ES\": \"satisfecho\",\n\t\t\t\"ar-AR\": \"راض\"\n\t\t}\n\t},\n\tscored: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/scored\",\n\t\tdisplay: {\"de-DE\": \"erreichte\", \"en-US\": \"scored\", \"fr-FR\": \"a marqué\", \"es-ES\": \"anotó\", \"ar-AR\": \"سحل النقاط\"}\n\t},\n\tshared: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/shared\",\n\t\tdisplay: {\"de-DE\": \"teilte\", \"en-US\": \"shared\", \"fr-FR\": \"a partagé\", \"es-ES\": \"compartió\", \"ar-AR\": \"شارك\"}\n\t},\n\tsuspended: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/suspended\",\n\t\tdisplay: {\"de-DE\": \"pausierte\", \"en-US\": \"suspended\", \"fr-FR\": \"a suspendu\", \"es-ES\": \"aplazó\", \"ar-AR\": \"علق\"}\n\t},\n\tterminated: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/terminated\",\n\t\tdisplay: {\"de-DE\": \"beendete\", \"en-US\": \"terminated\", \"fr-FR\": \"a terminé\", \"es-ES\": \"terminó\", \"ar-AR\": \"أنهى\"}\n\t},\n\tvoided: {\n\t\tid: \"http://adlnet.gov/expapi/verbs/voided\",\n\t\tdisplay: {\"de-DE\": \"entwertete\", \"en-US\": \"voided\", \"fr-FR\": \"a annulé\", \"es-ES\": \"anuló\", \"ar-AR\": \"فرغ\"}\n\t},\n\twaived: {\n\t\tid: \"https://w3id.org/xapi/adl/verbs/waived\",\n\t\tdisplay: {\"de-DE\": \"verzichtet\", \"en-US\": \"waived\", \"fr-FR\": \"renoncé\", \"es-ES\": \"renunciado\", \"ar-AR\": \"تخلى\"}\n\t}\n}, Date.prototype.toISOString || function () {\n\tfunction t(t) {\n\t\tvar e = String(t);\n\t\treturn 1 === e.length && (e = \"0\" + e), e\n\t}\n\n\tDate.prototype.toISOString = function () {\n\t\treturn this.getUTCFullYear() + \"-\" + t(this.getUTCMonth() + 1) + \"-\" + t(this.getUTCDate()) + \"T\" + t(this.getUTCHours()) + \":\" + t(this.getUTCMinutes()) + \":\" + t(this.getUTCSeconds()) + \".\" + String((this.getUTCMilliseconds() / 1e3).toFixed(3)).slice(2, 5) + \"Z\"\n\t}\n}(), function (_) {\n\tu.debug = !1;\n\n\tfunction t(t, e) {\n\t\tfunction i(t) {\n\t\t\tvar e = document.createElement(\"a\");\n\t\t\tif (e.href = t, e.protocol && e.host) return e.protocol + \"//\" + e.host;\n\t\t\tif (e.href) {\n\t\t\t\tvar i = e.href.split(\"//\");\n\t\t\t\treturn i[0] + \"//\" + i[1].substr(0, i[1].indexOf(\"/\"))\n\t\t\t}\n\t\t\t_.XAPIWrapper.log(\"Couldn't create base url from endpoint: \" + t)\n\t\t}\n\n\t\tfunction n(t, e, i) {\n\t\t\tt.auth = \"Basic \" + toBase64(e + \":\" + i)\n\t\t}\n\n\t\tthis.lrs = function (t) {\n\t\t\tvar e, i, n = [\"endpoint\", \"auth\", \"actor\", \"registration\", \"activity_id\", \"grouping\", \"activity_platform\"],\n\t\t\t\tr = new Object;\n\t\t\tif (void 0 !== (e = function () {\n\t\t\t\tvar t, e, i, n, r;\n\t\t\t\tfor (t = window.location.search.substr(1), e = t.split(\"&\"), r = {}, n = 0; n < e.length; n++) 2 === (i = e[n].split(\"=\")).length && i[0] && (r[i[0]] = decodeURIComponent(i[1]));\n\t\t\t\treturn r\n\t\t\t}()) && 0 !== Object.keys(e).length) {\n\t\t\t\tfor (var o = 0; o < n.length; o++) e[i = n[o]] && (r[i] = e[i], delete e[i]);\n\t\t\t\tr = a(t, r)\n\t\t\t} else r = t;\n\t\t\treturn r\n\t\t}(t || {}), this.lrs.user && this.lrs.password && n(this.lrs, this.lrs.user, this.lrs.password), this.base = i(this.lrs.endpoint), this.withCredentials = !1, t && void 0 !== t.withCredentials && (this.withCredentials = t.withCredentials), this.strictCallbacks = !1, this.strictCallbacks = t && t.strictCallbacks, e && r.call(this) && window.ADL.XHR_request(this.lrs, this.lrs.endpoint + \"about\", \"GET\", null, null, function (t) {\n\t\t\tif (200 == t.status) try {\n\t\t\t\tvar e = JSON.parse(t.response), i = !1;\n\t\t\t\tfor (var n in e.version) if (e.version.hasOwnProperty(n) && e.version[n] == _.XAPIWrapper.xapiVersion) {\n\t\t\t\t\ti = !0;\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\ti || _.XAPIWrapper.log(\"The lrs version [\" + e.version + \"] does not match this wrapper's XAPI version [\" + _.XAPIWrapper.xapiVersion + \"]\")\n\t\t\t} catch (t) {\n\t\t\t\t_.XAPIWrapper.log(\"The response was not an about object\")\n\t\t\t} else _.XAPIWrapper.log(\"The request to get information about the LRS failed: \" + t)\n\t\t}, null, !1, null, this.withCredentials, !1), this.searchParams = function () {\n\t\t\treturn {format: \"exact\"}\n\t\t}, this.hash = function (t) {\n\t\t\tif (!t) return null;\n\t\t\ttry {\n\t\t\t\treturn toSHA1(t)\n\t\t\t} catch (t) {\n\t\t\t\treturn _.XAPIWrapper.log(\"Error trying to hash -- \" + t), null\n\t\t\t}\n\t\t}, this.changeConfig = function (t) {\n\t\t\ttry {\n\t\t\t\t_.XAPIWrapper.log(\"updating lrs object with new configuration\"), this.lrs = a(this.lrs, t), t.user && t.password && this.updateAuth(this.lrs, t.user, t.password), this.base = i(this.lrs.endpoint), this.withCredentials = t.withCredentials, this.strictCallbacks = t.strictCallbacks\n\t\t\t} catch (t) {\n\t\t\t\t_.XAPIWrapper.log(\"error while changing configuration -- \" + t)\n\t\t\t}\n\t\t}, this.updateAuth = n\n\t}\n\n\tvar e, i = ((e = {endpoint: \"http://localhost:8000/xapi/\"}).auth = \"Basic \" + toBase64(\"tom:1234\"), e);\n\n\tfunction r() {\n\t\ttry {\n\t\t\treturn null != this.lrs.endpoint && \"\" != this.lrs.endpoint\n\t\t} catch (t) {\n\t\t\treturn !1\n\t\t}\n\t}\n\n\tfunction u(t) {\n\t\tif (!u.debug) return !1;\n\t\ttry {\n\t\t\treturn console.log(t), !0\n\t\t} catch (t) {\n\t\t\treturn !1\n\t\t}\n\t}\n\n\tfunction a(e, i) {\n\t\tfor (var n in i) if (0 != i.hasOwnProperty(n)) {\n\t\t\tu(n + \" : \" + i[n]);\n\t\t\ttry {\n\t\t\t\ti[n].constructor == Object ? e[n] = a(e[n], i[n]) : (null == e && (e = new Object), e[n] = i[n])\n\t\t\t} catch (t) {\n\t\t\t\tnull == e && (e = new Object), e[n] = i[n]\n\t\t\t}\n\t\t}\n\t\treturn e\n\t}\n\n\tt.prototype.xapiVersion = \"1.0.1\", t.prototype.prepareStatement = function (t) {\n\t\tvoid 0 === t.actor ? t.actor = JSON.parse(this.lrs.actor) : \"string\" == typeof t.actor && (t.actor = JSON.parse(t.actor)), (this.lrs.grouping || this.lrs.registration || this.lrs.activity_platform) && (t.context || (t.context = {})), this.lrs.grouping && (t.context.contextActivities || (t.context.contextActivities = {}), Array.isArray(t.context.contextActivities.grouping) ? t.context.contextActivities.grouping.splice(0, 0, {id: this.lrs.grouping}) : t.context.contextActivities.grouping = [{id: this.lrs.grouping}]), this.lrs.registration && (t.context.registration = this.lrs.registration), this.lrs.activity_platform && (t.context.platform = this.lrs.activity_platform)\n\t}, t.prototype.testConfig = r, t.prototype.log = u, t.prototype.defaultEncoding = \"utf-8\", t.prototype.sendStatement = function (t, e, i) {\n\t\tif (this.testConfig()) {\n\t\t\tvar n;\n\t\t\tthis.prepareStatement(t), t.id ? n = t.id : (n = _.ruuid(), t.id = n);\n\t\t\tvar r = JSON.stringify(t), o = null;\n\t\t\ti && 0 < i.length && (o = {}, r = this.buildMultipartPost(t, i, o));\n\t\t\tvar s = _.XHR_request(this.lrs, this.lrs.endpoint + \"statements\", \"POST\", r, this.lrs.auth, e, {id: n}, null, o, this.withCredentials, this.strictCallbacks);\n\t\t\tif (!e) return {xhr: s, id: n}\n\t\t}\n\t}, t.prototype.stringToArrayBuffer = function (t, e) {\n\t\treturn e = e || _.XAPIWrapper.defaultEncoding, new TextEncoder(e).encode(t).buffer\n\t}, t.prototype.stringFromArrayBuffer = function (t, e) {\n\t\treturn e = e || _.XAPIWrapper.defaultEncoding, new TextDecoder(e).decode(t)\n\t}, t.prototype.buildMultipartPost = function (t, e, i) {\n\t\tt.attachments = [];\n\t\tfor (var n = 0; n < e.length; n++) \"signature\" == e[n].type && (e[n].type = {\n\t\t\tusageType: \"http://adlnet.gov/expapi/attachments/signature\",\n\t\t\tdisplay: {\"en-US\": \"A JWT signature\"},\n\t\t\tdescription: {\"en-US\": \"A signature proving the statement was not modified\"},\n\t\t\tcontentType: \"application/octet-stream\"\n\t\t}), \"string\" == typeof e[n].value && (e[n].value = this.stringToArrayBuffer(e[n].value)), e[n].type.length = e[n].value.byteLength, e[n].type.sha2 = toSHA256(e[n].value), t.attachments.push(e[n].type);\n\t\tvar r = [], o = (Math.random() + \" \").substring(2, 10) + (Math.random() + \" \").substring(2, 10);\n\t\ti[\"Content-Type\"] = \"multipart/mixed; boundary=\" + o;\n\t\tvar s = \"\\r\\n\",\n\t\t\ta = [\"--\" + o, \"Content-Type: application/json\", 'Content-Disposition: form-data; name=\"statement\"', \"\", JSON.stringify(t)].join(s) + s;\n\t\tfor (var n in r.push(a), e) if (e.hasOwnProperty(n)) {\n\t\t\tvar p = [\"--\" + o, \"Content-Type: \" + e[n].type.contentType, \"Content-Transfer-Encoding: binary\", \"X-Experience-API-Hash: \" + e[n].type.sha2].join(s) + s + s;\n\t\t\tr.push(p), r.push(e[n].value)\n\t\t}\n\t\treturn r.push(s + \"--\" + o + \"--\" + s), new Blob(r)\n\t}, t.prototype.sendStatements = function (t, e) {\n\t\tif (this.testConfig()) {\n\t\t\tfor (var i in t) t.hasOwnProperty(i) && this.prepareStatement(t[i]);\n\t\t\tvar n = _.XHR_request(this.lrs, this.lrs.endpoint + \"statements\", \"POST\", JSON.stringify(t), this.lrs.auth, e, null, !1, null, this.withCredentials, this.strictCallbacks);\n\t\t\tif (!e) return n\n\t\t}\n\t}, t.prototype.getStatements = function (t, e, i) {\n\t\tif (this.testConfig()) {\n\t\t\tvar n = this.lrs.endpoint + \"statements\";\n\t\t\tif (e) n = this.base + e; else {\n\t\t\t\tvar r = new Array;\n\t\t\t\tfor (s in t) if (t.hasOwnProperty(s)) if (\"until\" == s || \"since\" == s) {\n\t\t\t\t\tvar o = new Date(t[s]);\n\t\t\t\t\tr.push(s + \"=\" + encodeURIComponent(o.toISOString()))\n\t\t\t\t} else r.push(s + \"=\" + encodeURIComponent(t[s]));\n\t\t\t\t0 < r.length && (n = n + \"?\" + r.join(\"&\"))\n\t\t\t}\n\t\t\tvar a = _.XHR_request(this.lrs, n, \"GET\", null, this.lrs.auth, i, null, !1, null, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === a || 404 == a.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(a.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn a.response\n\t\t\t}\n\t\t}\n\t}, t.prototype.getActivities = function (t, e) {\n\t\tif (this.testConfig()) {\n\t\t\tvar i = this.lrs.endpoint + \"activities?activityId=<activityid>\";\n\t\t\ti = i.replace(\"<activityid>\", encodeURIComponent(t));\n\t\t\tvar n = _.XHR_request(this.lrs, i, \"GET\", null, this.lrs.auth, e, null, !0, null, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === n || 404 == n.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(n.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn n.response\n\t\t\t}\n\t\t}\n\t}, t.prototype.sendState = function (t, e, i, n, r, o, s, a) {\n\t\tif (this.testConfig()) {\n\t\t\tvar p = this.lrs.endpoint + \"activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>\";\n\t\t\tp = (p = (p = p.replace(\"<activity ID>\", encodeURIComponent(t))).replace(\"<agent>\", encodeURIComponent(JSON.stringify(e)))).replace(\"<stateid>\", encodeURIComponent(i)), n && (p += \"&registration=\" + encodeURIComponent(n));\n\t\t\tvar c = null;\n\t\t\to && s ? u(\"Can't have both If-Match and If-None-Match\") : o ? c = {\"If-Match\": _.formatHash(o)} : s && (c = {\"If-None-Match\": _.formatHash(s)});\n\t\t\tvar l = \"PUT\";\n\t\t\tif (!r) return this.log(\"No activity state was included.\"), !1;\n\t\t\tr instanceof Array ? (r = JSON.stringify(r), (c = c || {})[\"Content-Type\"] = \"application/json\") : r instanceof Object ? (r = JSON.stringify(r), (c = c || {})[\"Content-Type\"] = \"application/json\", l = \"POST\") : (c = c || {})[\"Content-Type\"] = \"application/octet-stream\", _.XHR_request(this.lrs, p, l, r, this.lrs.auth, a, null, null, c, this.withCredentials, this.strictCallbacks)\n\t\t}\n\t}, t.prototype.getState = function (t, e, i, n, r, o) {\n\t\tif (this.testConfig()) {\n\t\t\tvar s = this.lrs.endpoint + \"activities/state?activityId=<activity ID>&agent=<agent>\";\n\t\t\ts = (s = s.replace(\"<activity ID>\", encodeURIComponent(t))).replace(\"<agent>\", encodeURIComponent(JSON.stringify(e))), i && (s += \"&stateId=\" + encodeURIComponent(i)), n && (s += \"&registration=\" + encodeURIComponent(n)), r && null != (r = isDate(r)) && (s += \"&since=\" + encodeURIComponent(r.toISOString()));\n\t\t\tvar a = _.XHR_request(this.lrs, s, \"GET\", null, this.lrs.auth, o, null, !0, null, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === a || 404 == a.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(a.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn a.response\n\t\t\t}\n\t\t}\n\t}, t.prototype.deleteState = function (t, e, i, n, r, o, s) {\n\t\tif (this.testConfig()) {\n\t\t\tvar a = this.lrs.endpoint + \"activities/state?activityId=<activity ID>&agent=<agent>&stateId=<stateid>\";\n\t\t\ta = (a = (a = a.replace(\"<activity ID>\", encodeURIComponent(t))).replace(\"<agent>\", encodeURIComponent(JSON.stringify(e)))).replace(\"<stateid>\", encodeURIComponent(i)), n && (a += \"&registration=\" + encodeURIComponent(n));\n\t\t\tvar p = null;\n\t\t\tr && o ? u(\"Can't have both If-Match and If-None-Match\") : r ? p = {\"If-Match\": _.formatHash(r)} : o && (p = {\"If-None-Match\": _.formatHash(o)});\n\t\t\tvar c = _.XHR_request(this.lrs, a, \"DELETE\", null, this.lrs.auth, s, null, !1, p, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === c || 404 == c.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(c.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn c\n\t\t\t}\n\t\t}\n\t}, t.prototype.sendActivityProfile = function (t, e, i, n, r, o) {\n\t\tif (this.testConfig()) {\n\t\t\tvar s = this.lrs.endpoint + \"activities/profile?activityId=<activity ID>&profileId=<profileid>\";\n\t\t\ts = (s = s.replace(\"<activity ID>\", encodeURIComponent(t))).replace(\"<profileid>\", encodeURIComponent(e));\n\t\t\tvar a = null;\n\t\t\tn && r ? u(\"Can't have both If-Match and If-None-Match\") : n ? a = {\"If-Match\": _.formatHash(n)} : r && (a = {\"If-None-Match\": _.formatHash(r)});\n\t\t\tvar p = \"PUT\";\n\t\t\tif (!i) return this.log(\"No activity profile was included.\"), !1;\n\t\t\ti instanceof Array ? (i = JSON.stringify(i), (a = a || {})[\"Content-Type\"] = \"application/json\") : i instanceof Object ? (i = JSON.stringify(i), (a = a || {})[\"Content-Type\"] = \"application/json\", p = \"POST\") : (a = a || {})[\"Content-Type\"] = \"application/octet-stream\", _.XHR_request(this.lrs, s, p, i, this.lrs.auth, o, null, !1, a, this.withCredentials, this.strictCallbacks)\n\t\t}\n\t}, t.prototype.getActivityProfile = function (t, e, i, n) {\n\t\tif (this.testConfig()) {\n\t\t\tvar r = this.lrs.endpoint + \"activities/profile?activityId=<activity ID>\";\n\t\t\tr = r.replace(\"<activity ID>\", encodeURIComponent(t)), e && (r += \"&profileId=\" + encodeURIComponent(e)), i && null != (i = isDate(i)) && (r += \"&since=\" + encodeURIComponent(i.toISOString()));\n\t\t\tvar o = _.XHR_request(this.lrs, r, \"GET\", null, this.lrs.auth, n, null, !0, null, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === o || 404 == o.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(o.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn o.response\n\t\t\t}\n\t\t}\n\t}, t.prototype.deleteActivityProfile = function (t, e, i, n, r) {\n\t\tif (this.testConfig()) {\n\t\t\tvar o = this.lrs.endpoint + \"activities/profile?activityId=<activity ID>&profileId=<profileid>\";\n\t\t\to = (o = o.replace(\"<activity ID>\", encodeURIComponent(t))).replace(\"<profileid>\", encodeURIComponent(e));\n\t\t\tvar s = null;\n\t\t\ti && n ? u(\"Can't have both If-Match and If-None-Match\") : i ? s = {\"If-Match\": _.formatHash(i)} : n && (s = {\"If-None-Match\": _.formatHash(n)});\n\t\t\tvar a = _.XHR_request(this.lrs, o, \"DELETE\", null, this.lrs.auth, r, null, !1, s, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === a || 404 == a.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(a.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn a\n\t\t\t}\n\t\t}\n\t}, t.prototype.getAgents = function (t, e) {\n\t\tif (this.testConfig()) {\n\t\t\tvar i = this.lrs.endpoint + \"agents?agent=<agent>\";\n\t\t\ti = i.replace(\"<agent>\", encodeURIComponent(JSON.stringify(t)));\n\t\t\tvar n = _.XHR_request(this.lrs, i, \"GET\", null, this.lrs.auth, e, null, !0, null, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === n || 404 == n.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(n.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn n.response\n\t\t\t}\n\t\t}\n\t}, t.prototype.sendAgentProfile = function (t, e, i, n, r, o) {\n\t\tif (this.testConfig()) {\n\t\t\tvar s = this.lrs.endpoint + \"agents/profile?agent=<agent>&profileId=<profileid>\";\n\t\t\ts = (s = s.replace(\"<agent>\", encodeURIComponent(JSON.stringify(t)))).replace(\"<profileid>\", encodeURIComponent(e));\n\t\t\tvar a = null;\n\t\t\tn && r ? u(\"Can't have both If-Match and If-None-Match\") : n ? a = {\"If-Match\": _.formatHash(n)} : r && (a = {\"If-None-Match\": _.formatHash(r)});\n\t\t\tvar p = \"PUT\";\n\t\t\tif (!i) return this.log(\"No agent profile was included.\"), !1;\n\t\t\ti instanceof Array ? (i = JSON.stringify(i), (a = a || {})[\"Content-Type\"] = \"application/json\") : i instanceof Object ? (i = JSON.stringify(i), (a = a || {})[\"Content-Type\"] = \"application/json\", p = \"POST\") : (a = a || {})[\"Content-Type\"] = \"application/octet-stream\", _.XHR_request(this.lrs, s, p, i, this.lrs.auth, o, null, !1, a, this.withCredentials, this.strictCallbacks)\n\t\t}\n\t}, t.prototype.getAgentProfile = function (t, e, i, n) {\n\t\tif (this.testConfig()) {\n\t\t\tvar r = this.lrs.endpoint + \"agents/profile?agent=<agent>\";\n\t\t\tr = (r = r.replace(\"<agent>\", encodeURIComponent(JSON.stringify(t)))).replace(\"<profileid>\", encodeURIComponent(e)), e && (r += \"&profileId=\" + encodeURIComponent(e)), i && null != (i = isDate(i)) && (r += \"&since=\" + encodeURIComponent(i.toISOString()));\n\t\t\tvar o = _.XHR_request(this.lrs, r, \"GET\", null, this.lrs.auth, n, null, !0, null, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === o || 404 == o.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(o.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn o.response\n\t\t\t}\n\t\t}\n\t}, t.prototype.deleteAgentProfile = function (t, e, i, n, r) {\n\t\tif (this.testConfig()) {\n\t\t\tvar o = this.lrs.endpoint + \"agents/profile?agent=<agent>&profileId=<profileid>\";\n\t\t\to = (o = o.replace(\"<agent>\", encodeURIComponent(JSON.stringify(t)))).replace(\"<profileid>\", encodeURIComponent(e));\n\t\t\tvar s = null;\n\t\t\ti && n ? u(\"Can't have both If-Match and If-None-Match\") : i ? s = {\"If-Match\": _.formatHash(i)} : n && (s = {\"If-None-Match\": _.formatHash(n)});\n\t\t\tvar a = _.XHR_request(this.lrs, o, \"DELETE\", null, this.lrs.auth, r, null, !1, s, this.withCredentials, this.strictCallbacks);\n\t\t\tif (void 0 === a || 404 == a.status) return null;\n\t\t\ttry {\n\t\t\t\treturn JSON.parse(a.response)\n\t\t\t} catch (t) {\n\t\t\t\treturn a\n\t\t\t}\n\t\t}\n\t}, _.ruuid = function () {\n\t\treturn \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (t) {\n\t\t\tvar e = 16 * Math.random() | 0;\n\t\t\treturn (\"x\" == t ? e : 3 & e | 8).toString(16)\n\t\t})\n\t}, _.dateFromISOString = function (t) {\n\t\tvar e = t.match(new RegExp(\"([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T| ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?\")),\n\t\t\ti = 0, n = new Date(e[1], 0, 1);\n\t\te[3] && n.setMonth(e[3] - 1), e[5] && n.setDate(e[5]), e[7] && n.setHours(e[7]), e[8] && n.setMinutes(e[8]), e[10] && n.setSeconds(e[10]), e[12] && n.setMilliseconds(1e3 * Number(\"0.\" + e[12])), e[14] && (i = 60 * Number(e[16]) + Number(e[17]), i *= \"-\" == e[15] ? 1 : -1), i -= n.getTimezoneOffset(), time = Number(n) + 60 * i * 1e3;\n\t\tvar r = new Date;\n\t\treturn r.setTime(Number(time)), r\n\t}, _.XHR_request = function (t, n, r, e, i, o, s, a, p, c, l) {\n\t\t\"use strict\";\n\t\tvar u, d, h, f, g, v, y = !1, m = !1, S = !1, b = n.toLowerCase().match(/^(.+):\\/\\/([^:\\/]*):?(\\d+)?(\\/.*)?$/),\n\t\t\tw = window.location, x = {\"Content-Type\": \"application/json\"};\n\t\tif (x.Authorization = i, x[\"X-Experience-API-Version\"] = _.XAPIWrapper.xapiVersion, null !== p) for (var C in p) p.hasOwnProperty(C) && (x[C] = p[C]);\n\t\tif (m = (m = w.protocol.toLowerCase() !== b[1] || w.hostname.toLowerCase() !== b[2]) || (null === b[3] ? \"http\" === b[1] ? \"80\" : \"443\" : b[3]) === w.port, null !== t && void 0 !== t.extended) {\n\t\t\tfor (g in f = new Array, t.extended) f.push(g + \"=\" + t.extended[g]);\n\t\t\t0 < f.length && (n += (-1 < n.indexOf(\"?\") ? \"&\" : \"?\") + f.join(\"&\"))\n\t\t}\n\t\tvar A, I, R = window.XDomainRequest && window.XMLHttpRequest && void 0 === (new XMLHttpRequest).responseType;\n\t\tif (m && void 0 !== R && !1 !== R) S = !0, d = function (t, e, i, n) {\n\t\t\tvar r = e, o = new Array, s = r.indexOf(\"?\");\n\t\t\tif (0 < s && (o.push(r.substr(s + 1)), r = r.substr(0, s)), r = r + \"?method=\" + t, null !== i) for (var a in i) i.hasOwnProperty(a) && o.push(a + \"=\" + encodeURIComponent(i[a]));\n\t\t\treturn null !== n && o.push(\"content=\" + encodeURIComponent(n)), {\n\t\t\t\tmethod: \"POST\",\n\t\t\t\turl: r,\n\t\t\t\theaders: {},\n\t\t\t\tdata: o.join(\"&\")\n\t\t\t}\n\t\t}(r, n, x, e), (u = new XDomainRequest).open(d.method, d.url); else for (var C in (u = new XMLHttpRequest).withCredentials = c, u.open(r, n, true), x) u.setRequestHeader(C, x[C]);\n\n\t\tfunction T() {\n\t\t\tif (y) return h;\n\t\t\ty = !0;\n\t\t\tvar t = a && 404 === u.status;\n\t\t\tif (!(void 0 === u.status || 200 <= u.status && u.status < 400 || t)) {\n\t\t\t\tvar e;\n\t\t\t\ttry {\n\t\t\t\t\te = \"There was a problem communicating with the Learning Record Store. ( \" + u.status + \" | \" + u.response + \" )\" + n\n\t\t\t\t} catch (t) {\n\t\t\t\t\te = t.toString()\n\t\t\t\t}\n\t\t\t\treturn _.XAPIWrapper.log(e), _.xhrRequestOnError(u, r, n, o, s, l), h = u\n\t\t\t}\n\t\t\tif (!o) return h = u;\n\t\t\tif (s) l ? o(null, u, s) : o(u, s); else {\n\t\t\t\tvar i;\n\t\t\t\ttry {\n\t\t\t\t\ti = JSON.parse(u.responseText)\n\t\t\t\t} catch (t) {\n\t\t\t\t\ti = u.responseText\n\t\t\t\t}\n\t\t\t\tl ? o(null, u, i) : o(u, i)\n\t\t\t}\n\t\t}\n\n\t\tif (u.onreadystatechange = function () {\n\t\t\tif (4 === u.readyState) return T()\n\t\t}, u.onload = T, u.onerror = T, u.send(S ? d.data : e), !o) {\n\t\t\tif (S) for (v = 1e3 + new Date; new Date < v && 4 !== u.readyState && !y;) A = void 0, A = new XMLHttpRequest, I = window.location + \"?forcenocache=\" + _.ruuid(), A.open(\"GET\", I, true), A.send(null);\n\t\t\treturn T()\n\t\t}\n\t}, _.xhrRequestOnError = function (e, t, i, n, r, o) {\n\t\tif (n && o) {\n\t\t\tvar s, a = e ? e.status : void 0;\n\t\t\tif (s = a ? new Error(\"Request error: \" + e.status) : 0 === a || null === a ? new Error(\"Request error: aborted\") : new Error(\"Reqeust error: unknown\"), r) n(s, e, r); else {\n\t\t\t\tvar p;\n\t\t\t\ttry {\n\t\t\t\t\tp = JSON.parse(e.responseText)\n\t\t\t\t} catch (t) {\n\t\t\t\t\tp = e.responseText\n\t\t\t\t}\n\t\t\t\tn(s, e, p)\n\t\t\t}\n\t\t}\n\t}, _.formatHash = function (t) {\n\t\treturn \"*\" === t ? t : '\"' + t + '\"'\n\t}, _.XAPIWrapper = new t(i, !1)\n}(window.ADL = window.ADL || {}), function (s) {\n\tfunction r(t, e) {\n\t\tvar i = e.split(\".\"), n = i[0];\n\t\treturn e = i.slice(1).join(\".\"), t[n] || (/\\[\\]$/.test(n) ? (n = n.slice(0, -2), Array.isArray(t[n]) || (t[n] = [])) : t[n] = {}), e ? r(t[n], e) : t[n]\n\t}\n\n\tfunction n(t, e, i, n) {\n\t\tif (t && t.actor && t.verb && t.object) {\n\t\t\tvar r = t;\n\t\t\tfor (var o in r) \"actor\" != o && \"verb\" != o && \"object\" != o && (this[o] = r[o]);\n\t\t\tt = r.actor, e = r.verb, i = r.object\n\t\t}\n\t\tt ? t instanceof a ? this.actor = t : \"Agent\" !== t.objectType && t.objectType ? \"Group\" === t.objectType && (this.actor = new p(t)) : this.actor = new a(t) : this.actor = null, this.verb = e ? e instanceof c ? e : new c(e) : null, i ? \"Activity\" !== i.objectType && i.objectType ? \"Agent\" === i.objectType ? this.object = i instanceof a ? i : new a(i) : \"Group\" === i.objectType ? this.object = i instanceof p ? i : new p(i) : \"StatementRef\" === i.objectType ? this.object = i instanceof u ? i : new u(i) : \"SubStatement\" === i.objectType ? this.object = i instanceof d ? i : new d(i) : this.object = null : this.object = i instanceof l ? i : new l(i) : this.object = null, n && (this.result = n), this.generateId = function () {\n\t\t\tthis.id = s.ruuid()\n\t\t}\n\t}\n\n\tn.prototype.toString = function () {\n\t\treturn this.actor.toString() + \" \" + this.verb.toString() + \" \" + this.object.toString() + \" \" + this.result.toString()\n\t}, n.prototype.isValid = function () {\n\t\treturn this.actor && this.actor.isValid() && this.verb && this.verb.isValid() && this.object && this.object.isValid() && this.result && this.result.isValid()\n\t}, n.prototype.generateRegistration = function () {\n\t\tr(this, \"context\").registration = s.ruuid()\n\t}, n.prototype.addParentActivity = function (t) {\n\t\tr(this, \"context.contextActivities.parent[]\").push(new l(t))\n\t}, n.prototype.addGroupingActivity = function (t) {\n\t\tr(this, \"context.contextActivities.grouping[]\").push(new l(t))\n\t}, n.prototype.addOtherContextActivity = function (t) {\n\t\tr(this, \"context.contextActivities.other[]\").push(new l(t))\n\t};\n\tvar a = function (t, e) {\n\t\tif (this.objectType = \"Agent\", this.name = e, t && (t.mbox || t.mbox_sha1sum || t.openid || t.account)) for (var i in t) this[i] = t[i]; else /^mailto:/.test(t) ? this.mbox = t : /^[0-9a-f]{40}$/i.test(t) ? this.mbox_sha1sum = t : /^http[s]?:/.test(t) ? this.openid = t : t && t.homePage && t.name && (this.account = t)\n\t};\n\ta.prototype.toString = function () {\n\t\treturn this.name || this.mbox || this.openid || this.mbox_sha1sum || this.account.name\n\t}, a.prototype.isValid = function () {\n\t\treturn this.mbox || this.mbox_sha1sum || this.openid || this.account.homePage && this.account.name || \"Group\" === this.objectType && this.member\n\t};\n\tvar p = function (t, e, i) {\n\t\ta.call(this, t, i), this.member = e, this.objectType = \"Group\"\n\t};\n\tp.prototype = new a;\n\tvar c = function (t, e) {\n\t\tif (t && t.id) for (var i in t) this[i] = t[i]; else this.id = t, e && (\"string\" == typeof e || e instanceof String ? this.display = {\"en-US\": e} : this.display = e)\n\t};\n\tc.prototype.toString = function () {\n\t\treturn this.display && (this.display[\"en-US\"] || this.display.en) ? this.display[\"en-US\"] || this.display.en : this.id\n\t}, c.prototype.isValid = function () {\n\t\treturn this.id\n\t};\n\tvar l = function (t, e, i) {\n\t\tif (t && t.id) {\n\t\t\tvar n = t;\n\t\t\tfor (var r in n) this[r] = n[r]\n\t\t} else this.objectType = \"Activity\", this.id = t, (e || i) && (this.definition = {}, \"string\" == typeof e || e instanceof String ? this.definition.name = {\"en-US\": e} : e && (this.definition.name = e), \"string\" == typeof i || i instanceof String ? this.definition.description = {\"en-US\": i} : i && (this.definition.description = i))\n\t};\n\tl.prototype.toString = function () {\n\t\treturn this.definition && this.definition.name && (this.definition.name[\"en-US\"] || this.definition.name.en) ? this.definition.name[\"en-US\"] || this.definition.name.en : this.id\n\t}, l.prototype.isValid = function () {\n\t\treturn this.id && (!this.objectType || \"Activity\" === this.objectType)\n\t};\n\tvar u = function (t) {\n\t\tif (t && t.id) for (var e in t) this[e] = t[e]; else this.objectType = \"StatementRef\", this.id = t\n\t};\n\tu.prototype.toString = function () {\n\t\treturn \"statement(\" + this.id + \")\"\n\t}, u.prototype.isValid = function () {\n\t\treturn this.id && this.objectType && \"StatementRef\" === this.objectType\n\t};\n\tvar d = function (t, e, i) {\n\t\tn.call(this, t, e, i), this.objectType = \"SubStatement\", delete this.id, delete this.stored, delete this.version, delete this.authority\n\t};\n\td.prototype = new n, d.prototype.toString = function () {\n\t\treturn '\"' + d.prototype.prototype.toString.call(this) + '\"'\n\t}, n.Agent = a, n.Group = p, n.Verb = c, n.Activity = l, n.StatementRef = u, n.SubStatement = d, s.XAPIStatement = n\n}(window.ADL = window.ADL || {}), function (t) {\n\tvar a = t, e = !1;\n\t\"undefined\" != typeof window && (a = window.ADL = t.ADL || {}, e = !0);\n\n\tfunction n(t) {\n\t\tif (\"SubStatement\" === t.objectType && \"SubStatement\" !== t.object.objectType && !(t.id || t.stored || t.version || t.authority)) return a.xapiutil.getActorId(t.actor) + \":\" + a.xapiutil.getVerbDisplay(t.verb) + \":\" + a.xapiutil.getObjectId(t.object)\n\t}\n\n\ta.xapiutil = {}, a.xapiutil.getLang = function () {\n\t\tvar t;\n\t\tif (\"undefined\" != typeof navigator) t = navigator.language || navigator.browserLanguage || navigator.systemLanguage || navigator.userLanguage; else if (\"undefined\" != typeof process && void 0 !== process.env && void 0 !== process.env.LANG) {\n\t\t\tvar e = process.env.LANG;\n\t\t\tt = (t = e.slice(0, e.indexOf(\".\"))).replace(/_/, \"-\")\n\t\t}\n\t\treturn t || \"en-US\"\n\t}, a.xapiutil.getLangVal = function (t) {\n\t\tif (t && 0 != Object.keys(t).length) {\n\t\t\tfor (var e, i = a.xapiutil.getLang(), n = !1; t[i] ? (e = t[i], n = !0) : i.indexOf(\"-\") && (i = i.substring(0, i.lastIndexOf(\"-\"))), !n && \"\" !== i;) ;\n\t\t\treturn e\n\t\t}\n\t}, a.xapiutil.getMoreStatements = function (n, r, o) {\n\t\tif (!e) throw new Error(\"Node not supported.\");\n\t\tvar s = [];\n\t\ta.XAPIWrapper.getStatements(o, null, function t(e) {\n\t\t\tif (e && e.response) {\n\t\t\t\tvar i = JSON.parse(e.response);\n\t\t\t\ti.statements && (s = s.concat(i.statements), n-- <= 0 ? r(s) : i.more && \"\" !== i.more ? a.XAPIWrapper.getStatements(o, i.more, t) : \"\" === i.more && r(s))\n\t\t\t}\n\t\t})\n\t}, a.xapiutil.getActorId = function (t) {\n\t\treturn t.mbox || t.openid || t.mbox_sha1sum || t.account\n\t}, a.xapiutil.getActorIdString = function (t) {\n\t\tvar e = t.mbox || t.openid || t.mbox_sha1sum;\n\t\treturn e = e || (t.account ? t.account.homePage + \":\" + t.account.name : t.member ? \"Anon Group \" + t.member : \"unknown\")\n\t}, a.xapiutil.getActorDisplay = function (t) {\n\t\treturn t.name || a.xapiutil.getActorIdString(t)\n\t}, a.xapiutil.getVerbDisplay = function (t) {\n\t\tif (t) return t.display && a.xapiutil.getLangVal(t.display) || t.id\n\t}, a.xapiutil.getObjectType = function (t) {\n\t\treturn t.objectType || (t.id ? \"Activity\" : \"Agent\")\n\t}, a.xapiutil.getObjectId = function (t) {\n\t\tif (t.id) return t.id;\n\t\tvar e = a.xapiutil.getObjectType(t);\n\t\treturn \"Agent\" === e || \"Group\" === e ? a.xapiutil.getActorId(t) : void 0\n\t}, a.xapiutil.getObjectIdString = function (t) {\n\t\tif (!t) return \"unknown\";\n\t\tif (t.id) return t.id;\n\t\tvar e = a.xapiutil.getObjectType(t);\n\t\treturn \"Agent\" === e || \"Group\" === e ? a.xapiutil.getActorIdString(t) : \"SubStatement\" == e ? n(t) : \"unknown\"\n\t}, a.xapiutil.getObjectDisplay = function (t) {\n\t\tif (!t) return \"unknown\";\n\t\tvar e = function (t) {\n\t\t\tif (t.definition && t.definition.name) return a.xapiutil.getLangVal(t.definition.name)\n\t\t}(t) || t.name || t.id;\n\t\tif (!e) {\n\t\t\tvar i = a.xapiutil.getObjectType(t);\n\t\t\t\"Agent\" === i || \"Group\" == i ? e = a.xapiutil.getActorDisplay(t) : \"SubStatement\" == i && (e = n(t))\n\t\t}\n\t\treturn e\n\t}\n}(this), function () {\n\tvar u = window.ADL = window.ADL || {};\n\n\tfunction d(t) {\n\t\tfor (var e = window.location.search.substring(1).split(\"&\"), i = 0; i < e.length; i++) {\n\t\t\tvar n = e[i].split(\"=\");\n\t\t\tif (decodeURIComponent(n[0]) == t) return decodeURIComponent(n[1])\n\t\t}\n\t}\n\n\tfunction h(t) {\n\t\tvar e = \"xAPILaunchKey=\" + d(\"xAPILaunchKey\") + \"&xAPILaunchService=\" + d(\"xAPILaunchService\");\n\t\td(\"encrypted\") && (e += \"&encrypted=true\");\n\t\tfor (var i = 0; i < t.length; i++) {\n\t\t\tvar n = t[i], r = n.href, o = n.attributes.getNamedItem(\"courselink\");\n\t\t\to && \"true\" == o.value && (r = -1 < r.indexOf(\"?\") ? r + \"&\" + e : r + \"?\" + e, n.href = r)\n\t\t}\n\t}\n\n\tu.launch = function s(a, p, c) {\n\t\tvar n;\n\t\tn = a, a = function () {\n\t\t\tvar i = arguments;\n\t\t\twindow.setTimeout(function () {\n\t\t\t\tfor (var t = [], e = 0; e < i.length; e++) t.push(i[e]);\n\t\t\t\tn.apply(window, t)\n\t\t\t}, 0)\n\t\t};\n\t\ttry {\n\t\t\tvar r = d(\"xAPILaunchKey\"), o = d(\"xAPILaunchService\");\n\t\t\tif (d(\"encrypted\"), s.terminate = function (t) {\n\t\t\t\tvar e = new URL(o);\n\t\t\t\te.pathname += \"launch/\" + r + \"/terminate\";\n\t\t\t\tvar i = new XMLHttpRequest;\n\t\t\t\ti.withCredentials = !0, i.crossDomain = !0, i.open(\"POST\", e.toString(), true), i.setRequestHeader(\"Content-type\", \"application/json\"), i.send(JSON.stringify({\n\t\t\t\t\tcode: 0,\n\t\t\t\t\tdescription: t || \"User closed content\"\n\t\t\t\t}))\n\t\t\t}, !r || !o) return a(\"invalid launch parameters\");\n\t\t\tvar t = new URL(o);\n\t\t\tt.pathname += \"launch/\" + r;\n\t\t\tvar l = new XMLHttpRequest;\n\t\t\tl.withCredentials = !0, l.crossDomain = !0, l.onerror = function (t) {\n\t\t\t\twindow.setTimeout(function () {\n\t\t\t\t\treturn a(t)\n\t\t\t\t})\n\t\t\t}, l.onload = function (t) {\n\t\t\t\tif (200 !== l.status) return l.onerror(l.responseText);\n\t\t\t\tvar e = JSON.parse(l.responseText), i = e, n = {};\n\t\t\t\tn.endpoint = i.endpoint, n.actor = i.actor, n.withCredentials = !0, n.strictCallbacks = c || !1, window.onunload = function () {\n\t\t\t\t\tp && s.terminate(\"User closed content\")\n\t\t\t\t};\n\t\t\t\tvar r, o = new u.XAPIWrapper.constructor;\n\t\t\t\treturn o.changeConfig(n), h(document.body.querySelectorAll(\"a\")), r = document.body, new MutationObserver(function (t) {\n\t\t\t\t\tt.forEach(function (t) {\n\t\t\t\t\t\tfor (var e in t.addedNodes) t.addedNodes.hasOwnProperty(e) && t.addedNodes[e].constructor == HTMLAnchorElement && h([t.addedNodes[e]])\n\t\t\t\t\t})\n\t\t\t\t}).observe(r, {attributes: !0, childList: !0, subtree: !0}), a(null, e, o)\n\t\t\t}, l.open(\"POST\", t.toString(), true), l.send()\n\t\t} catch (t) {\n\t\t\ta(t)\n\t\t}\n\t}\n}();\n\nfunction GetQueryStringValue(strElement, strQueryString) {\n\tvar aryPairs;\n\tvar foundValue;\n\tstrQueryString = strQueryString.substring(1);\n\taryPairs = strQueryString.split(\"&\");\n\tfoundValue = SearchQueryStringPairs(aryPairs, strElement);\n\tif (foundValue === null) {\n\t\taryPairs = strQueryString.split(/[\\?\\&]/);\n\t\tfoundValue = SearchQueryStringPairs(aryPairs, strElement);\n\t}\n\tif (foundValue === null) {\n\t\treturn \"\";\n\t} else {\n\t\treturn foundValue;\n\t}\n}\n\nfunction SearchQueryStringPairs(aryPairs, strElement) {\n\tvar i;\n\tvar intEqualPos;\n\tvar strArg = \"\";\n\tvar strValue = \"\";\n\tstrElement = strElement.toLowerCase();\n\tfor (i = 0; i < aryPairs.length; i++) {\n\t\tintEqualPos = aryPairs[i].indexOf('=');\n\t\tif (intEqualPos != -1) {\n\t\t\tstrArg = aryPairs[i].substring(0, intEqualPos);\n\t\t\tif (EqualsIgnoreCase(strArg, strElement)) {\n\t\t\t\tstrValue = aryPairs[i].substring(intEqualPos + 1);\n\t\t\t\tstrValue = new String(strValue)\n\t\t\t\tstrValue = strValue.replace(/\\+/g, \"%20\")\n\t\t\t\tstrValue = unescape(strValue);\n\t\t\t\treturn new String(strValue);\n\t\t\t}\n\t\t}\n\t}\n\treturn null;\n}\n\nfunction EqualsIgnoreCase(str1, str2) {\n\tvar blnReturn;\n\tstr1 = new String(str1);\n\tstr2 = new String(str2);\n\tblnReturn = (str1.toLowerCase() == str2.toLowerCase())\n\treturn blnReturn;\n}\n\nfunction ValidInteger(intNum) {\n\n\tvar str = new String(intNum);\n\tif (str.indexOf(\"-\", 0) == 0) {\n\t\tstr = str.substring(1, str.length - 1);\n\t}\n\tvar regValidChars = new RegExp(\"[^0-9]\");\n\tif (str.search(regValidChars) == -1) {\n\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nvar scv = GetQueryStringValue(\"sv\", document.currentScript.src);\n// Check if the method includes is defined\nif ( ! String.prototype.includes ){\n\t// Otherwise, define it\n\tString.prototype.includes = function( search, start ){\n\t\tif ( typeof start !== 'number' ){\n\t\t\tstart = 0;\n\t\t}\n\n\t\tif ( start + search.length > this.length ){\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn this.indexOf(search, start) !== -1;\n\t\t}\n\t};\n}\nfunction parseURL(url) {\n\tvar parts = String(url).split(\"?\"),\n\t\tpairs, pair, i, params = {};\n\tif (parts.length === 2) {\n\t\tpairs = parts[1].split(\"&\");\n\t\tfor (i = 0; i < pairs.length; i += 1) {\n\t\t\tpair = pairs[i].split(\"=\");\n\t\t\tif (pair.length === 2 && pair[0]) {\n\t\t\t\tparams[pair[0]] = decodeURIComponent(pair[1]);\n\t\t\t}\n\t\t}\n\t}\n\treturn {\n\t\tpath: parts[0],\n\t\tparams: params\n\t};\n}\n// Define function to get parameters from the URL\nfunction getParameterByName(name, url) {\n\tif (!url) url = window.location.href;\n\tname = name.replace(/[\\[\\]]/g, \"\\$&\");\n\tvar regex = new RegExp(\"[?&]\" + name + \"(=([^&#]*)|&|#|$)\"),\n\t\tresults = regex.exec(url);\n\tif (!results) return null;\n\tif (!results[2]) return '';\n\treturn decodeURIComponent(results[2].replace(/\\+/g, \" \"));\n}\n\nvar actor = JSON.parse(getParameterByName('actor'));\nvar baseUrl = getParameterByName('base_url');\nvar nonce = getParameterByName('nonce');\nvar email = actor.mbox[0].replace('mailto:', '');\nvar postId = getParameterByName('auth').replace('LearnDashId', '');\n// User defined code goes here\n/*******************************************************************************\n **\n ** xapi object to be used in SCORM wrapper\n **\n ** Version 1.1\n **\n ** Converts many SCORM 2004 data model elements to associated xAPI data\n **\n *******************************************************************************/\nxapi = function () {\n\n\tvar _debug = true;\n\n\tvar _reservedQSParams = {\n\t\tstatementId: true,\n\t\tvoidedStatementId: true,\n\t\tverb: true,\n\t\tobject: true,\n\t\tregistration: true,\n\t\tcontext: true,\n\t\tactor: true,\n\t\tsince: true,\n\t\tuntil: true,\n\t\tlimit: true,\n\t\tauthoritative: true,\n\t\tsparse: true,\n\t\tinstructor: true,\n\t\tascending: true,\n\t\tcontinueToken: true,\n\t\tagent: true,\n\t\tactivityId: true,\n\t\tstateId: true,\n\t\tprofileId: true,\n\t\tactivity_platform: true,\n\t\tgrouping: true,\n\t\t\"Accept-Language\": true,\n\t\tendpoint:true,\n\t\tauth:true\n\t};\n\t/*******************************************************************************\n\t **\n\t ** Configuration object for a specific instance of the wrapper\n\t **\n\t ** The following configuration values must be set in order for this\n\t ** wrapper to function correctly:\n\t **\n\t ** LRS Data\n\t ** -----------\n\t ** endpoint - Points at the LRS endpoint\n\t ** user -  Username for the LRS\n\t ** password - Password for the LRS\n\t **\n\t ** Other Configuration Values\n\t ** ----------------------------\n\t ** courseId - IRI for the course this wrapper is used in\n\t ** lmsHomePage - LMS home page where the course is/will be imported\n\t ** isSCORM2004 - Whether the original course is SCORM 2004 (or SCORM Version 1.2)\n\t ** activityId - The ID that will identify the SCO/Activity in the LRS\n\t ** groupingContextActivity - Context activity for a synchronous workshop (if applicable)\n\t **\n\t ** Note: DO NOT UPDATE THE \"constants\" below.  These are used to indentify\n\t **       SCORM profile information and should not be changed\n\t **\n\t *******************************************************************************/\n\tvar config = {\n\t\tlrs: {\n\t\t\tendpoint: \"https://lrs.adlnet.gov/xapi/\",\n\t\t\tuser: \"\",\n\t\t\tpassword: \"\"\n\t\t},\n\t\tcourseId: \"\",\n\t\tlmsHomePage: \"\",\n\t\tisScorm2004: true,\n\t\tactivityId: \"\",\n\t\tgroupingContextActivity: {}\n\t};\n\n\t// xAPI SCORM Profile IRI contstants\n\t// https://github.com/adlnet/xAPI-SCORM-Profile/blob/master/xapi-scorm-profile.md\n\tvar constants = {\n\t\tactivityProfileIri: \"https://w3id.org/xapi/scorm/activity-profile\",\n\t\tactivityStateIri: \"https://w3id.org/xapi/scorm/activity-state\",\n\t\tactorProfileIri: \"https://w3id.org/xapi/scorm/agent-profile\",\n\t\tattemptStateIri: \"https://w3id.org/xapi/scorm/attempt-state\"\n\t};\n\n\t// used to hold the data model elements to be used based on SCORM Version\n\tvar scormVersionConfig = {};\n\n\t// used to identify if a suspend occurred\n\tvar exitSetToSuspend = false;\n\n\t/*******************************************************************************\n\t **\n\t ** Base statement\n\t **\n\t ** Must update verb, attempt and result (if applicable) to execute\n\t **\n\t *******************************************************************************/\n\tvar getBaseStatement = function () {\n\t\treturn {\n\t\t\tactor: {\n\t\t\t\tobjectType: \"Agent\",\n\t\t\t\tmbox:actor.mbox[0].replace('mailto:', ''),\n\t\t\t\tname:actor.name[0],\n\t\t\t},\n\t\t\tverb: {},\n\t\t\tobject: {\n\t\t\t\tid: config.activityId,\n\t\t\t\tdefinition: {\n\t\t\t\t\ttype: \"http://adlnet.gov/expapi/activities/lesson\"\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontext: {\n\t\t\t\tcontextActivities: {\n\t\t\t\t\tgrouping: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: \"\",\n\t\t\t\t\t\t\tobjectType: \"Activity\",\n\t\t\t\t\t\t\tdefinition: {\n\t\t\t\t\t\t\t\ttype: \"http://adlnet.gov/expapi/activities/attempt\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: config.courseId,\n\t\t\t\t\t\t\tobjectType: \"Activity\",\n\t\t\t\t\t\t\tdefinition: {\n\t\t\t\t\t\t\t\ttype: \"http://adlnet.gov/expapi/activities/course\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tcategory: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: \"https://w3id.org/xapi/scorm\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** Interactions base statement\n\t **\n\t ** Must update object iri, attempt, result and interaction\n\t ** type/description to execute\n\t **\n\t *******************************************************************************/\n\tvar getInteractionsBaseStatement = function () {\n\n\t\treturn {\n\t\t\tactor: {\n\t\t\t\tobjectType: \"Agent\",\n\t\t\t\tmbox:actor.mbox[0].replace('mailto:', ''),\n\t\t\t\tname:actor.name[0],\n\t\t\t},\n\t\t\tverb: ADL.verbs.responded,\n\t\t\tobject: {\n\t\t\t\tobjectType: \"Activity\",\n\t\t\t\tid: \"\",\n\t\t\t\tdefinition: {\n\t\t\t\t\ttype: \"http://adlnet.gov/expapi/activities/cmi.interaction\",\n\t\t\t\t\tinteractionType: \"\",\n\t\t\t\t\tcorrectResponsesPattern: []\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontext: {\n\t\t\t\tcontextActivities: {\n\t\t\t\t\tparent: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: config.activityId,\n\t\t\t\t\t\t\tobjectType: \"Activity\",\n\t\t\t\t\t\t\tdefinition: {\n\t\t\t\t\t\t\t\ttype: \"http://adlnet.gov/expapi/activities/lesson\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tgrouping: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: \"\",\n\t\t\t\t\t\t\tobjectType: \"Activity\",\n\t\t\t\t\t\t\tdefinition: {\n\t\t\t\t\t\t\t\ttype: \"http://adlnet.gov/expapi/activities/attempt\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: config.courseId,\n\t\t\t\t\t\t\tobjectType: \"Activity\",\n\t\t\t\t\t\t\tdefinition: {\n\t\t\t\t\t\t\t\ttype: \"http://adlnet.gov/expapi/activities/course\"\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tcategory: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: \"https://w3id.org/xapi/scorm\"\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t},\n\t\t\tresult: {\n\t\t\t\tresponse: \"\"\n\t\t\t}\n\t\t};\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** Voided base statement\n\t **\n\t ** Must set verb and object to execute\n\t **\n\t *******************************************************************************/\n\tvar getVoidedBaseStatement = function () {\n\t\treturn {\n\t\t\tactor: {\n\t\t\t\tobjectType: \"Agent\",\n\t\t\t\tmbox:actor.mbox[0].replace('mailto:', ''),\n\t\t\t\tname:actor.name[0],\n\t\t\t},\n\t\t\tverb: {},\n\t\t\tobject: {\n\t\t\t\tobjectType: \"StatementRef\",\n\t\t\t\tid: \"\"\n\t\t\t}\n\t\t};\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** Gets agent - account corresponding to LMS user registration\n\t **\n\t ** Used when accessing state objects\n\t **\n\t *******************************************************************************/\n\tvar getAgent = function () {\n\t\tvar agent = {\n\t\t\tactor: {\n\t\t\t\tobjectType: \"Agent\",\n\t\t\t\tmbox:actor.mbox[0].replace('mailto:', ''),\n\t\t\t\tname:actor.name[0],\n\t\t\t}\n\t\t};\n\n\t\treturn agent;\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to initiate an xAPI attempt\n\t **\n\t *******************************************************************************/\n\tvar initializeAttempt = function () {\n\t\t// configure SCORM version and data elements, get launch data from lms, etc\n\t\tconfigureXAPIData();\n\n\t\t// configure lrs\n\t\tconfigureLRS();\n\n\t\t// deprecated - set the agent profile information based on LMS learner_prefernces\n\t\t//setAgentProfile();\n\n\t\t// todo: add error handling to SCORM call\n\t\t// Determine whether this is a new or resumed attempt (based on cmi.entry)\n\t\tvar entry = retrieveDataValue(scormVersionConfig.entryElement);\n\n\t\tvar isResumed = (entry == \"resume\");\n\n\t\t// if \"resume\", determine if the user issued a suspend sequencing nav\n\t\t// request and a terminate was called instead of a suspend and if so, fix\n\t\tif (isResumed) {\n\t\t\tadjustFinishStatementForResume();\n\t\t}\n\n\t\t// set the attempt context activity based on the SCOs state\n\t\t//configureAttemptContextActivityID(entry);\n\n\t\t// Set activity profile info and attempt state every initialize\n\t\t// todo: these cause acceptable errors.  ensure they are not written to console\n\t\t//setActivityProfile();\n\t\t//setAttemptState();\n\n\t\t// Set the appropriate verb based on resumed or new attempt\n\t\tvar startVerb = isResumed ? ADL.verbs.resumed : ADL.verbs.attempted;\n\n\t\t// Execute the statement\n\t\tsendSimpleStatement(startVerb);\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function looks at the last terminate or statement for a given attempt.\n\t ** If \"terminated\", the terminated stmt is voided and a suspend is issued\n\t **\n\t *******************************************************************************/\n\tvar adjustFinishStatementForResume = function () {\n\t\tvar search = ADL.XAPIWrapper.searchParams();\n\t\tsearch['verb'] = ADL.verbs.terminated.id;\n\t\tsearch['activity'] = window.localStorage[config.activityId];\n\t\tsearch['related_activities'] = true;\n\n\t\tvar res = ADL.XAPIWrapper.getStatements(search);\n\n\t\tif (res.statements.length == 1) {\n\t\t\t// there is a terminate verb, so must void it and replace with suspended\n\t\t\t// Note: if there is length == 0, no issue.\n\t\t\t//       if length > 1, things are very messed up. Do nothing.\n\n\t\t\tvar terminateStmt = res.statements[0];\n\n\t\t\t// send the voided statement\n\t\t\tvar voidedStmt = getVoidedBaseStatement();\n\t\t\tvoidedStmt.verb = ADL.verbs.voided;\n\t\t\tvoidedStmt.object.id = terminateStmt.id;\n\n\t\t\tvar response = ADL.XAPIWrapper.sendStatement(voidedStmt);\n\n\t\t\t// send a suspended statement to replace the (voided) terminated statement\n\t\t\tsuspendAttempt(terminateStmt.timestamp);\n\n\n\t\t}\n\n\t}\n\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to resume an attempt\n\t **\n\t *******************************************************************************/\n\tvar resumeAttempt = function () {\n\t\tsendSimpleStatement(ADL.verbs.resumed);\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to suspent an attempt\n\t **\n\t *******************************************************************************/\n\tvar suspendAttempt = function (timestamp) {\n\t\t//sendSimpleStatement(ADL.verbs.suspended);\n\t\tvar stmt = getBaseStatement();\n\t\tstmt.verb = ADL.verbs.suspended;\n\n\t\tif (timestamp != undefined && timestamp != null) {\n\t\t\tstmt.timestamp = timestamp;\n\t\t}\n\n\t\t// window.localStorage[activity] uses activity id to return the most recent\n\t\t// attempt\n\t\tstmt.context.contextActivities.grouping[0].id = window.localStorage[config.activityId];\n\n\t\t// set the context activity from the manifest/launch_data to group together\n\t\t// for an event\n\t\tstmt.context.contextActivities.grouping.push(config.groupingContextActivity);\n\n\t\tvar stmtWithResult = getStmtWithResult(stmt);\n\t\tvar response = ADL.XAPIWrapper.sendStatement(stmtWithResult);\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to terminate an xAPI attempt\n\t **\n\t *******************************************************************************/\n\tvar terminateAttempt = function () {\n\t\t//sendSimpleStatement(ADL.verbs.terminated);\n\t\tvar stmt = getBaseStatement();\n\n\t\t// get the exit and use appropriate verb\n\t\tvar stopVerb = (exitSetToSuspend) ? ADL.verbs.suspended : ADL.verbs.terminated;\n\n\t\tstmt.verb = stopVerb;\n\n\t\t// window.localStorage[activity] uses activity id to return the most recent\n\t\t// attempt\n\t\tstmt.context.contextActivities.grouping[0].id = window.localStorage[config.activityId];\n\n\t\t// set the context activity from the manifest/launch_data to group together\n\t\t// for an event\n\t\tstmt.context.contextActivities.grouping.push(config.groupingContextActivity);\n\n\t\tvar stmtWithResult = getStmtWithResult(stmt);\n\t\tvar response = ADL.XAPIWrapper.sendStatement(stmtWithResult);\n\n\t\twindow.localStorage.removeItem(\"learnerId\");\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to complete the stmt result for terminate and suspend\n\t **\n\t *******************************************************************************/\n\tvar getStmtWithResult = function (baseStatement) {\n\t\tvar success = retrieveDataValue(scormVersionConfig.successElement);\n\t\tvar completion = retrieveDataValue(scormVersionConfig.completionElement);\n\t\tvar scoreScaled = retrieveDataValue(scormVersionConfig.scoreScaledElement);\n\t\tvar scoreRaw = retrieveDataValue(scormVersionConfig.scoreRawElement);\n\t\tvar scoreMin = retrieveDataValue(scormVersionConfig.scoreMinElement);\n\t\tvar scoreMax = retrieveDataValue(scormVersionConfig.scoreMaxElement);\n\n\t\tvar resultSet = false;\n\t\tvar resultJson = {};\n\t\tvar scoreSet = false;\n\t\tvar scoreJson = {};\n\n\t\t// create all of the statement json\n\n\t\t// set success if known\n\t\tif (success == \"passed\") {\n\t\t\tresultSet = true;\n\t\t\tresultJson.success = true;\n\t\t} else if (success == \"failed\") {\n\t\t\tresultSet = true;\n\t\t\tresultJson.success = false;\n\t\t}\n\n\t\t// set completion if known\n\t\tif (completion == \"completed\") {\n\t\t\tresultSet = true;\n\t\t\tresultJson.completion = true;\n\t\t} else if (completion == \"incomplete\") {\n\t\t\tresultSet = true;\n\t\t\tresultJson.completion = false;\n\t\t}\n\n\t\t// set scaled score if set by sco\n\t\tif (scoreScaled != undefined && scoreScaled != \"\") {\n\t\t\tscoreSet = true;\n\t\t\tresultSet = true;\n\t\t\tscoreJson.scaled = parseFloat(scoreScaled);\n\t\t}\n\n\t\t// set raw score if set by sco\n\t\tif (scoreRaw != undefined && scoreRaw != \"\") {\n\t\t\tscoreSet = true;\n\t\t\tresultSet = true;\n\t\t\tscoreJson.raw = parseFloat(scoreRaw);\n\n\t\t\t// if SCORM 1.2, use raw score / 100 for scaled score\n\t\t\tif (!config.isScorm2004) {\n\t\t\t\tscoreJson.scaled = parseFloat(scoreRaw) / 100;\n\t\t\t}\n\t\t}\n\n\t\t// set min score if set by sco\n\t\tif (scoreMin != undefined && scoreMin != \"\") {\n\t\t\tscoreSet = true;\n\t\t\tresultSet = true;\n\t\t\tscoreJson.min = parseFloat(scoreMin);\n\t\t}\n\n\t\t// set max score if set by sco\n\t\tif (scoreMax != undefined && scoreMax != \"\") {\n\t\t\tscoreSet = true;\n\t\t\tresultSet = true;\n\t\t\tscoreJson.max = parseFloat(scoreMax);\n\t\t}\n\n\t\t// set the score object in with the rest of the result object\n\t\tif (scoreSet) {\n\t\t\tresultJson.score = scoreJson;\n\t\t}\n\n\t\t// add result to the base statement\n\t\tif (resultSet) {\n\t\t\tbaseStatement.result = resultJson;\n\t\t}\n\n\t\treturn baseStatement;\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to set agent data based on SCORM learner prefs\n\t **\n\t ** Deprecated\n\t **\n\t *******************************************************************************/\n\tvar setAgentProfile = function () {\n\n\t\tvar lang = retrieveDataValue(scormVersionConfig.languageElement);\n\t\tvar audioLevel = retrieveDataValue(scormVersionConfig.audioLevelElement);\n\t\tvar deliverySpeed = retrieveDataValue(scormVersionConfig.deliverySpeedElement);\n\t\tvar audioCaptioning = retrieveDataValue(scormVersionConfig.audioCaptioningElement);\n\n\t\tvar profile = {\n\t\t\tlanguage: lang,\n\t\t\taudio_level: audioLevel,\n\t\t\tdelivery_speed: deliverySpeed,\n\t\t\taudio_captioning: audioCaptioning\n\t\t};\n\n\t\tADL.XAPIWrapper.sendAgentProfile({\n\t\t\t\tactor: {\n\t\t\t\t\tobjectType: \"Agent\",\n\t\t\t\t\tmbox:actor.mbox[0].replace('mailto:', ''),\n\t\t\t\t\tname:actor.name[0],\n\t\t\t\t}\n\t\t\t},\n\t\t\tconfig.activityId,\n\t\t\tprofile,\n\t\t\tnull,\n\t\t\t\"*\"\n\t\t);\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to set activity profile information\n\t **\n\t ** Note: this data is scoped to an activity and does not (normally) change\n\t **\n\t *******************************************************************************/\n\tvar setActivityProfile = function () {\n\t\t// see if the profile is already set\n\t\tvar ap = ADL.XAPIWrapper.getActivityProfile(config.activityId, constants.activityProfileIri);\n\n\t\tif (ap == null) {\n\t\t\t// get comments from lms (if any)\n\t\t\t//var cmi_num_comments_from_lms_count = retrieveDataValue(\"cmi.comments_from_lms._count\");\n\t\t\t// todo: get the comments, if any and add to array\n\n\t\t\t// get completion threshold (if supplied in manifest)\n\t\t\tvar cmi_completion_threshold = retrieveDataValue(scormVersionConfig.completionThresholdElement);\n\t\t\tvar cmi_launch_data = retrieveDataValue(scormVersionConfig.launchDataElement);\n\t\t\tvar cmi_max_time_allowed = retrieveDataValue(scormVersionConfig.maxTimeAllowedElement);\n\t\t\tvar cmi_scaled_passing_score = retrieveDataValue(scormVersionConfig.scaledPassingScoreElement);\n\t\t\tvar cmi_time_limit_action = retrieveDataValue(scormVersionConfig.timeLimitActionElement);\n\n\t\t\tvar activityProfile = {};\n\n\t\t\tif (config.isScorm2004 && cmi_completion_threshold != \"\")\n\t\t\t\tactivityProfile.completion_threshold = cmi_completion_threshold;\n\n\t\t\tif (cmi_launch_data != \"\")\n\t\t\t\tactivityProfile.launch_data = cmi_launch_data;\n\n\t\t\tif (cmi_max_time_allowed != \"\")\n\t\t\t\tactivityProfile.max_time_allowed = cmi_max_time_allowed;\n\n\t\t\tif (cmi_scaled_passing_score != \"\")\n\t\t\t\tactivityProfile.scaled_passing_score = cmi_scaled_passing_score;\n\n\t\t\tif (cmi_time_limit_action != \"\")\n\t\t\t\tactivityProfile.time_limit_action = cmi_time_limit_action;\n\n\t\t\tADL.XAPIWrapper.sendActivityProfile(config.activityId, constants.activityProfileIri, activityProfile, null, \"*\");\n\t\t}\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to set activity state\n\t **\n\t ** Note: State data about an activity that is different for each user\n\t **\n\t **       This is used to also update attempt iri array associated with\n\t **       the user and activity\n\t **\n\t *******************************************************************************/\n\tvar setActivityState = function () {\n\t\t// window.localStorage[activity] uses activity id to return the most recent\n\t\t// attempt\n\t\tvar attemptIri = window.localStorage[config.activityId];\n\n\t\tvar agent = getAgent();\n\n\t\t// see if the profile is already set\n\t\tvar as = ADL.XAPIWrapper.getState(config.activityId, agent, constants.activityStateIri);\n\n\t\t// First time, create a new one\n\t\tif (as == null || as == '') {\n\t\t\tADL.XAPIWrapper.sendState(config.activityId, agent, constants.activityStateIri, null, {\n\t\t\t\tattempts: [attemptIri]\n\t\t\t});\n\t\t} else {\n\t\t\t// update state\n\t\t\tvar asStr = JSON.stringify(as)\n\t\t\tvar newAs = JSON.parse(asStr);\n\n\t\t\tnewAs.attempts.push(attemptIri);\n\n\t\t\tADL.XAPIWrapper.sendState(config.activityId, agent, constants.activityStateIri, null, newAs, ADL.XAPIWrapper.hash(asStr));\n\t\t}\n\t}\n\tvar setBookmark = function ( name, value) {\n\n\t\tvar attemptIri = window.localStorage[config.activityId];\n\n\t\tvar agent = getAgent();\n\t\t// update state\n\t\tADL.XAPIWrapper.sendState(config.activityId, agent, name, null, value, ADL.XAPIWrapper.hash(value));\n\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to set activity state\n\t **\n\t ** Note: State data about an activity that is different for each user\n\t **\n\t **       This is used to also update attempt iri array associated with\n\t **       the user and activity\n\t **\n\t *******************************************************************************/\n\tvar getActivityState = function ( key ) {\n\t\t// window.localStorage[activity] uses activity id to return the most recent\n\t\t// attempt\n\t\tvar attemptIri = window.localStorage[config.activityId];\n\n\t\tvar agent = getAgent();\n\n\t\t// see if the profile is already set\n\t\tvar as = ADL.XAPIWrapper.getState(config.activityId, agent, key );\n\n\t\t// First time, create a new one\n\t\tif (as == null ) {\n\t\t\treturn '';\n\t\t} else {\n\t\t\treturn as;\n\t\t}\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to set attempt (activity) state\n\t **\n\t ** Note: State data about an activity that is different for each user, for each\n\t **       attempt.\n\t **\n\t *******************************************************************************/\n\tvar setAttemptState = function () {\n\t\t// window.localStorage[activity] uses activity id to return the most recent\n\t\t// attempt\n\t\tvar attemptIri = window.localStorage[config.activityId];\n\t\tvar agent = getAgent();\n\n\t\t// location, preferences object, credit, lesson_mode, suspend_data,\n\t\t// total_time, adl_data\n\t\tvar cmi_location = retrieveDataValue(scormVersionConfig.locationElement);\n\n\t\tvar cmi_language = retrieveDataValue(scormVersionConfig.languageElement);\n\t\tvar cmi_audio_level = retrieveDataValue(scormVersionConfig.audioLevelElement);\n\t\tvar cmi_delivery_speed = retrieveDataValue(scormVersionConfig.deliverySpeedElement);\n\t\tvar cmi_audio_captioning = retrieveDataValue(scormVersionConfig.audioCaptioningElement);\n\n\t\tvar preferences = {\n\t\t\tlanguage: cmi_language,\n\t\t\taudio_level: cmi_audio_level,\n\t\t\tdelivery_speed: cmi_delivery_speed,\n\t\t\taudio_captioning: cmi_audio_captioning\n\t\t};\n\n\t\tvar cmi_credit = retrieveDataValue(scormVersionConfig.creditElement);\n\t\tvar cmi_mode = retrieveDataValue(scormVersionConfig.modeElement);\n\t\tvar cmi_suspend_data = retrieveDataValue(scormVersionConfig.suspendDataElement);\n\t\tvar cmi_total_time = retrieveDataValue(scormVersionConfig.totalTimeElement);\n\n\t\t// todo: implement adl.data buckets and store in attempt state\n\n\t\t// create the state object\n\t\tvar state = {};\n\n\t\tif (cmi_location != \"\")\n\t\t\tstate.location = cmi_location;\n\n\t\tstate.preferences = preferences;\n\n\t\tif (cmi_credit != \"\")\n\t\t\tstate.credit = cmi_credit;\n\n\t\tif (cmi_mode != \"\")\n\t\t\tstate.mode = cmi_mode;\n\n\t\tif (cmi_suspend_data != \"\")\n\t\t\tstate.suspend_data = cmi_suspend_data;\n\n\t\tif (cmi_total_time != \"\")\n\t\t\tstate.total_time = cmi_total_time;\n\n\n\t\t// see if the profile is already set\n\t\tvar as = ADL.XAPIWrapper.getState(attemptIri, agent, constants.attemptStateIri);\n\n\t\tif (as == null) {\n\t\t\t// first set on this attempt\n\t\t\tADL.XAPIWrapper.sendState(attemptIri, agent, constants.attemptStateIri, null, state);\n\t\t} else {\n\t\t\tvar asStr = JSON.stringify(as);\n\n\t\t\t// updating existing attempt\n\t\t\tADL.XAPIWrapper.sendState(attemptIri, agent, constants.attemptStateIri, null, state, ADL.XAPIWrapper.hash(asStr));\n\t\t}\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to route set values to the appropriate functions\n\t **\n\t *******************************************************************************/\n\tvar saveDataValue = function (name, value) {\n\t\tvar isInteraction = name.indexOf(\"cmi.interactions\") > -1;\n\n\t\tif (isInteraction) {\n\t\t\tsetInteraction(name, value);\n\t\t} else {\n\n\t\t\t// Handle only non-array scorm data model elements\n\t\t\tswitch (name) {\n\t\t\t\tcase scormVersionConfig.scoreScaledElement:\n\t\t\t\t\tsetScore(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase scormVersionConfig.completionElement:\n\t\t\t\t\tsetComplete(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase scormVersionConfig.successElement:\n\t\t\t\t\tsetSuccess(value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase scormVersionConfig.locationElement:\n\t\t\t\t\tsetBookmark(name, value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase scormVersionConfig.suspendDataElement:\n\t\t\t\t\tsetBookmark(name, value);\n\t\t\t\t\tbreak;\n\t\t\t\tcase scormVersionConfig.exitElement:\n\t\t\t\t\texitSetToSuspend = (value == \"suspend\");\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\t/*******************************************************************************\n\t **\n\t ** This function/vars is used to handle the interaction type\n\t **\n\t *******************************************************************************/\n\tvar setInteraction = function (name, value) {\n\t\t// key for interactions in local storage is scoped to an attempt\n\t\tvar interactionsKey = window.localStorage[config.activityId] + \"_interactions\";\n\n\t\t// get the interactions from local storage\n\t\tvar cachedInteractionsStr = window.localStorage.getItem(interactionsKey);\n\t\tvar cachedInteractions = [];\n\t\tif (cachedInteractions != null) {\n\t\t\t// get as JSON object array\n\t\t\tvar cachedInteractions = JSON.parse(cachedInteractionsStr);\n\t\t}\n\n\t\t// figure out what the set value was in the SCORM call\n\t\telementArray = name.split(\".\");\n\t\tvar intIndex = elementArray[2];\n\t\tvar subElement = elementArray[3];\n\n\t\tif (subElement == \"id\") {\n\t\t\t// its a new interaction.  Set it in local storage\n\t\t\tvar newInteraction = {\n\t\t\t\tindex: intIndex,\n\t\t\t\tid: value,\n\t\t\t\ttype: \"\",\n\t\t\t\tlearner_response: \"\",\n\t\t\t\tresult: \"\",\n\t\t\t\tdescription: \"\"\n\t\t\t};\n\n\t\t\tif (cachedInteractions != null) {\n\t\t\t\t// this is not the first interaction set\n\t\t\t\tcachedInteractions.push(newInteraction);\n\n\t\t\t\t// push to local storage\n\t\t\t\twindow.localStorage.setItem(interactionsKey, JSON.stringify(cachedInteractions));\n\t\t\t} else {\n\t\t\t\t// this is the first interaction set\n\t\t\t\twindow.localStorage.setItem(interactionsKey, JSON.stringify([newInteraction]));\n\t\t\t}\n\t\t} else if (subElement == \"type\") {\n\t\t\t// find interaction with the same index and set type in JSON array\n\t\t\tfor (var i = 0; i < cachedInteractions.length; i++) {\n\t\t\t\tif (cachedInteractions[i].index == intIndex) {\n\t\t\t\t\t// found matching index so update this object's type\n\t\t\t\t\tcachedInteractions[i].type = value;\n\n\t\t\t\t\t// update local storage\n\t\t\t\t\twindow.localStorage.setItem(interactionsKey, JSON.stringify(cachedInteractions));\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (subElement == \"description\") {\n\t\t\t// find interaction with the same index and set type in JSON array\n\t\t\tfor (var i = 0; i < cachedInteractions.length; i++) {\n\t\t\t\tif (cachedInteractions[i].index == intIndex) {\n\t\t\t\t\t// found matching index so update this object's type\n\t\t\t\t\tcachedInteractions[i].description = value;\n\n\t\t\t\t\t// update local storage\n\t\t\t\t\twindow.localStorage.setItem(interactionsKey, JSON.stringify(cachedInteractions));\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (subElement == \"learner_response\" || subElement == \"student_response\") {\n\t\t\t// find interaction with the same index and set type in JSON array\n\t\t\tfor (var i = 0; i < cachedInteractions.length; i++) {\n\t\t\t\tif (cachedInteractions[i].index == intIndex) {\n\t\t\t\t\t// found matching index so update this object's type\n\t\t\t\t\tcachedInteractions[i].learner_response = value;\n\n\t\t\t\t\t// update local storage\n\t\t\t\t\twindow.localStorage.setItem(interactionsKey, JSON.stringify(cachedInteractions));\n\n\t\t\t\t\t// Send xAPI Statement\n\t\t\t\t\t// Note: this implementation\n\t\t\t\t\tvar stmt = getInteractionsBaseStatement();\n\t\t\t\t\tstmt.object.id = getInteractionIri(cachedInteractions[i].id);\n\t\t\t\t\tstmt.context.contextActivities.grouping[0].id = window.localStorage[config.activityId];\n\n\t\t\t\t\t// set the context activity from the manifest/launch_data to group together\n\t\t\t\t\t// for an event\n\t\t\t\t\tstmt.context.contextActivities.grouping.push(config.groupingContextActivity);\n\n\t\t\t\t\t// set the learner's response\n\t\t\t\t\tstmt.result.response = cachedInteractions[i].learner_response;\n\n\t\t\t\t\t// todo: shouldn't assume en-US - implement with default if not specified, or use what was sent\n\t\t\t\t\tif (config.isScorm2004) {\n\t\t\t\t\t\tstmt.object.definition.description = {\n\t\t\t\t\t\t\t\"en-US\": cachedInteractions[i].description\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t// set the specific interaction type\n\t\t\t\t\tstmt.object.definition.interactionType = cachedInteractions[i].type;\n\n\t\t\t\t\t// get any type specific JSON that an LRS *may* require\n\t\t\t\t\tswitch (cachedInteractions[i].type) {\n\t\t\t\t\t\tcase \"choice\":\n\t\t\t\t\t\t\tstmt.object.definition.choices = [];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"likert\":\n\t\t\t\t\t\t\tstmt.object.definition.scale = [];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"matching\":\n\t\t\t\t\t\t\tstmt.object.definition.source = [];\n\t\t\t\t\t\t\tstmt.object.definition.target = [];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"performance\":\n\t\t\t\t\t\t\tstmt.object.definition.steps = [];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"sequencing\":\n\t\t\t\t\t\t\tstmt.object.definition.choices = [];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\t// todo: make the subelement that you send stmt on configurable\n\t\t\t\t\t// send statement\n\t\t\t\t\tvar response = ADL.XAPIWrapper.sendStatement(stmt);\n\n\t\t\t\t\t// remove interaction from local storage array so its not processed again\n\t\t\t\t\tcachedInteractions.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to get an interaction iri\n\t **\n\t *******************************************************************************/\n\tvar getInteractionIri = function (interactionId) {\n\t\treturn config.activityId + \"/interactions/\" + encodeURIComponent(interactionId);\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to set a scaled score\n\t **\n\t *******************************************************************************/\n\tvar setScore = function (value) {\n\t\t// For scorm 1.2, must divide raw by 100\n\t\tvar score = (config.isScorm2004) ? parseFloat(value) : parseFloat(value) / 100;\n\n\t\tvar stmt = getBaseStatement();\n\t\tstmt.verb = ADL.verbs.scored;\n\t\tstmt.context.contextActivities.grouping[0].id = window.localStorage[config.activityId];\n\n\t\t// set the context activity from the manifest/launch_data to group together\n\t\t// for an event\n\t\tstmt.context.contextActivities.grouping.push(config.groupingContextActivity);\n\n\t\t// todo: add error handling if value is not a valid scaled score\n\t\tstmt.result = {\n\t\t\tscore: {\n\t\t\t\tscaled: score\n\t\t\t}\n\t\t};\n\n\t\tvar response = ADL.XAPIWrapper.sendStatement(stmt);\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to complete an activity\n\t **\n\t *******************************************************************************/\n\tvar setComplete = function (value) {\n\t\tif (value == \"completed\") {\n\t\t\tsendSimpleStatement(ADL.verbs.completed);\n\t\t}\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to set pass/failed on an activity\n\t **\n\t *******************************************************************************/\n\tvar setSuccess = function (value) {\n\t\t// if SCORM 1.2, these could be complete/incomplete\n\t\tif (value == \"passed\" || value == \"failed\")\n\t\t\tsendSimpleStatement(ADL.verbs[value]);\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to configure LRS endpoint and other values\n\t **\n\t *******************************************************************************/\n\tvar configureXAPIData = function () {\n\n\t\tvar isScorm2004 = scv;\n\n\n\t\t// get configuration information from the LMS\n\t\t//scormLaunchData = retrieveDataValue(\"cmi.launch_data\");\n\t\t//scormLaunchDataJSON = JSON.parse(scormLaunchData);\n\n\t\t// todo: confirm launch data exists, if not default values\n\n\t\t// set local config object with launch data information\n\t\tconfig.lrs.endpoint = GetQueryStringValue(\"endpoint\", location.href);\n\t\tconfig.lrs.auth = GetQueryStringValue(\"auth\", location.href);\n\t\t//config.lrs.password = scormLaunchDataJSON.lrs.password;\n\t\tconfig.courseId = TC_COURSE_ID;\n\t\tconfig.lmsHomePage = GetQueryStringValue(\"base_url\", location.href);\n\t\tif (isScorm2004 == '2004') {\n\t\t\tconfig.isScorm2004 = true;\n\t\t} else {\n\t\t\tconfig.isScorm2004 = false;\n\t\t}\n\t\t//config.isScorm2004 = scormLaunchDataJSON.isScorm2004;\n\t\tconfig.activityId = TC_COURSE_ID;\n\t\t//config.groupingContextActivity = scormLaunchDataJSON.groupingContextActivity;\n\n\t\t// setup SCORM object based on configuration\n\t\tscormVersionConfig = {\n\t\t\tlearnerIdElement: (config.isScorm2004) ? \"cmi.learner_id\" : \"cmi.core.student_id\",\n\t\t\tentryElement: ((config.isScorm2004 == true) ? \"cmi.entry\" : \"cmi.core.entry\"),\n\t\t\texitElement: (config.isScorm2004) ? \"cmi.exit\" : \"cmi.core.exit\",\n\t\t\tsuccessElement: (config.isScorm2004) ? \"cmi.success_status\" : \"cmi.core.lesson_status\",\n\t\t\tcompletionElement: (config.isScorm2004) ? \"cmi.completion_status\" : \"cmi.core.lesson_status\",\n\t\t\tscoreRawElement: (config.isScorm2004) ? \"cmi.score.raw\" : \"cmi.core.score.raw\",\n\t\t\tscoreMinElement: (config.isScorm2004) ? \"cmi.score.min\" : \"cmi.core.score.min\",\n\t\t\tscoreMaxElement: (config.isScorm2004) ? \"cmi.score.max\" : \"cmi.core.score.max\",\n\t\t\tscoreScaledElement: (config.isScorm2004) ? \"cmi.score.scaled\" : \"cmi.core.score.raw\",\n\t\t\tlanguageElement: (config.isScorm2004) ? \"cmi.learner_preference.language\" : \"cmi.student_preference.language\",\n\t\t\taudioLevelElement: (config.isScorm2004) ? \"cmi.learner_preference.audio_level\" : \"cmi.student_preference.audio\",\n\t\t\tdeliverySpeedElement: (config.isScorm2004) ? \"cmi.learner_preference.delivery_speed\" : \"cmi.student_preference.speed\",\n\t\t\taudioCaptioningElement: (config.isScorm2004) ? \"cmi.learner_preference.audio_captioning\" : \"cmi.student_preference.text\",\n\t\t\tcompletionThresholdElement: (config.isScorm2004) ? \"cmi.completion_threshold\" : \"\",\n\t\t\tlaunchDataElement: \"cmi.launch_data\",\n\t\t\tmaxTimeAllowedElement: (config.isScorm2004) ? \"cmi.max_time_allowed\" : \"cmi.student_data.max_time_allowed\",\n\t\t\tscaledPassingScoreElement: (config.isScorm2004) ? \"cmi.scaled_passing_score\" : \"cmi.student_data.mastery_score\",\n\t\t\ttimeLimitActionElement: (config.isScorm2004) ? \"cmi.time_limit_action\" : \"cmi.student_data.time_limit_action\",\n\t\t\tlocationElement: (config.isScorm2004) ? \"cmi.location\" : \"cmi.core.lesson_location\",\n\t\t\tcreditElement: (config.isScorm2004) ? \"cmi.credit\" : \"cmi.core.credit\",\n\t\t\tmodeElement: (config.isScorm2004) ? \"cmi.mode\" : \"cmi.core.lesson_mode\",\n\t\t\tsuspendDataElement: \"cmi.suspend_data\",\n\t\t\ttotalTimeElement: (config.isScorm2004) ? \"cmi.total_time\" : \"cmi.core.total_time\"\n\t\t}\n\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to configure LRS endpoint and basic auth values\n\t **\n\t *******************************************************************************/\n\tvar configureLRS = function () {\n\t\tvar urlParams = parseURL(window.location.href).params;\n\t\tvar extended = {};\n\t\tvar conf = {\n\t\t\tendpoint: config.lrs.endpoint,\n\t\t};\n\n\t\tfor (i in urlParams) {\n\t\t\tif (urlParams.hasOwnProperty(i)) {\n\t\t\t\tif (_reservedQSParams.hasOwnProperty(i)) {\n\t\t\t\t\tdelete urlParams[i];\n\t\t\t\t} else {\n\t\t\t\t\textended = extended || {};\n\t\t\t\t\textended[i] = urlParams[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (extended !== null) {\n\t\t\tconf.extended = extended;\n\t\t}\n\t\tconf.allowFail = false;\n\t\tADL.XAPIWrapper.changeConfig(conf);\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to get the attempt context activity (grouping) id\n\t **\n\t *******************************************************************************/\n\tvar configureAttemptContextActivityID = function (cmiEntryValue) {\n\t\t// window.localStorage[config.activityId] uses activity id to return the most recent\n\t\t// attempt\n\t\tif (cmiEntryValue == \"resume\") {\n\t\t\tif (window.localStorage[config.activityId] == null) {\n\t\t\t\twindow.localStorage[config.activityId] = config.activityId + \"?attemptId=\" + generateUUID();\n\t\t\t}\n\n\t\t\t// send a resume statement\n\t\t\t//resumeAttempt();\n\n\t\t} else {\n\t\t\twindow.localStorage[config.activityId] = config.activityId + \"?attemptId=\" + generateUUID();\n\n\t\t\t// update the activity state with the new attempt IRI\n\t\t\tsetActivityState();\n\t\t}\n\t}\n\n\t/*******************************************************************************\n\t **\n\t ** Sends same basic statement with varying verbs\n\t **\n\t *******************************************************************************/\n\tvar sendSimpleStatement = function (verb) {\n\t\tvar stmt = getBaseStatement();\n\t\tstmt.verb = verb;\n\t\tstmt.context.contextActivities.grouping[0].id = window.localStorage[config.activityId];\n\n\t\t// set the context activity from the manifest/launch_data to group together\n\t\t// for an event\n\t\tstmt.context.contextActivities.grouping.push(config.groupingContextActivity);\n\n\t\tvar response = ADL.XAPIWrapper.sendStatement(stmt);\n\t}\n\n\n\t/*******************************************************************************\n\t **\n\t ** This function is used to (most likely) get a unique guid to identify\n\t ** an attempt\n\t **\n\t *******************************************************************************/\n\tvar generateUUID = function () {\n\t\tvar d = new Date().getTime();\n\n\t\tvar uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\t\tvar r = (d + Math.random() * 16) % 16 | 0;\n\t\t\td = Math.floor(d / 16);\n\t\t\treturn (c == 'x' ? r : (r & 0x7 | 0x8)).toString(16);\n\t\t});\n\n\t\treturn uuid;\n\t}\n\n\tfunction message(str) {\n\t\tif (_debug) {\n\t\t\toutput.log(str);\n\t\t}\n\t}\n\n\treturn {\n\t\t//newSetConfig: newSetConfig,\n\t\t//setConfig:setConfig,\n\t\tinitializeAttempt: initializeAttempt,\n\t\tresumeAttempt: resumeAttempt,\n\t\tsuspendAttempt: suspendAttempt,\n\t\tterminateAttempt: terminateAttempt,\n\t\tsaveDataValue: saveDataValue,\n\t\tgetSavedData: getActivityState,\n\t\tsetScore: setScore,\n\t\tsetComplete: setComplete,\n\t\tsetSuccess: setSuccess,\n\t\tconfigureLRS: configureLRS,\n\t\tgetStudent: getAgent\n\t}\n\n\t//\n}(); // end xapi object\nfunction console_log(arguments) {\n\tconsole.log(arguments)\n}\nif( scv == \"2004\" ) {\n\tvar API_1484_11 = function (r) {\n\t\tvar a = false;\n\t\tvar i = false;\n\t\tvar localcache = [];\n\t\tvar interactions = 0;\n\t\tvar objectives = 0;\n\t\tvar e = this;\n\t\treturn {\n\t\t\tgetCache: function () {\n\t\t\t\treturn o\n\t\t\t}, Initialize: function (e) {\n\t\t\t\tif (i || a) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\ti = true;\n\t\t\t\tif (r.scorm_version != \"1.2\") {\n\t\t\t\t\tADL.XAPIWrapper.changeConfig({isScorm2004: true});\n\t\t\t\t}\n\t\t\t\txapi.initializeAttempt();\n\t\t\t\treturn \"true\"\n\t\t\t}, GetValue: function (key) {\n\t\t\t\tvar r = new Date;\n\t\t\t\tvar t = r.toLocaleString();\n\t\t\t\tif (!i || a) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\tvar r = new Date;\n\t\t\t\tvar t = r.toLocaleString();\n\t\t\t\tif (key == \"cmi.interactions._count\") {\n\t\t\t\t\tvarvalue_count = parseInt(++interactions);\n\t\t\t\t\tvarvalue = '\"' + varvalue_count + '\"';\n\t\t\t\t\treturn varvalue_count\n\t\t\t\t}\n\t\t\t\tif ( key == \"cmi.objectives._count\") {\n\t\t\t\t\tvarvalue_count = parseInt(++objectives);\n\t\t\t\t\tvarvalue = '\"' + varvalue_count + '\"';\n\t\t\t\t\treturn varvalue_count\n\t\t\t\t}\n\t\t\t\tif( key === 'cmi.learner_id' ) {\n\t\t\t\t\treturn xapi.getStudent().actor.mbox;\n\t\t\t\t}\n\t\t\t\tif( key === 'cmi.learner_name' ) {\n\t\t\t\t\treturn xapi.getStudent().actor.name;\n\t\t\t\t}\n\t\t\t\tif( key === 'cmi.mode' ) {\n\t\t\t\t\treturn 'normal';\n\t\t\t\t}\n\t\t\t\tif( key === 'cmi.completion_status' ) {\n\t\t\t\t\treturn 'incomplete';\n\t\t\t\t}\n\n\t\t\t\tif( localcache[key] === undefined && ( key == \"cmi.core.lesson_location\" || key == \"cmi.suspend_data\" ) ) {\n\t\t\t\t\tlocalcache[key] = xapi.getSavedData(key);\n\t\t\t\t}\n\t\t\t\tvarvalue = localcache[key] === undefined ? \"\" : localcache[key];\n\t\t\t\treturn varvalue;\n\t\t\t}, SetValue: function (name, value) {\n\t\t\t\tvar t = new Date;\n\t\t\t\tvar n = t.toLocaleString();\n\t\t\t\tif (!i || a) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\tlocalcache[\"cmi.interactions._count\"] = interactions;\n\t\t\t\tlocalcache[\"cmi.objectives._count\"] = objectives;\n\t\t\t\tlocalcache[name] = value;\n\t\t\t\txapi.saveDataValue(name, value);\n\t\t\t\treturn \"true\"\n\t\t\t}, Commit: function (e) {\n\t\t\t\tif (!i || a) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\treturn \"true\"\n\t\t\t}, Terminate: function (e) {\n\t\t\t\tif (!i || a) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\txapi.terminateAttempt();\n\t\t\t\treturn \"true\"\n\t\t\t}, GetLastError: function () {\n\t\t\t\treturn 0\n\t\t\t}, GetDiagnostic: function (e) {\n\t\t\t\treturn \"diagnostic string\"\n\t\t\t}, GetErrorString: function (e) {\n\t\t\t\treturn \"error string\"\n\t\t\t}\n\t\t}\n\t}(window);\n\tinitializeCommunication = API_1484_11.Initialize;\n\tterminateCommunication = API_1484_11.Terminate;\n\tstoreDataValue = API_1484_11.SetValue;\n\tretrieveDataValue = API_1484_11.GetValue;\n}else{\n\tvar API = function (e) {\n\t\tvar i = false;\n\t\tvar a = false;\n\t\tvar localcache = [];\n\t\tvar interactions = 0;\n\t\tvar objectives = 0;\n\t\tvar t = this;\n\t\treturn {\n\t\t\tgetCache: function () {\n\t\t\t\treturn localcache\n\t\t\t}, LMSInitialize: function (e) {\n\t\t\t\tif (a || i) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\ta = true;\n\t\t\t\txapi.initializeAttempt();\n\t\t\t\treturn \"true\"\n\t\t\t}, LMSGetValue: function (key) {\n\t\t\t\tvar t = new Date;\n\t\t\t\tvar n = t.toLocaleString();\n\t\t\t\tif (!a || i) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\tif ( key == \"cmi.interactions._count\") {\n\t\t\t\t\tvarvalue_count = parseInt(++interactions);\n\t\t\t\t\tvarvalue = '\"' + varvalue_count + '\"';\n\t\t\t\t\treturn varvalue_count\n\t\t\t\t}\n\t\t\t\tif ( key == \"cmi.objectives._count\") {\n\t\t\t\t\tvarvalue_count = parseInt(++objectives);\n\t\t\t\t\tvarvalue = '\"' + varvalue_count + '\"';\n\t\t\t\t\treturn varvalue_count\n\t\t\t\t}\n\t\t\t\tif( key === 'cmi.core.student_id' ) {\n\t\t\t\t\treturn xapi.getStudent().actor.mbox;\n\t\t\t\t}\n\t\t\t\tif( key === 'cmi.core.student_name' ) {\n\t\t\t\t\treturn xapi.getStudent().actor.name;\n\t\t\t\t}\n\t\t\t\tif( key === 'cmi.core.lesson_mode' ) {\n\t\t\t\t\treturn 'normal';\n\t\t\t\t}\n\t\t\t\tif( key === 'cmi.core.lesson_status' ) {\n\t\t\t\t\treturn 'incomplete';\n\t\t\t\t}\n\n\t\t\t\tif( localcache[key] === undefined && ( key == \"cmi.core.lesson_location\" || key == \"cmi.suspend_data\" ) ) {\n\t\t\t\t\tlocalcache[key] = xapi.getSavedData(key);\n\t\t\t\t}\n\t\t\t\tvarvalue = localcache[key] === undefined ? \"\" : localcache[key];\n\n\t\t\t\treturn varvalue;\n\t\t\t}, LMSSetValue: function (key, value) {\n\t\t\t\tvar n = new Date;\n\t\t\t\tvar r = n.toLocaleString();\n\t\t\t\tif (!a || i) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\tlocalcache[\"cmi.interactions._count\"] = interactions;\n\t\t\t\tlocalcache[\"cmi.objectives._count\"] = objectives;\n\t\t\t\tlocalcache[key] = value;\n\t\t\t\txapi.saveDataValue(key, value);\n\t\t\t\treturn \"true\"\n\t\t\t}, LMSCommit: function (e) {\n\t\t\t\tif (!a || i) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\n\t\t\t\treturn \"true\"\n\t\t\t}, LMSFinish: function (e) {\n\t\t\t\tif (!a || i) {\n\t\t\t\t\treturn \"false\"\n\t\t\t\t}\n\t\t\t\txapi.terminateAttempt();\n\t\t\t\treturn \"true\"\n\t\t\t}, LMSGetLastError: function () {\n\t\t\t\treturn 0\n\t\t\t}, LMSGetDiagnostic: function (e) {\n\t\t\t\treturn \"diagnostic string\"\n\t\t\t}, LMSGetErrorString: function (e) {\n\t\t\t\treturn \"error string\"\n\t\t\t}\n\t\t}\n\t}(window);\n\tinitializeCommunication = API.LMSInitialize;\n\tterminateCommunication = API.LMSFinish;\n\tstoreDataValue = API.LMSSetValue;\n\tretrieveDataValue = API.LMSGetValue;\n}\n"],"names":["CryptoJS","l","t","e","lib","i","Base","extend","n","prototype","this","mixIn","hasOwnProperty","init","$super","apply","arguments","create","toString","clone","u","WordArray","words","sigBytes","length","o","stringify","concat","r","clamp","s","push","ceil","call","slice","random","enc","Hex","join","parse","parseInt","substr","Latin1","String","fromCharCode","charCodeAt","a","Utf8","decodeURIComponent","escape","Error","unescape","encodeURIComponent","p","Base64","_map","charAt","indexOf","c","BufferedBlockAlgorithm","reset","_data","_nDataBytes","_append","_process","blockSize","max","_minBufferSize","min","_doProcessBlock","splice","Hasher","cfg","_doReset","update","finalize","_doFinalize","_createHelper","_createHmacHelper","d","HMAC","algo","h","f","SHA1","_hash","floor","HmacSHA1","Math","toBase64","encode","toSHA1","Crypto","util","bytesToHex","asBytes","toSHA256","Object","SHA256","Uint8Array","isDate","Date","isNaN","valueOf","ADL","XAPIWrapper","log","GetQueryStringValue","strElement","strQueryString","foundValue","SearchQueryStringPairs","substring","split","aryPairs","intEqualPos","strValue","toLowerCase","EqualsIgnoreCase","replace","str1","str2","ValidInteger","intNum","str","regValidChars","RegExp","search","sqrt","pow","g","HmacSHA256","_hasher","_oKey","_iKey","TextEncoder","codePointAt","Number","subarray","TextDecoder","decode","fromCodePoint","RangeError","window","activityTypes","assessment","attempt","course","file","cmiInteraction","interaction","lesson","link","media","meeting","module","objective","performance","profile","question","simulation","verbs","abandoned","id","display","en-US","answered","de-DE","fr-FR","es-ES","ar-AR","asked","attempted","attended","commented","completed","exited","experienced","failed","imported","initialized","interacted","launched","mastered","passed","preferred","progressed","registered","responded","resumed","satisfied","scored","shared","suspended","terminated","voided","waived","toISOString","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","getUTCMilliseconds","toFixed","_","document","createElement","href","protocol","host","auth","lrs","location","keys","user","password","base","endpoint","withCredentials","strictCallbacks","XHR_request","status","JSON","response","version","xapiVersion","searchParams","format","hash","changeConfig","updateAuth","debug","console","constructor","prepareStatement","actor","grouping","registration","activity_platform","context","contextActivities","Array","isArray","platform","testConfig","defaultEncoding","sendStatement","ruuid","buildMultipartPost","xhr","stringToArrayBuffer","buffer","stringFromArrayBuffer","attachments","type","usageType","description","contentType","value","byteLength","sha2","Blob","sendStatements","getStatements","getActivities","sendState","If-Match","formatHash","If-None-Match","getState","deleteState","sendActivityProfile","getActivityProfile","deleteActivityProfile","getAgents","sendAgentProfile","getAgentProfile","deleteAgentProfile","dateFromISOString","match","setMonth","setDate","setHours","setMinutes","setSeconds","setMilliseconds","getTimezoneOffset","time","setTime","v","m","y","S","b","w","x","Content-Type","Authorization","C","hostname","port","extended","A","I","R","XDomainRequest","XMLHttpRequest","responseType","method","url","headers","data","open","setRequestHeader","T","xhrRequestOnError","responseText","onreadystatechange","readyState","onload","onerror","send","test","verb","object","objectType","result","generateId","isValid","generateRegistration","addParentActivity","addGroupingActivity","addOtherContextActivity","name","mbox","mbox_sha1sum","openid","account","homePage","member","en","definition","stored","authority","Agent","Group","Verb","Activity","StatementRef","SubStatement","XAPIStatement","xapiutil","getActorId","getVerbDisplay","getObjectId","getLang","navigator","language","browserLanguage","systemLanguage","userLanguage","process","env","LANG","getLangVal","lastIndexOf","getMoreStatements","statements","more","getActorIdString","getActorDisplay","getObjectType","getObjectIdString","getObjectDisplay","attributes","getNamedItem","launch","setTimeout","terminate","URL","pathname","crossDomain","code","onunload","body","querySelectorAll","MutationObserver","forEach","addedNodes","HTMLAnchorElement","observe","childList","subtree","scv","currentScript","src","parseURL","pairs","pair","parts","params","path","getParameterByName","results","exec","includes","start","API_1484_11","API","baseUrl","nonce","email","postId","console_log","xapi","getStmtWithResult","baseStatement","success","retrieveDataValue","scormVersionConfig","successElement","completion","completionElement","scoreScaled","scoreScaledElement","scoreRaw","scoreRawElement","scoreMin","scoreMinElement","scoreMax","scoreMaxElement","resultSet","resultJson","scoreSet","scoreJson","undefined","scaled","parseFloat","raw","config","isScorm2004","score","setBookmark","localStorage","activityId","agent","getAgent","setScore","stmt","getBaseStatement","groupingContextActivity","setComplete","sendSimpleStatement","setSuccess","configureLRS","urlParams","conf","_reservedQSParams","allowFail","statementId","voidedStatementId","since","until","limit","authoritative","sparse","instructor","ascending","continueToken","stateId","profileId","Accept-Language","courseId","lmsHomePage","exitSetToSuspend","category","getInteractionsBaseStatement","interactionType","correctResponsesPattern","parent","getVoidedBaseStatement","suspendAttempt","timestamp","stmtWithResult","getInteractionIri","interactionId","initializeAttempt","TC_COURSE_ID","learnerIdElement","entryElement","exitElement","languageElement","audioLevelElement","deliverySpeedElement","audioCaptioningElement","completionThresholdElement","launchDataElement","maxTimeAllowedElement","scaledPassingScoreElement","timeLimitActionElement","locationElement","creditElement","modeElement","suspendDataElement","totalTimeElement","configureXAPIData","isResumed","res","terminateStmt","voidedStmt","adjustFinishStatementForResume","startVerb","resumeAttempt","terminateAttempt","stopVerb","removeItem","saveDataValue","interactionsKey","cachedInteractionsStr","getItem","cachedInteractions","elementArray","intIndex","subElement","newInteraction","index","learner_response","setItem","choices","scale","source","target","steps","setInteraction","getSavedData","key","as","getStudent","localcache","interactions","objectives","getCache","Initialize","scorm_version","GetValue","toLocaleString","varvalue_count","varvalue","SetValue","Commit","Terminate","GetLastError","GetDiagnostic","GetErrorString","initializeCommunication","terminateCommunication","storeDataValue","LMSInitialize","LMSGetValue","LMSSetValue","LMSCommit","LMSFinish","LMSGetLastError","LMSGetDiagnostic","LMSGetErrorString"],"mappings":"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"}