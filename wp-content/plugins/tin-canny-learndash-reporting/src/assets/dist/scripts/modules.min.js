var tincannyModuleController=function(){var s=this;this.count={},this.completion={},this.bound=!1,this.hasCompletionSetting=!1,this.markCompleteSettings="",this.markCompleteLesson=0,this.markCompleteCourse=0,this.markCompleteLabel="",this.currentLessonLink="",this.methodMarkCompleteForTincan="new",s.iframe_interval=!1;var r=new tincannyModuleFunctions(this);this.ready=function(){this.iFrameReady(),this.lightboxReady(),this.newWindowReady(),this.setButton(!1),r.checkH5PCompletiton(),jQuery(document).on("learndash-time-finished",".learndash_mark_complete_button",function(){moduleController&&"yes"==moduleController.markCompleteSettings&&(jQuery(".learndash_mark_complete_button").attr("disabled","disabled"),jQuery(".learndash_mark_complete_button").addClass("disabled"))})},this.setButton=function(t){if(jQuery("form[id=sfwd-mark-complete]").css("display","block"),jQuery(".sfwd-mark-complete").css("display","block"),jQuery(".tclr-mark-complete-button").css("display","block").addClass("tclr-mark-complete-button--visible"),"remove"===this.markCompleteSettings||"autoadvance"===this.markCompleteSettings)return jQuery("form[id=sfwd-mark-complete]").remove(),void jQuery(".sfwd-mark-complete").remove();var e=!0,i=!1;Object.keys(this.count).forEach(function(t){void 0!==s.count[t]&&(e=!1)}),Object.keys(s.count).forEach(function(t){0<s.count[t]&&0<Object.keys(s.completion[t]).length&&(i=!0)}),e?(jQuery("#sfwd-mark-complete input").prop("disabled",!1),jQuery("#sfwd-mark-complete input").removeClass("disabled"),jQuery(".sfwd-mark-complete input").removeAttr("disabled"),jQuery(".sfwd-mark-complete input").removeClass("disabled"),"hide"==this.markCompleteSettings&&jQuery(".tclr-mark-complete-button").css("display","block").addClass("tclr-mark-complete-button--visible")):i?(jQuery("#sfwd-mark-complete input").prop("disabled",!1),jQuery("#sfwd-mark-complete input").removeClass("disabled"),jQuery(".sfwd-mark-complete input").prop("disabled",!1),jQuery(".sfwd-mark-complete input").removeClass("disabled"),"hide"==this.markCompleteSettings&&jQuery(".tclr-mark-complete-button").css("display","block").addClass("tclr-mark-complete-button--visible"),tinCanny.doAction("after_tincanny_insert_list")):(jQuery("#sfwd-mark-complete input").prop("disabled",!0),jQuery("#sfwd-mark-complete input").addClass("disabled"),jQuery(".sfwd-mark-complete input").prop("disabled",!0),jQuery(".sfwd-mark-complete input").addClass("disabled"),"hide"==this.markCompleteSettings&&jQuery(".tclr-mark-complete-button").css("display","none").removeClass("tclr-mark-complete-button--visible"))},this.iFrameReady=function(){jQuery(".AnC-iFrame").bind("ready load",function(){r.checkStatues(jQuery(this)[0].contentWindow,"iFrame")})},this.lightboxReady=function(){jQuery("body").bind("DOMSubtreeModified",function(){jQuery(".nivo-lightbox-item").bind("load",function(){var t=jQuery(this)[0].src;jQuery(this).attr("data-tcloaded")||(r.checkStatues(jQuery(this)[0].contentWindow,"lightbox"),jQuery(this).attr("data-tcloaded",!0)),jQuery(jQuery(this)[0].contentWindow).on("unload",function(){s.checkCompletion(t,"Authorization=LearnDashIdstateId=")})})})},this.newWindowReady=function(){var e=function(t){s.bound||(t.document.getElementsByTagName("meta")&&t.document.URL&&-1!=t.document.URL.indexOf("uncanny-snc")?r.checkStatues(t,"blank"):setTimeout(function(){e(t)},500))};jQuery(".AnC-Link").click(function(t){"_blank"==jQuery(this).attr("target")&&(t.preventDefault(),t=jQuery(this).attr("href"),window.popup&&window.popup.close(),window.popup=open(t,"AnC"),jQuery(window.popup.document).ready(function(){s.bound=!1,setTimeout(function(){e(window.popup)},5e3)}),window.onbeforeunload=function(t){window.popup&&window.popup.close()},(0<=window.navigator.userAgent.indexOf("Edge")||0<=window.navigator.userAgent.indexOf("MSIE")||0<=window.navigator.userAgent.indexOf("Trident"))&&setTimeout(function(){window.popup.onbeforeunload=function(){location.reload()}},1500))})},this.replaceRequest=function(t,e,i){},this.replaceRequest=function(t,l,e){var i;"old"==this.methodMarkCompleteForTincan?(t.XMLHttpRequest.prototype.oldSend=t.XMLHttpRequest.prototype.send,t.XMLHttpRequest.prototype.send=i=function(t){this.oldSend(t);try{s.checkCompletion(l,t)}catch(t){}}):(t.XMLHttpRequest.prototype.oldSend=t.XMLHttpRequest.prototype.send,i=function(n){this.oldSend(n);try{var o=this.onreadystatechange,a=this;function t(){if(o&&o(),4==a.readyState){var t=r.getContentType(l),e=!0,i=/\/uncanny-snc\/([0-9]+)\//.exec(l),i=parseInt(i[1]);return a.response?(-1!=a.response.toString().indexOf("completion_matched")||-1!=a.response.toString().indexOf("189c3d30-COMP-491a-85ab-1f00c84e651f"))&&((-1<=n.indexOf("Authorization=LearnDashId")&&-1<=n.indexOf("stateId=")||"object"==typeof JSON.parse(n))&&(e=!1),void((e=s.completion[t][i]?!0:e)||("autoadvance"===s.markCompleteSettings&&(response=JSON.parse(a.response),void 0!==response.redirect_to?window.location.href=response.redirect_to:window.location.reload()),s.markComplete(t,l)))):!1}}this.noIntercept||(this.addEventListener?(o=null,this.addEventListener("readystatechange",t,!1)):(o=this.onreadystatechange,this.onreadystatechange=t))}catch(t){}},t.XMLHttpRequest.prototype.send=i)},this.checkCompletion=function(e,t){var i=r.getContentType(e),n=!0,o=/\/uncanny-snc\/([0-9]+)\//.exec(e),o=parseInt(o[1]);(-1<=t.indexOf("Authorization=LearnDashId")&&-1<=t.indexOf("stateId=")||"object"==typeof JSON.parse(t))&&(n=!1),(n=s.completion[i][o]?!0:n)||(n={action:"Check "+i+" Completion",URL:e,course_id:this.markCompleteCourse,lesson_id:this.markCompleteLesson,setting_option:this.markCompleteSettings,lesson_link:this.currentLessonLink,contentType:i},jQuery.post(wp_ajax_url,n,function(t){t&&("autoadvance"===s.markCompleteSettings&&(t=JSON.parse(t),window.location.href=t.redirect_to),s.markComplete(i,e))}))},this.markComplete=function(t,e){e=/uncanny-snc\/([0-9]+)\//i.exec(e);e[1]&&(this.completion[t][e[1]]=!0,this.setButton(!0),s.markCompleted(t))},this.markCompleted=function(t){"remove"!==this.markCompleteSettings&&"autoadvance"!==this.markCompleteSettings||(t={action:"uncanny-snc-mark-completed",course_id:this.markCompleteCourse,lesson_id:this.markCompleteLesson,setting_option:this.markCompleteSettings,lesson_link:this.currentLessonLink,contentType:t},jQuery.post(wp_ajax_url,t,function(t){t&&void 0!==t.redirect_to&&(window.location.href=t.redirect_to)},"json"))}},tincannyModuleFunctions=function(moduleController){var $this=this,captivateFunctions=new tincannyCaptivateFunctions,storylineFunctions=new tincannyStorylineFunctions(moduleController);this.checkStatues=function(e,t){var i=e.document.URL,n=this.getContentType(i);"Captivate"!==n?"iSpring"!==n?"ArticulateRise"!==n?"Presenter360"!==n?"Lectora"!==n?"Scorm"!==n?"Tincan"!==n?e.OnSendComplete?e.OnSendComplete=function(t){storylineFunctions.OnSendComplete(e,t)}:moduleController.replaceRequest(e,i,"Storyline"):moduleController.replaceRequest(e,i,"Tincan"):moduleController.replaceRequest(e,i,"Scorm"):moduleController.replaceRequest(e,i,"Lectora"):moduleController.replaceRequest(e,i,"Presenter360"):moduleController.replaceRequest(e,i,"ArticulateRise"):moduleController.replaceRequest(e,i,"iSpring"):this.processCaptivate(e,i,t)},this.getContentType=function(t){return 0<=t.indexOf("Captivate")?"Captivate":0<=t.indexOf("/res/")?"iSpring":0<=t.indexOf("ArticulateRise")?"ArticulateRise":0<=t.indexOf("ArticulateRise2017")||0<=t.indexOf("AR2017")?"ArticulateRise2017":0<=t.indexOf("Presenter360")?"Presenter360":0<=t.indexOf("Lectora")?"Lectora":0<=t.indexOf("Scorm")?"Scorm":0<=t.indexOf("Tincan")?"Tincan":"Storyline"},this.processCaptivate=function(t,e,i){var n;0<=e.indexOf("multiscreen.html")?((n=jQuery(t.document)[0].getElementsByTagName("frame")[0]).contentWindow.DoCPExit&&(moduleController.replaceRequest(n.contentWindow,e,"Captivate"),n.contentWindow.DoCPExit=function(){captivateFunctions.DoCPExit(window,i)}),jQuery(n).on("load ready",function(){moduleController.replaceRequest(jQuery(this)[0].contentWindow,e,"Captivate"),jQuery(this)[0].contentWindow.DoCPExit=function(){captivateFunctions.DoCPExit(window,i)}})):0<=e.indexOf("index_TINCAN.html")?(moduleController.replaceRequest(t,e,"Captivate"),t.initializeCP=function(){captivateFunctions.initializeCP(window,t)}):(n=jQuery(t),jQuery(n).ready(function(){moduleController.replaceRequest(t,e,"Captivate"),t.DoCPExit=function(){captivateFunctions.DoCPExit(window,i)}}))},this.checkH5PCompletiton=function(){!moduleController||!moduleController.count||moduleController.count.H5P<=0||jQuery(document).ajaxComplete(function(event,xhr,settings){if(settings.url===WP_H5P_XAPI_STATEMENT_URL){var verb=settings.data.match(/http%3A%2F%2Fadlnet.gov%2Fexpapi%2Fverbs%2F([a-z]+)/);eval(unescape(settings.data));var id=statement.object.definition.extensions["http://h5p.org/x-api/h5p-local-content-id"];if(!moduleController.hasCompletionSetting)return moduleController.completion.H5P[id]=!0,moduleController.setButton(!0),void moduleController.markCompleted("H5P");"true"==xhr.responseJSON.message&&(moduleController.completion.H5P[id]=!0,moduleController.setButton(!0),moduleController.markCompleted("H5P"))}})}},tincannyCaptivateFunctions=function(){var n=this;this.initializeCP=function(t,e){e.initialized||(e.initCalled=!0,e.cp&&e.cp.pg&&!1===e.deviceReady||(e.cpInit=function(){e.document.body.innerHTML=" <div class='cpMainContainer' id='cpDocument' style='left: 0px; top:0px;' >\t<div id='main_container' style='top:0px;position:absolute;width:100%;height:100%;'>\t<div id='projectBorder' style='top:0px;left:0px;width:100%;height:100%;position:absolute;display:block'></div>\t<div class='shadow' id='project_container' style='left: 0px; top:0px;width:100%;height:100%;position:absolute;overflow:hidden;' >\t<div id='project' class='cp-movie' style='width:100% ;height:100%;overflow:hidden;'>\t\t<div id='project_main' class='cp-timeline cp-main'>\t\t\t<div id='div_Slide' onclick='cp.handleClick(event)' style='top:0px; width:100% ;height:100% ;position:absolute;-webkit-tap-highlight-color: rgba(0,0,0,0);'></div>\t\t\t<canvas id='slide_transition_canvas'></canvas>\t\t</div>\t\t<div id='autoplayDiv' style='display:block;text-align:center;position:absolute;left:0px;top:0px;'>\t\t\t<img id='autoplayImage' src='' style='position:absolute;display:block;vertical-align:middle;'/>\t\t\t<div id='playImage' tabindex='9999' role='button' aria-label='play' onkeydown='cp.CPPlayButtonHandle(event)' onClick='cp.movie.play()' style='position:absolute;display:block;vertical-align:middle;'></div>\t\t</div>\t</div>\t<div id='toc' style='left:0px;position:absolute;-webkit-tap-highlight-color: rgba(0,0,0,0);'>\t</div>\t<div id='playbar' style='bottom:0px; position:fixed'>\t</div>\t<div id='cc' style='left:0px; position:fixed;visibility:hidden;pointer-events:none;' onclick='cp.handleCCClick(event)'>\t\t<div id='ccText' style='left:0px;float:left;position:absolute;width:100%;height:100%;'>\t\t<p style='margin-left:8px;margin-right:8px;margin-top:2px;'>\t\t</p>\t\t</div>\t\t<div id='ccClose' style='background-image:url(./assets/htmlimages/ccClose.png);right:10px; position:absolute;cursor:pointer;width:13px;height:11px;' onclick='cp.showHideCC()'>\t\t</div>\t</div>\t<div id='gestureIcon' class='gestureIcon'>\t</div>\t<div id='gestureHint' class='gestureHintDiv'>\t\t<div id='gImage' class='gesturesHint'></div>\t</div>\t<div id='pwdv' style='display:block;text-align:center;position:absolute;width:100%;height:100%;left:0px;top:0px'></div>\t<div id='exdv' style='display:block;text-align:center;position:absolute;width:100%;height:100%;left:0px;top:0px'></div>\t</div>\t</div></div><div id='blockUserInteraction' class='blocker' style='width:100%;height:100%;'>\t<table style='width:100%;height:100%;text-align:center;vertical-align:middle' id='loading' class='loadingBackground'>\t\t<tr style='width:100%;height:100%;text-align:center;vertical-align:middle'>\t\t\t<td style='width:100%;height:100%;text-align:center;vertical-align:middle'>\t\t\t\t<image id='preloaderImage'></image>\t\t\t\t<div id='loadingString' class='loadingString'>Loading...</div>\t\t\t</td>\t\t</tr>\t</table></div> <div id='initialLoading'></div>",e.cp.DoCPInit(),e.lCpExit=e.DoCPExit,targetWinDoCPExit=function(){"iFrame"!=openMethod&&("lightbox"!=openMethod?(e.cp.UnloadActivties&&e.cp.UnloadActivties(),e.lCpExit()):n.closeOverlay(t))}},e.cpInit(),e.initialized=!0))},this.DoCPExit=function(t,e){var i;"iFrame"!=e&&(t!=t.parent&&t.parent&&void 0!==t.parent.DoCPExit?t.parent.DoCPExit():t.top==self?(i=t.open("","_self"),n.closeWindow(i,e)):(i=t.top.open("","_self"),n.closeWindow(i.top,e)))},this.closeWindow=function(t,e){"lightbox"!=e?(window.popup||t).close():n.closeOverlay(t)},this.closeOverlay=function(t){for(var e=t.document.getElementsByClassName("nivo-lightbox-overlay");0<e.length;)e[0].parentNode.removeChild(e[0])}},tincannyStorylineFunctions=function(i){this.OnSendComplete=function(t,e){e.MessageType==t.TYPE_RESUME_RESTORE&&t.GetPlayer().SetTinCanResume(e.responseText),t.g_bWaitingTinCanResponse=!1,t.g_oCurrentRequest=null,0<t.g_arrTinCanMsgQueue.length&&!t.g_bStopPosting&&t.SendRequest(t.g_arrTinCanMsgQueue.shift()),i.checkCompletion(jQuery(t.document).context.URL,e.responseText)}},moduleController=new tincannyModuleController;
//# sourceMappingURL=modules.min.js.map
