"use strict";function deleteSncFromTableContent(t,e){var a;confirm("Do you really want to delete this?")&&(a={action:"SnC_Content_Delete",item_id:t,mode:e,security:jQuery('#snc-content_library_wrap input[name="security"]').val()},jQuery.post(ajaxurl,a,()=>{"media library"===e||"vc"===e?jQuery('#snc-content_library_wrap table tr[data-item_id="'.concat(t,'"]')).remove():location.reload()}))}function deleteSncFromTable(t,e){var a;confirm("Do you really want to delete this?")&&(a={action:"SnC_Media_Delete",item_id:t,mode:e,security:jQuery('form.snc-media_enbed_form input[name="security"]').val()},jQuery.post(ajaxurl,a,()=>{"media library"===e||"vc"===e?jQuery('#snc-content_library_wrap table tr[data-item_id="'.concat(t,'"]')).remove():location.reload()}))}function triggerUploadForm(i,a){var n=i("#snc-media_upload_file_form"),o=i("#snc-upload_button"),l=i("#snc-media_upload_file_wrap .progress"),c=i("#snc-progress_bar_wrapper"),r=i("#snc-progress_bar"),s=i("#snc-media_upload_message"),d=!0;function _(t){var e=c.width();r.width(t<10?e/100*10:e/100*t),r.html("".concat(t,"%"))}function u(){d=!0,l.hide(),o.show()}function m(t){s.attr("class","error"),s.show(),s.html("<p>".concat(t,"</p>"))}function p(t){var e;e=t.message,s.attr("class","updated"),s.show(),s.html("<p>".concat(e,"</p>")),i("#snc-media_upload_file_wrap").hide(),0<i("#snc-media_upload_file_wrap #no_tab").length&&(0<i("#snc-media_upload_file_wrap #no_refresh").length?self.parent.tb_remove():window.parent.location=window.parent.location.href),a?(i("#vc_properties-panel .vc-snc-trigger input").attr("value",t.id),i("#vc_properties-panel .vc-snc-name input").attr("value",t.title),trigger_vc_snc_mode()):(i(".snc-embed_information").show(),i("a.delete-media").attr("data-item_id",t.id),i("input#item_id").attr("value",t.id),i("input#item_title").attr("value",t.title))}i(".file_upload_button").click(function(t){t.preventDefault();t=i(this).attr("data-id");s.hide(),d&&i('input[type="file"][data-id="'.concat(t,'"]')).click()}),i("#snc-media_upload_file").change(function(){d=!1,l.width(n.width()),l.show(),o.hide();var t=this.files[0],e=t.name.split(".").pop().trim().toLowerCase();!function(t,e){for(var a=!1,i=0;i<e.length;i+=1)if(e[i]===t)return a=!0,1;return a}(e,["zip"])?(m("Only .zip Files are Allowed."),u()):t.size>i("#snc-max_file_size").val()?(m("File is too large to upload."),u()):(i("#snc-extension").val(e),n.submit())}),n.ajaxForm({beforeSubmit:()=>{_(0)},uploadProgress:(t,e,a,i)=>{_(i)},success:t=>{var e,a,t=JSON.parse(t);"error"===t.id?m(t.message):"not_supported"===t.id?(e=t,s.attr("class","uo-tclr-admin-upload-outside-container"),s.show(),a='<div class="uo-tclr-admin"><div class="uo-tclr-bubble uo-tclr-bubble--upload"><div class="uo-tclr-warning uo-tclr-warning--with-icon">Unable to read .zip file. Please re-zip your file and upload it again.</div><div class="uo-tclr-bubble__content"><p>Please note that any xAPI/SCORM statements sent by this module:</p><ul><li>will not be recorded</li><li>may display errors because the module cannot communicate with an LMS or LRS</li></ul><p>To use this module anyway, select the .html file that launches the module using the file browser below:</p></div><div class="uo-tclr-file-manager">',a=(a=(a=(a+='<ul class="file-selector">')+function e(a){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"";var n="";Object.keys(a).map(t=>("object"==typeof a[t]?n=(n=(n+='<li class="structure-dir-btn" data-path="'.concat(i,"/").concat(t,'">').concat(t,"</li>"))+'<ul class="structure-dir-container" data-path="'.concat(i,"/").concat(t,'">'))+e(a[t],"".concat(i,"/").concat(t))+"</ul>":n+='<li class="file-selector" data-path="'.concat(i,"/").concat(a[t],'">').concat(a[t],"<li>"),!0));return n}(JSON.parse(e.structure)))+"</ul></div>")+'<button class="uo-tclr-btn-media uo-tclr-btn-media--cancel-upload">Cancel and Delete Upload</button></div></div>',s.html(a),i(".uo-tclr-btn-media--cancel-upload").click(()=>{location.reload()}),i(".structure-dir-btn").click(t=>{i(t.currentTarget).toggleClass("open");t=i(t.currentTarget).attr("data-path");i('.structure-dir-container[data-path="'.concat(t,'"]')).show()}),i(".file-selector").click(t=>{var t=i(t.currentTarget).attr("data-path");t&&("/"===t.charAt(0)&&(t=t.slice(1)),t={action:"SnC_Link_File_Path",security:e.nonce,filePath:t,title:e.title},jQuery.post(e.ajaxPath,t,t=>{p(JSON.parse(t)),u()}))})):p(t),u()}})}jQuery(document).ready(a=>{var t="#snc-content_library_wrap table";a("".concat(t," a.content_title, ").concat(t," a.show")).click(function(t){t.preventDefault();var e=a(this).attr("data-item_id");a(".embed_information").each(function(){var t=a(this).attr("data-item_id");e!==t?a(this).hide():a(this).toggle()})})}),jQuery(document).ready(i=>{i("#snc-content_library_wrap table a.delete").click(function(t){t.preventDefault();t=i("#snc-content_library_wrap").length?"media library":"upload form";deleteSncFromTableContent(i(this).attr("data-item_id"),t)});var a="";i("#snc-content_library_wrap table a.snc_replace_confirm").click(function(t){t.preventDefault();t=i(this).data("item_id");i("#snc-delete-book-only").data("item_id",t),i("#snc-delete-all-data").data("item_id",t),i("#replace_placeholder").attr("href","media-upload.php?content_id="+t+"&type=snc&tab=upload&min-height=400&no_tab=1&TB_iframe=true").attr("data-item_id",t)}),i(".tclr-replace-content__task-btn").on("click",function(){var t=i(this).data("task");i(".tclr-replace-content__step-1").hide(),i(".tclr-replace-content__step-2").show(),i("#bookmark-confirmation, #all-confirmation").hide(),"remove-bookmark"===t?i("#bookmark-confirmation").show():"remove-all-data"===t&&i("#all-confirmation").show()}),i(".tclr-replace-content__cancel-2-step-btn").on("click",function(){i("#bookmark-confirmation, #all-confirmation").hide(),i(".tclr-replace-content__step-1").show(),i(".tclr-replace-content__step-2").hide()}),i("#snc-delete-book-only").click(function(){var t=i(this),e=(a=i(this).data("item_id"),t.addClass("tclr-btn--loading"),i("#snc-content_library_wrap").length?"media library":"upload form"),e={action:"SnC_Content_Bookmark_Delete",item_id:a,mode:e,security:i('#snc-content_library_wrap input[name="security"]').val()};i.post(ajaxurl,e).done(function(){t.removeClass("tclr-btn--loading"),i(".tclr-replace-content__step-1").show(),i(".tclr-replace-content__step-2").hide(),i("#TB_closeWindowButton").trigger("click"),setTimeout(function(){i("#replace_placeholder").trigger("click")},1e3)})}),i("#snc-delete-all-data").click(function(){var t=i(this),e=(a=i(this).data("item_id"),t.addClass("tclr-btn--loading"),i("#snc-content_library_wrap").length?"media library":"upload form"),e={action:"SnC_Content_Delete_All",item_id:a,mode:e,security:i('#snc-content_library_wrap input[name="security"]').val()};i.post(ajaxurl,e).done(function(){t.removeClass("tclr-btn--loading"),i(".tclr-replace-content__step-1").show(),i(".tclr-replace-content__step-2").hide(),i("#TB_closeWindowButton").trigger("click"),setTimeout(function(){i("#replace_placeholder").trigger("click")},1e3)})}),{init:function(){this.getElements(),this.getData(),this.initFuse(),this.listenSearchField()},getElements:function(){this.$elements={searchField:i("#tclr-classic-editor-content-library-search"),tableContainer:i(".tclr-classic-editor-content-library__list"),tableItems:i(".tclr-classic-editor-content-library__list tbody tr.tclr-classic-editor-content-library__item")}},getData:function(){var a=[];i.each(this.$elements.tableItems,function(t,e){e=i(e),e={title:e.data("item_name"),$element:e};a.push(e)}),this.items=a},initFuse:function(){this.Fuse=new Fuse(this.items,{keys:["title"],threshold:0,ignoreLocation:!0})},listenSearchField:function(){var e=this;this.$elements.searchField.on("input",function(){var t=e.$elements.searchField.val();""!==t?e.search(t):e.showAll()})},search:function(t){t=this.Fuse.search(t);this.$elements.tableContainer.addClass("tclr-classic-editor-content-library__list--search-mode"),this.$elements.tableItems.removeClass("tclr-classic-editor-content-library__item--visible"),0<t.length?(this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--no-results"),t.forEach(function(t){t.item.$element.addClass("tclr-classic-editor-content-library__item--visible")})):this.$elements.tableContainer.addClass("tclr-classic-editor-content-library__list--no-results")},showAll:function(){this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--search-mode"),this.$elements.tableItems.removeClass("tclr-classic-editor-content-library__item--visible"),this.$elements.tableContainer.removeClass("tclr-classic-editor-content-library__list--no-results")}}.init()}),jQuery(document).ready(a=>{a('.insert_type input[type="radio"]').click(function(){var t=a(this).attr("data-item_id");a('form[data-item_id="'.concat(t,'"] .options')).stop().slideUp(),a('form[data-item_id="'.concat(t,'"] .options[data-item_option="').concat(a(this).val(),'"]')).stop().slideDown()}),a('.lightbox_title input[type="radio"]').click(function(){var t=a(this).attr("data-item_id"),e=a(this).val();a('input.text_with_title[data-item_id="'.concat(t,'"]')).hide(),"With Title"===e&&a('input.text_with_title[data-item_id="'.concat(t,'"]')).show().focus()}),a('.lightbox_button input[type="radio"]').click(function(){var t=a(this).attr("data-item_id"),e=a(this).val();a('input.lightbox_button_text[data-item_id="'.concat(t,'"]')).hide(),a('div.lightbox_button_text[data-item_id="'.concat(t,'"]')).hide(),a('section.lightbox_button_custom[data-item_id="'.concat(t,'"]')).hide(),a('input.lightbox_button_url[data-item_id="'.concat(t,'"]')).hide(),"text"!==e&&"small"!==e&&"medium"!==e&&"large"!==e||(a('input.lightbox_button_text[data-item_id="'.concat(t,'"]')).show(),a('div.lightbox_button_text[data-item_id="'.concat(t,'"]')).show()),"url"===e&&a('input.lightbox_button_url[data-item_id="'.concat(t,'"]')).show(),"image"===e&&a('.lightbox_button_custom[data-item_id="'.concat(t,'"]')).show()}),a('.new_window_option input[type="radio"]').click(function(){var t=a(this).attr("data-item_id"),e=a(this).val();a('.new_window_option[data-item_id="'.concat(t,'"] input[type="text"]')).hide(),a('div._blank_button_text[data-item_id="'.concat(t,'"]')).hide(),a('.new_window_option[data-item_id="'.concat(t,'"] .file_upload_button')).hide(),"text"!==e&&"small"!==e&&"medium"!==e&&"large"!==e||(a('.new_window_option[data-item_id="'.concat(t,'"] input._blank_text')).show(),a('div._blank_button_text[data-item_id="'.concat(t,'"]')).show()),"image"===e&&a('.new_window_option[data-item_id="'.concat(t,'"] .file_upload_button')).show(),"url"===e&&a('.new_window_option[data-item_id="'.concat(t,'"] input._blank_url')).show()}),a('.same_window_option input[type="radio"]').click(function(){var t=a(this).attr("data-item_id"),e=a(this).val();a('.same_window_option[data-item_id="'.concat(t,'"] input[type="text"]')).hide(),a('div._self_button_text[data-item_id="'.concat(t,'"]')).hide(),a('.same_window_option[data-item_id="'.concat(t,'"] .file_upload_button')).hide(),"text"!==e&&"small"!==e&&"medium"!==e&&"large"!==e||(a('.same_window_option[data-item_id="'.concat(t,'"] input._self_text')).show(),a('div._self_button_text[data-item_id="'.concat(t,'"]')).show()),"image"===e&&a('.same_window_option[data-item_id="'.concat(t,'"] .file_upload_button')).show(),"url"===e&&a('.same_window_option[data-item_id="'.concat(t,'"] input._self_url')).show()}),a("form.snc-media_enbed_form .delete-media, #snc-content_library_wrap table span a.delete").click(function(t){t.preventDefault();t=a("#snc-content_library_wrap").length?"media library":"upload form";deleteSncFromTable(a(this).attr("data-item_id"),t)})}),jQuery(document).ready(t=>{t(".snc-media_enbed_form").ajaxForm({success:t=>{t=JSON.parse(t);(window.dialogArguments||opener||parent||top).send_to_editor(t.shortcode)}})}),jQuery(document).ready(t=>{triggerUploadForm(t)});
//# sourceMappingURL=admin.min.js.map
