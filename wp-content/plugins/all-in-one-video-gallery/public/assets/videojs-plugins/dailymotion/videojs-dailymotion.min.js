/*! @name @Plugins360/videojs-dailymotion @version 2.0.0 @license Apache-2.0 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).videojsDailymotion=t(e.videojs)}(this,(function(e){"use strict";function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=t(e);function o(e,t,i){return e(i={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&i.path)}},i.exports),i.exports}var a,n,r,s,l,d,u,c,y=o((function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0})),h=o((function(e){function t(i,o){return e.exports=t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,t(i,o)}e.exports=t,e.exports.default=e.exports,e.exports.__esModule=!0})),p=o((function(e){e.exports=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,h(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0})),m=i.default.getComponent("Tech"),f=i.default.browser.IS_IOS||i.default.browser.IS_NATIVE_ANDROID,g=function(e){function t(i,o){var a;return(a=e.call(this,i,o)||this).dailymotionState={state:"unstarted"},a.setPoster(i.poster),a.setSrc(a.options_.source),a.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-dailymotion",f&&(this.el_.parentNode.className+=" vjs-dailymotion-mobile"),t.isApiReady?this.initDailymotionPlayer():t.apiReadyQueue.push(this))}.bind(y(a))),a}p(t,e);var o=t.prototype;return o.dispose=function(){if(this.dailymotionPlayer)this.dailymotionPlayer.destroy&&this.dailymotionPlayer.destroy(this.options_.techId);else{var i=t.apiReadyQueue.indexOf(this);-1!==i&&t.apiReadyQueue.splice(i,1)}this.dailymotionPlayer=null,this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-dailymotion","").replace(" vjs-dailymotion-mobile",""),this.el_.parentNode.removeChild(this.el_),e.prototype.dispose.call(this)},o.createEl=function(){var e=document.createElement("div");e.setAttribute("id",this.options_.techId),e.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),e.setAttribute("class","vjs-tech");var t=document.createElement("div");if(t.appendChild(e),!f&&!this.options_.dailymotionControls){var i=document.createElement("div");i.setAttribute("class","vjs-iframe-blocker"),i.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),t.appendChild(i)}return t},o.initDailymotionPlayer=function(){var e={controls:!1,autoplay:!1,mute:!1,"ui-logo":!1,"ui-start-screen-info":!1,"sharing-enable":!1,"queue-autoplay-next":!1,"queue-enable":!1};if(void 0!==this.options_.dailymotionControls&&(e.controls=!!this.options_.dailymotionControls),void 0!==this.options_.muted&&(e.mute=!!this.options_.muted),void 0!==this.options_.start&&(e.start=this.options_.start),void 0!==this.options_.customVars){var t=this.options_.customVars;Object.keys(t).forEach((function(i){e[i]=t[i]}))}this.activeVideoId=this.url?this.url.videoId:null,this.dailymotionPlayer=new DM.player(this.options_.techId,{width:"100%",height:"100%",video:this.activeVideoId,params:e}),this.trigger("loadstart");for(var i=["apiready","play","playing","pause","end","waiting","progress","timeupdate","seeking","seeked","durationchange","volumechange","ad_start","ad_end","error"],o=this.onPlayerStateChange.bind(this),a=0;a<i.length;a++)this.dailymotionPlayer.addEventListener(i[a],o)},o.onPlayerReady=function(){this.isReady_=!0,this.triggerReady(),this.trigger("loadedmetadata"),this.trigger("loadeddata"),this.trigger("canplay"),this.trigger("canplaythrough"),this.trigger("volumechange"),this.playOnReady&&this.play()},o.onPlayerStateChange=function(e){var t=e.type;switch(this.lastState=t,t){case"apiready":this.dailymotionState.state="ready",this.onPlayerReady();break;case"play":this.dailymotionState.state="play",this.trigger("play");break;case"playing":this.dailymotionState.state="playing",this.trigger("playing");break;case"pause":this.dailymotionState.state="paused",this.trigger("pause");break;case"end":this.activeVideoId="",this.dailymotionState.state="ended",this.options_.loop||this.trigger("ended");break;case"waiting":this.dailymotionState.state="buffering",this.trigger("waiting");break;case"progress":this.trigger("progress");break;case"timeupdate":this.trigger("timeupdate");break;case"seeking":this.isSeeking=!0,this.trigger("seeking");break;case"seeked":this.isSeeking=!1,this.trigger("seeked");break;case"durationchange":this.trigger("durationchange");break;case"volumechange":this.trigger("volumechange");break;case"ad_start":this.el_.parentNode.className+=" vjs-dailymotion-ad-playing";break;case"ad_end":this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-dailymotion-ad-playing","");break;case"error":console.log(e)}},o.error=function(){return this.dailymotionPlayer&&this.dailymotionPlayer.error},o.poster=function(){return f?null:this.poster_},o.setPoster=function(e){this.poster_=e},o.loadVideoById_=function(e){this.dailymotionPlayer&&this.dailymotionPlayer.load(e)},o.cueVideoById_=function(e){this.dailymotionPlayer&&this.dailymotionPlayer.load(e)},o.src=function(e){return e&&this.setSrc({src:e}),this.source},o.setSrc=function(e){e&&e.src&&(this.source=e,this.url=t.parseUrl(e.src),this.options_.autoplay&&!f?this.isReady_?this.play():(this.trigger("waiting"),this.playOnReady=!0):this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},o.autoplay=function(){return this.options_.autoplay},o.setAutoplay=function(e){this.options_.autoplay=e},o.loop=function(){return this.options_.loop},o.setLoop=function(e){this.options_.loop=e},o.play=function(){this.url&&this.url.videoId&&(this.isReady_?this.activeVideoId===this.url.videoId?this.dailymotionPlayer.play():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):(this.trigger("waiting"),this.playOnReady=!0))},o.pause=function(){this.dailymotionPlayer&&this.dailymotionPlayer.pause()},o.paused=function(){return this.dailymotionPlayer&&this.dailymotionPlayer.paused},o.currentTime=function(){return this.dailymotionPlayer?this.dailymotionPlayer.currentTime:0},o.setCurrentTime=function(e){this.dailymotionPlayer&&this.dailymotionPlayer.seek(e)},o.seeking=function(){return this.isSeeking},o.seekable=function(){return this.dailymotionPlayer?i.default.createTimeRange(0,this.dailymotionPlayer.duration):i.default.createTimeRange()},o.playbackRate=function(){return 1},o.setPlaybackRate=function(e){},o.duration=function(){return this.dailymotionPlayer?this.dailymotionPlayer.duration:0},o.currentSrc=function(){return this.source&&this.source.src},o.ended=function(){return this.dailymotionPlayer&&this.dailymotionPlayer.ended},o.volume=function(){return this.dailymotionPlayer?this.dailymotionPlayer.volume:1},o.setVolume=function(e){this.dailymotionPlayer&&this.dailymotionPlayer.setVolume(e)},o.muted=function(){return!!this.dailymotionPlayer&&this.dailymotionPlayer.muted},o.setMuted=function(e){this.dailymotionPlayer&&this.dailymotionPlayer.setMuted(e)},o.buffered=function(){return this.dailymotionPlayer?i.default.createTimeRange(0,this.dailymotionPlayer.bufferedTime):i.default.createTimeRange()},o.supportsFullScreen=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},o.networkState=function(){if(!this.dailymotionPlayer)return 0;switch(this.dailymotionState.state){case"unstarted":return 0;case"buffering":return 2;default:return 1}},o.readyState=function(){if(!this.dailymotionPlayer)return 0;switch(this.dailymotionState.state){case"unstarted":return 0;case"ready":return 1;case"buffering":return 2;default:return 4}},t}(m);return g.prototype.featuresTimeupdateEvents=!0,g.isSupported=function(){return!0},g.parseUrl=function(e){var t={videoId:null},i=e.match(/^.+dailymotion.com\/((video|hub)\/([^_]+))?[^#]*(#video=([^_&]+))?/);return i&&(t.videoId=i[5]||i[3]),t},m.withSourceHandlers(g),g.nativeSourceHandler={},g.nativeSourceHandler.canPlayType=function(e){return"video/dailymotion"===e?"maybe":""},g.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return g.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=/dailymotion.com/.test(e.src)?"video/dailymotion":"";return g.nativeSourceHandler.canPlayType(i)}return""},g.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},g.nativeSourceHandler.dispose=function(){},g.registerSourceHandler(g.nativeSourceHandler),g.apiReadyQueue=[],"undefined"!=typeof document&&(s="https://api.dmcdn.net/all.js",l=function(){DM.init({apiKey:null,status:!0,cookie:!0}),g.isApiReady=!0;for(var e=0;e<g.apiReadyQueue.length;++e)g.apiReadyQueue[e].initDailymotionPlayer()},d=!1,u=document.createElement("script"),(c=document.getElementsByTagName("script")[0]).parentNode.insertBefore(u,c),u.onload=function(){d||(d=!0,l())},u.onreadystatechange=function(){d||"complete"!==this.readyState&&"loaded"!==this.readyState||(d=!0,l())},u.src=s,a=".vjs-dailymotion iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }.vjs-dailymotion .vjs-iframe-blocker { display: none; }.vjs-dailymotion.vjs-has-started .vjs-iframe-blocker { display: block; }.vjs-dailymotion .vjs-poster { background-size: cover; }.vjs-dailymotion-ad-playing .vjs-iframe-blocker, .vjs-dailymotion-ad-playing .vjs-poster, .vjs-dailymotion-ad-playing .vjs-big-play-button, .vjs-dailymotion-ad-playing .vjs-share, .vjs-dailymotion-ad-playing .vjs-logo, .vjs-dailymotion-ad-playing .vjs-text-track-display, .vjs-dailymotion-ad-playing .vjs-control-bar { display: none !important; }",n=document.head||document.getElementsByTagName("head")[0],(r=document.createElement("style")).type="text/css",r.styleSheet?r.styleSheet.cssText=a:r.appendChild(document.createTextNode(a)),n.appendChild(r)),g.VERSION="2.0.0",m.registerTech("Dailymotion",g),g}));
