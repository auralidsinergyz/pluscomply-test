(()=>{var e={184:(e,o)=>{var l;!function(){"use strict";var t={}.hasOwnProperty;function n(){for(var e=[],o=0;o<arguments.length;o++){var l=arguments[o];if(l){var a=typeof l;if("string"===a||"number"===a)e.push(l);else if(Array.isArray(l)){if(l.length){var r=n.apply(null,l);r&&e.push(r)}}else if("object"===a){if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]")){e.push(l.toString());continue}for(var i in l)t.call(l,i)&&l[i]&&e.push(i)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(l=function(){return n}.apply(o,[]))||(e.exports=l)}()}},o={};function l(t){var n=o[t];if(void 0!==n)return n.exports;var a=o[t]={exports:{}};return e[t](a,a.exports,l),a.exports}l.n=e=>{var o=e&&e.__esModule?()=>e.default:()=>e;return l.d(o,{a:o}),o},l.d=(e,o)=>{for(var t in o)l.o(o,t)&&!l.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},l.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o),(()=>{"use strict";const e=window.wp.blocks,o=window.wp.element,t=window.wp.serverSideRender;var n=l.n(t),a=l(184),r=l.n(a);const i=window.wp.blob,c=window.wp.blockEditor,s=window.wp.components,d=window.wp.compose,u=window.wp.data,p=window.wp.primitives,g=(0,o.createElement)(p.SVG,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,o.createElement)(p.Path,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"})),v=window.wp.notices,b=["video"],m=["image"];(0,e.registerBlockType)("aiovg/video",{attributes:{src:{type:"string"},id:{type:"number"},poster:{type:"string"},width:{type:"number",default:aiovg_blocks.video.width},ratio:{type:"number",default:aiovg_blocks.video.ratio},autoplay:{type:"boolean",default:aiovg_blocks.video.autoplay},loop:{type:"boolean",default:aiovg_blocks.video.loop},muted:{type:"boolean",default:aiovg_blocks.video.muted},playpause:{type:"boolean",default:aiovg_blocks.video.playpause},current:{type:"boolean",default:aiovg_blocks.video.current},progress:{type:"boolean",default:aiovg_blocks.video.progress},duration:{type:"boolean",default:aiovg_blocks.video.duration},speed:{type:"boolean",default:aiovg_blocks.video.speed},quality:{type:"boolean",default:aiovg_blocks.video.quality},volume:{type:"boolean",default:aiovg_blocks.video.volume},fullscreen:{type:"boolean",default:aiovg_blocks.video.fullscreen},share:{type:"boolean",default:aiovg_blocks.video.share},embed:{type:"boolean",default:aiovg_blocks.video.embed},download:{type:"boolean",default:aiovg_blocks.video.download}},edit:function e(l){let{attributes:t,className:a,setAttributes:p}=l;const w=(0,d.useInstanceId)(e),k=(0,o.useRef)(),h=(0,o.useRef)(),{src:E,id:y,poster:f,width:_,ratio:C,autoplay:R,loop:P,muted:T,playpause:S,current:B,progress:x,duration:N,speed:U,quality:L,volume:M,fullscreen:j,share:q,embed:I,download:O}=t,V=!y&&(0,i.isBlobURL)(E),z=(0,u.useSelect)((e=>e(c.store).getSettings().mediaUpload),[]);function A(e){e&&e.url?p({src:e.url,id:e.id,poster:e.image?.src!==e.icon?e.image?.src:void 0}):p({src:void 0,id:void 0,poster:void 0})}function F(e){e!==E&&p({src:e,id:void 0,poster:void 0})}(0,o.useEffect)((()=>{if(V){const e=(0,i.getBlobByURL)(E);e&&z({filesList:[e],onFileChange:e=>{let[o]=e;return A(o)},onError:H,allowedTypes:b})}}),[]),(0,o.useEffect)((()=>{k.current&&k.current.load()}),[f]);const{createErrorNotice:D}=(0,u.useDispatch)(v.store);function H(e){D(e,{type:"snackbar"})}const G=r()(a,{"is-transient":V}),$=(0,c.useBlockProps)({className:G});if(!E)return(0,o.createElement)("div",$,(0,o.createElement)(c.MediaPlaceholder,{icon:(0,o.createElement)(c.BlockIcon,{icon:g}),onSelect:A,onSelectURL:F,accept:"video/*",allowedTypes:b,value:t,onError:H}));const J=`video-block__poster-image-description-${w}`;return(0,o.createElement)(o.Fragment,null,(0,o.createElement)(c.BlockControls,null,(0,o.createElement)(c.MediaReplaceFlow,{mediaId:y,mediaURL:E,allowedTypes:b,accept:"video/*",onSelect:A,onSelectURL:F,onError:H})),(0,o.createElement)(c.InspectorControls,null,(0,o.createElement)(s.PanelBody,{title:aiovg_blocks.i18n.general_settings},(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.TextControl,{label:aiovg_blocks.i18n.width,help:aiovg_blocks.i18n.width_help,value:_>0?_:"",onChange:e=>p({width:isNaN(e)?0:e})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.TextControl,{label:aiovg_blocks.i18n.ratio,help:aiovg_blocks.i18n.ratio_help,value:C>0?C:"",onChange:e=>p({ratio:isNaN(e)?0:e})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(c.MediaUploadCheck,null,(0,o.createElement)(s.BaseControl,{className:"editor-video-poster-control"},(0,o.createElement)(s.BaseControl.VisualLabel,null,aiovg_blocks.i18n.poster_image),(0,o.createElement)(c.MediaUpload,{title:aiovg_blocks.i18n.select_image,onSelect:function(e){p({poster:e.url})},allowedTypes:m,render:e=>{let{open:l}=e;return(0,o.createElement)(s.Button,{variant:"primary",onClick:l,ref:h,"aria-describedby":J},f?aiovg_blocks.i18n.replace_image:aiovg_blocks.i18n.select_image)}}),(0,o.createElement)("p",{id:J,hidden:!0},f?sprintf("The current poster image url is %s",f):"There is no poster image currently selected"),!!f&&(0,o.createElement)(s.Button,{onClick:function(){p({poster:void 0}),h.current.focus()},variant:"tertiary"},aiovg_blocks.i18n.remove_image)))),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.autoplay,checked:R,onChange:()=>p({autoplay:!R})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.loop,checked:P,onChange:()=>p({loop:!P})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.muted,checked:T,onChange:()=>p({muted:!T})}))),(0,o.createElement)(s.PanelBody,{title:aiovg_blocks.i18n.player_controls},(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.play_pause,checked:S,onChange:()=>p({playpause:!S})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.current_time,checked:B,onChange:()=>p({current:!B})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.progressbar,checked:x,onChange:()=>p({progress:!x})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.duration,checked:N,onChange:()=>p({duration:!N})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.speed,checked:U,onChange:()=>p({speed:!U})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.quality,checked:L,onChange:()=>p({quality:!L})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.volume,checked:M,onChange:()=>p({volume:!M})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.fullscreen,checked:j,onChange:()=>p({fullscreen:!j})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.share,checked:q,onChange:()=>p({share:!q})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.embed,checked:I,onChange:()=>p({embed:!I})})),(0,o.createElement)(s.PanelRow,null,(0,o.createElement)(s.ToggleControl,{label:aiovg_blocks.i18n.download,checked:O,onChange:()=>p({download:!O})})))),(0,o.createElement)("div",$,(0,o.createElement)(s.Disabled,null,(0,o.createElement)(n(),{block:"aiovg/video",attributes:t})),V&&(0,o.createElement)(s.Spinner,null)))}})})()})();